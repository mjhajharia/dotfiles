"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[4487,7218],{34187:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(49085);class i extends o.default{getInitialState(){return{open:!1}}}const s=new i},57218:(e,t,n)=>{n.r(t),n.d(t,{CollapsibleTextSliceTreeWrapper:()=>T});n(57658);var o=n(45060),i=n(92595),s=n(43993);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(e,t,{latestRandomId:0,uuidMap:t.uuidMap??{},instanceIdsShown:new Set})}function c(e,t){return t[e]??e}function a(e,t,n){const o=e.getTextSlice(),i=o.textInstanceId;t.isInstanceIdRandom&&!n.uuidMap[i]&&(n.uuidMap[i]=`[random UUID #${++n.latestRandomId}]`);const r=c(o.textInstanceId,n.uuidMap),l=n.instanceIdsShown.has(i),d=o.opClock.getValue();l||n.instanceIdsShown.add(i);const u={simplifiedId:r,clock:d,textValue:o.getTextValue(),simplifiedItems:Array.from(o.iterateItems({includeDeleted:!0,includeEndItem:!0})).map((e=>function(e,t){const n=e.toString();if(e instanceof s.Jy){const o=`${c(e.id[0],t)}@${e.id[1]}`;return n.replace(" ",` ${o} `)}if(e instanceof s.JE){const o=`${c(e.id[0],t)}@${e.id[1]}`;return n.replace("]",` ${o}]`)}return n}(e,n.uuidMap))).join(" "),hasShownInstance:l,children:[]};for(const s of e.children)u.children.push(a(s,t,n));return u}var l=n(46227),d=n(82798),u=n(27724),p=n(34187);const f=new class{constructor(e){this.nextId=0,this.uuidMap=e}pseudonymizeSessions(e){for(const t of e.getTextSlice().iterateItems({includeDeleted:!0,includeEndItem:!0}))if(t instanceof s.Jy||t instanceof s.JE){const e=t.id[0];this.uuidMap[e]||(this.uuidMap[e]=this.zeroOrPositiveIntToLetters(this.nextId++))}for(const t of e.children)this.pseudonymizeSessions(t)}zeroOrPositiveIntToLetters(e){const t="A".codePointAt(0)-"0".codePointAt(0);return e.toString().split("").map((e=>String.fromCodePoint(e.charCodeAt(0)+t))).join("")}}({});function S(e,t){f.pseudonymizeSessions(e);return h(r(e,{...t,uuidMap:{...f.uuidMap,...null==t?void 0:t.uuidMap}}))}function h(e){const{simplifiedId:t,hasShownInstance:n,clock:i,textValue:s,simplifiedItems:r,children:c}=e,{ol:a,li:l,span:u,div:p,objectSummary:f}=o.TI,S=function(e){const t="id"===e?"â€¢":" ";for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return l({},u({},`${t} `),u({style:"font-weight: bold"},`${e}: `),...o)},T=[];for(const o of c){const e=p({},(0,d.TO)(h(o)));T.push(e)}return a({style:"list-style-type: none; padding-left: 2em"},S("id",t),n?void 0:S("clock",i.toString()),S("text",f(s,{asJSON:!0})),S("items",r),T.length>0?S("children",...T):void 0)}i.exposeDebugValue("toggleCrdtDebuggingOverlay",(()=>{const e=!p.Z.state.open;p.Z.setState({open:e}),console.log(`CRDT debugging overlay is now ${e?"enabled":"disabled"}.`)})),i.exposeDebugValue("visualizeTextSliceTreesOfSelectedBlocks",(()=>{const e=u.default.state.stores,t={};e.forEach(((e,n)=>{t[e.id]=`block${n+1}`}));for(const n of e){const e=n.getTextSliceTree();if(e){const o=S(e,{uuidMap:t});console.log(`TextSliceTree for ${t[n.id]} (${n.id}):\n\n`,o)}}})),(0,o.Rw)({id:"textSliceTreeFormatter",canFormat:e=>Boolean(e&&e instanceof l.ZP),header(e){const{span:t,CONTAINER_STYLE:n,object:i}=o.TI;return t(n,t({},i(e,{useDefaultFormatter:!0}),`(${m(e)})`),(0,d.TO)(S(e)))},hasBody:()=>!1,body:()=>null});class T{constructor(e){this.textSliceTree=e}}function m(e){let t=0;for(const n of e.iterateTextSliceTrees())t++;return t}(0,o.Rw)({id:"collapsibleTextSliceTreeWrapperFormatter",canFormat:e=>Boolean(e&&e instanceof T),header(e){const{span:t}=o.TI;return t({},`TextSliceTree(${m(e.textSliceTree)})`)},hasBody:()=>!0,body:e=>S(e.textSliceTree)})},54487:(e,t,n)=>{n.r(t);var o=n(45060),i=n(57218),s=n(95802),r=n(26350);(0,o.Rw)({id:"selectableFormatter",canFormat:e=>Boolean(e&&e instanceof r.G),header(e){const{tr:t,td:n,object:c,objectSummary:a}=o.TI,l=s.C.findSelectableFromStore(e)||void 0,d=e.getTitleValue(),u=e.getType(),p=e.getTextSliceTree();return(0,r.KS)(e,d&&t({},n({},"block title:"),n({},a(d,{asJSON:!0}))),p&&t({},n({},"block title CRDT:"),n({},c(new i.CollapsibleTextSliceTreeWrapper(p)))),u&&t({},n({},"block type:"),n({},c(u))),l&&t({},n({},"<Selectable>:"),n({},c(l))))},hasBody:()=>!1,body:()=>null})}}]);