"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2867],{51774:(e,t,o)=>{o.d(t,{P:()=>s});o(67294);var r=o(77907),i=o(13005),n=o(68785),l=o(85893);function s(e){return(0,l.jsx)(r.LazyCollectionSettings,{...e,renderLoading:t=>(0,l.jsx)(i.ZP,{collectionSettingsStore:e.collectionSettingsStore,collectionContextStore:e.collectionContextStore,fullHeight:e.fullHeight,hideDesktopHeader:e.hideDesktopHeader,children:t&&(0,l.jsx)("div",{style:{display:"flex",justifyContent:"center",overflow:"hidden"},children:(0,l.jsx)(n.Z,{})})})})}},80559:(e,t,o)=>{o.d(t,{Q:()=>F,Z:()=>L});o(67294);var r=o(83355),i=o(99036),n=o(80951),l=o(72126),s=o(68939),a=o(5149),d=o(14900),p=o(24677),c=o(98104),u=o(66890),y=o(68641),h=o(43224),g=o(78316),m=o(19124),x=o(98742),P=o(39500),f=o(77907),S=o(22294),v=o(85526),b=o(86628),C=o(24405),k=o(90199),j=o(82990),w=o(31278),Z=o(76798),I=o(26388),M=o(85893);const T=function(e){let{store:t,propertyName:o,disableTooltip:r,render:i}=e;return(0,M.jsx)(I.Z,{renderTooltip:()=>(0,M.jsx)(A,{store:t,propertyName:o}),disableTooltip:Boolean(r),delayThreshold:300,render:e=>i(e),placement:I.Z.Placement.Left})};function A(e){let{store:t,propertyName:o}=e;window.__c={n:"ParentCollectionLockedTooltipComponent"};const r=(0,C.Fg)(),i=(0,b.VK)((()=>t.getIcon()),[t]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{children:o}),(0,M.jsxs)("div",{style:{display:"flex",alignItems:"start"},children:[(0,M.jsx)("div",{style:{paddingTop:4,paddingRight:6},children:(0,k.b)({width:12,fill:r.regularInvertedTextColor})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{children:(0,M.jsx)(s.FormattedMessage,{defaultMessage:"Page properties are locked",id:"database.editProperty.databaseLocked.tooltipPart1"})}),(0,M.jsx)("div",{style:{color:r.mediumInvertedTextColor},children:(0,M.jsx)(s.FormattedMessage,{defaultMessage:"Please go to {recordIconAndTitle} to unlock",id:"database.editProperty.databaseLocked.tooltipPart2",values:{recordIconAndTitle:(0,M.jsxs)("span",{style:{whiteSpace:"nowrap",fontWeight:j.Z.fontWeight.bold},children:[i&&(0,M.jsx)(w.Z,{disabled:!0,icon:i,isEmptyPage:!1,size:12,style:{marginRight:4,display:"inline-block"}}),(0,M.jsx)(Z.Z,{store:t,style:{display:"inline"}})]})}})})]})]})]})}var B=o(51774),R=o(23063),O=o(64921),H=o(50478),_=o(53437),V=o(97820);class F extends r.Z{constructor(){super(...arguments),this.popupContainer=null,this.renderOrigin=e=>{const{property:t,schema:o,disabled:r,locked:i,canConfigureCollection:n}=this.props,{collectionContextStore:s}=this.context,a=o[t];if(!a)return;const d=null==s?void 0:s.collectionStore();if(!d||!s)return;const p={onClick:s.permissionScopes.state.canConfigureBlock?this.handleClick:l.yR};return g.p1(d)?(0,M.jsx)(T,{propertyName:a.name,disableTooltip:i||!d.canEditCollection(),render:l=>(0,M.jsx)(D,{hideIcon:Boolean(this.props.hideIcon),schema:o,property:t,disabled:r,locked:i,canConfigureCollection:n,events:(0,x.Z)(e,(0,x.Z)(p,l)),propertyNameAriaId:this.props.propertyNameAriaId}),store:d}):(0,M.jsx)(D,{hideIcon:Boolean(this.props.hideIcon),schema:o,property:t,disabled:r,locked:i,canConfigureCollection:n,events:(0,x.Z)(p,e),propertyNameAriaId:this.props.propertyNameAriaId})},this.renderPopup=()=>{const{collectionContextStore:e}=this.context,t=null==e?void 0:e.settingsStore;if(e&&t)return(0,M.jsx)(M.Fragment,{children:t.state.open?(0,M.jsx)(B.P,{context:y.HV.TopbarFilterPopup,collectionContextStore:e,collectionSettingsStore:t,hideDesktopHeader:!0}):(0,M.jsx)(f.LazyPagePropertiesRowNameMenu,{...this.props,popupContainer:this.popupContainer})})},this.handleMouseMove=()=>{v.Z.setState({...v.Z.state,hoveredProperty:this.props.property})},this.handleDragHandleClick=e=>{const{property:t,isInPeekRenderer:o}=this.props;P.X9()||v.Z.setState({...v.Z.state,openProperty:{property:t,isInPeekRenderer:o}})},this.handleClick=()=>{c.ZH(this.environment),p.ZH(this.environment),d.wG();const{property:e,isInPeekRenderer:t}=this.props;v.Z.setState({...v.Z.state,openProperty:{property:e,isInPeekRenderer:t}})}}renderComponent(){const{property:e,schema:t,disabled:o,locked:r,canConfigureCollection:l,isInPeekRenderer:d,origin:p,hideDragHandle:c,blockStore:u}=this.props,y=t[e],{device:x}=this.environment;if(!y)return;const{collectionContextStore:P}=this.context,f=null==P?void 0:P.collectionStore();if(!f||!P)return;const b=v.Z.state.hoveredProperty===e&&!S.Z.state.isKeyboardMode&&!c,{openProperty:C}=v.Z.state;return(0,M.jsx)(I.Z,{renderTooltip:t=>{const o=(0,i.qQ)(y)&&("text"===y.type||(0,m.KZ)())&&(0,i.q3)(y),r=(0,n.KK)(u.getModel(),f.getModel(),e);return(0,M.jsxs)("div",{...t,style:h.F6,children:[(0,M.jsx)("div",{children:y.name}),void 0!==(null==y?void 0:y.description)&&y.description.length>0?(0,M.jsx)("div",{style:{color:this.theme.mediumInvertedTextColor},children:y.description}):null,o&&o.auto_update_on_edit&&(0,M.jsx)("div",{style:{color:this.theme.mediumInvertedTextColor},children:(0,M.jsx)(s.FormattedMessage,{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"})}),r&&(0,M.jsx)("div",{style:{color:this.theme.mediumInvertedTextColor},children:(0,M.jsx)(s.FormattedMessage,{defaultMessage:"Auto-updated by Notion Calendar",id:"database.tableHeaderCell.tooltipNotionCalendarDescription"})})]})},delayThreshold:500,placement:I.Z.Placement.Left,disableTooltip:g.p1(f),render:t=>(0,M.jsxs)("div",{style:N(this.environment,this.theme,this.props.style),onMouseMove:this.handleMouseMove,onMouseLeave:K,children:[!x.isMobile&&!o&&!(r||!l)&&!c&&(0,M.jsx)(R.Z,{isVisible:!0,animationStyle:{opacity:b?1:0},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>(0,M.jsx)("div",{style:{width:H.C$+4,marginLeft:-(H.C$+4),...this.props.dragHandleStyle},onMouseMove:this.handleMouseMove,onMouseLeave:K,children:(0,M.jsx)(H.ZP,{role:"cell",disallowTabbing:!0,onClick:this.handleDragHandleClick})})}),(0,M.jsx)(_.ZP,{style:this.props.popupStyle,popupType:x.isMobile?_.kQ.SlideUp:_.kQ.Popup,originGap:1,alignmentToOrigin:_.ZP.Alignment.Start,render:this.renderPopup,open:Boolean(C&&C.property===e&&C.isInPeekRenderer===d),onDismiss:()=>{v.Z.setState({...v.Z.state,openProperty:void 0});const e=P.settingsStore;a.E3({collectionSettingsStore:e})},origin:p??this.renderOrigin(t),ref:e=>{this.popupContainer=e}})]},e)})}}function D(e){const{schema:t,property:o,disabled:r,locked:i,canConfigureCollection:n,events:l}=e,s=t[o];return s?(0,M.jsx)(O.Z,{role:"cell",id:e.propertyNameAriaId,style:{display:"flex",alignItems:"center",height:"100%",width:"100%",borderRadius:4,padding:"0 6px"},disabled:r||i||!n,...l,children:(0,M.jsx)(V.Z,{propertySchema:s,showIcon:!e.hideIcon,showBadge:!0,style:{fontSize:14},property:o})}):null}F.displayName="PagePropertiesRowName",F.contextTypes={...r.w,...u.xm};const L=(0,s.injectIntl)(F);function N(e,t,o){const{device:r}=e;return{display:"flex",alignItems:"center",height:34,width:r.isMobile?120:160,flex:"none",color:t.mediumTextColor,...o}}function K(){v.Z.setState({...v.Z.state,hoveredProperty:void 0})}},41883:(e,t,o)=>{o.d(t,{Z:()=>B});var r=o(67294),i=o(480),n=o(72126),l=o(68939),s=o(96802),a=o(39699),d=o(79131),p=o(87167),c=o(1302),u=o(99036),y=o(51365),h=o(66890),g=o(78030),m=o(80559),x=o(86628),P=o(24405),f=o(80951),S=o(42875),v=o(47453),b=o(33929),C=o(1018),k=o(85526),j=o(97039),w=o(52275),Z=o(85893);function I(e){window.__c={n:"PagePropertiesRowValue"};const{property:t,store:o,disabled:n,canConfigureCollection:s,onTab:a,onUntab:d,schema:p,blockPropertyValueOverlayStore:c,collectionStore:u}=e,m=(0,i.O7)(),{device:I,currentUser:M}=m,T=(0,P.Fg)(),A=(0,h.Y$)(),B=p[t],R=(0,P.yK)((()=>({propertyOuter:{display:"flex",alignItems:"left",marginLeft:4,height:"100%",flex:"auto",flexDirection:"column",minWidth:0},property:{display:"flex",alignItems:"center",marginLeft:4,height:"100%",flex:"auto",minWidth:0},addPageButton:{fontSize:14,minHeight:C.wI,color:T.lightTextColor,background:void 0,boxShadow:void 0}})),[T.lightTextColor]),O=(0,r.useCallback)((()=>{k.Z.setState({...k.Z.state,hoveredProperty:e.property})}),[e.property]),H=(0,r.useCallback)((()=>{k.Z.setState({...k.Z.state,hoveredProperty:void 0})}),[]),_=(0,r.useCallback)((()=>{y.bA({environment:m,blockPropertyValueOverlayStore:c,store:o,property:t,format:g.C.Page,collectionContextStore:A})}),[m,c,o,t,A]),V=(0,x.VK)((()=>I.isMobile&&!n&&"relation"===(null==B?void 0:B.type)&&o.isDefined()&&!f.wV({block:o.getModel(),property:t,schema:p,getRecordModel:o.getRecordModel,userId:M.id,userTimeZone:(0,S.r)(),intl:b.default.getIntl()})),[M.id,I.isMobile,n,t,B,p,o]);return(0,Z.jsxs)("div",{role:"cell",style:R.propertyOuter,children:[(0,Z.jsx)("div",{style:R.property,onMouseMove:O,onMouseLeave:H,children:(0,Z.jsx)(j.Z,{store:o,property:t,locked:!s,disabled:n,format:g.C.Page,onTab:a,onUntab:d,tableWrap:!1,blockPropertyValueOverlayStore:c,onOpenProperty:_,showRelationTooltip:!0,collectionStore:u})},t),V&&(0,Z.jsx)(w.Z,{focused:!1,icon:(0,v.R)({width:14,fill:T.lightIconColor}),buttonStyle:{marginRight:0,width:"calc(100% - 4px)"},style:R.addPageButton,title:(0,Z.jsx)(l.FormattedMessage,{id:"pagePropertyRowValue.addRelationButtonMessage",defaultMessage:"Add page"}),onClick:_})]})}const M=r.memo(I);function T(e){window.__c={n:"PagePropertyRow"};const{schema:t,format:o,store:l,collectionStore:s,disabled:a,locked:d,blockPropertyValueOverlayStore:u,isInPeekRenderer:x,property:P,mergedProperties:f,dragHandleStyle:S,hideDragHandle:v,disablePropertyName:b}=e,C=(0,r.useId)(),k=(0,i.O7)(),j=(0,h.Y$)(),w=(0,p.v)(s),I=(0,r.useCallback)((()=>{const e=u.state;if(!e.isOpen)return;const o=f,r=o.findIndex((t=>t.property===e.property)),i=o.find(((e,o)=>o>r&&A(t,e.property)))||o.find(((e,o)=>A(t,e.property)));i&&c.default.afterNextFlush((()=>{y.bA({environment:k,blockPropertyValueOverlayStore:u,store:l,property:i.property,format:g.C.Page,collectionContextStore:j})})),y.xv({environment:k,blockPropertyValueOverlayStore:u})}),[u,j,k,f,t,l]),T=(0,r.useCallback)((()=>{const e=u.state;if(!e.isOpen)return;const o=f,r=o.findIndex((t=>t.property===e.property)),i=n.dF(o,((e,o)=>o<r&&A(t,e.property)))||n.dF(o,((e,o)=>A(t,e.property)));i&&c.default.afterNextFlush((()=>{y.bA({environment:k,blockPropertyValueOverlayStore:u,store:l,property:i.property,format:g.C.Page,collectionContextStore:j})})),y.xv({environment:k,blockPropertyValueOverlayStore:u})}),[u,j,k,f,t,l]);return(0,Z.jsxs)("div",{role:"row","aria-labelledby":C,style:{display:"flex",paddingBottom:4,width:"100%"},children:[(0,Z.jsx)(m.Z,{schema:t,format:o,property:P,collectionStore:s,disabled:Boolean(a||b),locked:d,canConfigureCollection:w,isInPeekRenderer:x,dragHandleStyle:S,hideDragHandle:v,propertyNameAriaId:C,blockStore:l}),(0,Z.jsx)(M,{schema:t,property:P,store:l,collectionStore:s,disabled:a||d,canConfigureCollection:w,onTab:I,onUntab:T,blockPropertyValueOverlayStore:u})]},P)}function A(e,t){const o=e[t];return Boolean(o&&!u.uk.includes(o.type))}function B(e){window.__c={n:"PageProperties"};const{disabled:t,locked:o,collectionStore:c,format:u,mergedProperties:y,showHiddenProperties:h,hideDragHandle:g}=e,m=(0,i.O7)(),x=(0,l.useIntl)(),P=y,f=(0,p.v)(c),S=(0,r.useMemo)((()=>P.filter((e=>"section"!==e.visibility&&(!!h||"hide"!==e.visibility&&!("hide_if_empty"===e.visibility&&!e.hasValue)))).map((e=>e.property))),[P,h]),v=(0,r.useCallback)((e=>{const t=u.collection_page_properties||[],o=[...n.oA(e.map((e=>t.find((t=>t.property===e))))),...t.filter((t=>!e.includes(t.property)))];a.createAndCommit({userAction:"PageProperties.handleReorder",environment:m,perform:e=>{s.FH({stores:[c],update:{collection_page_properties:o},transaction:e})}})}),[c,m,u.collection_page_properties]),b=x.formatMessage({id:"pageProperties.tableLabel",defaultMessage:"Page properties"});return t||o||!f||g?(0,Z.jsx)("div",{role:"table","aria-label":b,style:d.yA,children:S.map(((t,o)=>(0,Z.jsx)("div",{children:(0,Z.jsx)(T,{...e,property:t})},o)))}):(0,Z.jsx)(d.ZP,{role:"table","aria-label":b,direction:"vertical",keys:S,renderKey:t=>(0,Z.jsx)(T,{...e,property:t}),onDrop:v})}},12867:(e,t,o)=>{o.d(t,{Uv:()=>T,ZP:()=>A});var r=o(67294),i=o(480),n=o(86628),l=o(24405),s=o(56666),a=o(47453),d=o(68939),p=o(16956),c=o(5149),u=o(66890),y=o(68641),h=o(98742),g=o(61766),m=o(97039),x=o(78030),P=o(51774),f=o(23063),S=o(64921),v=o(31945),b=o(1743),C=o(53437),k=o(26388),j=o(80559),w=o(87167),Z=o(41883),I=o(65091),M=o(85893);const T=130;function A(e){window.__c={n:"PagePropertiesCompact"};const{store:t,collectionStore:o,blockPropertyValueOverlayStore:s,compactProperties:a,disabled:d,locked:p,format:c,isInPeekRenderer:y,hiddenProperties:h,rowLength:P}=e,S=(0,n.VK)((()=>o.getSchema()),[o]),[v,b]=(0,r.useState)(!1),C=(0,w.v)(o),k=(0,i.Fy)(),Z=(0,n.qz)(void 0,g.Z),I=(0,u.Y$)(),T=(0,l.yK)((()=>({PagePropertiesCompactRow:{display:a.length>P?"grid":"flex",justifyContent:"flex-start",gridTemplateColumns:`repeat(${P}, 1fr)`,columnGap:10,rowGap:4,marginTop:2,marginBottom:6}})),[a.length,P]),A=(0,r.useCallback)((()=>{b(!0)}),[]),R=(0,r.useCallback)((()=>{b(!1)}),[]);return(0,M.jsx)("div",{style:T.PagePropertiesCompactRow,onMouseEnter:A,onMouseLeave:R,children:a.map(((e,r)=>{const i=r===a.length-1;return(0,M.jsxs)("span",{style:{flexShrink:1,display:i?"flex":void 0},children:[(0,M.jsxs)("span",{style:{flex:1,overflow:"hidden"},children:[(0,M.jsx)(j.Z,{schema:S,format:c,hideIcon:!0,hideDragHandle:!0,property:e.property,blockStore:t,collectionStore:o,disabled:d,locked:p,canConfigureCollection:C,isInPeekRenderer:y,style:{height:24,width:"100%"}}),(0,M.jsx)(m.Z,{store:t,collectionStore:o,blockPropertyValueOverlayStore:s,property:e.property,format:x.C.CompactPage,disabled:d,locked:p,tableWrap:!1})]}),i&&(0,M.jsx)(f.Z,{isVisible:v||k.isMobile,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1,marginLeft:"auto"},exitAnimationStyle:{opacity:0},render:()=>(0,M.jsx)(B,{onClose:R,hiddenProperties:h,canConfigureCollection:C,store:t,collectionStore:o,collectionContextStore:I,blockPropertyValueOverlayStore:s,disabled:d,locked:p,isInPeekRenderer:y,format:c,buttonPopupStore:Z})})]},e.property)}))})}const B=r.memo((e=>{window.__c={n:"CompactPropertyActionButton"};const{hiddenProperties:t,canConfigureCollection:o,collectionStore:u,isInPeekRenderer:g,buttonPopupStore:m,collectionContextStore:x,hideDragHandle:f,overflowButtonWrapperStyle:j,overflowButtonStyle:w}=e,T=(0,i.Fy)(),A=(0,i.O7)(),B=(0,n.VK)((()=>u.getSchema()),[u]),R=(0,l.yK)((e=>({overflowIcon:{width:16,height:16,fill:e.mediumIconColor},pagePropertiesOverflow:{width:"100%",fontSize:14,padding:f?"10px":"10px 10px 10px 28px",maxHeight:500,overflowY:"scroll"},overflowButtonWrapper:{display:"flex",alignItems:"center",paddingBottom:8,...j},overflowButton:{display:"flex",width:32,height:32,borderRadius:4,justifyContent:"center",alignItems:"center",...w}})),[f,j,w]),O=(0,r.useCallback)((()=>{p.fH({environment:A,collectionContextStore:x,collectionStore:u,isInPeekRenderer:g,onCloseMenu:()=>{m.setState({open:!1})}})}),[A,x,u,g,m]);return t.length?(0,M.jsx)(v.ZP,{onClose:e.onClose,popupWrapStyle:{width:500},buttonPopupStore:m,popupType:T.isMobile?C.kQ.SlideUp:C.kQ.Popup,render:()=>(0,M.jsx)(b.Z,{capture:!0,children:(0,M.jsxs)("div",{style:R.pagePropertiesOverflow,children:[(0,M.jsx)(Z.Z,{showHiddenProperties:!0,schema:B,mergedProperties:t,format:e.format,store:e.store,collectionStore:e.collectionStore,disabled:e.disabled,locked:e.locked,blockPropertyValueOverlayStore:e.blockPropertyValueOverlayStore,isInPeekRenderer:e.isInPeekRenderer,hideDragHandle:f}),o&&(0,M.jsx)(I.le,{collectionStore:u,isInPeekRenderer:g})]})}),renderOrigin:e=>(0,M.jsx)("div",{style:R.overflowButtonWrapper,children:(0,M.jsx)(k.Z,{renderTooltip:()=>(0,M.jsx)(d.FormattedMessage,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.compact.showMoreTooltip",values:{num:t.length}}),placement:k.Z.Placement.Bottom,render:t=>(0,M.jsx)(S.Z,{style:R.overflowButton,mobileFeedback:T.isMobile,...(0,h.Z)(e,t),children:(0,s.o)(R.overflowIcon)})})})}):o?(0,M.jsx)("div",{style:R.overflowButtonWrapper,children:(0,M.jsx)(k.Z,{renderTooltip:()=>(0,M.jsx)(d.FormattedMessage,{defaultMessage:"Add a property",id:"database.pageProperties.compact.addPropertyButtonTitle"}),placement:k.Z.Placement.Bottom,render:t=>(0,M.jsx)(v.ZP,{popupType:A.device.isMobile?C.kQ.SlideUp:C.kQ.Popup,onClose:e.onClose,buttonPopupStore:m,originGap:1,alignmentToOrigin:v.vR.Start,render:()=>(0,M.jsx)(P.P,{context:y.HV.TopbarFilterPopup,collectionContextStore:x,collectionSettingsStore:x.settingsStore,hideDesktopHeader:!0}),onClick:O,onDismiss:()=>{const e=x.settingsStore;c.E3({collectionSettingsStore:e})},renderOrigin:e=>(0,M.jsx)(S.Z,{style:R.overflowButton,mobileFeedback:T.isMobile,...(0,h.Z)(e,t),children:(0,a.R)(R.overflowIcon)})})})}):null}))},65091:(e,t,o)=>{o.d(t,{ZP:()=>b,le:()=>C});o(57658);var r=o(67294),i=o(480),n=o(86628),l=o(24405),s=o(72787),a=o(47453),d=o(68939),p=o(16956),c=o(5149),u=o(66890),y=o(68641),h=o(61766),g=o(85526),m=o(51774),x=o(64921),P=o(31945),f=o(53437),S=o(87167),v=o(85893);function b(e){window.__c={n:"PagePropertyActions"};const{locked:t,disabled:o,collectionStore:r,mergedProperties:i,schema:l,isCompact:s}=e,a=(0,n.VK)((()=>g.Z.state.forceShowProperties),[]),d=Z(i,l,s),p=(0,S.v)(r),c=[];return(a||0===d)&&(!t&&!o&&p)&&c.push((0,v.jsx)(C,{...e},"add-property")),d>0&&(a?c.push((0,v.jsx)(j,{mergedProperties:i,schema:l,isCompact:s},"hide-properties")):c.push((0,v.jsx)(k,{mergedProperties:i,schema:l,isCompact:s},"show-more"))),(0,v.jsx)(v.Fragment,{children:c})}function C(e){window.__c={n:"AddPropertyButton"};const{collectionStore:t,isInPeekRenderer:o}=e,l=(0,u.Y$)(),s=(0,i.O7)(),g=(0,n.qz)(void 0,h.Z),S=w(),b=(0,n.VK)((()=>l.settingsStore.state.open),[l.settingsStore]);(0,r.useEffect)((()=>{b||g.setState({...g.state,open:!1})}),[g,b]);const C=(0,r.useCallback)((()=>{p.fH({environment:s,collectionContextStore:l,collectionStore:t,isInPeekRenderer:o,onCloseMenu:()=>{g.setState({open:!1})}})}),[g,l,t,s,o]);return(0,v.jsx)("div",{style:{display:"flex"},children:(0,v.jsx)(P.ZP,{popupType:s.device.isMobile?f.kQ.SlideUp:f.kQ.Popup,buttonPopupStore:g,originGap:1,alignmentToOrigin:P.vR.Start,render:()=>(0,v.jsx)(m.P,{context:y.HV.TopbarFilterPopup,collectionContextStore:l,collectionSettingsStore:l.settingsStore,hideDesktopHeader:!0}),onClick:C,onClose:()=>{const e=l.settingsStore;c.E3({collectionSettingsStore:e})},renderOrigin:t=>(0,v.jsxs)(x.Z,{style:{...S.AddOrTogglePropertyButtonStyle,...e.style},...t,children:[(0,a.R)(S.ActionPropertyButtonIconStyle),(0,v.jsx)("div",{style:S.AddPropertyButtonTitleStyle,children:(0,v.jsx)(d.FormattedMessage,{defaultMessage:"Add a property",id:"database.pageProperties.addPropertyButtonTitle"})})]})})})}function k(e){window.__c={n:"ShowMoreButton"};const{mergedProperties:t,schema:o,isCompact:i}=e,n=w(),l=Z(t,o,i),a=(0,r.useCallback)((()=>{g.Z.setState({...g.Z.state,forceShowProperties:!0})}),[]);return(0,v.jsx)("div",{style:{display:"flex"},children:(0,v.jsxs)(x.Z,{style:{...n.AddOrTogglePropertyButtonStyle,...e.style},onClick:a,children:[(0,s.Y)(n.ActionPropertyButtonIconStyle),(0,v.jsx)("div",{style:n.AddPropertyButtonTitleStyle,children:(0,v.jsx)(d.FormattedMessage,{defaultMessage:"{num, plural, one {1 more property} other {{num} more properties}}",id:"database.pageProperties.showMorePropertyTitle",values:{num:l}})})]},"show-more")})}function j(e){window.__c={n:"HidePropertiesButton"};const{mergedProperties:t,schema:o,isCompact:i}=e,n=Z(t,o,i),l=w(e.style),a=(0,r.useCallback)((()=>{g.Z.setState({...g.Z.state,forceShowProperties:!1})}),[]);return(0,v.jsx)("div",{style:{display:"flex"},children:(0,v.jsxs)(x.Z,{style:{...l.AddOrTogglePropertyButtonStyle,...e.style},onClick:a,children:[(0,s.Y)({...l.ActionPropertyButtonIconStyle,transform:"rotate(180deg)"}),(0,v.jsx)("div",{style:l.AddPropertyButtonTitleStyle,children:(0,v.jsx)(d.FormattedMessage,{defaultMessage:"{num, plural, one {Hide 1 property} other {Hide {num} properties}}",id:"database.pageProperties.hidePropertyTitle",values:{num:n}})})]},"hide-properties")})}function w(e){const t=(0,i.O7)();return(0,l.yK)((o=>{const{device:r}=t;return{AddOrTogglePropertyButtonStyle:{display:"flex",alignItems:"center",color:o.lightTextColor,borderRadius:4,paddingLeft:6,paddingRight:6,height:34,width:r.isMobile?"100%":"auto",...e},ActionPropertyButtonIconStyle:{width:16,height:16,marginRight:9,marginTop:1,fill:o.lightIconColor},AddPropertyButtonTitleStyle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,lineHeight:"16px"}}}),[t,e])}function Z(e,t,o){return(0,r.useMemo)((()=>e.filter((e=>"hide"===e.visibility||"hide_if_empty"===e.visibility&&!e.hasValue)).length),[e])}},87167:(e,t,o)=>{o.d(t,{v:()=>n});var r=o(86628),i=o(78316);function n(e){return(0,r.VK)((()=>i.eD({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1})),[e])}}}]);