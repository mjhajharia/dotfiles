"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5008],{59389:(e,t,i)=>{i.d(t,{T_:()=>b,Ud:()=>v,eV:()=>g});var o=i(1302),n=i(45953),s=i(42),r=i(58202),a=i(50906),l=i(41433),c=i(96802),d=i(94419),u=i(9953),h=i(24677),p=i(98104),m=i(68422);function g(e){const{environment:t,store:i,transaction:n,preventTextSelection:s,onTextSelection:r}=e,l=i.useCrdt(),c=u.j4({environment:t,type:"text",inMemoryRecordCache:i.inMemoryRecordCache,transaction:n,spaceId:i.pointer.spaceId,useCrdt:l}),m=d.R3({parent:i.getContentStore(),append:c,transaction:n}).child;return s||o.default.afterNextFlush((()=>{h.eP({environment:t,store:m}),p.N_({store:m.getBlockTitleStore()}),null==r||r()})),a.W2j(t,{from:"template_picker",type:"text"}),m}function b(e){const{environment:t,store:i,transaction:o}=e;c.is({store:i,transaction:o}),g({environment:t,store:i,transaction:o})}function v(e){var t;const{environment:i,store:c,viewType:d,transaction:h}=e,p=null===(t=c.getBlockTitleStore())||void 0===t?void 0:t.getValue();l.ZI({environment:i,sourceBlockId:"root",targetBlockPointer:c.pointer,sourceBlockSubtree:(0,n.R3)((0,s.iC)({isInline:!1,viewType:d})),targetRecordCache:c.inMemoryRecordCache,transaction:h,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,useCrdt:c.useCrdt()}),m.vs({environment:i,block:c,blockType:"collection_view_page",transaction:h}),p&&u.sO({store:c.getBlockTitleStore(),value:p,transaction:h}),o.default.afterNextFlush((()=>{const e=r.R.findCollectionViewBlockFromStore(c);null==e||e.handleCreated()})),a.W2j(i,{from:"template_picker",type:"collection_view_page"})}},13401:(e,t,i)=>{i.d(t,{Z:()=>d});var o=i(67294),n=i(24405),s=i(8848),r=i(47453),a=i(31339),l=i(52275),c=i(85893);const d=o.forwardRef(((e,t)=>{window.__c={n:"AddMenuItem"};const i=(0,n.yK)((t=>({base:{color:e.isBlue?s.ZP.blue:t.mediumTextColor}})),[e.isBlue]),{color:o}=i.base;return(0,c.jsx)(l.Z,{ref:t,...e,title:(0,c.jsx)("div",{style:{color:o,fill:o},children:e.title}),icon:(0,c.jsx)(a.Z,{icon:r.R,styles:{fill:o}})})}))},31339:(e,t,i)=>{i.d(t,{Z:()=>s});i(67294);var o=i(480),n=i(85893);const s=function(e){window.__c={n:"CollectionMenuIcon"};const t=((0,o.O7)().device.isMobile,{width:16});return(0,n.jsx)("div",{style:t,children:e.icon(e.styles)})}},54428:(e,t,i)=>{i.r(t),i.d(t,{default:()=>g});i(67294);var o=i(83355),n=i(35840),s=i(68939),r=i(24677),a=i(98104),l=i(53971),c=i(92658),d=i(37601),u=i(1743),h=i(74194),p=i(85893);class m extends o.Z{constructor(){super(...arguments),this.storeTypes={store:c.Z},this.handleFocused=()=>{r.ZH(this.environment),a.ZH(this.environment),this.stores.store.setState({...this.stores.store.state,focus:!0})},this.handleBlurred=()=>{this.stores.store.setState({...this.stores.store.state,focus:!1})},this.handleSearchQueryChange=e=>{this.props.onChange({searchQuery:e.target.value})}}renderComponent(){const{searchQuery:e,intl:t}=this.props,{focus:i}=this.stores.store.state;return(0,p.jsx)(u.Z,{capture:i,children:(0,p.jsx)(l.Z,{capture:!0,render:o=>{return(0,p.jsxs)("div",{...o,children:[(0,p.jsx)(h.Z,{style:(s=this.theme,{boxShadow:s.inputBoxShadow,background:s.inputBackground,flexGrow:0,flexShrink:0,height:32,paddingLeft:8,paddingRight:12,borderRadius:4,fontSize:14,marginBottom:4}),format:h.B.Transparent,value:e,placeholder:t.formatMessage({defaultMessage:"Type to searchâ€¦",id:"database.mobileSearch.placeholder"}),onChange:this.handleSearchQueryChange,autoComplete:"on",autoCorrect:"on",onFocus:this.handleFocused,onBlur:this.handleBlurred,showClearButton:!0,left:(0,n.R)(b(this.theme))}),(0,p.jsx)(d.Z,{show:i})]});var s}})})}}m.displayName="CollectionMobileSearch";const g=(0,s.injectIntl)(m);function b(e){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}}},75498:(e,t,i)=>{i.d(t,{Z:()=>h});var o=i(83355),n=i(1302),s=i(49085),r=i(28155),a=i(72126),l=i(71644),c=i(97880),d=i(14900);class u extends o.Z{constructor(){super(...arguments),this.reducerId=this.props.id,this.instanceId=(0,l.ZP)(),this.localResultStoreChangeIsQueued=!1,this.storeTypes={resultStore:s.default.createClass(void 0)},this.handleLocalResultStoreChange=()=>{this.localResultStoreChangeIsQueued||(this.localResultStoreChangeIsQueued=!0,n.default.afterNextFlush(this.dequeueLocalResultStoreChange))},this.dequeueLocalResultStoreChange=()=>{const{resultStore:e}=this.stores;if(this.localResultStoreChangeIsQueued=!1,!this.componentIsMounted)return;const t=this.getCurrentResult();a.Xy(t,e.state)||e.setState(t)}}UNSAFE_willMount(e){const{collectionContextStore:t}=e;t.remoteResult.addListener(this.handleLocalResultStoreChange),t.localResultStore.addListener(this.handleLocalResultStoreChange),this.updateReducer(e),this.handleLocalResultStoreChange()}UNSAFE_willUpdate(e){this.updateReducer(e)}willUnmount(){super.willUnmount();const{collectionContextStore:e,groupsPointer:t}=this.props;d.$D({reducerId:this.reducerId,instanceId:this.instanceId,reducer:void 0,collectionContextStore:e,groupsPointer:t}),e.remoteResult.removeListener(this.handleLocalResultStoreChange),e.localResultStore.removeListener(this.handleLocalResultStoreChange)}renderComponent(){const{render:e}=this.props;if(e)return e(this.stores.resultStore)}updateReducer(e){const{reducer:t,collectionContextStore:i,groupsPointer:o}=e;d.$D({reducerId:this.reducerId,instanceId:this.instanceId,reducer:t,collectionContextStore:i,groupsPointer:o})}getCurrentResult(){const{collectionContextStore:e}=this.props,t=e.localResultStore.state,i=e.remoteResult.state,o=t&&"reducer"===t.type?t.reducerResults[this.reducerId]:void 0,n=i&&"reducer"===i.type?i.reducerResults[this.reducerId]:void 0;return this.getResultFromLocalAndRemote(o,n)}getResultFromLocalAndRemote(e,t){const{collectionContextStore:i,reducer:o}=this.props,n=i.reducers.state,s=i.remoteResult.state;if(i.isClientModeEnabled.state)return e;if("aggregation"===o.type||"groups"===o.type){if(null!=s&&s.reducerResults[this.reducerId])return s.reducerResults[this.reducerId];return Boolean(s&&"reducer"===s.type&&a.sE(s.reducerResults,((e,t)=>{const i=n[t];return Boolean(i&&"results"===i.reducer.type&&!i.reducer.searchQuery&&"results"===e.type&&e.hasMore&&a.Xy(o.filter,i.reducer.filter))})))?e:t}if("results"===o.type){var l;const o=i.wasCreatedThisSession.state,n=Boolean(s&&"reducer"===s.type&&s.reducerResults[this.reducerId]),a=(0,r.nx)(null===(l=i.collectionViewStore())||void 0===l?void 0:l.getCollectionSource());if((n||o)&&!a&&e&&"results"===e.type){return{...e,hasMore:t&&"results"===t.type?t.hasMore:e.hasMore}}return t}throw(0,c.t1)(o)}}u.displayName="CollectionReducerRequest";const h=u},11335:(e,t,i)=>{i.d(t,{Z:()=>p});i(67294);var o=i(86628),n=i(24405),s=i(80951),r=i(19255),a=i(32566),l=i(21202),c=i(97880),d=i(26136),u=i(14200),h=i(85893);function p(e){const t=e.propertySchema.type;switch(t){case"title":case"text":return(0,h.jsx)(m,{...e});case"relation":return(0,h.jsx)(g,{propertySchema:e.propertySchema,beforeValue:e.beforeValue,afterValue:e.afterValue,rootStore:e.rootStore});case"checkbox":case"number":case"person":case"file":case"url":case"email":case"phone_number":case"created_time":case"created_by":case"last_edited_time":case"last_edited_by":case"last_visited_time":case"formula":case"rollup":case"select":case"multi_select":case"date":case"button":case"status":case"auto_increment_id":case"location":case"verification":return(0,h.jsx)(b,{...e});default:(0,c.t1)(t)}}function m(e){const t={value:r.Mg({before:e.beforeValue.value,after:e.afterValue.value}),spaceId:e.beforeValue.spaceId};return(0,h.jsx)(u.Z,{value:t,propertySchema:e.propertySchema,rootStore:e.rootStore})}function g(e){window.__c={n:"RelationPropertyDiff"};const{beforeValue:t,afterValue:i,propertySchema:n,rootStore:r}=e,a=(0,o.VK)((()=>s.NT({beforeValue:t.value,afterValue:i.value,propertySchema:n,getRecordModel:r.getRecordModel,getBlockTitle:e=>d.G.createChildStore(r,{table:l.iU,id:e.id}).getPropertyValue("title")})),[t,i,n,r]);return(0,h.jsx)(u.Z,{value:{value:a,spaceId:t.spaceId},propertySchema:{type:"title",name:"Title"},rootStore:r})}function b(e){window.__c={n:"ArrowPropertyDiff"};const t=(0,n.yK)((()=>({arrowDiffWrap:{display:"inline-flex",alignItems:"center"}})),[]);return(0,h.jsxs)("div",{style:t.arrowDiffWrap,children:[(0,h.jsx)(u.Z,{value:e.beforeValue,propertySchema:e.propertySchema,rootStore:e.rootStore}),(0,h.jsx)(v,{}),(0,h.jsx)(u.Z,{value:e.afterValue,propertySchema:e.propertySchema,rootStore:e.rootStore})]})}function v(){window.__c={n:"Arrow"};const e=(0,n.yK)((e=>({container:{padding:"0px 8px"},icon:{width:15,height:15,fill:e.mediumIconColor}})),[]);return(0,h.jsx)("div",{style:e.container,children:(0,a.k)(e.icon)})}},78948:(e,t,i)=>{i.d(t,{Z:()=>r});i(67294);var o=i(68785),n=i(28992),s=i(85893);const r=function(){return(0,s.jsx)(n.Z,{title:(0,s.jsx)(o.Z,{})})}},52187:(e,t,i)=>{i.d(t,{Z:()=>y});i(67294);var o=i(83355),n=i(24405),s=i(78197),r=i(68939),a=i(75018),l=i(87279),c=i(88632),d=i(53610),u=i(35057),h=i(64921),p=i(31945),m=i(78140),g=(i(64369),i(27386),i(14694)),b=i(44625),v=i(85893);class f extends o.Z{constructor(){super(...arguments),this.handleClose=()=>{const{mobileNative:e}=this.environment,t=()=>{d.Z.setState({open:!1})};null!=e&&e.supportsNativeHomeOnPhone()?a.navigateToHomeTab(this.environment,t):t()}}renderComponent(){const{store:e}=this.props;if(!(0,u.Mk)()||!e.isDefined())return;const{mobileNative:t}=this.environment,i=(null==t?void 0:t.supportsNativeHomeOnPhone())||!1;return(0,v.jsx)(p.ZP,{buttonPopupStore:d.Z,popupType:p.Z4.SlideUp,hidesMobileNativeBottomBar:i,preventSlideUpTransition:i,renderOrigin:e=>(0,v.jsx)(h.Z,{mobileFeedback:!0,...e,children:(0,v.jsx)(g.Z,{left:(0,v.jsx)(S,{}),disableMobileBorder:!0,children:(0,v.jsx)(r.FormattedMessage,{defaultMessage:"Members",id:"memberSettingsButton.mobileSidebar.label"})})}),render:()=>{if(c.Z.state.online){const t={menuType:l.og.Modal,title:(0,v.jsx)(r.FormattedMessage,{defaultMessage:"Members",id:"memberSettingsButton.mobileMemberSettings.title"}),right:(0,v.jsx)(r.FormattedMessage,{defaultMessage:"Done",id:"memberSettingsButton.rightActionButton.done"}),onClickRight:this.handleClose,onCancel:this.handleClose};return(0,v.jsx)(m.Z,{...t,children:(0,v.jsx)(b.Z,{store:e,isMobile:!0})})}}})}}f.displayName="MemberSettingsButton";const y=f;function S(){window.__c={n:"IconComponent"};const e=(0,n.Fg)();return(0,s.S)({fill:e.mediumIconColor,width:16})}},44299:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Q});i(67294);var o=i(83355),n=i(13991),s=i(24405),r=i(41432),a=i(42853),l=i(69634),c=i(5377),d=i(55617),u=i(43410),h=i(1413),p=i(38491),m=i(45137),g=i(73426),b=i(63048),v=i(37612),f=i(55863),y=i(72126),S=i(82990),C=i(68939),x=i(50906),M=i(44886),k=i(1892),T=i(24677),w=i(98104),I=i(75179),A=i(51783),j=i(52533),B=i(68056),Z=i(89224),P=i(5162),R=i(17903),_=i(72653),L=i(69454),F=i(27724),V=i(24666),N=i(64921),O=i(53437),D=i(64131),H=i(82945),E=i(85394),U=i(40464),q=i(32404),W=i(73383),z=i(85893);const G={width:34,justifyContent:"center"};class K extends o.Z{constructor(){super(...arguments),this.scrollerDiv=void 0,this.currentlyShownTimer=void 0,this.previouslyShownOnNative=!1,this.handleScrollerRef=e=>{e&&(this.scrollerDiv=e)},this.handleUnindent=e=>{A.$$(this.environment)},this.handleIndent=e=>{A.O2(this.environment)},this.handleMoveUp=e=>{A.s0(this.environment)},this.handleMoveDown=e=>{A.rZ(this.environment)},this.handleUndo=()=>{A.i2(this.environment)},this.handleRedo=()=>{A.GH(this.environment)},this.handleDismissKeyboard=e=>{T.ZH(this.environment),this.props.stores.store.setState({...this.props.stores.store.state,isInsertOpen:!1}),Y("hide_keyboard",this.environment),w.sD()},this.handleInsert=e=>{this.props.stores.store.setState({...this.props.stores.store.state,isInsertOpen:!0}),Y("insert",this.environment)},this.handleTakePicture=e=>{A.vs(this.environment)},this.handleMention=e=>{A.Z3(this.environment)},this.handleComment=e=>{A.ol(this.environment,!1,"mobile_action_bar")},this.handleDelete=e=>{A.fn(this.environment)},this.handleActionsScroll=()=>{x.FGU(this.environment)},this.handleActionsScrollDebounced=y.Ds(this.handleActionsScroll,500),this.handleMoreClick=e=>{A.w1(this.environment,e.clientX,e.clientY)},this.listenForPositionChanges=this.createComputedStore((()=>{const e=V.default.state;if("editing"===e.mode){const t=e.multiSelection.end;return{scrollTop:R.Z.state.scrollTop,editing:!0,store:t.store.id,selection:t}}return{scrollTop:R.Z.state.scrollTop,editing:!1}})),this.renderStore=this.createComputedStore((()=>{var e;return A.$3(this.environment,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state)})),this.shouldShowTextActions=this.createComputedStore((()=>A.oQ(this.props.stores.ignoreSelectionAreaStore,this.environment.TextSelectionCompositionStore))),this.canTriggerBlockActions=this.createComputedStore((()=>!this.shouldShowTextActions.state&&A.Bo(this.pageContext&&this.pageContext.publicEditModeStore.state))),this.canTriggerTextActions=this.createComputedStore((()=>A.eQ(this.pageContext&&this.pageContext.publicEditModeStore.state,this.props.currentBlockStore))),this.hasMultiBlockSelection=this.createComputedStore((()=>{const e=V.default.state;return"editing"===e.mode&&!(0,B.qS)(e.multiSelection)}))}UNSAFE_willMountOrUpdate(){const{device:e}=this.environment,t=this.renderStore.state.shouldShow;if(e.isMobileBrowser){const e=this.props.stores.store.state.isOpen;t?e?void 0!==this.currentlyShownTimer&&(window.clearTimeout(this.currentlyShownTimer),this.currentlyShownTimer=void 0):(this.props.stores.store.setState({...this.props.stores.store.state,isOpen:!0}),this.scrollerDiv&&(this.scrollerDiv.scrollLeft=0)):e&&void 0===this.currentlyShownTimer&&(this.currentlyShownTimer=window.setTimeout((()=>{this.currentlyShownTimer=void 0,this.props.stores.store.setState({...this.props.stores.store.state,isOpen:!1})}),200))}else t!==this.previouslyShownOnNative&&(this.previouslyShownOnNative=t,this.scrollerDiv&&(this.scrollerDiv.scrollLeft=0))}renderComponent(){const{device:e,WindowSizeStore:t}=this.environment,i=this.isOpen(),o=e.isMobile&&_.Z.state;if(this.props.position===j.nd.Bottom){let e=0;return(0,P.Y)("supportsFixedSizeWebView")?e=L.Z.estimatedNativeWebBottomOverlap():o&&(e=t.getSafePaddingBottomCSS(E.MOBILE_BOTTOM_BAR_HEIGHT)),(0,z.jsx)("div",{style:{position:"absolute",bottom:e,left:0,height:42,width:"100%",pointerEvents:i?"auto":"none",opacity:i?1:0,transform:i?"translateY(0)":"translateY(42px)",transition:"opacity 120ms ease-out, transform 120ms ease-out"},children:this.renderActionButtons()})}{this.listenForPositionChanges.state;const e=this.props.stores.ignoreSelectionAreaStore.state.savedTextSelectionRect||Z.getSelectionRect();if(!e)return;const t=document.body.getBoundingClientRect(),o={...e,left:10,top:e.top+10-t.top},{device:n}=this.environment;return(0,z.jsx)(O.ZP,{popupType:n.isMobileNative?O.ZP.PopupType.SlideUp:O.ZP.PopupType.Popup,open:i,preventBlockRenderQueueOnEnter:!0,placementToOrigin:O.ZP.Placement.Bottom,alignmentToOrigin:O.ZP.Alignment.Start,originRect:o,disableMouseCapture:!0,keepFocus:!0,render:()=>(0,z.jsx)("div",{style:{height:42,width:"calc(80wv)",borderRadius:4,overflow:"hidden"},children:this.renderActionButtons()})})}}renderActions(){return A.Tz({environment:this.environment,store:this.props.currentBlockStore})?this.renderTemplatesButton():this.shouldShowTextActions.state?this.renderTextActions():this.renderBlockActions()}renderActionButtons(){return(0,z.jsxs)("div",{style:X(this.props.position,this.environment,this.theme),children:[this.renderActions(),(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...this.getItemStyle(),borderLeft:J(this.theme),borderRight:"none"},onClick:this.handleDismissKeyboard,children:K.keyboardIcon})]})}renderBlockActions(){const e=this.canTriggerBlockActions.state;let t=!1,i=!1;const o=this.props.currentBlockStore.getType();if(o){const e=this.props.currentBlockStore.getFormat();(0,r._T)(o,e)||(t=!0),(0,r.lQ)(o)||(i=!0)}const{device:n}=this.environment;return(0,z.jsxs)("div",{ref:this.handleScrollerRef,style:$(),onScroll:this.handleActionsScrollDebounced,children:[(0,z.jsxs)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...this.getItemStyle(),...!n.isSmallPhone&&{paddingLeft:12,paddingRight:12}},onClick:this.handleInsert,disabled:!e,children:[K.plusIcon,(0,z.jsx)(ee,{})]}),(0,z.jsxs)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...this.getItemStyle(),fontWeight:S.Z.fontWeight.medium},onClick:e=>{this.props.stores.store.setState({...this.props.stores.store.state,isTurnIntoOpen:!0}),Y("turn_into",this.environment)},disabled:!e,children:[(0,z.jsx)(C.FormattedMessage,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.buttonTitle"}),(0,z.jsx)(ee,{})]}),(0,z.jsx)(I.Z,{capture:!0,render:e=>(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,...e,style:this.getItemStyle(),onClick:this.handleMention,disabled:!i,children:(0,z.jsx)("span",{style:{fontSize:19,lineHeight:1,fontWeight:S.Z.fontWeight.medium,marginBottom:n.isAndroid?4:0},children:"@"})})}),(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:this.getItemStyle(),onClick:this.handleComment,disabled:!t,children:K.discussionIcon}),(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:this.getItemStyle(),onClick:this.handleTakePicture,disabled:!e,children:K.imageIcon}),(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:this.getItemStyle(),onClick:this.handleDelete,disabled:!e,children:K.trashIcon}),this.renderBlockMovementActions(),this.renderBlockUndoActions(),(0,z.jsxs)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...this.getItemStyle(),fontWeight:S.Z.fontWeight.medium},onClick:e=>{this.props.stores.store.setState({...this.props.stores.store.state,isColorOpen:!0}),Y("color",this.environment)},disabled:!e,children:[(0,z.jsx)(C.FormattedMessage,{defaultMessage:"Color",id:"mobileActionBar.color.buttonTitle"}),(0,z.jsx)(ee,{})]}),(0,z.jsxs)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...this.getItemStyle(),fontWeight:S.Z.fontWeight.medium},onClick:this.handleMoreClick,disabled:!e,children:[(0,z.jsx)(C.FormattedMessage,{defaultMessage:"More",id:"mobileActionBar.more.buttonTitle"}),(0,z.jsx)(ee,{})]})]})}renderBlockMovementActions(){const e=this.canTriggerBlockActions.state,t=F.default.state.stores[0];return(0,z.jsxs)("div",{style:{...this.getItemStyle(),paddingLeft:6,paddingRight:6},children:[(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:G,disabled:!e||!M.gq(t),onClick:this.handleUnindent,children:K.unindentIcon}),(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:G,disabled:!e||!M.nt(t),onClick:this.handleIndent,children:K.indentIcon}),(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:G,disabled:!e,onClick:this.handleMoveUp,children:K.moveUpIcon}),(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:G,disabled:!e,onClick:this.handleMoveDown,children:K.moveDownIcon})]})}renderBlockUndoActions(){return(0,z.jsxs)("div",{style:{...this.getItemStyle(),paddingLeft:6,paddingRight:6},children:[(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:G,disabled:!k.L0(),onClick:this.handleUndo,children:K.undoIcon}),(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:G,disabled:!k.AZ(),onClick:this.handleRedo,children:K.redoIcon})]})}renderTextActions(){const e=this.canTriggerTextActions.state,t=this.hasMultiBlockSelection.state,i=this.props.currentBlockStore.canComment(),o=F.default.state.stores[0],s={display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap"};return(0,z.jsxs)("div",{style:$(),onScroll:this.handleActionsScrollDebounced,children:[(0,z.jsx)(H.Z,{style:this.getItemStyle(),blockStore:F.default.state.stores[0],disabled:!i}),(0,z.jsx)(U.Z,{type:"b",style:this.getItemStyle(),onClick:()=>Y("bold",this.environment),disabled:!e,children:(0,z.jsx)("span",{style:{fontWeight:S.Z.fontWeight.semibold},children:(0,z.jsx)(C.FormattedMessage,{defaultMessage:"B",id:"mobileActionBar.bold.symbol"})})}),(0,z.jsx)(U.Z,{type:"i",style:this.getItemStyle(),onClick:()=>Y("italic",this.environment),disabled:!e,children:(0,z.jsx)("span",{style:{fontStyle:"italic",fontWeight:S.Z.fontWeight.semibold},children:(0,z.jsx)(C.FormattedMessage,{defaultMessage:"i",id:"mobileActionBar.italic.symbol"})})}),(0,z.jsx)(U.Z,{type:"_",style:this.getItemStyle(),onClick:()=>Y("underline",this.environment),disabled:!e,children:(0,z.jsx)("span",{style:{textDecoration:"underline"},children:(0,z.jsx)(C.FormattedMessage,{defaultMessage:"U",id:"mobileActionBar.underline.symbol"})})}),(0,z.jsx)(U.Z,{type:"s",style:this.getItemStyle(),onClick:()=>Y("strike_through",this.environment),disabled:!e,children:(0,z.jsx)("span",{style:{textDecoration:"line-through"},children:(0,z.jsx)(C.FormattedMessage,{defaultMessage:"S",id:"mobileActionBar.strikeThrough.symbol"})})}),(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:s,disabled:!M.gq(o),onClick:this.handleUnindent,children:K.unindentIcon}),(0,z.jsx)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...s,borderRight:J(this.theme)},disabled:!M.nt(o),onClick:this.handleIndent,children:K.indentIcon}),(0,z.jsx)(U.Z,{type:"c",style:this.getItemStyle(),onClick:()=>Y("code",this.environment),disabled:!e,children:(0,z.jsx)("span",{style:{fontFamily:S.Z.getCompositeFontFamily(n.SP).githubMono},children:(0,z.jsx)(C.FormattedMessage,{defaultMessage:"Code",id:"mobileActionBar.code.symbol"})})}),(0,z.jsx)(W.Z,{style:this.getItemStyle(),disabled:!e||t,children:(0,z.jsx)("span",{style:{borderBottom:`1px solid ${this.theme.linkDecorationColor}`},children:(0,z.jsx)(C.FormattedMessage,{defaultMessage:"Link",id:"mobileActionBar.link.symbol"})})}),(0,z.jsx)(q.Z,{onClick:()=>Y("equation",this.environment),disabled:!e||t,style:this.getItemStyle(),children:(0,l.G)({width:16,height:16})}),(0,z.jsx)(D.Z,{style:this.getItemStyle(),ignoreSelectionAreaStore:this.props.stores.ignoreSelectionAreaStore,disabled:!e})]})}renderTemplatesButton(){return(0,z.jsx)("div",{style:$(),children:(0,z.jsxs)(N.Z,{mobileFeedback:!0,disabledFeedback:!0,style:{...this.getItemStyle(),borderRight:"none",fontWeight:S.Z.fontWeight.medium},onClick:e=>{this.props.stores.store.setState({...this.props.stores.store.state,isTemplatesOpen:!0}),Y("templates",this.environment)},children:[(0,g.i)({width:20,marginRight:8}),(0,z.jsx)(C.FormattedMessage,{defaultMessage:"Choose a template...",id:"mobileActionBar.templates.buttonTitle"}),(0,z.jsx)(ee,{})]})})}isOpen(){const{device:e}=this.environment;return e.isMobileBrowser?this.props.stores.store.state.isOpen:this.renderStore.state.shouldShow}getItemStyle(){const{device:e}=this.environment;return{display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:e.isSmallPhone?8:10,paddingRight:e.isSmallPhone?8:10,borderRight:J(this.theme),whiteSpace:"nowrap",height:42,flexShrink:0,flexGrow:0,flexBasis:"auto",color:this.theme.regularTextColor,minWidth:e.isSmallPhone?42:44}}}K.displayName="MobileActionBar",K.unindentIcon=(0,d.A)({width:18,height:18,transform:"rotate(90deg)",position:"relative",left:1}),K.indentIcon=(0,d.A)({width:18,height:18,transform:"rotate(-90deg)",position:"relative",left:-1}),K.moveUpIcon=(0,h.l)({width:18,height:18,position:"relative",left:2}),K.moveDownIcon=(0,h.l)({width:18,height:18,transform:"rotate(180deg)",position:"relative",left:2}),K.undoIcon=(0,f.s)({width:19,height:19}),K.redoIcon=(0,p.N)({width:19,height:19}),K.trashIcon=(0,v.y)({width:18,height:18}),K.discussionIcon=(0,m.o)({width:18,height:18}),K.plusIcon=(0,b.C)({width:14,height:14}),K.keyboardIcon=(0,u.z)({width:18,height:18}),K.imageIcon=(0,c.y)({width:18,height:18});const Q=(0,C.injectIntl)(K);function $(){return{flexGrow:1,flexShrink:1,marginRight:-1,display:"flex",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch"}}function Y(e,t){x.YOV(t,{itemName:e})}function J(e){return`1px solid ${e.regularDividerColor}`}function X(e,t,i){const{device:o,WindowSizeStore:n}=t;return{height:"100%",width:"100%",fontSize:15,display:"flex",boxShadow:e===j.nd.Bottom?i.bottomActionBarShadow:i.mediumBoxShadow,backgroundColor:i.keyboardActionBarBackground,paddingLeft:o.isMobileNative?n.state.paddingLeftCSS:0,paddingRight:o.isMobileNative?n.state.paddingRightCSS:0}}function ee(){window.__c={n:"ChevronDownComponent"};const e=(0,s.Fg)();return(0,a.i)({width:10,marginLeft:4,fill:e.lightIconColor})}},87038:(e,t,i)=>{i.r(t),i.d(t,{default:()=>V});var o=i(67294),n=i(83355),s=i(84465),r=i(51454),a=i(68939),l=i(21797),c=i(46225),d=i(11732),u=i(50906),h=i(86282),p=i(75179),m=i(87279),g=i(51783),b=i(80444),v=i(63334),f=i(29798),y=i(49085);class S extends y.default{getInitialState(){return{isOpen:!1,isInsertOpen:!1,isTurnIntoOpen:!1,isColorOpen:!1,isTemplatesOpen:!1}}}const C=S;var x=i(27724),M=i(24666),k=i(34583),T=i(65435),w=i(48019),I=i(56940),A=i(78140),j=i(32163),B=i(40721),Z=i(53437),P=i(72495),R=i(40698),_=i(34574),L=i(85893);class F extends n.Z{constructor(){super(...arguments),this.storeTypes={store:C,ignoreSelectionAreaStore:v.Z,templatePickerMenuListStore:f.Z},this.templatePreviewSectionsStore=this.createComputedStore((()=>{var e,t;return Object.entries((0,T.it)({userPersona:null===(e=b.default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.persona,subscriptionTier:null===(t=b.default.state.currentSpaceStore)||void 0===t?void 0:t.getSubscriptionTier()})).map((e=>{let[t,i]=e;return{key:t,render:e=>(0,L.jsx)(P.Z,{title:(0,L.jsx)(a.FormattedMessage,{...s._5[t]}),children:e.children},t),items:i.map((e=>function(e,t){return{key:e.name,render:t=>(0,o.createElement)(_.Z,{...t,key:e.name,title:e.name,type:"page_template",format:"phone-modal",locked:!1}),action:()=>{h.$7({environment:t,item:e,createNewPage:!1,isPrivate:!1})}}}(e,this.environment)))}}))})),this.handleCloseColorPopup=()=>{this.stores.store.setState({...this.stores.store.state,isColorOpen:!1})},this.handleCloseInsertPopup=()=>{this.stores.store.setState({...this.stores.store.state,isInsertOpen:!1})},this.handleCloseTurnIntoPopup=()=>{this.stores.store.setState({...this.stores.store.state,isTurnIntoOpen:!1})},this.handleCloseTemplatesPopup=()=>{this.stores.store.setState({...this.stores.store.state,isTemplatesOpen:!1})},this.renderStore=this.createComputedStore((()=>{var e;return g.$3(this.environment,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state)}))}renderComponent(){const{device:e,WindowSizeStore:t}=this.environment,i=this.isOpen(),{makeActionBarComponent:n}=this.props;return(0,L.jsxs)(o.Fragment,{children:[(0,L.jsx)(p.Z,{capture:!0,render:e=>(0,L.jsxs)("div",{...e,style:{position:"relative",width:"100%",height:0,zIndex:r.Eo},children:[n(this.stores),this.renderNativeMenuIgnoreSelectionArea(),this.renderInsertPopup(),this.renderTurnIntoPopup(),this.renderColorPopup(),this.renderTemplatesPopup()]})}),!i&&e.isIPhoneX&&e.isNative&&(0,L.jsx)("div",{style:{position:"absolute",bottom:0,background:"transparent",height:t.state.paddingBottomCSS,width:"100%",pointerEvents:"none",WebkitUserSelect:"none"}})]})}renderNativeMenuIgnoreSelectionArea(){const e=this.environment.NativeMobileActionBarStore;return e?(0,L.jsx)(I.Z,{store:this.stores.ignoreSelectionAreaStore,capture:g.y6(this.environment),ignoreBlockSelection:!1,focusOffscreenInput:!1,restoreSelection:"editing"!==M.default.state.mode&&e.state.shouldRestoreSelectionForMenu,render:e=>null}):null}renderInsertPopup(){const{device:e}=this.environment;return(0,L.jsx)(I.Z,{capture:this.stores.store.state.isInsertOpen,ignoreBlockSelection:!1,focusOffscreenInput:!1,restoreSelection:!1,render:t=>(0,L.jsx)(Z.ZP,{popupType:e.isMobile?Z.ZP.PopupType.SlideUp:Z.ZP.PopupType.Popup,preventBlockRenderQueueOnEnter:!0,open:this.stores.store.state.isInsertOpen,keepFocus:!0,onDismiss:()=>{t(),this.handleCloseInsertPopup()},render:()=>(0,L.jsx)(A.Z,{menuType:m.og.Modal,title:(0,L.jsx)(a.FormattedMessage,{defaultMessage:"Insert block",id:"mobileActionBar.insertBlock.modalTitle"}),right:(0,L.jsx)(B.CancelMenuText,{}),onClickRight:()=>{t(),this.handleCloseInsertPopup()},children:(0,L.jsx)(w.Z,{sections:c.w.state.insertActions,context:{environment:this.environment,blocks:x.default.state.stores,publicEditMode:void 0},onAccept:this.handleCloseInsertPopup})})})})}renderTurnIntoPopup(){const{device:e}=this.environment;return(0,L.jsx)(I.Z,{capture:this.stores.store.state.isTurnIntoOpen,ignoreBlockSelection:!1,focusOffscreenInput:!1,restoreSelection:!0,render:()=>(0,L.jsx)(Z.ZP,{popupType:e.isMobile?Z.ZP.PopupType.SlideUp:Z.ZP.PopupType.Popup,open:this.stores.store.state.isTurnIntoOpen,keepFocus:!0,onDismiss:this.handleCloseTurnIntoPopup,preventBlockRenderQueueOnEnter:!0,render:()=>(0,L.jsx)(A.Z,{menuType:m.og.Modal,title:(0,L.jsx)(a.FormattedMessage,{defaultMessage:"Turn into",id:"mobileActionBar.turnInto.modalTitle"}),right:(0,L.jsx)(B.CancelMenuText,{}),onClickRight:this.handleCloseTurnIntoPopup,children:(0,L.jsx)(w.Z,{sections:[{...d.g,title:""}],context:{environment:this.environment,blocks:x.default.state.stores,publicEditMode:void 0},onAccept:this.handleCloseTurnIntoPopup})})})})}renderColorPopup(){const{device:e}=this.environment;return(0,L.jsx)(I.Z,{capture:this.stores.store.state.isColorOpen,ignoreBlockSelection:!1,focusOffscreenInput:!1,restoreSelection:!0,render:()=>(0,L.jsx)(Z.ZP,{popupType:e.isMobile?Z.ZP.PopupType.SlideUp:Z.ZP.PopupType.Popup,open:this.stores.store.state.isColorOpen,keepFocus:!0,onDismiss:this.handleCloseColorPopup,preventBlockRenderQueueOnEnter:!0,render:()=>(0,L.jsx)(A.Z,{menuType:m.og.Modal,title:(0,L.jsx)(a.FormattedMessage,{defaultMessage:"Block color",id:"mobileActionBar.blockColor.modalTitle"}),right:(0,L.jsx)(B.CancelMenuText,{}),onClickRight:this.handleCloseColorPopup,children:(0,L.jsx)(w.Z,{sections:[l.te,l.rz,l.Vm],context:{environment:this.environment,blocks:x.default.state.stores,publicEditMode:void 0},onAccept:this.handleCloseColorPopup})})})})}renderTemplatesPopup(){const{device:e}=this.environment;return(0,L.jsx)(I.Z,{capture:this.stores.store.state.isTemplatesOpen,ignoreBlockSelection:!1,focusOffscreenInput:!1,restoreSelection:!1,render:()=>(0,L.jsx)(Z.ZP,{popupType:e.isMobile?Z.ZP.PopupType.SlideUp:Z.ZP.PopupType.Popup,open:this.stores.store.state.isTemplatesOpen,keepFocus:!0,render:()=>(0,L.jsx)(A.Z,{menuType:m.og.Modal,title:(0,L.jsx)(a.FormattedMessage,{defaultMessage:"Templates",id:"mobileActionBar.templates.modalTitle"}),right:(0,L.jsx)(B.CancelMenuText,{}),onClickRight:this.handleCloseTemplatesPopup,children:(0,L.jsx)(j.Z,{type:j.i.Vertical,store:this.stores.templatePickerMenuListStore,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onAccept:this.handleCloseTemplatesPopup,sections:[{key:"Basic",render:e=>(0,L.jsx)(P.Z,{children:e.children}),items:R.ss.map((e=>O(e,this.props.currentBlockStore,this.environment,this.theme)))},{key:"Database",render:e=>(0,L.jsx)(P.Z,{title:(0,L.jsx)(a.FormattedMessage,{defaultMessage:"Database",id:"mobileActionBar.databaseSection.title"}),children:e.children}),items:R.Im.filter((e=>e.shouldShow(this.environment))).map((e=>O(e,this.props.currentBlockStore,this.environment,this.theme)))},...this.templatePreviewSectionsStore.state]})})})})}isOpen(){const{device:e}=this.environment;return e.isMobileBrowser?this.stores.store.state.isOpen:this.renderStore.state.shouldShow}}F.displayName="MobileActionBarWrapper";const V=(0,a.injectIntl)(F);function N(e,t){return e.isLargeDatabaseIcon?{width:16,fill:t.regularIconColor,marginLeft:4,marginRight:4}:{width:20,fill:t.regularIconColor,marginLeft:2,marginRight:2}}function O(e,t,i,n){const s=t;return{key:e.name,render:t=>{var i;return(0,o.createElement)(_.Z,{...t,key:e.name,format:"phone-modal",title:e.name,type:e.type,icon:null===(i=e.iconFn)||void 0===i?void 0:i.call(e,N(e,n)),locked:!1})},action:t=>{s&&k.M_(i)&&(u.rNQ(i,{template_name:e.name,is_keyboard:"keydown"===t.event.type}),e.onClick(i,s))}}}},54230:(e,t,i)=>{i.r(t),i.d(t,{default:()=>oe});var o=i(30120),n=i(67294),s=i(83355),r=i(86628),a=i(49085),l=i(15145),c=i(40506),d=i(7057),u=i(53877),h=i(42875),p=i(2585),m=i(5257),g=i(72126),b=i(21202),v=i(68939),f=i(26797),y=i(49865),S=i(75018),C=i(39699),x=i(66213),M=i(40863),k=i(84210),T=i(87279);class w extends a.default{getInitialState(){return{}}}const I=w;var A=i(26136),j=i(13401),B=i(75498),Z=i(73063),P=i(78140),R=i(43765),_=i(40721),L=i(72495),F=i(78948),V=i(24405),N=i(6695),O=i(95855),D=i(54497),H=i(82990),E=i(33929),U=i(65598),q=i(80444),W=i(97039),z=i(78030),G=i(52275),K=i(16354),Q=i(31278),$=i(76798),Y=i(85893);const J=function(e){let{time:t,store:i,format:o,schema:s,blockPropertyValueOverlayStore:r,collectionStore:a}=e;window.__c={n:"MobileCalendarDayMenuItem"};const c=(0,V.Fg)(),d=i.hasIcon()||!i.isEmptyPage(),u=i.hasError(),h=(0,k.ZP)({store:i,fullyQualified:!1,pageVisitSource:l.tY.LinkInPage}),p=U.Xp(i,{recursivelyLoadAllDiscussions:!1});return(0,Y.jsx)(K.Z,{href:h,children:(0,Y.jsx)(G.Z,{focused:!1,title:(0,Y.jsxs)(n.Fragment,{children:[t&&(0,Y.jsx)("div",{style:{display:"flex",color:c.mediumTextColor,fontSize:14,marginTop:8,marginBottom:6},children:t}),(0,Y.jsxs)("div",{style:{display:"flex",alignItems:"center",...t&&{marginBottom:8}},children:[d&&!u&&(0,Y.jsx)(Q.Z,{disabled:!0,icon:i.getIcon(),isEmptyPage:i.isEmptyPage(),size:24,style:{flexShrink:0,marginRight:8}}),u&&(0,D.t)({marginLeft:2,marginRight:10,width:20,fill:c.accentColors.orange[500]}),(0,Y.jsx)($.Z,{store:i,style:{fontWeight:H.Z.fontWeight.semibold}}),p>0&&(0,Y.jsxs)("div",{style:{display:"flex",alignItems:"center",color:c.regularDividerColor,fontSize:12,marginLeft:4,flexShrink:0},children:[(0,O.z)({width:12,height:12,marginRight:4,fill:c.mediumIconColor}),p]})]})]}),caption:(0,Y.jsx)(ee,{format:o,schema:s,store:i,blockPropertyValueOverlayStore:r,collectionStore:a})})})};function X(e){let{property:t,schema:i,store:o,blockPropertyValueOverlayStore:n,collectionStore:s}=e;return i[t]?(0,Y.jsx)(W.Z,{store:o,property:t,disabled:!0,locked:!1,format:z.C.Calendar,tableWrap:!1,blockPropertyValueOverlayStore:n,collectionStore:s},t):null}function ee(e){let{format:t,schema:i,store:o,blockPropertyValueOverlayStore:n,collectionStore:s}=e;const r=(t.calendar_properties?t.calendar_properties.filter((e=>e.visible)).map((e=>e.property)):[]).filter((e=>{var t;return N.XU({block:o.getModel(),property:e,schema:i,getRecordModel:o.getRecordModel,userId:null===(t=q.default.state.currentUserStore)||void 0===t?void 0:t.id,userTimeZone:(0,h.r)(),intl:E.default.getIntl()})}));return r.length>0?(0,Y.jsx)("div",{style:{marginTop:8},children:r.map((e=>(0,Y.jsx)(X,{property:e,schema:i,store:o,blockPropertyValueOverlayStore:n,collectionStore:s},e)))}):null}const te={display:"flex",alignItems:"center",height:"100%"};class ie extends s.Z{constructor(){super(...arguments),this.storeTypes={store:I,resultStore:a.default.createClass(void 0)},this.renderResults=()=>{const{disabled:e,collectionContextStore:t}=this.props,i=t.collectionStore();if(!i)return;const o=this.getCurrentStartOfDay(),n=o.endOf("day"),s=this.getCurrentResults();return(0,Y.jsxs)(P.Z,{menuType:T.og.Modal,title:(0,Y.jsxs)("div",{style:te,children:[(0,Y.jsx)(Z.Z,{onClick:this.handleLeftClick,icon:p.f,style:{marginRight:8,marginTop:2},mobileFeedback:!0}),(0,Y.jsx)("div",{children:(0,d.ZW)(o,"month_day_long")}),(0,Y.jsx)(Z.Z,{onClick:this.handleRightClick,icon:m.o,style:{marginLeft:8,marginTop:2},mobileFeedback:!0})]}),right:(0,Y.jsx)(_.DoneMenuText,{}),onClickRight:this.props.onDismiss,children:[!s&&(0,Y.jsx)(L.Z,{children:(0,Y.jsx)(F.Z,{})}),s&&0===s.length&&(0,Y.jsx)(L.Z,{children:(0,Y.jsx)(R.Z,{title:(0,Y.jsx)(v.FormattedMessage,{defaultMessage:"No items",id:"mobileCalendarDayMenu.noResults.message"})})}),s&&s.length>0&&(0,Y.jsx)(L.Z,{children:s.map((e=>{const t=A.G.createChildStore(i,{id:e.id,table:b.iU});return(0,Y.jsx)(se,{disabled:this.props.disabled,blockPropertyValueOverlayStore:this.props.blockPropertyValueOverlayStore,collectionContextStore:this.props.collectionContextStore,schema:this.props.schema,calendarBy:this.props.calendarBy,intl:this.props.intl,format:this.props.format,blockStore:t,item:e,currentStartOfDay:o,currentEndOfDay:n},e.id)}))}),!e&&(0,Y.jsx)(L.Z,{topBorder:!0,children:(0,Y.jsx)(j.Z,{focused:!1,onClick:this.handleAddItemClick,title:(0,Y.jsx)(v.FormattedMessage,{defaultMessage:"New item",id:"mobileCalendarDayMenu.newItemButton.label"})})})]})},this.handleLeftClick=()=>{const e=this.getCurrentStartOfDay();this.stores.store.setState({...this.stores.store.state,currentStartOfDay:e.minus({day:1}).valueOf()})},this.handleRightClick=()=>{const e=this.getCurrentStartOfDay();this.stores.store.setState({...this.stores.store.state,currentStartOfDay:e.plus({day:1}).valueOf()})},this.handleAddItemClick=()=>{const{collectionContextStore:e,calendarBy:t}=this.props,i=this.getCurrentStartOfDay(),o=C.createAndCommit({userAction:"MobileCalendarDayMenu.newStore",environment:this.environment,perform:o=>{const n=y.IW({environment:this.environment,collectionContextStore:e,groupsPointer:[],insertAtIndex:0,coerce:!1,initializeDefaultTemplate:!0,transaction:o,from:"mobile_calendar_day_menu"});if(n)return f.xD({type:"timestamp",environment:this.environment,store:n.newStore,propertyId:t,timestampMs:i.valueOf(),transaction:o}),n.newStore}});if(!o.performResult)return;const n=(0,k.ZP)({store:o.performResult,pageVisitSource:l.tY.Create});this.navigate(n)},this.reducerStore=this.createComputedStore((()=>{const{collectionContextStore:e}=this.props;return(0,M.YG)({collectionContextStore:e,startOfDay:this.getCurrentStartOfDay().valueOf()})}),!0)}navigate(e){this.context.overrideLinkClick?this.context.overrideLinkClick(e):S.navigate({environment:this.environment,url:e})}renderComponent(){const{collectionContextStore:e}=this.props,t=this.reducerStore.state;if(t)return(0,Y.jsx)(B.Z,{id:"calendar_day_results",reducer:t,collectionContextStore:e,render:this.renderResults,resultStore:this.stores.resultStore})}getCurrentStartOfDay(){const{currentStartOfDay:e}=this.stores.store.state;return e?o.ou.fromMillis(e):o.ou.fromMillis(this.props.initialStartOfDay)}getCurrentResults(){const{collectionContextStore:e}=this.props,t=e.collectionStore();if(!t)return;const i=this.stores.resultStore.state,o=e.normalizedQueryStore.state,n=e.normalizedSchemaStore.state,s=o?o.calendar_by:void 0;if(!(i&&o&&s&&n))return;let r=g.oA(i.blockIds.map((e=>{const i=A.G.createChildStore(t,{id:e,table:b.iU});return(0,M.BO)({blockStore:i,calendarBy:s,schema:n,getRecordValue:t.getRecordValue,userId:this.environment.currentUser.id,intl:this.props.intl})})));return o.sort||(r=g.MR(r,(e=>e.start))),r}}ie.displayName="MobileCalendarDayMenu",ie.contextTypes={...x.wK,...s.w};const oe=(0,v.injectIntl)(ie);function ne(e){let{item:t,currentStartOfDay:i,currentEndOfDay:o,schema:n,calendarBy:s,intl:r}=e;const a=n[s];if(!a||"date"!==a.type)return;const l=a.date_format||c.sF,p=a.time_format||c.c_,m=t.start,g=t.end,b=Boolean(!(i<=m&&m<=o)||g&&!(i<=g&&g<=o));if(t.end){const e=u.iC(t.start.valueOf(),t.end?t.end.valueOf():t.start.valueOf(),t.timeZone??(0,h.r)());return b?(0,d.ZV)({value:e,date_format:l,time_format:p,userTimeZone:t.timeZone,allowRelativeDates:!0,intl:r}):(0,d.ns)({start_time:e.start_time,end_time:e.end_time,time_format:p,humanReadable:!0,intl:r})}return(0,d.mr)({start_time:u.CQ(t.start.valueOf(),t.timeZone??(0,h.r)()).start_time,time_format:p,humanReadable:!0,intl:r})}function se(e){let{blockStore:t,item:i,currentStartOfDay:o,currentEndOfDay:n,disabled:s,blockPropertyValueOverlayStore:a,collectionContextStore:l,schema:c,calendarBy:d,intl:u,format:h}=e;window.__c={n:"Item"};const p=(0,r.VK)((()=>l.collectionStore()),[l]);return p?(0,Y.jsx)(J,{store:t,time:i.includeTime?ne({schema:c,calendarBy:d,intl:u,item:i,currentStartOfDay:o,currentEndOfDay:n}):void 0,disabled:s,format:h,schema:c,blockPropertyValueOverlayStore:a,collectionStore:p},i.id):null}},21326:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var o=i(67294),n=i(71644),s=i(480),r=i(86628),a=i(27328),l=i(59054),c=i(70203),d=i(90287),u=i(75018),h=i(87531),p=i(29974),m=i(81598),g=i(28344),b=i(85075),v=i(75179),f=i(38755),y=i(80444),S=i(98180),C=i(66881),x=i(69454),M=i(85893);const k=function(){window.__c={n:"MobileAssistantMenu"};const e=(0,s.O7)(),[t,i]=(0,o.useState)(!1),n=(0,r.VK)((()=>C.g.state),[]),k=(0,r.VK)((()=>(0,a.w_)(e.TabbedRouterStore.state)),[e]),T=(0,r.VK)((()=>{var e,t;return Boolean("web"===k.type&&("nativeTab"===k.route.name&&"assistant"===k.route.tab||"nativeTab"===(null===(e=k.redirectedTo)||void 0===e?void 0:e.route.name)&&"assistant"===(null===(t=k.redirectedTo)||void 0===t?void 0:t.route.tab)))}),[k]),w=(0,r.VK)((()=>e.WindowSizeStore.state.paddingTopCSS),[e.WindowSizeStore]),I=(0,r.VK)((()=>x.Z.mobileNativeBottomPadding(e)),[e]),A=(0,r.VK)((()=>({paddingLeft:e.WindowSizeStore.state.paddingLeftCSS,paddingRight:e.WindowSizeStore.state.paddingRightCSS})),[e]);return(0,l.r5)((async()=>{const t=d.Bs(),o=y.default.state.currentSpaceViewStore;if(t){const i=p.F1({environment:e,spaceId:t})??(o?await(0,f.rg)(e,o):void 0);i&&y.default.setState({...y.default.state,mainEditorCurrentBlockStore:i})}const{assistantActions:s}=await m.L6.loader();if(!S.Z.getActiveSessionId()||n.shouldReset){var r;C.g.update((e=>({...e,shouldReset:!1})));const t=Boolean(n.query&&n.query.length>h.LR),o=await s.resetAndInitializeAssistantSession({environment:e,primeTextInput:t?void 0:n.query});t&&await s.commitHumanStep({environment:e,text:(0,c.TPx)(n.query),sessionId:o.sessionId});const l=null===(r=S.Z.getSessionContext(o.sessionId))||void 0===r||null===(r=r.assistantConfigurationStore)||void 0===r?void 0:r.state;var a;if(l)g.trackQnAOpened(e,{configurationState:l,runtimeState:null===(a=S.Z.getSessionContext(o.sessionId))||void 0===a||null===(a=a.assistantRuntimeStore)||void 0===a?void 0:a.state,hasQuery:t,from:n.from??"mobile_app_start",searchSessionId:n.searchSessionId});i(!0)}else T&&i(!0)}),[e,n,i,T]),(0,o.useEffect)((()=>{var i;T&&t&&(null===(i=e.mobileNative)||void 0===i||i.markTransitionReady({type:"assistant"}))}),[e.mobileNative,T,t]),(0,M.jsx)(v.Z,{capture:!0,render:t=>(0,M.jsx)("div",{style:{paddingTop:w,paddingBottom:I,...A,flex:1,minWidth:0},...t,children:(0,M.jsx)(b.Qn,{renderAsFullPage:!0,showBackButton:!0,onClose:()=>u.back(e)})})})};var T=i(58925);const w=function(e){const{route:t}=e;return"updates"===t.tab?(0,M.jsx)(T.Z,{format:T.Z.Format.RenderAsPage,renderId:(0,n.ZP)()}):"assistant"===t.tab?(0,M.jsx)(k,{}):null}},61671:(e,t,i)=>{i.d(t,{Z:()=>b});i(67294);var o=i(83355),n=i(16001),s=i(68939),r=i(75018),a=i(87279),l=i(97799),c=i(64921),d=i(31945),u=i(78140),h=i(15311),p=i(14694),m=i(85893);class g extends o.Z{constructor(){super(...arguments),this.handleClose=()=>{const{mobileNative:e}=this.environment,t=()=>{l.Z.setState({open:!1})};l.Z.state.source!==l.Y.Updates&&((null==e?void 0:e.supportsNativeHomeOnPhone())||!1)?r.navigateToHomeTab(this.environment,t):t()}}renderComponent(){const{device:e,mobileNative:t}=this.environment,i=l.Z.state.open,o=l.Z.state.source!==l.Y.Updates&&((null==t?void 0:t.supportsNativeHomeOnPhone())||!1);return(0,m.jsx)(d.ZP,{popupType:e.isMobile?d.Z4.SlideUp:d.Z4.Popup,hidesMobileNativeBottomBar:o,preventSlideUpTransition:o,buttonPopupStore:l.Z,renderOrigin:t=>(0,m.jsx)(c.Z,{mobileFeedback:e.isMobile,...t,children:(0,m.jsx)(p.Z,{left:(0,n.r)({fill:this.theme.mediumIconColor,width:16}),style:{background:i?this.theme.buttonHoveredBackground:"none"},disableMobileBorder:!0,children:(0,m.jsx)(s.FormattedMessage,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.label"})})}),render:()=>{let t;return t=e.isMobile?{menuType:a.og.Modal,title:(0,m.jsx)(s.FormattedMessage,{defaultMessage:"Notifications & settings",id:"notificationSettingsButton.mobileSidebar.title"}),right:(0,m.jsx)(s.FormattedMessage,{defaultMessage:"Done",id:"notificationSettingsButton.rightActionButton.done"}),onClickRight:this.handleClose,onCancel:this.handleClose,whiteBackground:!0}:{menuType:a.og.Popup},(0,m.jsx)(u.Z,{...t,children:(0,m.jsx)(h.Z,{isMobile:!0,passwordRequestStore:this.props.passwordRequestStore})})}})}}g.displayName="NotificationSettingsButton";const b=g},5480:(e,t,i)=>{i.d(t,{Z:()=>ge});var o=i(67294),n=i(83355),s=i(480),r=i(86628),a=i(24405),l=i(97107),c=i(68939),d=i(50906),u=i(42858),h=i(39699),p=i(98742),m=i(36896),g=i(44604),b=i(80444),v=i(64921),f=i(31945),y=i(79954),S=i(14694),C=i(15145),x=i(1800),M=i(35840),k=i(64994),T=i(54992),w=i(55863),I=i(42973),A=i(21202),j=i(75018),B=i(39865),Z=i(95477),P=i(23586),R=i(12457),_=i(43250),L=i(33929),F=i(87279),V=i(18514),N=i(77907),O=i(75822),D=i(74948),H=i(88632),E=i(26136),U=i(72087),q=i(20755),W=i(73063),z=i(68894),G=i(68785),K=i(78140),Q=i(32163),$=i(43765),Y=i(40721),J=i(11470),X=i(43145),ee=i(72495),te=i(30506),ie=i(26388),oe=i(83182),ne=i(46247),se=i(66957),re=i(85893);const ae=(0,c.defineMessages)({filterByPlaceholder:{id:"sidebarTrash.filterBy.placeholder",defaultMessage:"Search pages in trash..."}});class le extends n.Z{constructor(){super(...arguments),this.storeTypes={requestStore:U.Z},this.renderTrashPages=(e,t)=>{const{device:i}=this.environment,n=t?t.results:[],{mainEditorCurrentBlockStore:s}=b.default.state;if(!s)return;const r=n.map((e=>E.G.createChildStore(s,{table:A.iU,id:e}))).filter((e=>e.isDefined()&&!g.Z.state.excludePages.has(e.id))).map((e=>({key:e.id,action:t=>{let{event:o}=t;if("metaKey"in o&&o.metaKey){const t=(0,x.Z)({baseUrl:Z.default.domainBaseUrl,pageId:e.id,pageVisitSource:C.tY.SidebarTrash});j.navigateToExternalURL({environment:this.environment,url:t})}else j.navigateToBlock({environment:this.environment,store:e,pageVisitSource:C.tY.SidebarTrash}),m.Z.setState({...m.Z.state,open:!1});i.isMobile&&D.close()},render:t=>(0,re.jsx)(J.Z,{...t,dontShrinkRight:!0,store:e,right:(0,re.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,re.jsx)(ie.Z,{placement:ie.Z.Placement.Bottom,renderTooltip:()=>(0,re.jsx)(c.FormattedMessage,{defaultMessage:"Restore",id:"sidebarTrash.restorePageButton.tooltip"}),render:t=>(0,re.jsx)(W.Z,{icon:w.s,iconStyle:{width:16,height:16,color:this.theme.mediumIconColor},...t,onClick:()=>this.handleRestoreClick(e),ariaLabel:this.props.intl.formatMessage({defaultMessage:"Restore page",id:"sidebarTrash.restorePageButton.ariaLabel"})})}),(0,re.jsx)(ie.Z,{placement:ie.Z.Placement.Bottom,renderTooltip:()=>(0,re.jsx)(c.FormattedMessage,{defaultMessage:"Permanently delete page",id:"sidebarTrash.permanentlyDeletePageButton.tooltip"}),render:t=>(0,re.jsx)(W.Z,{icon:T.p,iconStyle:{width:16,height:16,color:this.theme.mediumIconColor},...t,onClick:()=>this.handleDeleteClick(e),ariaLabel:this.props.intl.formatMessage({defaultMessage:"Permanently delete page",id:"sidebarTrash.permanentlyDeletePageButton.ariaLabel"})})})]})})})));return 0===r.length&&g.Z.state.filter?(0,re.jsx)(ee.Z,{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:i.isMobile?(0,re.jsx)($.Z,{title:(0,re.jsx)(c.FormattedMessage,{defaultMessage:"No matches",id:"sidebarTrash.mobileFilterBy.noMatchesTitle"})}):(0,re.jsx)(q.Z,{icon:k.h,title:(0,re.jsx)(c.FormattedMessage,{defaultMessage:"No matches",id:"sidebarTrash.filterBy.noMatchesTitle"}),description:(0,re.jsx)(c.FormattedMessage,{defaultMessage:"Try checking for typos",id:"sidebarTrash.filterBy.noMatchesDescription"})})}):0===r.length?(0,re.jsx)(ee.Z,{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:i.isMobile?(0,re.jsx)($.Z,{title:(0,re.jsx)(c.FormattedMessage,{defaultMessage:"No results",id:"sidebarTrash.mobileFilterBy.noResultsTitle"})}):(0,re.jsx)(q.Z,{icon:T.p,title:(0,re.jsx)(c.FormattedMessage,{defaultMessage:"No results",id:"sidebarTrash.filterBy.noResultsTitle"}),description:(0,re.jsx)(c.FormattedMessage,{defaultMessage:"Trashed pages appear here",id:"sidebarTrash.filterBy.noResultsDescription"})})}):(0,re.jsxs)(o.Fragment,{children:[(0,re.jsx)(Q.Z,{type:Q.i.Vertical,initialFocus:void 0,sections:[{key:0,items:r,render:e=>(0,re.jsx)(ee.Z,{...e})}]}),(0,re.jsx)(R.Z,{show:this.stores.requestStore.state.loading,showDelay:500,showHold:200,render:e=>{if(e)return(0,re.jsx)("div",{style:{height:44,display:"flex",flex:1,alignItems:"center",justifyContent:"center"},children:(0,re.jsx)(G.Z,{})})}}),(0,re.jsx)(X.Z,{onChange:this.handleScrollOffsetChange})]})},this.handleSwipeLeft=()=>{const e=le.tabs.indexOf(g.Z.state.currentTab)+1,t=le.tabs[e];void 0!==t&&this.changeTab(t)},this.handleSwipeRight=()=>{const e=le.tabs.indexOf(g.Z.state.currentTab)-1,t=le.tabs[e];void 0!==t&&this.changeTab(t)},this.handleTabChange=e=>{const t=le.tabs[e];this.changeTab(t)},this.handleRestoreClick=e=>{const{currentSpaceStore:t}=b.default.state;t&&B.DV({environment:this.environment,block:e,spaceId:e.pointer.spaceId||t.id})},this.handleDeleteClick=e=>{B.Rn({environment:this.environment,blocks:[e]})},this.handleClose=()=>{const{mobileNative:e}=this.environment,t=()=>{m.Z.setState({...m.Z.state,open:!1})};null!=e&&e.supportsNativeHomeOnPhone()?j.navigateToHomeTab(this.environment,t):t()},this.handleScrollOffsetChange=e=>{const{requestStore:t}=this.stores,{ready:i,loading:o,result:n}=t.state,s=n;e<=g.Z.loadMoreOffset&&s&&i&&!o&&!s.endOfResultsReached&&g.Z.setState({...g.Z.state,limit:g.Z.state.limit+g.Z.limitIncrement})}}UNSAFE_willMount(e){super.UNSAFE_willMount(e),g.Z.setState({...g.Z.state,limit:g.Z.startLimit,excludePages:new Set})}willUnmount(){g.Z.setState({...g.Z.state,filter:""})}renderComponent(){const{mobileNative:e}=this.environment;return null!=e&&e.supportsNativeHomeOnPhone()?this.renderNativeHomeEnabledLayout():this.renderLayout()}renderLayout(){const{device:e}=this.environment;let t;return t=e.isMobile?{menuType:F.og.Modal,title:(0,re.jsx)(c.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrash.menu.header"}),left:(0,re.jsx)(de,{}),right:(0,re.jsx)(Y.DoneMenuText,{}),onClickRight:this.handleClose,onCancel:this.handleClose,header:this.renderHeaderWithTabs()}:{menuType:F.og.Popup,height:"50vh",width:414,header:this.renderHeaderWithTabs(),footer:(0,re.jsx)(ce,{})},(0,re.jsx)(te.Z,{onSwipeLeft:this.handleSwipeLeft,onSwipeRight:this.handleSwipeRight,render:e=>(0,re.jsx)(K.Z,{...t,...e,className:_.TYv,children:this.renderPages()})})}renderNativeHomeEnabledLayout(){const e={menuType:F.og.Modal,title:(0,re.jsx)(c.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrash.menu.header"}),left:(0,re.jsx)(de,{}),right:(0,re.jsx)(Y.DoneMenuText,{}),onClickRight:this.handleClose,onCancel:this.handleClose,header:this.renderSearchInput()};return(0,re.jsx)(K.Z,{...e,className:_.TYv,children:this.renderPages()})}renderHeaderWithTabs(){const{device:e}=this.environment,t=g.Z.state.currentTab,i=le.tabs.indexOf(t);return(0,re.jsxs)(o.Fragment,{children:[(0,re.jsx)(se.Z,{tabs:[(0,re.jsx)(c.FormattedMessage,{defaultMessage:"All pages",id:"sidebarTrash.allPages.tabHeader"},"allPages"),(0,re.jsx)(c.FormattedMessage,{defaultMessage:"In current page",id:"sidebarTrash.inCurrentPage.tabHeader"},"currentPage"),(0,re.jsx)(c.FormattedMessage,{defaultMessage:"Last edited by me",id:"sidebarTrash.lastEditedByMe.tabHeader"},"lastEditedByMe")],selectedIndex:i,onChange:this.handleTabChange}),(0,re.jsx)("div",{style:{margin:e.isMobile?0:"10px 0"},children:this.renderSearchInput()})]})}renderSearchInput(){const{device:e}=this.environment;return(0,re.jsx)(z.ZP,{inputLeft:e.isMobile?(0,re.jsx)(R.Z,{show:this.stores.requestStore.state.loading,showDelay:500,showHold:200,render:e=>e?(0,re.jsx)(G.Z,{style:ue(this.theme)}):(0,M.R)(ue(this.theme))}):void 0,style:{...e.isAndroid&&{borderBottom:"none"}},showClearButton:!0,placeholder:L.default.formatMessage(ae.filterByPlaceholder),focus:!e.isMobile||void 0,value:g.Z.state.filter,onChange:pe})}renderPages(){if(!H.Z.state.online)return(0,re.jsx)(ee.Z,{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,re.jsx)(q.Z,{icon:I.i,title:(0,re.jsx)(c.FormattedMessage,{defaultMessage:"You're offline",id:"sidebarTrash.goOnline.title"}),description:(0,re.jsx)(c.FormattedMessage,{defaultMessage:"Please go online to view the Trash",id:"sidebarTrash.goOnline.description"})})});{const{filter:e,limit:t,currentTab:i}=g.Z.state,o=`${e}:${t}${i}`;return(0,re.jsx)(P.Z,{requestStore:this.stores.requestStore,request:o,performRequest:e=>async function(e,t){const{currentSpaceStore:i,mainEditorCurrentBlockStore:o,currentUserStore:n}=b.default.state;if(!i||!o||!n)return;const{limit:s,filter:r,currentTab:a}=g.Z.state;let l,c;if("in_current_page"===a)if(o.isCollectionView()){if(!o.isDefined())return;const e=o.getCollectionPointer();if(!e)return;c=e.id}else c=o.id;else"last_edited_by_me"===a&&(l=n.id);const d=await N.deps.searchActions.loader();return await d.searchTrashPages({environment:t,query:r,limit:s,ancestorId:c,spaceId:i.id,editedById:l})}(0,this.environment),render:this.renderTrashPages,debounce:O.vp})}}changeTab(e){g.Z.setState({...g.Z.state,currentTab:e,limit:g.Z.startLimit}),this.stores.requestStore.setState({...this.stores.requestStore.state,result:null}),d.vqh(this.environment,{tab:e})}}function ce(){return(0,re.jsx)(ee.Z,{topBorder:!0,disableDesktopPadding:!1,children:(0,re.jsx)(oe.Z,{title:(0,re.jsx)(c.FormattedMessage,{defaultMessage:"Learn about deleting and restoring pages",id:"sidebarTrash.learnMore.prompt"}),href:(0,V.UY)("guides.trash"),analyticsFrom:"trash"})})}function de(){return(0,re.jsx)(ne.Z,{href:(0,V.UY)("guides.trash"),analyticsFrom:"trash"})}function ue(e){return{width:14,height:14,flexGrow:0,flexShrink:0,color:e.lightIconColor}}le.displayName="SidebarTrash",le.tabs=["all_pages","in_current_page","last_edited_by_me"];const he=(0,c.injectIntl)(le);function pe(e){g.Z.setState({...g.Z.state,filter:e.target.value,limit:g.Z.startLimit})}class me extends n.Z{constructor(){super(...arguments),this.renderOrigin=e=>{const{onClick:t,...i}=(0,p.Z)(e,{onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave});return(0,re.jsx)(y.Z,{store:this.clonedStore,canDropOnto:!0,onSelectableDrop:this.handleDrop,analyticsName:"sidebar_trash",shouldShowDropZone:!0,children:(0,re.jsx)(v.Z,{...i,style:this.props.buttonStyle,onClick:t||this.handleClick,mobileFeedback:this.props.isMobile,children:(0,re.jsx)(S.Z,{left:(0,re.jsx)(ve,{}),style:{...m.Z.state.open&&{background:this.theme.buttonHoveredBackground}},disableMobileBorder:!0,children:(0,re.jsx)(c.FormattedMessage,{defaultMessage:"Trash",id:"sidebarTrashButton.text"})})})})},this.handleClick=e=>{g.Z.setState({...g.Z.state,currentTab:"all_pages"}),d.YFJ(this.environment)},this.handleDrop=e=>{const{droppedStores:t,duplicate:i}=e;i||h.createAndCommit({userAction:"SidebarTrashButton.handleDrop",environment:this.environment,perform:e=>{u.Cl({environment:this.environment,blocks:t,transaction:e})}})}}UNSAFE_willMount(e){super.UNSAFE_willMount(e),this.clonedStore=e.store.clone()}renderComponent(){const{device:e,mobileNative:t}=this.environment,i=(null==t?void 0:t.supportsNativeHomeOnPhone())||!1;return(0,re.jsx)(f.ZP,{popupType:e.isMobile?f.Z4.SlideUp:f.Z4.Popup,hidesMobileNativeBottomBar:i,preventSlideUpTransition:i,buttonPopupStore:m.Z,alignmentToOrigin:f.vR.Start,placementToOrigin:f.pO.Right,originGap:0,onClick:this.handleClick,isFullWidthOnMobile:!0,render:()=>(0,re.jsx)(be,{}),preventScaleTransition:!0,renderOrigin:this.renderOrigin})}}me.displayName="SidebarTrashButton";const ge=me;function be(){window.__c={n:"SidebarTrashComponent"};const{currentSpaceStore:e}=(0,r.VK)((()=>b.default.state),[]);return e?(0,re.jsx)(he,{spaceStore:e}):null}function ve(){window.__c={n:"IconComponent"};const e=(0,a.Fg)(),t=(0,s.O7)(),{device:i}=t,o=e.mediumIconColor;return i.isMobile?(0,l.w)({fill:o,height:16}):(0,l.w)({fill:o,width:14})}},40698:(e,t,i)=>{i.d(t,{Im:()=>F,K0:()=>B,b6:()=>V,dQ:()=>A,pd:()=>Z,re:()=>j,ss:()=>R});i(57658);var o=i(15145),n=i(35013),s=i(21321),r=i(69628),a=i(17948),l=i(42696),c=i(10405),d=i(82356),u=i(54855),h=i(46783),p=i(73426),m=i(4615),g=i(68939),b=i(50906),v=i(75018),f=i(59389),y=i(39699),S=i(68821),C=i(33929),x=i(89014),M=i(47593),k=i(67940),T=i(92083),w=i(29949);const I=(0,g.defineMessages)({emptyWithIcon:{defaultMessage:"Empty page with icon",id:"templatePickerHelpers.basicTemplateItems.emptyWithIcon"},empty:{defaultMessage:"Empty page",id:"templatePickerHelpers.basicTemplateItems.empty"},templates:{defaultMessage:"Templates",id:"templatePickerHelpers.basicTemplateItems.templates"},import:{defaultMessage:"Import",id:"templatePickerHelpers.basicTemplateItems.import"}}),A={name:C.default.formatMessage(I.empty),iconFn:u.a,type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{y.createAndCommit({userAction:"templatePickerHelpers.emptyTemplateItems",environment:e,perform:i=>{f.eV({environment:e,store:t,transaction:i})}})}},j={name:C.default.formatMessage(I.templates),type:"templates",iconFn:e=>(0,p.i)(e),shouldShow:()=>!0,onClick:()=>{w.Z.open({cloneTo:"current_page",analyticsFrom:"newPage"})}},B={name:C.default.formatMessage(I.templates),type:"templates",iconFn:e=>(0,h.w)(e),shouldShow:()=>!0,onClick:()=>{w.Z.open({cloneTo:"current_page",analyticsFrom:"newPage"})}},Z={name:C.default.formatMessage(I.import),type:"import",iconFn:d.l,shouldShow:()=>!0,onClick:(e,t)=>{const i=(0,m.ZP)();k.Z.setState({flowId:i}),b.Syn(e,{from:"new_page",flowId:i}),(0,S.c)()?T.Z.setState({...T.Z.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0}):M.Z.setState({open:!0,pageStore:t})}},P=(0,g.defineMessages)({pageWithIcon:{defaultMessage:"Page with icon",id:"templatePickerHelpers.mobileBasicTemplateItems.pageWithIcon"},emptyPage:{defaultMessage:"Empty page",id:"templatePickerHelpers.mobileBasicTemplateItems.emptyPage"}}),R=[{name:C.default.formatMessage(P.pageWithIcon),type:"page_with_icon",shouldShow:()=>!0,onClick:(e,t)=>{y.createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,perform:i=>{f.T_({environment:e,store:t,transaction:i})}})}},{name:C.default.formatMessage(P.emptyPage),type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{y.createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,perform:i=>{f.eV({environment:e,store:t,transaction:i})}})}}],_=(0,g.defineMessages)({table:{defaultMessage:"Table",id:"templatePickerHelpers.databaseTemplateNames.table"},board:{defaultMessage:"Board",id:"templatePickerHelpers.databaseTemplateNames.board"},list:{defaultMessage:"List",id:"templatePickerHelpers.databaseTemplateNames.list"},calendar:{defaultMessage:"Calendar",id:"templatePickerHelpers.databaseTemplateNames.calendar"},gallery:{defaultMessage:"Gallery",id:"templatePickerHelpers.databaseTemplateNames.gallery"},timeline:{defaultMessage:"Timeline",id:"templatePickerHelpers.databaseTemplateNames.timeline"},tableView:{defaultMessage:"Table view",id:"templatePickerHelpers.databaseTemplateNames.tableView"},boardView:{defaultMessage:"Board view",id:"templatePickerHelpers.databaseTemplateNames.boardView"},listView:{defaultMessage:"List view",id:"templatePickerHelpers.databaseTemplateNames.listView"},calendarView:{defaultMessage:"Calendar view",id:"templatePickerHelpers.databaseTemplateNames.calendarView"},galleryView:{defaultMessage:"Gallery view",id:"templatePickerHelpers.databaseTemplateNames.galleryView"},timelineView:{defaultMessage:"Timeline view",id:"templatePickerHelpers.databaseTemplateNames.timelineView"}});function L(e){const{environment:t,store:i,viewType:n}=e;y.createAndCommit({userAction:"templatePickerHelpers.handleClickForViewType",environment:t,perform:e=>{f.Ud({environment:t,store:i,viewType:n,transaction:e}),v.navigateToBlock({environment:t,store:i,pageVisitSource:o.tY.LinkInPage});const s=i.getCollectionViewStores()[0];s&&(0,x.u)(s.id,{viewType:n})}})}const F=[{name:C.default.formatMessage(_.table),type:"table",iconFn:l.t,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>L({environment:e,store:t,viewType:"table"})},{name:C.default.formatMessage(_.board),type:"board",iconFn:n.i,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>L({environment:e,store:t,viewType:"board"})},{name:C.default.formatMessage(_.list),type:"list",iconFn:a.O,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>L({environment:e,store:t,viewType:"list"})},{name:C.default.formatMessage(_.timeline),type:"timeline",iconFn:c._,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>L({environment:e,store:t,viewType:"timeline"})},{name:C.default.formatMessage(_.calendar),type:"calendar",iconFn:s.N,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>L({environment:e,store:t,viewType:"calendar"})},{name:C.default.formatMessage(_.gallery),type:"gallery",iconFn:r.n,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>L({environment:e,store:t,viewType:"gallery"})}];function V(e,t){const i=new Map(e.map((e=>[e.type,e])));return t.reduce(((e,t)=>(i.has(t)&&e.push(i.get(t)),e)),[])}},34574:(e,t,i)=>{i.d(t,{Z:()=>g});i(67294);var o=i(83355),n=i(24405),s=i(49271),r=i(8848),a=i(53523),l=i(82990),c=i(68939),d=i(19124),u=i(64921),h=i(52275),p=i(85893);class m extends o.Z{constructor(){super(...arguments),this.completionsEnabledStore=this.createComputedStore((()=>{var e;const t=null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state;return(0,d.GD)(t)}))}renderComponent(){return"collection-overlay"===this.props.format?this.renderCollectionOverlayMenuItem():"phone-modal"===this.props.format?this.renderPhoneModalMenuItem():this.renderPageMenuItem()}renderCollectionOverlayMenuItem(){const{device:e}=this.environment;return(0,p.jsx)(h.Z,{className:this.props.className,icon:this.props.icon,title:(0,p.jsx)(b,{format:this.props.format,title:this.props.title,isDefault:this.props.isDefault,recurrence:this.props.recurrence}),right:this.props.right,focused:this.props.focused,onClick:this.props.onClick,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,showDragHandle:!e.isMobile&&!this.props.locked,dragHandleDisabled:"empty_page"===this.props.type})}renderPhoneModalMenuItem(){return(0,p.jsx)(h.Z,{icon:this.props.icon,title:(0,p.jsx)(b,{format:this.props.format,title:this.props.title,isDefault:this.props.isDefault,recurrence:this.props.recurrence}),focused:this.props.focused,onClick:this.props.onClick,showDragHandle:!1})}renderPageMenuItem(){return(0,p.jsxs)(u.Z,{style:this.getWrapStyle(),hovered:this.props.focused,onClick:this.props.onClick,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,hoveredStyle:{background:this.theme.buttonHoveredBackground,color:this.theme.regularTextColor},pressedStyle:{background:this.theme.buttonPressedBackground},children:[(0,p.jsx)("div",{style:{display:"flex",alignItems:"center",width:24,height:24,marginRight:10},children:this.props.icon}),(0,p.jsx)(b,{format:this.props.format,title:this.props.title,isDefault:this.props.isDefault,recurrence:this.props.recurrence}),this.props.right&&(0,p.jsx)("div",{style:{marginLeft:"auto",marginRight:4},children:this.props.right})]})}getWrapStyle(){const{device:e}=this.environment;return{...s.ZD,display:"flex",alignItems:"center",flexGrow:1,height:e.isMobile?36:32,fontSize:16,borderRadius:4,paddingLeft:8,marginBottom:2,color:this.completionsEnabledStore.state?this.theme.mediumTextColor:this.theme.lightTextColor}}}m.displayName="TemplatePickerMenuItem";const g=m;function b(e){let{format:t,title:i,isDefault:o,recurrence:s}=e;window.__c={n:"TitleComponent"};const d=(0,n.Fg)();return"collection-overlay"!==t?(0,p.jsx)(p.Fragment,{children:i}):(0,p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i,(0,p.jsxs)("span",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o&&(0,p.jsx)("span",{style:{fontSize:12,fontWeight:l.Z.fontWeight.medium,color:d.mediumTextColor},children:(0,p.jsx)(c.FormattedMessage,{defaultMessage:"DEFAULT",id:"database.templatePickerMenuItem.default"})}),s&&(0,a.N)({width:14,color:r.ZP.blue,marginLeft:8})]})]})}},90665:(e,t,i)=>{i.r(t),i.d(t,{default:()=>qe});i(57658);var o=i(67294),n=i(83355),s=i(1302),r=i(480),a=i(86628),l=i(24405),c=i(27328),d=i(99747),u=i(15145),h=i(8848),p=i(42853),m=i(63261),g=i(14198),b=i(6568),v=i(35840),f=i(89101),y=i(21202),S=i(82990),C=i(51454),x=i(68939),M=i(50906),k=i(11302),T=i(75018),w=i(87531),I=i(24677),A=i(29974),j=i(98104),B=i(39699),Z=i(39865),P=i(3043),R=i(7476),_=i(34047),L=i(53971),F=i(28020),V=i(43250),N=i(87279),O=i(67669),D=i(58239),H=i(18514),E=i(38755),U=i(11540),q=i(77907),W=i(34826),z=i(73742),G=i(94841),K=i(57345),Q=i(74948),$=i(24646),Y=i(38676),J=i(21853),X=i(4023),ee=i(5162),te=i(80444),ie=i(92547),oe=i(69454),ne=i(42330),se=i(30496),re=i(26136),ae=i(24666),le=i(52258),ce=i(66708),de=i(91754),ue=i(64921),he=i(31945),pe=i(61519),me=i(73063),ge=i(78140),be=i(40721),ve=i(89728),fe=i(53437),ye=i(31278),Se=i(76798),Ce=i(45653),xe=i(39849),Me=i(84178),ke=i(81258),Te=i(84708),we=i(61208),Ie=i(85893);function Ae(){window.__c={n:"MobileUpdatesModalPageTab"};const e=(0,o.useCallback)((()=>(0,Ie.jsx)(we.Z,{message:(0,Ie.jsx)(x.FormattedMessage,{defaultMessage:"Any changes to this page will show up here.",id:"updatesModal.currentPageTab.emptyPrompt"}),title:(0,Ie.jsx)(x.FormattedMessage,{defaultMessage:"No page updates",id:"updatesModal.currentPageTab.emptyPromptTitle"})})),[]),t=(0,a.VK)((()=>te.default.state.currentSpaceStore),[]),i=(0,a.VK)((()=>te.default.state.mainEditorCurrentBlockStore),[]),n=(0,a.VK)((()=>{var e;const t=null==i||null===(e=i.getCollectionPointer())||void 0===e?void 0:e.id,o=null==i?void 0:i.isCollectionView();return null!=i&&i.isDefined()?{id:i.id,isCollection:o,collectionId:t}:void 0}),[i]);return t&&n&&i?(0,Ie.jsxs)("div",{children:[(0,Ie.jsx)(Me.GetNotifiedFor,{navigableBlock:i,from:"page_updates",buttonPopupStore:ke.Z}),(0,Ie.jsx)(Te.Z,{navigableBlock:i,collectionId:n.collectionId,spaceId:t.id,empty:e,source:"updates_sidebar"},"current-page")]}):null}var je=i(92955),Be=i(22789),Ze=i(13612),Pe=i(31156),Re=i(36997),_e=i(94686),Le=i(17169),Fe=i(96677),Ve=i(10137),Ne=i(67485),Oe=i(12253),De=i(19368),He=i(23727),Ee=i(35767);class Ue extends n.Z{constructor(){super(...arguments),this.handleClickBuiltWithNotionCtaToProductPage=async()=>{await(0,Pe.i3)({environment:this.environment,route:f._j.product})},this.handleClickBuiltWithNotionCtaToSignupPage=async()=>{await(0,Pe.i3)({environment:this.environment,route:f._j.signup})},this.isMyTasks=this.createComputedStore((()=>(0,F.qG)(this.props.store.id))),this.hasUnreadCommentsStore=this.createComputedStore((()=>(0,_.DF)({blockStore:this.props.store,currentUserId:this.environment.currentUser.id}).some((e=>!e.getResolved()&&(0,_.NI)(e).some((t=>R.t({discussionStore:e,commentStore:t})))))),!1),this.handleOpenQuickFind=()=>{w.UT({environment:this.environment,analyticsFrom:"public-page-topbar"})},this.handleTopbarClick=()=>{I.ZH(this.environment)},this.handleUpdatesClick=()=>{se.Z.setState({open:!0}),M.gMH(this.environment)},this.handleAddToClick=async()=>{await k.$X({environment:this.environment,blocks:[this.props.store],moveToContext:"quick_add",onAccept:this.handleAddToAccept,isAddTo:!0,isDefaultPrivateLocation:ze(this.props.store)})},this.handleAddToAccept=e=>{const{currentSpaceStore:t}=te.default.state;t&&this.props.saveParent&&(0,D.rq)({currentUserId:this.environment.currentUser.id,spaceId:t.id,value:e}),M.xx2(this.environment)},this.handleCancelQuickAdd=e=>{const t=te.default.state.mainEditorCurrentBlockStore,i=ne.ZP.state.lastPageId;if(t){var o;const e=null===(o=this.environment.mobileNative)||void 0===o?void 0:o.supportsNativeHomeOnPhone();e?T.navigateToHomeTab(this.environment):i?T.navigateToBlock({environment:this.environment,store:re.G.createChildStore(t,{table:y.iU,id:i}),showMoveTo:!1,saveParent:!1,redirect:e,pageVisitSource:u.tY.BackForward}):T.navigate({environment:this.environment,url:f._j.root,redirect:!0}),B.createAndCommit({userAction:"TopbarMobile.handleCancelQuickAdd",environment:this.environment,perform:e=>{Z.y8({environment:this.environment,blocks:[t],transaction:e}),e.postSubmitCallbacks.push((e=>{e||M.dhV(this.environment,{analyticsName:"delete",from:"mobile_topbar",block_id:t.id,block_type:"page"})}))}})}}}renderComponent(){const{store:e}=this.props,{WindowSizeStore:t,device:i}=this.environment,o=(0,O.IJ)(this.environment,this.props.store),n=new ie.Z,s=(e.isLocked()||n.state.justUnlocked)&&e.canEdit(),r=(!o||e.canEditCollection())&&i.isPhone&&(e.isRestricted()||s);return(0,Ie.jsx)(L.Z,{capture:!0,render:i=>(0,Ie.jsxs)("header",{...i,style:{width:"100%",maxWidth:"100vw",zIndex:C.lI},children:[o?this.renderPublicPageTopbar():this.renderNormalTopbar(),r&&(0,Ie.jsxs)(de.Z,{styleKey:de.v.White,isMobile:!0,style:{justifyContent:"unset"},children:[(0,Ie.jsx)(Be.Z,{store:this.props.store,isMobile:!0,lockStore:n},this.props.store.id),e.isRestricted()&&(0,Ie.jsxs)(Ie.Fragment,{children:[s&&(0,Ie.jsx)(pe.Z,{vertical:!0,size:10,style:{height:"50%"}}),(0,Ie.jsx)(Oe.Z,{style:{marginRight:8},onClick:()=>K.lG(this.environment)})]})]}),this.props.isOffline&&(0,Ie.jsx)(de.Z,{styleKey:de.v.White,isMobile:!0,children:(0,Ie.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%",paddingLeft:t.getSafePaddingLeftCSS(10),paddingRight:t.getSafePaddingRightCSS(14)},children:[(0,g.K)({width:26,marginRight:12}),(0,Ie.jsx)("div",{children:(0,Ie.jsx)(x.FormattedMessage,{defaultMessage:"You're offline",id:"topbarMobile.offline.message"})})]})}),(0,Ie.jsx)(q.LazyBannersRenderer,{banners:this.props.banners,isMobile:!0,isInPeekRenderer:!1})]})})}renderPublicPageTopbar(){const{store:e}=this.props,t=(0,U.R)(),i="control"!==t;return(0,Ie.jsxs)("div",{onClick:this.handleTopbarClick,style:tt(this.props.shouldShowAddTo,this.environment,this.theme),className:V.ZHw,children:[this.environment.currentUser.isLoggedIn()&&(0,Ie.jsxs)(o.Fragment,{children:[(0,Ie.jsx)(ue.Z,{style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:14,paddingRight:14,fontWeight:S.Z.fontWeight.medium,color:this.theme.regularTextColor,whiteSpace:"nowrap"},mobileFeedback:!0,onClick:()=>function(e){const{currentUserRootStore:t,currentUserSettingsStore:i}=te.default.state;t&&i&&A.L5({environment:e,userRootStore:t,userSettingsStore:i,pageVisitSource:u.tY.SwitchSpace})}(this.environment),children:(0,Ie.jsx)(x.FormattedMessage,{defaultMessage:"Back",id:"topbarMobile.backButton.label"})}),(0,Ie.jsx)("div",{style:{height:18,width:1,flexShrink:0,marginRight:6,background:this.theme.darkDividerColor}})]}),(0,Ie.jsx)(P.l2,{store:this.props.store,style:Je(this.environment),maxAncestorCount:1,showCurrentPageControls:!1,ancestorMaxWidth:100,currentPageMaxWidth:220,isMobile:!0}),(0,Ie.jsx)("div",{style:{flexGrow:1,flexShrink:1}}),(0,Ie.jsx)(ve.Z,{onClick:this.handleOpenQuickFind,children:(0,v.R)({width:20,height:20})}),(0,Ie.jsx)(Ze.Z,{store:e,buttonPopupStore:le.Z,useEllipsisIcon:i}),i&&(0,Ie.jsx)(Pe.C,{onClick:"on_marketing"===t?this.handleClickBuiltWithNotionCtaToProductPage:this.handleClickBuiltWithNotionCtaToSignupPage})]})}renderNormalTopbar(){const{store:e,pageVisitStore:t,presenceStore:i,hideActionButtons:o}=this.props,{device:n}=this.environment,{isTablet:s}=n,r=this.props.isInvalidPage,a=Ye(this.environment),l=(0,G.WE)(e);let c=this.renderRightButtons();!function(e,t){return e&&function(e){return e.isEmptyTitle()&&e.isEmptyPage()}(t)}(this.props.shouldShowAddTo,this.props.store)?this.isMyTasks.state&&(c=(0,Ie.jsx)(Ge,{store:this.props.store,spaceViewStore:this.props.spaceViewStore,isInvalidPage:this.props.isInvalidPage})):c=this.renderCancelQuickAdd();const d=l?(0,Ie.jsx)(W.E,{isInvalidPage:Boolean(r)}):(0,Ie.jsxs)(Ie.Fragment,{children:[e.isRestricted()&&s&&(0,Ie.jsx)(Oe.Z,{style:{marginRight:8},onClick:()=>K.lG(this.environment)}),s&&e.canEdit()&&t&&i&&(0,Ie.jsx)(Ne.Z,{rootStore:e,pageVisitStore:t,presenceStore:i}),c]});return(0,Ie.jsxs)("div",{onClick:this.handleTopbarClick,style:tt(this.props.shouldShowAddTo,this.environment,this.theme),className:V.ZHw,children:[(u=this.environment,($e(u)||!(0,ee.Y)("supportsNativeHome"))&&(0,Ie.jsx)(Xe,{})),a&&(0,Ie.jsx)(_e.Z,{supportsNativeHomeTabPhone:!s&&(0,ee.Y)("supportsNativeHome")}),!r&&this.renderBreadcrumbs(a),e.canEditCollection()&&s&&(0,Ie.jsx)(Be.Z,{store:e,isMobile:!1},e.id),(0,Ie.jsx)(Le.Z,{}),!o&&d]});var u}renderBreadcrumbs(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{isTablet:t}=this.environment.device;return this.props.shouldShowAddTo?this.renderAddTo():(0,Ie.jsx)(P.l2,{store:this.props.store,style:Je(this.environment,e),maxAncestorCount:t?2:1,showCurrentPageControls:!1,ancestorMaxWidth:t?160:100,currentPageMaxWidth:t?240:220,isMobile:!0})}renderAddTo(){const{store:e}=this.props,t=e.getParentStore(),i=ze(this.props.store);if(!(t instanceof re.T5||t instanceof re.zq||t instanceof re.Vf)&&t){if(i){const e=this.theme.mediumTextColor;return(0,Ie.jsxs)(ue.Z,{mobileFeedback:!0,style:et(this.environment),onClick:this.handleAddToClick,children:[(0,Ie.jsx)(x.FormattedMessage,{defaultMessage:"<mediumcolor>Add to</mediumcolor>{userAvatar}<mediumweight>Private pages</mediumweight>",id:"topbarMobile.addToPrivateSectionButton.label",values:{mediumcolor:t=>(0,Ie.jsx)("span",{style:{color:e,marginRight:8},children:t}),mediumweight:e=>(0,Ie.jsx)("span",{style:{fontWeight:S.Z.fontWeight.medium,marginLeft:4},children:e}),userAvatar:(0,Ie.jsx)(Ce.Z,{size:22,avatarShouldShowShadow:!0,userStore:(0,F.B7)(this.environment)})}}),(0,Ie.jsx)(it,{})]})}{const i=e instanceof re.H2?(0,E.Wd)(this.environment,e):e.getIcon();return(0,Ie.jsxs)(ue.Z,{mobileFeedback:!0,style:et(this.environment),onClick:this.handleAddToClick,children:[(0,Ie.jsxs)("span",{style:{color:this.theme.mediumTextColor},children:[(0,Ie.jsx)(x.FormattedMessage,{defaultMessage:"Add to",id:"topbarMobile.addToPageOrWorkspaceSectionButton.label"})," "]}),(0,Ie.jsx)(ye.Z,{disabled:!0,icon:i,isEmptyPage:t.table===y.iU&&t.isEmptyPage(),title:t instanceof re.H2?(0,E.rn)(this.environment,t):void 0,size:24,style:{marginLeft:8,marginRight:4}}),(0,Ie.jsx)(Se.Z,{style:{fontWeight:S.Z.fontWeight.semibold},store:t}),(0,Ie.jsx)(it,{})]})}}}renderRightButtons(){const{store:e,spaceStore:t,isInvalidPage:i}=this.props;if(i)return;const n=Boolean(t&&!t.canEdit()),s=e.canEdit(),r=(0,Re.UP)({isSpaceGuest:n,canEditPage:s}),a=(0,Re.W2)({canEditPage:s,device:this.environment.device});return(0,Ie.jsxs)(o.Fragment,{children:[(0,Ie.jsx)(We,{}),r&&(0,Ie.jsx)(Qe,{store:this.props.store}),this.renderCommentsButton(),a&&(0,Ie.jsx)(He.l,{onClick:this.handleUpdatesClick}),(0,Ie.jsx)(Ke,{store:this.props.store,collectionViewStore:this.props.collectionViewStore})]})}renderCancelQuickAdd(){return(0,Ie.jsx)(ue.Z,{mobileFeedback:!0,style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:16,paddingRight:16,fontWeight:S.Z.fontWeight.medium,color:h.ZP.blue},onClick:this.handleCancelQuickAdd,children:(0,Ie.jsx)(x.FormattedMessage,{defaultMessage:"Cancel",id:"topbarMobile.cancelQuickAddButton.label"})})}renderCommentsButton(){return(0,Ie.jsx)(he.ZP,{buttonPopupStore:J.Z,popupType:he.Z4.SlideUp,alignmentToOrigin:X.v.Start,placementToOrigin:X.u.Right,originGap:0,stopClickPropagation:!0,isWideTabletWidth:!0,render:e=>(0,Ie.jsx)(ge.Z,{menuType:N.og.Modal,scrollerStyle:{paddingBottom:0},title:(0,Ie.jsx)(x.FormattedMessage,{defaultMessage:"Comments",id:"topbarMobile.commentsMenu.title"}),right:(0,Ie.jsx)(be.DoneMenuText,{}),onClickRight:e.close,children:(0,Ie.jsx)(Ee.J,{timeMounted:Date.now(),location:"popup"})}),isFullWidthOnMobile:!0,preventScaleTransition:!0,renderOrigin:e=>(0,Ie.jsxs)("div",{style:{position:"relative",height:"100%"},children:[(0,Ie.jsx)(me.Z,{icon:b.a,iconStyle:{width:26,height:26,fill:"inherit"},isDarkIconColor:!0,style:{marginLeft:6,marginRight:6,height:"100%"},mobileFeedback:!0,...e}),this.hasUnreadCommentsStore.state&&(0,Ie.jsx)("div",{style:{position:"absolute",top:9,right:5,height:8,width:8,borderRadius:4,background:h.ZP.red}})]})})}}Ue.displayName="TopbarMobile";const qe=Ue;function We(){window.__c={n:"PageUpdatesPopupOrigin"};const e={menuType:N.og.Modal,title:(0,Ie.jsx)(x.FormattedMessage,{defaultMessage:"Page Updates",id:"pageUpdatesModal.mobileMenu.title"}),right:(0,Ie.jsx)(be.DoneMenuText,{}),onClickRight:()=>se.Z.setState({open:!1}),whiteBackground:!0},t=(0,a.VK)((()=>se.Z.state.open),[]);return(0,Ie.jsx)(fe.ZP,{open:t,popupType:he.Z4.SlideUp,alignmentToOrigin:X.v.Start,placementToOrigin:X.u.Right,onDismiss:()=>se.Z.setState({open:!1}),originGap:0,isWideTabletWidth:!0,render:()=>(0,Ie.jsx)(ge.Z,{...e,children:(0,Ie.jsx)(Ae,{})}),isFullWidthOnMobile:!0,preventScaleTransition:!0})}function ze(e){const t=e.getParentStore(),{currentSpaceStore:i}=te.default.state;return t instanceof re.H2&&i&&t.id===i.id}function Ge(e){let{store:t,spaceViewStore:i,isInvalidPage:o}=e;return o||!i?null:(0,Ie.jsxs)(Ie.Fragment,{children:[(0,Ie.jsx)(Fe.Z,{store:t,spaceViewStore:i}),(0,Ie.jsx)(z.Z,{})]})}function Ke(e){let{store:t,collectionViewStore:i}=e;return(0,Ie.jsx)(Ve.Z,{store:t,collectionViewStore:i,buttonPopupStore:le.Z})}function Qe(e){let{store:t}=e;return(0,Ie.jsx)(De.Z,{store:t,buttonPopupStore:ce.Z})}function $e(e){return(0,ee.Y)("supportsNativeHome")&&e.device.isTablet}function Ye(e){const{TabbedRouterStore:t}=e,i=(0,H.NW)(e)||"native"===(0,c.w_)(t.state).type;return!(0,H.__)(e)||i}function Je(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{mobileNative:i,device:o}=e,{isTablet:n}=o;return{flexGrow:0,marginLeft:null!=i&&i.supportsNativeHomeOnPhone()?t?0:20:2,overflow:"auto",WebkitOverflowScrolling:"touch",marginRight:n?16:8,height:"100%"}}function Xe(){window.__c={n:"HamburgerButton"};const e=(0,r.O7)();return(0,Ie.jsxs)(ue.Z,{mobileFeedback:!0,style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,height:"100%",width:36,marginLeft:4},onClick:()=>{var t;if($e(e))null===(t=e.mobileNative)||void 0===t||t.toggleNativeHome();else if((0,$.Jr)(e))Q.setExpand({environment:e,isExpanded:!Y.sidebarExpandedStore.state,from:"topbar_mobile"});else{const{NativeMobileActionBarStore:t}=e,i=t?t.state.menuType:null;"editing"===ae.default.state.mode||null!==i?(j.ZH(e),null==t||t.clear(!1),oe.Z.onHide((()=>{s.default.afterNextFlush((()=>Q.open()))}))):Q.open()}M.jDo(e)},children:[(0,m._)({width:18,height:18}),(0,Ie.jsx)(je.Z,{type:e.device.isMobileBrowser?"allSpaces":"otherSpaces",color:xe.Z.Color.Red,style:{position:"absolute",top:9,right:1}})]})}function et(e){let t=0;return t=$e(e)?8:Ye(e)?6:16,{display:"flex",alignItems:"center",paddingLeft:t,paddingRight:12,fontSize:S.Z.fontSize.UIRegular.mobile,lineHeight:S.Z.lineHeight.UIRegular.mobile,whiteSpace:"nowrap",minWidth:0}}function tt(e,t,i){const{WindowSizeStore:o}=t;return{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100vw",height:d.g,marginTop:o.state.paddingTopCSS,paddingLeft:o.getSafePaddingLeftCSS(0),paddingRight:e?o.getSafePaddingRightCSS(0):o.getSafePaddingRightCSS(7),boxShadow:`0 1px 0 ${i.regularDividerColor}`,background:i.contentBackground,transition:"box-shadow 300ms",WebkitUserSelect:"none",cursor:"pointer"}}function it(){window.__c={n:"ChevronComponent"};const e=(0,l.Fg)();return(0,p.i)({marginLeft:4,width:10,fill:e.lightTextColor})}},24553:(e,t,i)=>{i.d(t,{Z:()=>k});var o=i(67294),n=i(480),s=i(6740),r=i(86628),a=i(24405),l=i(84169),c=i(68939),d=i(50906),u=i(4653),h=i(43250),p=i(98742),m=i(77907),g=i(475),b=i(16194),v=i(55031),f=i(64921),y=i(31945),S=i(26388),C=i(14694),x=i(85893);function M(e){window.__c={n:"HelpButtonOrigin"};const t=(0,n.O7)(),{isMobile:i}=t.device,d=(0,c.useIntl)(),u=(0,a.Fg)(),m=(0,r.VK)((()=>g.Z.state.open),[]),y=(0,a.yK)((e=>({helpIcon:{fill:e.mediumIconColor,width:16,height:16},hoveredStyle:{background:e.whiteButtonHoveredBackground},pressedStyle:{background:e.whiteButtonPressedBackground}})),[]),M=(0,o.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,s.E)(t)&&b.Z.setState(!0)}),[]),k=(0,o.useCallback)((()=>{b.Z.setState(!1)}),[]);if(i)return(0,x.jsx)(f.Z,{hovered:m,testId:h.lmr,mobileFeedback:i,...e,children:(0,x.jsx)(C.Z,{left:(0,l.m)(y.helpIcon),disableMobileBorder:!0,children:(0,x.jsx)(c.FormattedMessage,{defaultMessage:"Help & feedback",id:"helpButton.mobileHelpFeedbackButton.label"})})});const T=d.formatMessage({defaultMessage:"Help, feedback, and keyboard shortcuts",id:"helpButton.desktopHelpButton.ariaLabel"}),w=(0,p.Z)(e,{onFocus:M,onBlur:k});return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(S.Z,{renderTooltip:()=>(0,x.jsx)("span",{children:(0,x.jsx)(c.FormattedMessage,{defaultMessage:"Help, feedback, and {br}keyboard shortcuts",id:"helpButton.desktopHelpButton.tooltip",values:{br:(0,x.jsx)("br",{})}})}),render:e=>(0,x.jsx)(f.Z,{ariaLabel:T,className:h.lmr,testId:h.lmr,style:(0,v.y)(t,{theme:u,rightEdgeDistance:16,isInPeekRenderer:!1}),hoveredStyle:y.hoveredStyle,pressedStyle:y.pressedStyle,...(0,p.Z)(w,e),children:"?"})})})}const k=(0,c.injectIntl)((function(){window.__c={n:"HelpButton"};const e=(0,n.O7)(),{isMobile:t}=e.device,i=(0,r.VK)((()=>{var t;return(null===(t=e.mobileNative)||void 0===t?void 0:t.supportsNativeHomeOnPhone())||!1}),[e]),s=(0,o.useCallback)((()=>{d.Ar6(e,{from:"corner"}),u.i(e)}),[e]);return(0,x.jsx)(y.ZP,{popupType:t?y.Z4.SlideUp:y.Z4.Popup,hidesMobileNativeBottomBar:i,preventSlideUpTransition:i,renderOrigin:e=>(0,x.jsx)(M,{...e}),originGap:t?0:12,placementToOrigin:t?y.pO.Right:y.pO.Top,alignmentToOrigin:t?y.vR.Center:y.vR.End,buttonPopupStore:g.Z,onClick:s,render:()=>(0,x.jsx)(m.LazyHelpButtonContent,{shouldRenderAsStaticModal:i})})}))},67648:(e,t,i)=>{i.r(t),i.d(t,{default:()=>le});var o=i(67294),n=i(83355),s=i(68719),r=i(480),a=i(41432),l=i(8848),c=i(72126),d=i(97880),u=i(36054),h=i(74487);function p(e,t,i){const{content:o,apiRequestValue:n}=i;return{id:e,content:o,action:{type:t,apiRequestValue:n}}}const m=["insertBlock","turnInto","textColor","textSelectionColor"],g=["textFormatting"];function b(e,t){return{type:e,apiRequestValue:t}}function v(e,t,i){const o={type:e,from:i,data:t};return JSON.stringify(o)}const f={showActionBarMenu:h.object({required:{type:h.literal("showActionBarMenu"),data:h.object({required:{actionBarMenuId:h.literals("textColor","insertBlock","turnInto","template")},optional:{}})},optional:{}}),blockAction:h.object({required:{type:h.literals("blockAction"),data:h.object({required:{action:h.literals("bold","italic","underline","strikethrough","link","code","equation","mention","trash","comment","filePicker","indent","unindent","moveUp","moveDown","undo","redo","dismissKeyboard","more","ai","voiceInput")},optional:{}})},optional:{from:h.literals("mobile_action_bar","mobile_text_formatting_menu")}})},y=Object.keys(f);let S=function(e){return e[e.InvalidActionType=0]="InvalidActionType",e[e.MissingPayload=1]="MissingPayload",e[e.InvalidRequestType=2]="InvalidRequestType",e[e.InvalidData=3]="InvalidData",e}({});class C{constructor(e,t){this.type=e,this.message=t}}function x(e){return 0===e.reduce(((e,t)=>e+t.items.length),0)}var M=i(70203),k=i(68939),T=i(50906),w=i(44886),I=i(1892),A=i(24677),j=i(98104),B=i(72899),Z=i(81598),P=i(28020),R=i(19124),_=i(33929),L=i(51783),F=i(68056),V=i(45162),N=i(89086),O=i(35328);var D=i(77907),H=i(19361),E=i(41662),U=i(64359),q=i(80444),W=i(27724),z=i(24666),G=(i(57658),i(25666)),K=i(21797),Q=i(46225),$=i(11732),Y=i(95477),J=i(68204),X=i(47853);function ee(e){const{type:t,actionSections:i,closeParentMenu:o,context:n}=e,s={},r=[];for(const a of i){const e={id:`${a.key}`,title:a.title,items:a.actions.map((e=>{const i=`${e.key}-${e.displayName||""}`,r=e.nativeRender&&e.nativeRender(n),a=null!=r&&r.thumbnail?(0,X.D)(null==r?void 0:r.thumbnail):G.T;s[i]={...e,thumbnail:a,closeParentMenu:o};const l=/^https?:\/\//.test(a);return{id:i,title:e.displayName||"",icon:{...r,remoteImageUrl:a?`${l?"":Y.default.domainBaseUrl}${a}`:void 0,localAssetBundleImagePath:l?void 0:a},action:b("webAction_genericAction",{menuType:t,actionId:i}),checked:!1}}))};r.push(e)}return{actions:s,sections:r}}function te(e){const{key:t,displayName:i,thumbnail:o,analyticsName:n,closeParentMenu:s,action:r}=e,a=i;return{key:`action ${t}`,displayName:i?_.default.formatMessage(i):void 0,thumbnail:o,analyticsName:n||`textformatting_action_${t}`,searchName:a?`${_.default.formatMessage(a)} ${a.defaultMessage}`:void 0,validators:[],action:r,closeParentMenu:Boolean(s)}}const ie={bold:te({key:"bold",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.pk(t,["b"])}}),italic:te({key:"italic",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.pk(t,["i"])}}),underline:te({key:"underline",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.pk(t,["_"])}}),strikethrough:te({key:"strikethrough",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.pk(t,["s"])}}),code:te({key:"code",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.pk(t,["c"])}}),comment:te({key:"comment",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),L.ol(i,!0,"mobile_action_bar")}}),equation:te({key:"equation",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),L._W(i)}}),filePicker:te({key:"filePicker",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),L.vs(i)}}),indent:te({key:"indent",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.O2(t)}}),unindent:te({key:"unindent",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.$$(t)}}),moveDown:te({key:"moveDown",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.rZ(t)}}),moveUp:te({key:"moveUp",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.s0(t)}}),undo:te({key:"undo",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.i2(t)}}),redo:te({key:"redo",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.GH(t)}}),trash:te({key:"trash",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.fn(t)}}),mention:te({key:"mention",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),L.Z3(i)}}),ai:te({key:"ai",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),L.QG(i)}}),voiceInput:te({key:"voiceInput",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary());const o=H.Z.state;if(!o.isSupported)return;const n=z.default.state;(o.active||"editing"===n.mode)&&H.Z.toggleActiveState(!o.active)}}),link:te({key:"link",closeParentMenu:!0,action:async e=>{var t;let{environment:i}=e;await(null===(t=i.NativeMobileActionBarStore)||void 0===t?void 0:t.clearNativeActionMenuAndRestoreSelectionIfNecessary()),L.UF(i)}}),more:te({key:"more",closeParentMenu:!1,action:e=>{let{environment:t}=e;L.w1(t,void 0,void 0)}}),dismissKeyboard:te({key:"dismissKeyboard",closeParentMenu:!0,action:e=>{let{environment:t}=e}})};var oe=i(85893);const ne=(0,k.defineMessages)({templatesButtonTitle:{defaultMessage:"Choose a template...",id:"mobileActionBar.templateButtonTitle"},voiceInputListening:{defaultMessage:"Listening",id:"mobileActionBar.voiceInputListening"},voiceInputTyping:{defaultMessage:"Typing",id:"mobileActionBar.voiceInputTyping"},actionMenuInsertBlockTitle:{defaultMessage:"Insert Block",id:"mobileActionBar.actionMenuTitle.insertBlock"},actionMenuTurnIntoTitle:{defaultMessage:"Turn Into",id:"mobileActionBar.actionMenuTitle.turnInto"},actionMenuColorTitle:{defaultMessage:"Color",id:"mobileActionBar.actionMenuTitle.blockColor"},accessibilityInsert:{defaultMessage:"Add block",id:"mobileActionBar.accessibility.insertBlock"},accessibilityTurnInto:{defaultMessage:"Turn into block",id:"mobileActionBar.accessibility.turnInto"},accessibilityFilePicker:{defaultMessage:"Add image",id:"mobileActionBar.accessibility.filePicker"},accessibilityMention:{defaultMessage:"Add mention",id:"mobileActionBar.accessibility.mention"},accessibilityBlockColor:{defaultMessage:"Change block color",id:"mobileActionBar.accessibility.blockColor"},accessibilityTextFormatting:{defaultMessage:"Open text formatting menu",id:"mobileActionBar.accessibility.textFormatting"},accessibilityComment:{defaultMessage:"Add comment",id:"mobileActionBar.accessibility.comment"},accessibilityTrash:{defaultMessage:"Delete block",id:"mobileActionBar.accessibility.trash"},accessibilityIndent:{defaultMessage:"Indent block",id:"mobileActionBar.accessibility.indent"},accessibilityDedent:{defaultMessage:"Unindent block",id:"mobileActionBar.accessibility.unindent"},accessibilityMoveUp:{defaultMessage:"Move a block up",id:"mobileActionBar.accessibility.moveUp"},accessibilityMoveDown:{defaultMessage:"Move a block down",id:"mobileActionBar.accessibility.moveDown"},accessibilityUndo:{defaultMessage:"Undo edit",id:"mobileActionBar.accessibility.udno"},accessibilityRedo:{defaultMessage:"Redo edit",id:"mobileActionBar.accessibility.redo"},accessibilityMore:{defaultMessage:"More block actions",id:"mobileActionBar.accessibility.more"},accessibilityBold:{defaultMessage:"Bold",id:"mobileActionBar.accessibility.bold"},accessibilityItalics:{defaultMessage:"Italicize",id:"mobileActionBar.accessibility.italics"},accessibilityUnderline:{defaultMessage:"Underline",id:"mobileActionBar.accessibility.underline"},accessibilityStrikethrough:{defaultMessage:"Strikethrough",id:"mobileActionBar.accessibility.strikethrough"},accessibilityTextColor:{defaultMessage:"Text color",id:"mobileActionBar.accessibility.textColor"},accessibilityCode:{defaultMessage:"Code",id:"mobileActionBar.accessibility.code"},accessibilityLink:{defaultMessage:"Add link",id:"mobileActionBar.accessibility.link"},accessibilityEquation:{defaultMessage:"Add equation",id:"mobileActionBar.accessibility.equation"},accessibilityCloseTextFormattingMenu:{defaultMessage:"Close text formatting menu",id:"mobileActionBar.accessibility.close"},accessibilityDismissKeyboard:{defaultMessage:"End editing",id:"mobileActionBar.accessibility.endEditing"},accessibilityCloseActionMenu:{defaultMessage:"Close menu",id:"mobileActionBar.accessibility.closeMenu"},accessibilityAi:{defaultMessage:"AI Assist",id:"mobileActionBar.accessibility.ai"}}),se={text:!1,to_do:!0,bulleted_list:!0,numbered_list:!0,toggle:!0,column:!1,transclusion_container:!1,callout:!1,quote:!1};function re(e){var t;window.__c={n:"MobileActionBarBridgeComponent"};const{onAction:i,fallbackRenderer:n,...a}=e,l=null===(t=(0,r.O7)().mobileNative)||void 0===t?void 0:t.api.renderMobileActionBar,c=(0,s.e)(l,a);return function(e,t,i,n){var s;const a=null===(s=(0,r.O7)().mobileNative)||void 0===s?void 0:s.componentEvents;(0,o.useEffect)((()=>{if(a&&n&&t)return a.addListener(e,t,i,n)}),[e,t,i,n,a])}("MobileActionBar",c,"onAction",i),!c&&n?(0,oe.jsx)(oe.Fragment,{children:n()}):null}class ae extends n.Z{constructor(){super(...arguments),this.handleMobileActionBarBridgeEvent=e=>{const{action:t}=e;switch(t.type){case"nativeAction_hideKeyboard":break;case"nativeAction_setMenuType":!function(e,t){const i=function(e){if("nativeAction_setMenuType"!==e.type)return new C(S.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("menuType"in t))return new C(S.MissingPayload,void 0);const i=h.object({required:{menuType:h.literals(...m,null)},optional:{}}),o=(0,u.Gu)(i,t);return o?new C(S.InvalidRequestType,JSON.stringify(o)):t.menuType}(e);if(i instanceof C)return void console.error(JSON.stringify(i));if((t.NativeMobileActionBarStore?t.NativeMobileActionBarStore.state.menuType:null)===i)ce(null,!0,t);else switch(ce(i,!0,t),i){case"insertBlock":L.Oh(t,"insert");break;case"turnInto":L.Oh(t,"turn_into");break;case"textColor":L.Oh(t,"color","mobile_action_bar");break;case"textSelectionColor":L.Oh(t,"color","mobile_text_formatting_menu")}}(t,this.environment);break;case"nativeAction_setSubMenuType":!function(e,t){const i=function(e){if("nativeAction_setSubMenuType"!==e.type)return new C(S.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("subMenuType"in t))return new C(S.MissingPayload,void 0);const i=h.object({required:{subMenuType:h.literals(...g,null)},optional:{}}),o=(0,u.Gu)(i,t);return o?new C(S.InvalidRequestType,JSON.stringify(o)):t.subMenuType}(e);if(i instanceof C)return void console.error(JSON.stringify(i));de(i,!0,t)}(t,this.environment);break;case"webAction_generic":!function(e,t,i,o,n,s,r){const a=function(e){if("webAction_generic"!==e.type)return new C(S.InvalidActionType,void 0);const t=e.apiRequestValue;if(!t||!("jsonPayload"in t))return new C(S.MissingPayload,void 0);const i=JSON.parse(t.jsonPayload),o=h.object({required:{type:h.literals(...y)},optional:{}}),n=(0,u.Gu)(o,i);if(n)return new C(S.InvalidRequestType,JSON.stringify(n));const s=i,r=f[s.type],a=(0,u.Gu)(r,s);return a?new C(S.InvalidData,JSON.stringify(a)):s}(e);if(a instanceof C)return void console.error(JSON.stringify(a));switch(a.type){case"blockAction":if("dismissKeyboard"===a.data.action){!function(e,t){A.ZH(t),E.HM.clearSelection(),e.store.update((e=>({...e,isInsertOpen:!1}))),ce(null,!1,t),de(null,!1,t),L.Oh(t,"hide_keyboard"),j.sD()}(s,r);break}const e=ie[a.data.action];if(!e)break;const l=e.action;if(l){const{mainEditorCurrentBlockStore:s}=q.default.state;if(!s)break;const{device:a}=r;e.closeParentMenu&&!a.isTablet&&ce(null,!0,r),l({environment:r,blocks:[s],publicEditMode:void 0,lazyDependencies:{markdownLinkifyIt:t,tinyMceMicrosoftWordPasteFilter:i,ai:o,assistant:n}})}switch(a.data.action){case"comment":T.YOV(r,{itemName:"comment",from:a.from})}break;case"showActionBarMenu":switch(a.data.actionBarMenuId){case"insertBlock":!function(e,t){e.store.update((e=>({...e,isInsertOpen:!0}))),L.Oh(t,"insert")}(s,r);break;case"textColor":!function(e,t){e.store.update((e=>({...e,isColorOpen:!0}))),L.Oh(t,"color")}(s,r);break;case"turnInto":!function(e,t){e.store.update((e=>({...e,isTurnIntoOpen:!0}))),L.Oh(t,"turn_into")}(s,r);break;case"template":!function(e,t){A.ZH(t),j.sD(),e.store.update((e=>({...e,isTemplatesOpen:!0}))),L.Oh(t,"templates")}(s,r)}}}(t,this.props.markdownLinkifyIt,this.props.tinyMceMicrosoftWordPasteFilter,this.props.ai,this.props.assistant,this.props.stores,this.environment);break;case"webAction_genericAction":this.handleActionRegistryAction(t)}},this.handleTextSelectionCompositeStoreChanged=()=>{if(!this.textSelectionCompositeStore.state)return;const{source:e}=this.textSelectionCompositeStore.state,{NativeMobileActionBarStore:t,device:i}=this.environment;"TextSelectionStore"!==e||null===(null==t?void 0:t.state.menuType)||i.isTablet||ce(null,!0,this.environment)},this.handleTextSelectionStoreChanged=()=>{if(!this.textSelectionPositionsStore.state)return;const{NativeMobileActionBarStore:e}=this.environment;e&&e.state.isSubMenuOverridden&&de(null,!1,this.environment)},this.actionBarTextSelectionStore=this.createComputedStore((()=>{const e="editing"===z.default.state.mode&&z.default.state.multiSelection,t=this.props.stores.ignoreSelectionAreaStore.state.savedTextSelectionStoreState,i=t&&"editing"===t.mode&&t.multiSelection;return e||i||void 0}),!0),this.textSelectedBlocksStore=this.createComputedStore((()=>{var e;const t=this.actionBarTextSelectionStore.state;return t&&(null===(e=(0,V.tp)({multiSelection:t,focus:void 0,filterCommonAncestors:!1}))||void 0===e?void 0:e.stores)})),this.disableMentionCommentsStore=this.createComputedStore((()=>{const e=this.actionBarTextSelectionStore.state,t=Boolean(e&&(0,F.qS)(e)),i=this.props.currentBlockStore.getType();return{disableCommentAction:function(e,t){if(e&&(0,a._T)(e,t))return!0;return!1}(i,this.props.currentBlockStore.getFormat())||Boolean(this.renderStore.state.disableComment),disableLinkAction:!t,disableMentionAction:!t||function(e){if(e&&(0,a.lQ)(e))return!0;return!1}(i),disableEquationAction:!t}})),this.disableIndentStore=this.createComputedStore((()=>{const e=W.default.state.stores;return{disableIndent:!e.every(w.nt),disableUnindent:!e.every(w.gq)}})),this.disableUndoRedoStore=this.createComputedStore((()=>({disableUndo:!I.L0(),disableRedo:!I.AZ()}))),this.isEditingCurrentPageTitleStore=this.createComputedStore(P.JE),this.isEditingCollectionViewTitleStore=this.createComputedStore(P.VV),this.showTemplatesButtonStore=this.createComputedStore((()=>L.Tz({environment:this.environment,store:this.props.currentBlockStore}))),this.showVoiceInputButtonStore=this.createComputedStore((()=>{const e=H.Z.state;return e.isSupported&&e.active})),this.reactiveMemoizedNativeMenusStore=this.createComputedStore((()=>this.memoizedNativeMenus({blocks:W.default.state.stores,environment:this.environment}))),this.getCurrentActionBarSchema=this.createComputedStore(this.recomputeCurrentActionBarSchema.bind(this),!0,"getCurrentActionBarSchema"),this.buttonSectionsConfigStore=this.createComputedStore((()=>{var e;const{NativeMobileActionBarStore:t}=this.environment,i=Boolean(this.renderStore.state.disableStyleAnnotations),o=t?t.state.menuType:null;var n=null;const s=this.showTemplatesButtonStore.state,r=this.showVoiceInputButtonStore.state,a=!!t&&t.state.isSubMenuOverridden,l=this.shouldShowTextActions.state,c=t?t.state.subMenuType:null;a?n=c:l&&!i&&(n="textFormatting",null==t||t.update((e=>({...e,isSubMenuOverridden:!1,subMenuType:null}))));const d=!this.canTriggerTextActions.state,u=!this.canTriggerBlockActions.state,{disableCommentAction:h,disableLinkAction:p,disableMentionAction:m,disableEquationAction:g}=this.disableMentionCommentsStore.state,{disableIndent:b,disableUnindent:v}=this.disableIndentStore.state,f=this.isEditingCurrentPageTitleStore.state||this.isEditingCollectionViewTitleStore.state,{disableUndo:y,disableRedo:S}=this.disableUndoRedoStore.state,C=(0,R.GD)(null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state),M=U.Z.state.isActive,k=f||M,T=this.reactiveMemoizedNativeMenusStore.state;return{selectedSubMenu:n,createAIAction:C,disableAIAction:k,disableBlockActions:u,disableCommentAction:h,disableMentionAction:m,selectedMenuType:o,disableTextFormatting:i,disableTextColorAction:x(T.textColor.sections),disableDeleteBlock:f,disableInsertBlockAction:x(T.insertBlock.sections),disableTurnIntoAction:x(T.turnInto.sections),shouldShowTemplatesButton:s,shouldShowVoiceInputButton:r,disableIndent:b,disableUnindent:v,disableUndo:y,disableRedo:S,disableTextActions:d,isEditingTitle:f,disableLinkAction:p,disableEquationAction:g,shouldShowTextActions:!0===l}})),this.templateButtonSectionsStore=this.createComputedStore((()=>({id:"mab.buttonSection.template",buttons:[p("mab.button.choose_template","webAction_generic",{content:{type:"text_and_icon",imageReference:{localImageIdentifier:"template"},text:_.default.formatMessage(ne.templatesButtonTitle)},apiRequestValue:{jsonPayload:v("showActionBarMenu",{actionBarMenuId:"template"})}})]}))),this.voiceInputButtonSectionsStore=this.createComputedStore((()=>{const e=H.Z.state,t=e.isSupported&&e.active&&"listening"===e.stage,i=t?"ellipsis":"mic.fill",o=t?"ellipsis":"micFilled",n=t?ne.voiceInputTyping:ne.voiceInputListening;return{id:"mab.buttonSection.voiceInput",buttons:[p("mab.button.voiceinputState","webAction_generic",{content:{type:"text_and_icon",fullWidth:!0,imageReference:{sfProGlyphName:(s={glyph:i,imageIdentifier:o,localizedMessage:_.default.formatMessage(n)}).glyph,localImageIdentifier:s.imageIdentifier},text:s.localizedMessage},apiRequestValue:{jsonPayload:v("blockAction",{action:"voiceInput"})}})]};var s})),this.primaryActionButtonSectionsStoreV2=this.createComputedStore((()=>{const{createAIAction:e,disableAIAction:t,disableBlockActions:i,disableCommentAction:o,disableMentionAction:n,selectedMenuType:s,disableInsertBlockAction:r,disableTurnIntoAction:a,disableTextFormatting:c,disableDeleteBlock:u,disableUndo:h,disableIndent:m,disableUnindent:g}=this.buttonSectionsConfigStore.state,b=this.textSelectedBlocksStore.state;return function(e){const{createAIAction:t,disableAIAction:i,disableBlockActions:o,disableCommentAction:n,disableMentionAction:s,selectedMenuType:r,disableInsertBlockAction:a,disableTurnIntoAction:c,disableTextFormatting:u,disableDeleteBlock:h,disableUndo:m,disableIndent:g,disableUnindent:b,someBlockPrioritizesIndentation:f,supportsSectionAnimation:y,isVoiceInputSupported:S,accessibilityTexts:C}=e,x=!(o||g&&b),M={ai:t?p("mab.button.ai","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"sparkles",localImageIdentifier:"ai",imageTintColor:(0,l.J1)(l.FN.light.purple[500])},disabled:i,accessibilityText:C.ai},apiRequestValue:{jsonPayload:v("blockAction",{action:"ai"})}}):void 0,speech:S?p("mab.button.speech","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"mic",localImageIdentifier:"mic"},disabled:!1,accessibilityText:C.ai},apiRequestValue:{jsonPayload:v("blockAction",{action:"voiceInput"})}}):void 0,insert:p("mab.button.insert","nativeAction_setMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"plus",localImageIdentifier:"insertBlock"},accessibilityText:C.insert,disabled:o||a,selected:"insertBlock"===r},apiRequestValue:{menuType:"insertBlock"}}),turnInto:p("mab.button.turnInto","nativeAction_setMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.2.squarepath",localImageIdentifier:"turnInto"},disabled:o||c,selected:"turnInto"===r,accessibilityText:C.turnInto},apiRequestValue:{menuType:"turnInto"}}),filePicker:p("mab.button.filePicker","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"photo.on.rectangle.angled",localImageIdentifier:"filePicker"},disabled:o,accessibilityText:C.filePicker},apiRequestValue:{jsonPayload:v("blockAction",{action:"filePicker"})}}),mention:p("mab.button.mention","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"at",localImageIdentifier:"mention"},disabled:s,accessibilityText:C.mention},apiRequestValue:{jsonPayload:v("blockAction",{action:"mention"})}}),comment:p("mab.button.comment","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"bubble.left",localImageIdentifier:"comment"},disabled:n,accessibilityText:C.comment},apiRequestValue:{jsonPayload:v("blockAction",{action:"comment"},"mobile_action_bar")}}),biu:p("bold.italic.underline","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"textformat",localImageIdentifier:"textFormat"},disabled:u,accessibilityText:C.textFormatting},apiRequestValue:{subMenuType:"textFormatting"}}),delete:p("mab.button.delete","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"trash",localImageIdentifier:"trash"},disabled:h,accessibilityText:C.trash},apiRequestValue:{jsonPayload:v("blockAction",{action:"trash"})}}),undo:p("mab.button.undo","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.uturn.backward",localImageIdentifier:"undo"},accessibilityText:C.undo,disabled:m},apiRequestValue:{jsonPayload:v("blockAction",{action:"undo"})}}),more:p("mab.button.more","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"ellipsis",localImageIdentifier:"more"},accessibilityText:C.more,disabled:o},apiRequestValue:{jsonPayload:v("blockAction",{action:"more"})}}),indent:p("mab.button.indent","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"decrease.indent",localImageIdentifier:"unindent"},accessibilityText:C.indent,disabled:o||b},apiRequestValue:{jsonPayload:v("blockAction",{action:"unindent"})}}),unindent:p("mab.button.unindent","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"increase.indent",localImageIdentifier:"indent"},accessibilityText:C.unindent,disabled:o||g},apiRequestValue:{jsonPayload:v("blockAction",{action:"indent"})}}),moveUp:p("mab.button.moveUp","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.up.to.line.alt",localImageIdentifier:"moveUp"},accessibilityText:C.moveUp,disabled:o},apiRequestValue:{jsonPayload:v("blockAction",{action:"moveUp"})}}),moveDown:p("mab.button.moveDown","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.down.to.line.alt",localImageIdentifier:"moveDown"},accessibilityText:C.moveDown,disabled:o},apiRequestValue:{jsonPayload:v("blockAction",{action:"moveDown"})}})};if(x&&f){const e=[M.indent,M.unindent,M.moveUp,M.moveDown].filter(d.$K),t=[M.ai,M.speech,M.insert,M.turnInto,M.filePicker,M.biu,M.comment,M.undo,M.mention,M.delete,M.more].filter(d.$K);return y?[{id:"mab.buttonSection.listPrioritized",buttons:e,skipSectionDivider:!0},{id:"mab.buttonSection.main",buttons:t}]:[{id:"mab.buttonSection.listPrioritized",buttons:e.concat(t),skipSectionDivider:!0}]}return[{id:"mab.buttonSection.main",buttons:[M.ai,M.speech,M.insert,M.turnInto,M.filePicker,M.biu,M.comment,M.undo,M.mention,M.delete,M.indent,M.unindent,M.moveUp,M.moveDown,M.more].filter(d.$K)}]}({createAIAction:e,disableAIAction:t,disableBlockActions:i,disableCommentAction:o,disableMentionAction:n,selectedMenuType:s,disableInsertBlockAction:r,disableTurnIntoAction:a,disableTextFormatting:c,disableDeleteBlock:u,disableUndo:h,disableIndent:m,disableUnindent:g,someBlockPrioritizesIndentation:!!b&&b.some((e=>{const t=e.getType();return t&&se[t]})),supportsSectionAnimation:this.environment.device.isIOS,isVoiceInputSupported:H.Z.state.isSupported,accessibilityTexts:{insert:_.default.formatMessage(ne.accessibilityInsert),turnInto:_.default.formatMessage(ne.accessibilityTurnInto),filePicker:_.default.formatMessage(ne.accessibilityFilePicker),mention:_.default.formatMessage(ne.accessibilityMention),comment:_.default.formatMessage(ne.accessibilityComment),textFormatting:_.default.formatMessage(ne.accessibilityTextFormatting),trash:_.default.formatMessage(ne.accessibilityTrash),ai:_.default.formatMessage(ne.accessibilityAi),undo:_.default.formatMessage(ne.accessibilityUndo),more:_.default.formatMessage(ne.accessibilityMore),indent:_.default.formatMessage(ne.accessibilityIndent),unindent:_.default.formatMessage(ne.accessibilityDedent),moveUp:_.default.formatMessage(ne.accessibilityMoveUp),moveDown:_.default.formatMessage(ne.accessibilityMoveDown)}})})),this.textFormattingButtonSectionsStoreV2=this.createComputedStore((()=>{const{disableCommentAction:e,selectedMenuType:t,disableTextActions:i,disableTextColorAction:o,disableLinkAction:n,disableEquationAction:s,disableBlockActions:r,disableTurnIntoAction:a,disableAIAction:c,createAIAction:u,shouldShowTextActions:h}=this.buttonSectionsConfigStore.state;return function(e){const{disableTextActions:t,boldSelected:i,italicSelected:o,underlineSelected:n,strikeSelected:s,codeSelected:r,linkSelected:a,equationSelected:c,selectedMenuType:u,disableTextColorAction:h,disableCommentAction:m,disableLinkAction:g,disableEquationAction:b,textColorImageReference:f,accessibilityTexts:y,disableBlockActions:S,disableTurnIntoAction:C,disableAIAction:x,createAIAction:M,shouldShowTextActions:k}=e,T=k?"textSelectionColor":"textColor",w={back:p("mab.button.back","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"chevron.backward.2",localImageIdentifier:"back"},accessibilityText:y.close},apiRequestValue:{subMenuType:null}}),bold:p("mab.button.bold","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"bold",localImageIdentifier:"bold"},accessibilityText:y.bold,disabled:t,selected:i},apiRequestValue:{jsonPayload:v("blockAction",{action:"bold"})}}),italic:p("mab.button.italic","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"italic",localImageIdentifier:"italic"},disabled:t,selected:o,accessibilityText:y.italics},apiRequestValue:{jsonPayload:v("blockAction",{action:"italic"})}}),underline:p("mab.button.underline","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"underline",localImageIdentifier:"underline"},disabled:t,selected:n,accessibilityText:y.underline},apiRequestValue:{jsonPayload:v("blockAction",{action:"underline"})}}),strikethrough:p("mab.button.strikethrough","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"strikethrough",localImageIdentifier:"strikethrough"},disabled:t,selected:s,accessibilityText:y.strikethrough},apiRequestValue:{jsonPayload:v("blockAction",{action:"strikethrough"})}}),color:p("mab.button.textFormatting.textSelectionColor.native","nativeAction_setMenuType",{content:{type:"icon",imageReference:f,disabled:t||h,selected:u===T,accessibilityText:y.textColor},apiRequestValue:{menuType:T}}),comment:p("mab.button.textFormatting.comment","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"bubble.left",localImageIdentifier:"comment"},disabled:t||m,accessibilityText:y.comment},apiRequestValue:{jsonPayload:v("blockAction",{action:"comment"},"mobile_text_formatting_menu")}}),link:p("mab.button.link","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"link",localImageIdentifier:"link"},accessibilityText:y.link,disabled:t||g,selected:a},apiRequestValue:{jsonPayload:v("blockAction",{action:"link"})}}),code:p("mab.button.code","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"chevron.left.slash.chevron.right",localImageIdentifier:"code"},accessibilityText:y.code,disabled:t,selected:r},apiRequestValue:{jsonPayload:v("blockAction",{action:"code"})}}),equation:p("mab.button.equation","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"x.squareroot",localImageIdentifier:"equation"},accessibilityText:y.equation,disabled:t||b,selected:c},apiRequestValue:{jsonPayload:v("blockAction",{action:"equation"})}}),cancel:p("mab.button.cancel","nativeAction_setSubMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"xmark.circle.fill",localImageIdentifier:"cancel",imageTintColor:"#72706B64"},accessibilityText:y.close},apiRequestValue:{subMenuType:null}}),turnInto:p("mab.button.turnInto","nativeAction_setMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"arrow.2.squarepath",localImageIdentifier:"turnInto"},disabled:S||C,selected:"turnInto"===u,accessibilityText:y.turnInto},apiRequestValue:{menuType:"turnInto"}}),ai:M?p("mab.button.ai","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"sparkles",localImageIdentifier:"ai",imageTintColor:(0,l.J1)(l.FN.light.purple[500])},disabled:x,accessibilityText:y.ai},apiRequestValue:{jsonPayload:v("blockAction",{action:"ai"})}}):void 0};let I;return I=k?[w.back,w.turnInto,w.ai,w.color,w.comment,w.bold,w.italic,w.underline,w.strikethrough,w.link,w.code,w.equation].filter(d.$K):[w.back,w.color,w.bold,w.italic,w.underline,w.strikethrough,w.link,w.code,w.equation],{id:"mab.buttonSection.textFormatting",shouldFadeIn:!0,buttons:I}}({disableTextActions:i,disableCommentAction:e,disableLinkAction:n,disableEquationAction:s,selectedMenuType:t,disableTextColorAction:o,disableBlockActions:r,disableTurnIntoAction:a,disableAIAction:c,createAIAction:u,shouldShowTextActions:h,textColorImageReference:ue(this.textSelectionColorStore.state,this.theme),accessibilityTexts:{bold:_.default.formatMessage(ne.accessibilityBold),italics:_.default.formatMessage(ne.accessibilityItalics),underline:_.default.formatMessage(ne.accessibilityUnderline),strikethrough:_.default.formatMessage(ne.accessibilityStrikethrough),textColor:_.default.formatMessage(ne.accessibilityTextColor),comment:_.default.formatMessage(ne.accessibilityComment),code:_.default.formatMessage(ne.accessibilityCode),link:_.default.formatMessage(ne.accessibilityLink),equation:_.default.formatMessage(ne.accessibilityEquation),close:_.default.formatMessage(ne.accessibilityCloseTextFormattingMenu),turnInto:_.default.formatMessage(ne.accessibilityTurnInto),ai:_.default.formatMessage(ne.accessibilityAi)},...this.textFormattingSelectionStore.state})})),this.mainButtonSectionsStoreV2=this.createComputedStore((()=>{const{shouldShowTemplatesButton:e,shouldShowVoiceInputButton:t}=this.buttonSectionsConfigStore.state;return e?[this.templateButtonSectionsStore.state]:t?[this.voiceInputButtonSectionsStore.state]:this.primaryActionButtonSectionsStoreV2.state})),this.textSelectionPositionsStore=this.createComputedStore((()=>{const e=this.textSelectionCompositeStore.state;if(!e)return;const{source:t,...i}=e;return i}),!0),this.textSelectionCompositeStore=this.createComputedStore((()=>{const e=(e,t)=>{if(!e||"editing"!==e.mode)return;const{multiSelection:i}=e;return{startRecord:i.start.store.pointer,startIndex:i.start.index,endRecord:i.end.store.pointer,endIndex:i.end.index,source:t}};return e(z.default.state,"TextSelectionStore")||e(this.props.stores.ignoreSelectionAreaStore.state.savedTextSelectionStoreState,"IgnoreSelectionAreaStore")}),!0),this.renderStore=this.createComputedStore((()=>{var e;const t=L.$3(this.environment,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state);if(!t){const e=this.environment.NativeMobileActionBarStore;null!==(null==e?void 0:e.state.menuType)&&c.gw((()=>{var e;L.$3(this.environment,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state)||ce(null,!1,this.environment)}),500),null!==(null==e?void 0:e.state.subMenuType)&&c.gw((()=>{var e;L.$3(this.environment,this.props.currentBlockStore,null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state)||de(null,!1,this.environment)}),500)}return t})),this.shouldShowTextActions=this.createComputedStore((()=>L.oQ(this.props.stores.ignoreSelectionAreaStore,this.environment.TextSelectionCompositionStore))),this.canTriggerBlockActions=this.createComputedStore((()=>L.Bo(this.pageContext&&this.pageContext.publicEditModeStore.state))),this.canTriggerTextActions=this.createComputedStore((()=>L.eQ(this.pageContext&&this.pageContext.publicEditModeStore.state,this.props.currentBlockStore))),this.memoizedNativeMenus=c.HP((e=>{const{blocks:t,environment:i}=e;return o={environment:i,blocks:t,publicEditMode:void 0},{insertBlock:ee({type:"insertBlock",actionSections:J.L1(Q.v.state.insertActions,o),context:o,closeParentMenu:!0}),turnInto:ee({type:"turnInto",actionSections:J.L1([$.g],o),context:o,closeParentMenu:!0}),textColor:ee({type:"textColor",actionSections:J.L1([K.rz,K.Vm],o),context:o,closeParentMenu:!0}),textSelectionColor:ee({type:"textSelectionColor",actionSections:J.L1([K.b4,K.Sw],o),context:o,closeParentMenu:!0})};var o}),(e=>{let{blocks:t,environment:i}=e;const o=t.map((e=>e.key)).join(",");return`${i.key}-${o}`})),this.textFormattingSelectionStore=this.createComputedStore((()=>{let e;e="editing"===z.default.state.mode?(0,N.k2)([M.GKr.Bold,M.GKr.Italic,M.GKr.Underline,M.GKr.Strike,M.GKr.Code,M.GKr.Link,M.GKr.Equation,M.GKr.Highlight],z.default.state.multiSelection,z.default.state.forceExtendAnnotations):{};const t=e[M.GKr.Highlight];return{boldSelected:Boolean(e[M.GKr.Bold]),italicSelected:Boolean(Boolean(e[M.GKr.Italic])),underlineSelected:Boolean(Boolean(e[M.GKr.Underline])),strikeSelected:Boolean(Boolean(e[M.GKr.Strike])),codeSelected:Boolean(e[M.GKr.Code]),linkSelected:Boolean(e[M.GKr.Link]),equationSelected:Boolean(e[M.GKr.Equation]),highlightColor:t?(0,M.zIN)(t):void 0}})),this.textSelectionColorStore=this.createComputedStore((()=>{const{NativeMobileActionBarStore:e}=this.environment,t=e&&null!==e.state.menuType?this.props.stores.ignoreSelectionAreaStore.state.savedTextSelectionStoreState:void 0;if(!t)return this.textFormattingSelectionStore.state.highlightColor;const i="editing"===t.mode&&(0,N.a6)("h",t.multiSelection,t.forceExtendAnnotations);return i?(0,M.zIN)(i):void 0})),this.textColorStore=this.createComputedStore((()=>W.default.state.stores.length>0?W.default.state.stores[0].getFormat().block_color:void 0))}didMount(){this.textSelectionCompositeStore.addListener(this.handleTextSelectionCompositeStoreChanged),this.textSelectionPositionsStore.addListener(this.handleTextSelectionStoreChanged)}willUnmount(){this.textSelectionCompositeStore.removeListener(this.handleTextSelectionCompositeStoreChanged),this.textSelectionPositionsStore.removeListener(this.handleTextSelectionStoreChanged),this.props.renderApi&&this.props.renderApi({type:"unmount",id:""})}renderComponent(){const{fallbackRenderer:e,stores:t}=this.props;return(0,oe.jsx)(re,{isOpen:this.renderStore.state.shouldShow,canShow:this.renderStore.state.canShowNativeBar,isEmpty:this.renderStore.state.isEmpty,schema:this.getCurrentActionBarSchema.state,onAction:this.handleMobileActionBarBridgeEvent,fallbackRenderer:e&&(()=>e(t))})}recomputeCurrentActionBarSchema(){const{selectedMenuType:e,selectedSubMenu:t}=this.buttonSectionsConfigStore.state,i=this.reactiveMemoizedNativeMenusStore.state;return function(e){const{selectedMenu:t,selectedSubMenu:i,nativeMenus:o,buttonSections:n,nativeSubMenus:s,accessibilityTexts:r}=e;return{nativeMenus:o,nativeSubMenus:s,state:{buttonSections:n,selectedMenu:t,selectedSubMenu:i,dismissKeyboardButton:null!==t?p("mab.dismissKeyboard","nativeAction_setMenuType",{content:{type:"icon",imageReference:{sfProGlyphName:"xmark.circle.fill",localImageIdentifier:"cancel",imageTintColor:"#72706B64"},accessibilityText:r.closeActionMenu},apiRequestValue:{menuType:null}}):p("mab.dismissKeyboard","webAction_generic",{content:{type:"icon",imageReference:{sfProGlyphName:"keyboard.chevron.compact.down",localImageIdentifier:"keyboardDown"},accessibilityText:r.dismissKeyboard},apiRequestValue:{jsonPayload:v("blockAction",{action:"dismissKeyboard"})}}),mutatedNativeMenus:{},localizedMessages:{}}}}({selectedMenu:e,selectedSubMenu:t,nativeMenus:{textColor:{id:"textColor",title:_.default.formatMessage(ne.actionMenuColorTitle),sections:i.textColor.sections},textSelectionColor:{id:"textSelectionColor",title:_.default.formatMessage(ne.actionMenuColorTitle),sections:i.textSelectionColor.sections},insertBlock:{id:"insertBlock",title:_.default.formatMessage(ne.actionMenuInsertBlockTitle),sections:i.insertBlock.sections},turnInto:{id:"turnInto",title:_.default.formatMessage(ne.actionMenuTurnIntoTitle),sections:i.turnInto.sections}},nativeSubMenus:{textFormatting:[this.textFormattingButtonSectionsStoreV2.state]},buttonSections:this.mainButtonSectionsStoreV2.state,accessibilityTexts:{dismissKeyboard:_.default.formatMessage(ne.accessibilityDismissKeyboard),closeActionMenu:_.default.formatMessage(ne.accessibilityCloseActionMenu)}})}handleActionRegistryAction(e){var t,i;const{markdownLinkifyIt:o,tinyMceMicrosoftWordPasteFilter:n,ai:s,assistant:r}=this.props,a=null===(t=e.apiRequestValue)||void 0===t?void 0:t.menuType,l=null===(i=e.apiRequestValue)||void 0===i?void 0:i.actionId;if(!a||!l)return;const c=this.memoizedNativeMenus({environment:this.environment,blocks:W.default.state.stores})[a].actions[l];if(!c)return;const d=c.action;d&&(c.closeParentMenu&&ce(null,!0,this.environment),d({environment:this.environment,blocks:W.default.state.stores,publicEditMode:void 0,lazyDependencies:{markdownLinkifyIt:o,tinyMceMicrosoftWordPasteFilter:n,ai:s,assistant:r}}));const u=W.default.state.stores[0];if(u){const e=u.getType(),t=u.getFormat();T.dhV(this.environment,{analyticsName:c.analyticsName,action_type:c.analyticsActionType,from:"slash_menu",block_id:u.id,block_type:e,is_toggleable:e?(0,O._A)(e,t):void 0,slash_menu_filter_length:0,slash_menu_section:`Mobile Action Bar ${a}`})}}}function le(e){window.__c={n:"NativeMobileActionBarWithDeps"};const t=(0,k.useIntl)(),{value:i}=(0,D.useDependency)(D.deps.markdownLinkifyIt),{value:o}=(0,D.useDependency)(D.deps.tinyMceMicrosoftWordPasteFilter),{value:n}=(0,D.useDependency)(B.E0),{value:s}=(0,D.useDependency)(Z.L6);return(0,oe.jsx)(ae,{...e,intl:t,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:o,ai:n,assistant:s})}function ce(e,t,i){var o;null===(o=i.NativeMobileActionBarStore)||void 0===o||o.update((i=>({...i,menuType:e,shouldRestoreSelectionForMenu:t})))}function de(e,t,i){const{NativeMobileActionBarStore:o}=i;null==o||o.update((i=>({...i,isSubMenuOverridden:t,subMenuType:e}))),null!==e&&L.Oh(i,e)}function ue(e,t){let i="textColor";const o=l.E_.find((t=>t===e));let n;"default"===e||o&&(o.includes("background")?(n="background",i="textBackgroundColor"):n="color");const s=n&&o?(0,l.fi)(o,t)[n]:void 0;return{localImageIdentifier:i,imageTintColor:s?(0,l.J1)(s):void 0}}ae.displayName="NativeMobileActionBar"},63970:(e,t,i)=>{i.r(t),i.d(t,{default:()=>T});var o=i(67294),n=i(480),s=i(86628),r=i(66673),a=i(993),l=i(39699),c=i(24215),d=(i(21703),i(57658),i(40682)),u=i(72126),h=i(77080);i(48675),i(63408),i(14590),i(3462),i(23767),i(8585),i(68696);class p{constructor(){this.events={},this.speakingHistory=[],this.speaking=!1,this.running=!0}emit(e){var t,i;null===(t=(i=this.events)[e])||void 0===t||t.call(i)}getMaxVolume(e,t){let i=-1/0;e.getFloatFrequencyData(t);for(let o=4;o<t.length;o++)t[o]>i&&t[o]<0&&(i=t[o]);return i}compute(e,t,i){const o=this.getMaxVolume(t,i);let n=0;if(o>e&&!this.speaking){for(let e=this.speakingHistory.length-3;e<this.speakingHistory.length;e++)n+=this.speakingHistory[e];n>=2&&(this.speaking=!0,this.emit("speaking"))}else if(o<e&&this.speaking){for(let e=0;e<this.speakingHistory.length;e++)n+=this.speakingHistory[e];0===n&&(this.speaking=!1,this.emit("stopped_speaking"))}this.speakingHistory.shift(),this.speakingHistory.push(0+(o>e?1:0))}on(e,t){this.events[e]=t}start(e,t,i){const{smoothing:o=.1,interval:n=50,threshold:s=-100,history:r=10}=i;for(let h=0;h<r;h++)this.speakingHistory.push(0);const a=e.createGain();a.connect(e.destination),a.gain.value=0;const l=e.createAnalyser();l.fftSize=512,l.smoothingTimeConstant=o;const c=new Float32Array(l.fftSize);e.createMediaStreamSource(t).connect(l);const d=this,u=function(){setTimeout((function(){d.running&&(d.compute(s,l,c),u())}),n)};u()}stop(){this.running=!1,this.speaking&&(this.speaking=!1,this.emit("stopped_speaking"))}}function m(e,t){const i=new p,o=window.webkitAudioContext||window.AudioContext;if(!o)return i;window.audioContext00=window.audioContext00||new o;const n=window.audioContext00;return i.start(n,e,t),i}async function g(){try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks().forEach((e=>e.stop()))}catch(e){return console.log("microphone permissions not granted",e),!1}return!0}class b{static isEligible(){return"webkitSpeechRecognition"in window}constructor(){this.recognition=void 0,this.autoRestart=!0,this.listener=void 0;"webkitSpeechRecognition"in window&&(this.recognition=new webkitSpeechRecognition,this.recognition.interimResults=!1,this.recognition.continuous=!1,this.recognition.maxAlternatives=1,this.recognition.onstart=()=>{console.log("starting speech recognition")},this.recognition.onspeechstart=()=>{var e,t;null===(e=this.listener)||void 0===e||null===(t=e.onStageChanged)||void 0===t||t.call(e,"listening")},this.recognition.onspeechend=()=>{var e,t;null===(e=this.listener)||void 0===e||null===(t=e.onStageChanged)||void 0===t||t.call(e,"inactive")},this.recognition.onerror=e=>{var t,i;switch(console.log("recognition error",e.error),e.error){case"network":this.autoRestart=!1;break;case"not-allowed":case"service-not-allowed":this.autoRestart=!1,null===(t=this.listener)||void 0===t||null===(i=t.onPermissionNotAvailable)||void 0===i||i.call(t);break;case"no-speech":this.restart()}},this.recognition.onend=()=>{console.log("ending speech recognition"),this.restart()},this.recognition.onresult=e=>{var t;if(console.log(`received speech recognition results. length = ${(null===(t=e.results)||void 0===t?void 0:t.length)??0}`),e.results&&0!==e.results.length)for(var i=e.resultIndex;i<e.results.length;++i){var o,n,s;if(e.results[i].isFinal)null===(o=this.listener)||void 0===o||null===(n=(s=o).onResult)||void 0===n||n.call(s,`${e.results[i][0].transcript} `)}})}restart(){var e;this.autoRestart&&(null===(e=this.recognition)||void 0===e||e.start())}async start(e){var t;var i;await g()?(this.listener=e,this.autoRestart=!0,null===(t=this.recognition)||void 0===t||t.start()):null==e||null===(i=e.onPermissionNotAvailable)||void 0===i||i.call(e)}stop(){var e;this.autoRestart=!1,null===(e=this.recognition)||void 0===e||e.stop()}}class v{static isEligible(){return"webkitSpeechRecognition"in window}constructor(){this.recognition=void 0,this.listener=void 0;if(!("webkitSpeechRecognition"in window))return;this.recognition=new webkitSpeechRecognition,this.recognition.interimResults=!0,this.recognition.continuous=!0,this.recognition.maxAlternatives=1;var e=0;const t=u.Ds((t=>{var i,o,n,s;null===(i=this.listener)||void 0===i||null===(o=i.onStageChanged)||void 0===o||o.call(i,"inactive");const r=t.slice(e);e=t.length,null===(n=this.listener)||void 0===n||null===(s=n.onResult)||void 0===s||s.call(n,r)}),500,{trailing:!0});this.recognition.onstart=()=>{console.log("starting speech recognition")},this.recognition.onerror=e=>{var t,i;switch(console.log("recognition error",e.error),e.error){case"network":break;case"not-allowed":case"service-not-allowed":null===(t=this.listener)||void 0===t||null===(i=t.onPermissionNotAvailable)||void 0===i||i.call(t)}},this.recognition.onend=()=>{console.log("ending speech recognition"),e=0},this.recognition.onresult=e=>{var i,o,n;if(console.log(`received speech recognition results. length = ${(null===(i=e.results)||void 0===i?void 0:i.length)??0}`),e.results&&0!==e.results.length){null===(o=this.listener)||void 0===o||null===(n=o.onStageChanged)||void 0===n||n.call(o,"listening");for(var s=e.resultIndex;s<e.results.length;++s){const i=e.results[s].isFinal,o=e.results[s][0].transcript;t(o),i&&t.flush()}}}}async start(e){var t;var i;await g()?(this.listener=e,null===(t=this.recognition)||void 0===t||t.start()):null==e||null===(i=e.onPermissionNotAvailable)||void 0===i||i.call(e)}stop(){var e;null===(e=this.recognition)||void 0===e||e.stop()}}class f{constructor(e){if(this.id="",this.listener=void 0,this.queue=new d.z(1),this.recorder=void 0,!e)throw Error("unable to initialize provider without id");this.id=e}initializeRecorder(e,t){var i=[];const o=m(e,{}),n=new MediaRecorder(e,{mimeType:"audio/webm"});return n.ondataavailable=e=>{0!==e.data.size&&i.push(e.data)},n.onstop=e=>{const o=new Blob(i);t(o),i=[]},o.on("speaking",(()=>{var e,t;null===(e=this.listener)||void 0===e||null===(t=e.onStageChanged)||void 0===t||t.call(e,"listening")})),o.on("stopped_speaking",(()=>{var e,t;null===(e=this.listener)||void 0===e||null===(t=e.onStageChanged)||void 0===t||t.call(e,"inactive"),n.stop(),n.start()})),{start:()=>{n.start()},stop:()=>{var t;n.stop(),null===(t=o.stop)||void 0===t||t.call(o),e.getTracks().forEach((e=>e.stop()))}}}async initialize(){const e=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});this.recorder=this.initializeRecorder(e,(e=>{this.queue.enqueue((async()=>{try{var t,i;const o=await this.transcribe(e);null===(t=this.listener)||void 0===t||null===(i=t.onResult)||void 0===i||i.call(t,o)}catch(o){}}))})),this.recorder.start()}async transcribe(e){const t=await fetch("https://api-inference.huggingface.co/models/openai/whisper-tiny",{headers:{Authorization:`Bearer ${this.id}`},method:"POST",body:e});if(200===t.status){return(await t.json()).text}}async start(e){var t;await g()?(this.listener=e,await this.initialize()):null==e||null===(t=e.onPermissionNotAvailable)||void 0===t||t.call(e)}stop(){var e;null===(e=this.recorder)||void 0===e||e.stop()}}class y{constructor(e){if(this.id="",this.listener=void 0,this.recorder=void 0,!e)throw Error("unable to initialize provider without id");this.id=e}initializeRecorder(e,t){const i=m(e,{}),o=new MediaRecorder(e,{mimeType:"audio/webm"}),n=new WebSocket("wss://api.deepgram.com/v1/listen?encoding=linear16&smart_format=true&model=nova&language=en-US",["token",this.id]);return n.onopen=()=>{o.addEventListener("dataavailable",(e=>n.send(e.data)))},n.onmessage=e=>{const i=JSON.parse(e.data).channel.alternatives[0].transcript;t(i)},o.onstop=e=>{n.close()},i.on("speaking",(()=>{var e,t;null===(e=this.listener)||void 0===e||null===(t=e.onStageChanged)||void 0===t||t.call(e,"listening")})),i.on("stopped_speaking",(()=>{var e,t;null===(e=this.listener)||void 0===e||null===(t=e.onStageChanged)||void 0===t||t.call(e,"inactive")})),{start:()=>o.start(250),stop:()=>{var t;o.stop(),null===(t=i.stop)||void 0===t||t.call(i),e.getTracks().forEach((e=>e.stop()))}}}async initialize(){const e=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});this.recorder=this.initializeRecorder(e,(e=>{var t,i;null===(t=this.listener)||void 0===t||null===(i=t.onResult)||void 0===i||i.call(t,e)})),this.recorder.start()}async start(e){var t;await g()?(this.listener=e,await this.initialize()):null==e||null===(t=e.onPermissionNotAvailable)||void 0===t||t.call(e)}stop(){var e;null===(e=this.recorder)||void 0===e||e.stop()}}var S=i(19361),C=i(12252),x=i(88632),M=i(27724),k=i(24666);const T=()=>{window.__c={n:"NativeVoiceInput"};const e=(0,n.O7)(),[t,i]=(0,s.VK)((()=>{const e="mobile_voice_input";return[h.default.getEligibleGroup({experimentId:e,defaultGroup:"control",disableExposureLogging:!0}),h.default.getEligibleGroup({experimentId:e,parameter:"id",defaultGroup:"",disableExposureLogging:!0})]}),[]),d=(0,o.useMemo)((()=>({onResult:t=>{const i=k.default.state;"editing"===i.mode&&(S.Z.update((e=>({...e,totalResults:e.totalResults+1}))),l.createAndCommit({userAction:"NativeVoiceInput.onVoiceInputResult",environment:e,perform:o=>{a.hJ({environment:e,string:t,multiSelection:i.multiSelection,disableMentions:!0,disableDateMentions:!0,disableDateReminderMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:o})}}))},onStageChanged:e=>{S.Z.update((t=>({...t,stage:e})))},onPermissionNotAvailable:()=>{S.Z.update((e=>({...e,active:!1})))}})),[e]),u=(0,s.VK)((()=>x.Z.state.online),[]),p=(0,o.useMemo)((()=>function(e,t,i){let o;switch(t){case"web_system_api":"webkitSpeechRecognition"in window&&(o=e.device.isIOS?new v:new b);break;case"third_party_whisper":i&&(o=new f(i));break;case"third_party_deepgram":i&&(o=new y(i))}if(o)return h.default.manuallyLogExperimentExposure("mobile_voice_input"),o}(e,t,i)),[e,t,i]),m=(0,s.VK)((()=>{const e=S.Z.state;return e.isSupported&&e.active}),[]);return function(){const e=(0,o.useCallback)((()=>S.Z.toggleActiveState(!1)),[]),t=(0,s.VK)((()=>[M.default.state.stores.map((e=>e.id))]),[]),i=(0,r.wr)(t,Object.is),n=(0,s.VK)((()=>{const e=C.Z.state.active,t="editing"===k.default.state.mode;return!(e&&t)}),[]);(0,o.useEffect)((()=>{(i||n)&&e()}),[i,n,e])}(),(0,o.useEffect)((()=>{S.Z.update((e=>({...e,isSupported:Boolean(p&&u)})))}),[p,u]),(0,o.useEffect)((()=>{if(m)return null==p||p.start(d),()=>null==p?void 0:p.stop();null==p||p.stop()}),[p,m,d]),(0,o.useEffect)((()=>{if(!m)return;const i=Date.now();return()=>{const o=Date.now()-i;c.j(e,"voice_input_session",{variant:t,totalResults:S.Z.state.totalResults,duration:o})}}),[e,m,t]),null}},92658:(e,t,i)=>{i.d(t,{Z:()=>s});var o=i(49085);class n extends o.default{getInitialState(){return{inputValue:"",focus:!1}}}const s=n},40863:(e,t,i)=>{i.d(t,{BO:()=>v,Ft:()=>h,Lh:()=>C,YG:()=>p,du:()=>b,y$:()=>g});i(57658);var o=i(30120),n=i(30823),s=i(40506),r=i(53877),a=i(42875),l=i(72126),c=i(59753),d=i(68939),u=i(28020);function h(e){const{collectionContextStore:t}=e,i=t.collectionViewStore();if(!i)return;const o=t.normalizedSchemaStore.state,n=i.getQuery(o);if(!n||!n.calendar_by)return;const s=t.dateRangeStart.state,l=t.dateRangeEnd.state,c=(0,r.hT)(s,(0,a.r)()),d=(0,r.hT)(l,(0,a.r)());return m({calendarBy:n.calendar_by,dateRangeStartDate:c,dateRangeEndDate:d})}function p(e){const{collectionContextStore:t,startOfDay:i}=e,n=t.collectionViewStore();if(!n)return;const s=t.normalizedSchemaStore.state,l=n.getQuery(s);if(!l||!l.calendar_by)return;const c=o.ou.fromMillis(i).endOf("day").valueOf(),d=(0,r.hT)(i,(0,a.r)()),u=(0,r.hT)(c,(0,a.r)());return m({calendarBy:l.calendar_by,dateRangeStartDate:d,dateRangeEndDate:u})}function m(e){const{dateRangeStartDate:t,dateRangeEndDate:i,calendarBy:o}=e;return{type:"results",filter:{operator:"and",filters:[{property:o,filter:{operator:"date_is_on_or_after",use_end:!0,value:{type:"exact",value:t}}},{property:o,filter:{operator:"date_is_on_or_before",value:{type:"exact",value:i}}}]},limit:5e3}}function g(e){const{collectionContextStore:t,results:i,getRecordValue:o,intl:n}=e,c=t.collectionViewStore(),d=t.normalizedQueryStore.state,h=t.normalizedSchemaStore.state,p=d?d.calendar_by:void 0,m=t.dateRangeStart.state,g=t.dateRangeEnd.state,y=u.AK.state,S=(0,a.r)(),C=t.getCurrentUserId();if(!(c&&d&&p&&h))return;const x=l.oA(i.map((e=>v({blockStore:e,calendarBy:p,schema:h,getRecordValue:o,userId:C,intl:n})))),M={};i.forEach(((e,t)=>{M[e.id]=t}));0===(d.sort||[]).length&&x.sort(((e,t)=>{const i=e.start.valueOf(),o=t.start.valueOf();if(i===o){return M[e.id]-M[t.id]}return i-o}));const k=(0,r.em)(m,y,S),T=(0,r.gQ)(g,y,S);let w=k;const I=[];do{const e=(0,r.gQ)(w.valueOf(),y,S),t={},i=x.filter((t=>(0,s.b8)(w.valueOf(),e.valueOf(),t.start.valueOf(),t.end?t.end.valueOf():void 0))).map((i=>{const{id:o,start:n,end:s,includeTime:r,timeZone:a}=i,{startColumn:l,columnCount:c}=b({startUnixTimestampMS:n.valueOf(),endUnixTimestampMS:s?s.valueOf():void 0,startOfWeekUnixTimestampMS:w.valueOf(),endOfWeekUnixTimestampMS:e.valueOf()}),d=f(l,c,t);return{id:o,start:n.valueOf(),end:s?s.valueOf():void 0,row:d,includeTime:r,timeZone:a}}));I.push({start:w.valueOf(),end:e.valueOf(),items:i}),w=(0,r.em)(w.plus({week:1}).plus({hour:25}).valueOf(),y,S)}while(w<T);return I}function b(e){const t=o.ou.fromMillis(e.startUnixTimestampMS),i=e.endUnixTimestampMS?o.ou.fromMillis(e.endUnixTimestampMS):void 0,n=o.ou.fromMillis(e.startOfWeekUnixTimestampMS),s=o.ou.fromMillis(e.endOfWeekUnixTimestampMS),r=t.startOf("day"),a=o.ou.max(n,r),l=Math.ceil(a.diff(n,"days").get("days"));let c=1;if(i){const e=i.endOf("day"),t=o.ou.min(s,e);c=Math.ceil(t.diff(a,"days").get("days"))}return{start:t,end:i,startOfWeek:n,endOfWeek:s,startColumn:l,columnCount:c}}function v(e){const{blockStore:t,calendarBy:i,schema:o,getRecordValue:s,intl:l,userId:d}=e,u=t.getAssociatedCollectionStore(),h=t.getModel();if(!h)return;const p=(0,n.FT)({property:i,schema:o,block:h,getRecordModel:c.om.fromGetRecordValueFn(s),propertyMapping:null==u?void 0:u.getPropertyMapping(),collectionRequestContext:{userId:d,userTimeZone:(0,a.r)(),depth:0,intl:l,visitedProperties:new Set,resultCache:new Map}}).next().value;if("date"!==p.type)return;const m=p.value,g=m&&(0,r.NK)(m,(0,a.r)());if(!m||!g)return;return{id:h.id,start:g.start,end:g.end,includeTime:"datetime"===m.type||"datetimerange"===m.type,timeZone:"datetime"===m.type||"datetimerange"===m.type?m.time_zone:void 0}}function f(e,t,i){let o=0;for(;;){let n=!1;for(let s=0;s<t;s++)y(i,e+s,o)&&(n=!0);if(!n)break;o++}for(let n=0;n<t;n++)S(i,e+n,o);return o}function y(e,t,i){return Boolean(e[i]&&e[i][t])}function S(e,t,i){e[i]||(e[i]={}),e[i][t]=!0}const C=(0,d.defineMessages)({week:{defaultMessage:"Week",id:"calendar.viewRanges.week"},month:{defaultMessage:"Month",id:"calendar.viewRanges.month"}})},30439:(e,t,i)=>{i.r(t),i.d(t,{TopLevelMobileComponents:()=>v});i(67294);var o=i(480),n=i(86628),s=i(24553),r=i(52187),a=i(61671),l=i(5480),c=i(23586),d=i(43250),u=i(71119),h=i(75538),p=i(27177),m=i(80444),g=i(72087),b=i(85893);function v(){window.__c={n:"TopLevelMobileComponents"};const e=(0,o.O7)(),t=(0,n.qz)(void 0,g.Z),i=(0,n.VK)((()=>{const e=h.default.state;return e.isOnboarding&&"workspace_setup"===e.stage}),[]),v=(0,n.VK)((()=>m.default.state.currentSpaceStore),[]),f=(0,n.VK)((()=>m.default.state.mainEditorCurrentBlockStore),[]),y=(0,n.VK)((()=>v&&v.canEdit()),[v]);return i?(0,b.jsx)(b.Fragment,{}):(0,b.jsxs)("div",{className:d.alX,children:[(0,b.jsx)(p.Z,{createType:"add-account"}),v&&(0,b.jsx)(r.Z,{store:v}),(0,b.jsx)(c.Z,{request:{},render:()=>null,requestStore:t,performRequest:()=>(0,u.pu)(e)}),(0,b.jsx)(a.Z,{passwordRequestStore:t}),y&&f&&(0,b.jsx)(l.Z,{store:f,isMobile:!0}),(0,b.jsx)(s.Z,{})]})}},19361:(e,t,i)=>{i.d(t,{Z:()=>s});var o=i(49085);class n extends o.default{getInitialState(){return{isSupported:!1,active:!1,stage:"inactive",totalResults:0}}toggleActiveState(e){this.update((t=>({...t,active:e,stage:e?t.stage:"inactive",totalResults:e?0:t.totalResults})))}}const s=new n},47593:(e,t,i)=>{i.d(t,{Z:()=>s});var o=i(49085);class n extends o.default{getInitialState(){return{open:!1}}}const s=new n},67940:(e,t,i)=>{i.d(t,{Z:()=>r});var o=i(49085),n=i(4615);class s extends o.default{getInitialState(){return{flowId:void 0}}getOrCreateFlowId(){const e=this.state.flowId||(0,n.ZP)();return this.state.flowId&&this.setState({flowId:e}),e}}const r=new s},53610:(e,t,i)=>{i.d(t,{Z:()=>o});const o=new(i(61766).Z)},66881:(e,t,i)=>{i.d(t,{g:()=>o});const o=i(49085).default.createValue({shouldReset:!1})},80671:(e,t,i)=>{i.d(t,{Cl:()=>m,Kj:()=>g,jw:()=>b,k2:()=>h,v5:()=>p});i(21703);var o=i(72126),n=i(4615),s=i(19889),r=i(896),a=i(12139),l=i(50906),c=i(80444),d=i(26136),u=i(63423);function h(){u.Z.setState({open:!0,stage:"limit_reached",addOnUpgradeId:(0,n.ZP)(),tax:0})}function p(){u.Z.setState({open:!1})}function m(e){const t=u.Z.state;t.open&&u.Z.setState({...t,stage:"confirm_purchase",coupon:e&&!(0,r.$v)(e)?e:void 0})}function g(){u.Z.setState({open:!0,stage:"cancel_plan",addOnUpgradeId:(0,n.ZP)(),tax:0})}async function b(e){const{environment:t,spaceStore:i,from:n}=e,r=function(){var e;const t=null===(e=c.default.state.currentSpaceStore)||void 0===e?void 0:e.getAdminIds();if(!t||0===t.length)throw new Error("No admins found in the current space");return(0,o.UP)(t)}(),u=i.getName(),h=d.U6.createChildStore(i,{table:s.KJ,id:r});await h.load();const p=h.getEmail();p?l.bfr(t,{admin_id:r,admin_email:p,space_name:u,from:n}):a.IE(new Error("Could not get email for admin in sendMemberRequestForAddOn"))}},37652:(e,t,i)=>{i.d(t,{V:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("arrowLeft",{viewBox:"0 0 30 30",svg:(0,n.jsx)("polygon",{points:"29 14 4.813 14 13.406 5.406 12 4 1 15 12 26 13.406 24.594 4.813 16 29 16"})})},95341:(e,t,i)=>{i.d(t,{d:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("arrowRightSquare",{viewBox:"0 0 18 18",svg:(0,n.jsx)("path",{d:"M3.06641 17.998L14.9121 17.998C16.9629 17.998 17.9785 16.9824 17.9785 14.9707L17.9785 3.04688C17.9785 1.03516 16.9629 0.0195312 14.9121 0.0195312L3.06641 0.0195312C1.02539 0.0195312 0 1.02539 0 3.04688L0 14.9707C0 16.9922 1.02539 17.998 3.06641 17.998ZM14.1797 8.98438C14.1797 9.20898 14.082 9.38477 13.8867 9.57031L10.4883 12.9785C10.3516 13.1152 10.1758 13.1934 9.96094 13.1934C9.54102 13.1934 9.22852 12.8711 9.22852 12.4512C9.22852 12.2363 9.31641 12.0508 9.45312 11.9141L10.7129 10.6738L11.9238 9.6582L9.79492 9.73633L4.56055 9.73633C4.12109 9.73633 3.80859 9.42383 3.80859 8.98438C3.80859 8.53516 4.12109 8.22266 4.56055 8.22266L9.79492 8.22266L11.9238 8.31055L10.7129 7.29492L9.45312 6.05469C9.32617 5.9082 9.22852 5.72266 9.22852 5.50781C9.22852 5.08789 9.54102 4.77539 9.96094 4.77539C10.1758 4.77539 10.3516 4.84375 10.4883 4.98047L13.8867 8.39844C14.0918 8.60352 14.1797 8.75977 14.1797 8.98438Z"})})},22109:(e,t,i)=>{i.d(t,{T:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("arrowsUpDown",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.11 2.385a.61.61 0 01.48-.211c.191 0 .353.07.486.21L8.03 5.409a.66.66 0 01.2.475c0 .191-.061.347-.182.469a.627.627 0 01-.463.181.59.59 0 01-.451-.187L5.926 5.098l-.72-.844.04 1.219v7.242a.624.624 0 01-.187.469.624.624 0 01-.47.187.636.636 0 01-.468-.187.635.635 0 01-.182-.47V5.474l.041-1.22-.726.845-1.201 1.248a.61.61 0 01-.457.187.627.627 0 01-.463-.181.634.634 0 01-.182-.47.66.66 0 01.2-.474l2.958-3.023zm7.786 10.781a.636.636 0 01-.486.205.665.665 0 01-.486-.205l-2.947-3.035a.64.64 0 01-.206-.475c0-.191.061-.345.182-.463a.634.634 0 01.469-.181c.18 0 .33.06.451.181l1.201 1.248.727.85-.041-1.219V2.824c0-.187.06-.342.181-.463a.636.636 0 01.47-.187.627.627 0 01.65.65v7.248l-.041 1.219.726-.85 1.207-1.248a.6.6 0 01.451-.181c.188 0 .342.06.463.181a.615.615 0 01.182.463.648.648 0 01-.2.475l-2.953 3.035z"})})},67220:(e,t,i)=>{i.d(t,{S:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("bot",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M7.996 16C12.381 16 16 12.38 16 8s-3.627-8-8.012-8C3.611 0 0 3.62 0 8s3.62 8 7.996 8zm0-1.594A6.375 6.375 0 011.61 8a6.366 6.366 0 016.38-6.398A6.393 6.393 0 0114.398 8a6.383 6.383 0 01-6.403 6.406zM4.648 8.518c0 .21.17.364.386.364h2.53l-1.346 3.605c-.202.527.355.813.703.395l4.168-5.176a.515.515 0 00.132-.325c0-.209-.17-.356-.379-.356H8.305l1.346-3.613c.201-.518-.356-.812-.704-.395l-4.16 5.184a.484.484 0 00-.14.317z"})})},2585:(e,t,i)=>{i.d(t,{f:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},43039:(e,t,i)=>{i.d(t,{m:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("flatNotionLogoMenuBar",{viewBox:"0 0 128 128",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M76.8 10.25H51.2C42.07 10.25 35.839 10.258 31.0171 10.6519C26.3149 11.0361 23.8625 11.7357 22.1257 12.6206C18.0332 14.7059 14.7059 18.0332 12.6206 22.1257C11.7357 23.8625 11.0361 26.3149 10.6519 31.0171C10.258 35.839 10.25 42.07 10.25 51.2V76.8C10.25 85.93 10.258 92.161 10.6519 96.9829C11.0361 101.685 11.7357 104.138 12.6206 105.874C14.7059 109.967 18.0332 113.294 22.1257 115.379C23.8625 116.264 26.3149 116.964 31.0171 117.348C35.839 117.742 42.07 117.75 51.2 117.75H76.8C85.93 117.75 92.161 117.742 96.9829 117.348C101.685 116.964 104.138 116.264 105.874 115.379C109.967 113.294 113.294 109.967 115.379 105.874C116.264 104.138 116.964 101.685 117.348 96.9829C117.742 92.161 117.75 85.93 117.75 76.8V51.2C117.75 42.07 117.742 35.839 117.348 31.0171C116.964 26.3149 116.264 23.8625 115.379 22.1257C113.294 18.0332 109.967 14.7059 105.874 12.6206C104.138 11.7357 101.685 11.0361 96.9829 10.6519C92.161 10.258 85.93 10.25 76.8 10.25ZM3.48779 17.4723C0 24.3175 0 33.2783 0 51.2V76.8C0 94.7217 0 103.683 3.48779 110.528C6.55574 116.549 11.4511 121.444 17.4723 124.512C24.3175 128 33.2783 128 51.2 128H76.8C94.7217 128 103.683 128 110.528 124.512C116.549 121.444 121.444 116.549 124.512 110.528C128 103.683 128 94.7217 128 76.8V51.2C128 33.2783 128 24.3175 124.512 17.4723C121.444 11.4511 116.549 6.55574 110.528 3.48779C103.683 0 94.7217 0 76.8 0H51.2C33.2783 0 24.3175 0 17.4723 3.48779C11.4511 6.55574 6.55574 11.4511 3.48779 17.4723Z"}),(0,n.jsx)("path",{d:"M34.8247 30H51.877L82.6339 73.8338V38.7877L72.8 36.9046C72.5211 35.0215 72.9047 33.4174 73.9508 32.0923C74.997 30.6974 76.6708 30 78.9723 30H99.5816C100.14 31.4646 100.105 32.7897 99.4769 33.9754C98.919 35.161 97.838 36.1026 96.2339 36.8L92.8862 38.3692V97.1631C90.9334 98.0697 89.4339 98.6626 88.3877 98.9415C87.3416 99.2205 86.0513 99.36 84.517 99.36C82.4246 99.36 80.5416 98.8718 78.8677 97.8954C77.1939 96.919 75.6595 95.4195 74.2646 93.3969L45.4954 52.7015V89.3169L55.957 91.2C56.2359 93.0831 55.8523 94.722 54.8062 96.1169C53.76 97.5118 52.0862 98.2092 49.7847 98.2092C48.32 98.2092 46.2975 98.1744 43.717 98.1046C41.1365 98.0349 38.8 98 36.7077 98C34.8944 98 33.1857 98.0349 31.5816 98.1046C30.0472 98.1046 29.0011 98.1395 28.4431 98.2092C28.3036 97.8605 28.199 97.4769 28.1293 97.0585C28.0595 96.64 28.0247 96.2564 28.0247 95.9077C28.0247 94.9313 28.2688 94.0246 28.757 93.1877C29.3149 92.3508 30.2565 91.6882 31.5816 91.2L35.2431 89.7354V37.9508L28.6524 36.5908C28.3734 34.7077 28.757 33.1385 29.8031 31.8831C30.8493 30.6277 32.5231 30 34.8247 30Z"})]})})},13530:(e,t,i)=>{i.d(t,{s:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("historyForward",{viewBox:"0 0 14 14",svg:(0,n.jsx)("polygon",{points:"11.14107 6.25324 5.94392 1.0561 7 0 13.471958 6.47196 14 7 13.471958 7.52804 7 14 5.94392 12.94392 11.14107 7.74676 0 7.74676 1.77635684e-15 6.25324"})})},5377:(e,t,i)=>{i.d(t,{y:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("image",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M2,2v26h26V2H2z M26,26H4v-4h22V26z M26,20H4V4h22V20z M8,10c1.104,0,2-0.896,2-2S9.104,6,8,6S6,6.896,6,8S6.896,10,8,10z M18,7l-5,5l-2-1l-5,7h18L18,7z M11.635,13.553l1.76,0.881l4.129-4.129L20.631,16H9.887L11.635,13.553z"})})},55617:(e,t,i)=>{i.d(t,{A:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("indentDown",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M24,15l-1.406-1.406L16,20.188V2h-2v18.188l-6.594-6.594L6,15l9,9L24,15z M2,26v2h26v-2H2z"})})},43410:(e,t,i)=>{i.d(t,{z:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("keyboard",{viewBox:"0 0 30 30",svg:(0,n.jsxs)("g",{children:[" ",(0,n.jsx)("path",{d:"M15,30l8-10H7Zm0-3.2L11.16,22h7.68Z"})," ",(0,n.jsx)("path",{d:"M6,4H4V6H6V4Zm4,0H8V6h2V4Zm4,0H12V6h2V4Zm4,0H16V6h2V4Zm4,0H20V6h2V4Zm4,0H24V6h2V4ZM10,8H8v2h2V8Zm4,0H12v2h2V8Zm4,0H16v2h2V8Zm4,0H20v2h2V8Zm-2,4H10v2H20V12Zm5,0H22v2h3V12ZM5,14H8V12H5v2ZM0,0V18H30V0H0ZM28,16H2V2H28V16Z"})," "]})})},14198:(e,t,i)=>{i.d(t,{K:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("mobileOffline",{viewBox:"0 0 26 26",svg:(0,n.jsx)("path",{d:"M26.0029 13.2441C25.9922 11.9873 24.2842 11.0742 22.2324 11.0742H17.9033C17.3018 11.0742 17.0762 10.9775 16.7217 10.5693L9.50293 2.69531C9.27734 2.4375 8.99805 2.30859 8.67578 2.30859H7.42969C7.15039 2.30859 6.98926 2.55566 7.12891 2.85645L10.8457 11.0742L5.38867 11.6973L3.44434 8.13086C3.30469 7.8623 3.06836 7.74414 2.71387 7.74414H2.25195C1.97266 7.74414 1.79004 7.92676 1.79004 8.20605V18.2822C1.79004 18.5615 1.97266 18.7334 2.25195 18.7334H2.71387C3.06836 18.7334 3.30469 18.6152 3.44434 18.3574L5.38867 14.791L10.8457 15.4141L7.12891 23.6318C6.98926 23.9219 7.15039 24.1797 7.42969 24.1797H8.67578C8.99805 24.1797 9.27734 24.04 9.50293 23.793L16.7217 15.9082C17.0762 15.5107 17.3018 15.4141 17.9033 15.4141H22.2324C24.2842 15.4141 25.9922 14.4902 26.0029 13.2441Z"})})},6568:(e,t,i)=>{i.d(t,{a:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("mobileTopbarComments",{viewBox:"0 0 27 27",svg:(0,n.jsx)("path",{d:"M8.74414 24.6816C9.22266 24.6816 9.55469 24.4277 10.1504 23.9004L13.5195 20.9023H19.7891C22.6992 20.9023 24.2617 19.291 24.2617 16.4297V8.94922C24.2617 6.08789 22.6992 4.47656 19.7891 4.47656H7.21094C4.30078 4.47656 2.73828 6.07812 2.73828 8.94922V16.4297C2.73828 19.3008 4.30078 20.9023 7.21094 20.9023H7.67969V23.4414C7.67969 24.1934 8.06055 24.6816 8.74414 24.6816ZM9.14453 22.8945V20.0625C9.14453 19.5352 8.93945 19.3301 8.41211 19.3301H7.21094C5.23828 19.3301 4.31055 18.3242 4.31055 16.4199V8.94922C4.31055 7.04492 5.23828 6.04883 7.21094 6.04883H19.7891C21.752 6.04883 22.6895 7.04492 22.6895 8.94922V16.4199C22.6895 18.3242 21.752 19.3301 19.7891 19.3301H13.4609C12.9141 19.3301 12.6406 19.4082 12.2695 19.7891L9.14453 22.8945ZM8.4707 9.99414H18.4121C18.7246 9.99414 18.9688 9.75 18.9688 9.42773C18.9688 9.125 18.7246 8.87109 18.4121 8.87109H8.4707C8.1582 8.87109 7.9043 9.125 7.9043 9.42773C7.9043 9.75 8.1582 9.99414 8.4707 9.99414ZM8.4707 13.1777H18.4121C18.7246 13.1777 18.9688 12.9238 18.9688 12.6016C18.9688 12.2988 18.7246 12.0449 18.4121 12.0449H8.4707C8.1582 12.0449 7.9043 12.2988 7.9043 12.6016C7.9043 12.9238 8.1582 13.1777 8.4707 13.1777ZM8.4707 16.3516H14.9355C15.248 16.3516 15.4922 16.1074 15.4922 15.7949C15.4922 15.4727 15.248 15.2188 14.9355 15.2188H8.4707C8.1582 15.2188 7.9043 15.4727 7.9043 15.7949C7.9043 16.1074 8.1582 16.3516 8.4707 16.3516Z"})})},1413:(e,t,i)=>{i.d(t,{l:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("moveUp",{viewBox:"0 0 30 30",svg:(0,n.jsx)("path",{d:"M14,5.813V24h2V5.813l6.594,6.594L24,11l-9-9l-9,9l1.406,1.406L14,5.813z M2,26v2h26v-2H2z"})})},18101:(e,t,i)=>{i.d(t,{b:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("reopen",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M1.64844 7.88477C1.64844 10.791 3.98047 13.1289 6.88086 13.1289C9.78125 13.1289 12.1133 10.791 12.1133 7.88477C12.1133 7.53906 11.873 7.29297 11.5273 7.29297C11.1934 7.29297 10.9707 7.53906 10.9707 7.88477C10.9707 10.1582 9.14844 11.9805 6.88086 11.9805C4.61328 11.9805 2.79688 10.1582 2.79688 7.88477C2.79688 5.59961 4.60156 3.78906 6.86328 3.78906C7.25 3.78906 7.60742 3.81836 7.90625 3.88281L6.3125 5.46484C6.20703 5.57617 6.1543 5.69922 6.1543 5.85156C6.1543 6.17383 6.39453 6.41992 6.71094 6.41992C6.875 6.41992 7.00977 6.36719 7.10938 6.26172L9.51758 3.83594C9.64062 3.71289 9.69922 3.57227 9.69922 3.41406C9.69922 3.26172 9.63477 3.10938 9.51758 2.99219L7.10938 0.548828C7.00977 0.4375 6.875 0.378906 6.71094 0.378906C6.39453 0.378906 6.1543 0.636719 6.1543 0.953125C6.1543 1.10547 6.20703 1.24023 6.30664 1.3457L7.72461 2.74609C7.4668 2.69336 7.16797 2.66406 6.86328 2.66406C3.96875 2.66406 1.64844 4.98438 1.64844 7.88477Z"})})},53523:(e,t,i)=>{i.d(t,{N:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("repeat",{viewBox:"0 0 16 14",svg:(0,n.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})},90028:(e,t,i)=>{i.d(t,{j:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("searchInPage",{viewBox:"0 0 12 14",svg:(0,n.jsx)("path",{d:"M2.877 13.365h6.24c.63 0 1.104-.164 1.424-.492.32-.324.48-.8.48-1.43V6.13c0-.274-.015-.504-.046-.691a1.531 1.531 0 00-.182-.522 2.185 2.185 0 00-.387-.498l-3.07-3.123a2.11 2.11 0 00-.48-.38 1.528 1.528 0 00-.51-.183A3.464 3.464 0 005.7.68H2.877c-.629 0-1.104.164-1.424.492-.32.324-.48.8-.48 1.43v8.841c0 .633.16 1.112.48 1.436.32.324.795.486 1.424.486zm.094-1.154c-.282 0-.492-.072-.633-.217-.14-.144-.211-.351-.211-.621V2.678c0-.27.07-.479.21-.627.142-.149.354-.223.64-.223h2.496V5.04c0 .418.101.73.304.938.207.207.52.31.938.31h3.158v5.086c0 .27-.07.477-.21.621-.142.145-.354.217-.64.217H2.971zm3.855-6.938c-.12 0-.209-.027-.263-.082-.051-.054-.077-.142-.077-.263V1.986l3.229 3.287H6.826z"})})},96895:(e,t,i)=>{i.d(t,{q:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("sidebarRight",{viewBox:"0 0 23 18",svg:(0,n.jsx)("path",{d:"M3.06641 17.998L19.9609 17.998C22.0117 17.998 23.0273 16.9824 23.0273 14.9707L23.0273 3.04688C23.0273 1.03516 22.0117 0.0195312 19.9609 0.0195312L3.06641 0.0195312C1.02539 0.0195312 0 1.02539 0 3.04688L0 14.9707C0 16.9922 1.02539 17.998 3.06641 17.998ZM3.08594 16.4258C2.10938 16.4258 1.57227 15.9082 1.57227 14.8926L1.57227 3.125C1.57227 2.10938 2.10938 1.5918 3.08594 1.5918L19.9414 1.5918C20.9082 1.5918 21.4551 2.10938 21.4551 3.125L21.4551 14.8926C21.4551 15.9082 20.9082 16.4258 19.9414 16.4258ZM14.082 16.7285L15.6152 16.7285L15.6152 1.29883L14.082 1.29883ZM17.4902 5.21484L19.5801 5.21484C19.8828 5.21484 20.1367 4.95117 20.1367 4.66797C20.1367 4.375 19.8828 4.12109 19.5801 4.12109L17.4902 4.12109C17.1973 4.12109 16.9336 4.375 16.9336 4.66797C16.9336 4.95117 17.1973 5.21484 17.4902 5.21484ZM17.4902 7.74414L19.5801 7.74414C19.8828 7.74414 20.1367 7.48047 20.1367 7.1875C20.1367 6.89453 19.8828 6.65039 19.5801 6.65039L17.4902 6.65039C17.1973 6.65039 16.9336 6.89453 16.9336 7.1875C16.9336 7.48047 17.1973 7.74414 17.4902 7.74414ZM17.4902 10.2637L19.5801 10.2637C19.8828 10.2637 20.1367 10.0195 20.1367 9.72656C20.1367 9.43359 19.8828 9.17969 19.5801 9.17969L17.4902 9.17969C17.1973 9.17969 16.9336 9.43359 16.9336 9.72656C16.9336 10.0195 17.1973 10.2637 17.4902 10.2637Z"})})},15336:(e,t,i)=>{i.d(t,{q:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("squareStop",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M9.79469 18.5894C8.59333 18.5894 7.46094 18.3595 6.39753 17.8996C5.33986 17.4398 4.40579 16.8046 3.5953 15.9941C2.78481 15.1836 2.14963 14.2495 1.68978 13.1919C1.22993 12.1284 1 10.9961 1 9.79469C1 8.59333 1.22993 7.46381 1.68978 6.40615C2.14963 5.34274 2.78193 4.40579 3.58667 3.5953C4.39717 2.78481 5.33124 2.14963 6.3889 1.68978C7.45232 1.22993 8.5847 1 9.78607 1C10.9874 1 12.1198 1.22993 13.1832 1.68978C14.2466 2.14963 15.1836 2.78481 15.9941 3.5953C16.8046 4.40579 17.4398 5.34274 17.8996 6.40615C18.3595 7.46381 18.5894 8.59333 18.5894 9.79469C18.5894 10.9961 18.3595 12.1284 17.8996 13.1919C17.4398 14.2495 16.8046 15.1836 15.9941 15.9941C15.1836 16.8046 14.2466 17.4398 13.1832 17.8996C12.1256 18.3595 10.9961 18.5894 9.79469 18.5894ZM7.44944 13.028H12.1399C12.4159 13.028 12.6314 12.9504 12.7866 12.7952C12.9476 12.64 13.028 12.4245 13.028 12.1486V7.42357C13.028 7.15341 12.9476 6.94073 12.7866 6.78553C12.6314 6.63033 12.4159 6.55273 12.1399 6.55273H7.44944C7.17353 6.55273 6.9551 6.63033 6.79415 6.78553C6.63895 6.94073 6.56135 7.15341 6.56135 7.42357V12.1486C6.56135 12.4245 6.63895 12.64 6.79415 12.7952C6.9551 12.9504 7.17353 13.028 7.44944 13.028Z"})})},73426:(e,t,i)=>{i.d(t,{i:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("templatesColor",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z",fill:"#3C9ED7"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z",fill:"#E7595E"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z",fill:"#F5BC4E"})]})})},63048:(e,t,i)=>{i.d(t,{C:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("thinPlus",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M 7.75 0L 6.25 0L 6.25 6.25L 0 6.25L 0 7.75L 6.25 7.75L 6.25 14L 7.75 14L 7.75 7.75L 14 7.75L 14 6.25L 7.75 6.25L 7.75 0Z"})})},36308:(e,t,i)=>{i.d(t,{V:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("title",{viewBox:"0 0 14 10",svg:(0,n.jsx)("path",{d:"M10.674 9.45c.293 0 .576-.052.85-.153.273-.098.515-.238.726-.422.215-.184.383-.4.504-.65h.03v.662a.569.569 0 00.163.416c.11.101.25.152.422.152a.579.579 0 00.428-.164c.11-.105.164-.256.164-.451V4.973c0-.43-.104-.805-.31-1.125-.208-.32-.5-.569-.88-.744-.378-.18-.828-.27-1.347-.27-.594 0-1.114.115-1.559.346-.445.226-.75.533-.914.92-.031.07-.056.14-.076.21a.684.684 0 00-.03.194c0 .148.05.27.147.363.102.09.23.135.387.135a.61.61 0 00.287-.064.555.555 0 00.217-.2c.172-.32.377-.554.615-.703.238-.148.533-.223.885-.223.426 0 .76.112 1.002.334.242.223.363.528.363.915v.486l-1.828.1c-.77.042-1.361.23-1.775.562-.41.328-.616.773-.616 1.336 0 .379.09.71.27.996.183.285.435.508.756.668.324.16.697.24 1.119.24zm.328-.938c-.367 0-.666-.092-.897-.276a.906.906 0 01-.345-.738.86.86 0 01.34-.709c.23-.184.558-.29.984-.322l1.664-.106v.598c0 .293-.078.557-.234.791a1.69 1.69 0 01-.627.557c-.266.136-.56.205-.885.205zM.689 9.414c.2 0 .354-.045.463-.135.114-.086.202-.234.264-.445l.65-1.816h3.346l.65 1.816c.063.21.149.36.258.445.114.09.268.135.463.135.207 0 .371-.057.492-.17a.593.593 0 00.188-.463c0-.129-.027-.27-.082-.422L4.79 1.357c-.09-.246-.22-.43-.393-.55C4.23.686 4.012.625 3.742.625c-.508 0-.847.244-1.02.732L.116 8.39a1.3 1.3 0 00-.076.404c0 .195.057.348.17.457.117.11.277.164.48.164zm1.717-3.486L3.73 2.119h.03l1.324 3.809H2.406z"})})},47560:(e,t,i)=>{i.d(t,{o:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("topbarCommentFilled",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M5.9375 18.4844C6.38281 18.4844 6.71094 18.2656 7.25 17.7891L9.92969 15.4297H14.6328C16.9844 15.4297 18.3047 14.0703 18.3047 11.75V5.67969C18.3047 3.35938 16.9844 2 14.6328 2H4.67188C2.32812 2 1 3.35938 1 5.67969V11.75C1 14.0781 2.36719 15.4297 4.61719 15.4297H4.9375V17.3438C4.9375 18.0391 5.30469 18.4844 5.9375 18.4844ZM6.32812 16.7344V14.5078C6.32812 14.0469 6.125 13.8672 5.6875 13.8672H4.72656C3.25781 13.8672 2.55469 13.125 2.55469 11.7031V5.72656C2.55469 4.30469 3.25781 3.5625 4.72656 3.5625H14.5859C16.0469 3.5625 16.75 4.30469 16.75 5.72656V11.7031C16.75 13.125 16.0469 13.8672 14.5859 13.8672H9.84375C9.36719 13.8672 9.13281 13.9453 8.80469 14.2891L6.32812 16.7344ZM5.67969 6.82812H13.5469C13.8125 6.82812 14.0312 6.60156 14.0312 6.32812C14.0312 6.07031 13.8125 5.85156 13.5469 5.85156H5.67969C5.41406 5.85156 5.20312 6.07031 5.20312 6.32812C5.20312 6.60156 5.41406 6.82812 5.67969 6.82812ZM5.67969 9.30469H13.5469C13.8125 9.30469 14.0312 9.08594 14.0312 8.8125C14.0312 8.55469 13.8125 8.32812 13.5469 8.32812H5.67969C5.41406 8.32812 5.20312 8.55469 5.20312 8.8125C5.20312 9.08594 5.41406 9.30469 5.67969 9.30469ZM5.67969 11.7891H10.8047C11.0781 11.7891 11.2891 11.5703 11.2891 11.3047C11.2891 11.0312 11.0781 10.8125 10.8047 10.8125H5.67969C5.41406 10.8125 5.20312 11.0312 5.20312 11.3047C5.20312 11.5703 5.41406 11.7891 5.67969 11.7891Z"})})},54434:(e,t,i)=>{i.d(t,{F:()=>s});i(67294);var o=i(45238),n=i(85893);const s=(0,o.I)("upLeftArrow",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.8457 10.5869C2.8457 11.0312 3.19434 11.373 3.59766 11.373C4.00098 11.373 4.3291 11.0176 4.3291 10.6074V8.05762L4.21973 5.22754L5.32031 6.47168L11.8418 12.9932C11.999 13.1504 12.1904 13.2256 12.3818 13.2256C12.7852 13.2256 13.1543 12.8564 13.1543 12.46C13.1543 12.2686 13.0654 12.0771 12.9082 11.9199L6.40039 5.39844L5.15625 4.30469L8.10254 4.40039H10.5361C10.9463 4.40039 11.2881 4.07227 11.2881 3.67578C11.2881 3.27246 10.9736 2.93066 10.5156 2.93066H3.64551C3.16016 2.93066 2.85254 3.25195 2.85254 3.72363L2.8457 10.5869Z"})})}}]);