"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[2505],{7512:(e,t,s)=>{s.d(t,{A:()=>p,t:()=>h});var i=s(68939),n=s(33929),o=s(80444),r=s(5315),a=s(50906),d=s(54642),l=s(47307),c=s(92625),u=s(97977),m=s(9953);const g=(0,i.defineMessages)({deletingAccount:{id:"accountActions.deletingAccount.loadingMessage",defaultMessage:"Deleting your account…"},noUserError:{id:"accountActions.deletingAccount.noUserToDeleteMessage",defaultMessage:"No account to delete."}}),p=function(e){const{userStore:t,data:s,transaction:i}=e,n={};"name"in s&&s.name&&(n.name=s.name),"profilePhoto"in s&&(n.profile_photo=s.profilePhoto),0!==Object.keys(n).length&&m.sW({store:t,data:n,transaction:i})};async function h(e){c.j({message:g.deletingAccount});const t=e.currentUser.id,{currentUserRootStore:s,currentUserStore:i}=o.default.state;if(!s||!i||!t)return c.x(),void l.showErrorMessage(n.default.formatMessage(g.noUserError));a.xti(e),await d.deleteUser(e,{}),await r.transactionQueue.clearForUser(t),u.logoutSingleAccount({environment:e,userId:t}),c.x()}},61652:(e,t,s)=>{s.d(t,{y1:()=>se,BO:()=>ie,Qr:()=>ne,gJ:()=>ge,PN:()=>de,ZO:()=>W,hN:()=>me,g:()=>le,Mj:()=>ee,$G:()=>$,AW:()=>K,Tp:()=>ue,zh:()=>pe,GI:()=>ae,q$:()=>Q});s(67294);var i=s(68626),n=s(42875),o=s(59730),r=s(15157),a=s(72126),d=s(29477),l=s(21202),c=s(19889),u=s(68939),m=s(27617),g=s(86628),p=s(24405),h=s(82990),f=s(19306),y=s(61519),x=s(68785),S=s(85893);const b={fontWeight:h.Z.fontWeight.semibold};const v=function(e){let{exportProgressStore:t,disabledExportTeamNames:s}=e;window.__c={n:"ExportProgress"};const{messageStyle:i,spinnerContainerStyle:n}=(0,p.yK)((e=>({messageStyle:{fontSize:14,color:e.mediumTextColor,textAlign:"center"},spinnerContainerStyle:{marginTop:24,marginBottom:24,display:"flex",justifyContent:"center"}})),[]);return(0,S.jsxs)("div",{style:i,children:[(0,S.jsx)("div",{style:n,children:(0,S.jsx)(x.Z,{})}),(0,S.jsx)(j,{exportProgressStore:t}),(0,S.jsx)(w,{exportProgressStore:t}),(0,S.jsx)(M,{disabledExportTeamNames:s})]})};function M(e){let{disabledExportTeamNames:t}=e;return t.length>0?(0,S.jsxs)("span",{children:[(0,S.jsx)(y.Z,{size:10}),(0,S.jsx)("p",{children:(0,S.jsx)(u.FormattedMessage,{id:"exportActions.exportDisabledTeams.message",defaultMessage:"Export is disabled for the following teamspaces: <b>{teamNames}</b>",values:{teamNames:(0,f.W)(t),b:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,S.jsx)("span",{style:b,children:t})}}})})]}):null}function w(e){let{exportProgressStore:t}=e;window.__c={n:"Email"};const{targetEmailAddress:s}=(0,g.VK)((()=>t.state),[t]);return s?(0,S.jsx)("p",{children:(0,S.jsx)(u.FormattedMessage,{id:"exportProgressDialog.emailMessage",defaultMessage:"We'll also send you an email with the download link."})}):null}function j(e){let{exportProgressStore:t}=e;window.__c={n:"Progress"};const s=(0,g.VK)((()=>t.state.pagesExported),[t]);return s>0?(0,S.jsx)("p",{children:(0,S.jsx)(u.FormattedMessage,{id:"exportProgressDialog.exportedPagesMessage",defaultMessage:"{pagesExported, plural, one {{pagesExported} page exported} other {{pagesExported} pages exported}}",values:{pagesExported:s}})}):(0,S.jsx)("p",{children:(0,S.jsx)(u.FormattedMessage,{id:"exportProgressDialog.exportStartedMessage",defaultMessage:"Exporting…"})})}var k=s(19037),C=s(33954),T=s(33929),I=s(37034),P=s(25976),F=s(80444),_=s(886),Z=s(71071),A=s(49085);class R extends A.default{getInitialState(){return{pagesExported:0}}}const B=R;var E=s(26136),O=s(20454),D=s(88893),N=s(50906),V=s(54642),U=s(47307),L=s(92625),q=s(75018);const G=(0,u.defineMessages)({exporting:{id:"exportActions.exporting.loadingMessage",defaultMessage:"Exporting"},exportAuditLogEmail:{id:"exportActions.auditLog.exporting.EmailMessage",defaultMessage:"Your CSV export is currently being generated. The generated CSV has a 2-hour delay from the real time audit log. Once it is ready, an email will be sent to you with the download link."},exportCSVEmail:{id:"exportActions.exportingCSV.EmailMessage",defaultMessage:"Your CSV export is currently being generated. Once it is ready, an email will be sent to you with the download link."},exportFailed:{id:"exportActions.exportFailedError.message",defaultMessage:"Export failed."},adminMessage:{defaultMessage:"Admin",id:"export.userPermissionsRole.admin.message"},workspaceOwnerMessage:{defaultMessage:"Workspace owner",id:"export.userPermissionsRole.workspaceOwner.message"},memberMessage:{defaultMessage:"Member",id:"export.userPermissionsRole.member.message"},membershipAdminMessage:{defaultMessage:"Membership admin",id:"export.userPermissionsRole.membershipAdmin.message"},guestMessage:{defaultMessage:"Guest",id:"export.userPermissionsRole.guest.message"},idMessage:{defaultMessage:"ID",id:"export.csvHeader.id"},emailMessage:{defaultMessage:"Email",id:"export.csvHeader.email"},nameMessage:{defaultMessage:"Name",id:"export.csvHeader.name"},roleMessage:{defaultMessage:"Role",id:"export.csvHeader.role"},permissionGroupsMessage:{defaultMessage:"Permission groups",id:"export.csvHeader.permissionGroups"},pagesMessage:{defaultMessage:"Pages",id:"export.csvHeader.pages"},partitionMessage:{defaultMessage:"Export is still in progress due to file size. We will send you an email about its progress.",id:"export.exportPartitioned.message"},privatePageMessage:{defaultMessage:"Private page",id:"export.privatePageTitle.message"},pageTitleAndIdMessage:{defaultMessage:"{pageTitle} ({pageId})",id:"export.pageTitleAndId.message"},pageSeparatorMessage:{defaultMessage:", ",id:"export.pageSeparator.message"}});async function W(e,t){if(!te({environment:e,...t}))return void N.y4(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});const{currentUserStore:s}=F.default.state;if(!s)return void N.y4(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});const i=s.getEmail();if(!i)return void N.y4(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive});N.Md8(e,{target:"block",format:t.exportOptions.exportType,recursive:t.recursive}),"currentView"===t.exportOptions.collectionViewExportType&&(t.exportOptions.preferredViewMap=H(s.id));const n=V.exportBlock(e,t);await z(e,n,t.recursive,i)}async function K(e,t){if(!te({environment:e,recursive:!0,exportOptions:t.exportOptions}))return void N.y4(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});const{currentUserStore:s}=F.default.state;if(!s)return void N.y4(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});const i=s.getEmail();if(!i)return void N.y4(e,{target:"space",format:t.exportOptions.exportType,recursive:!0});N.Md8(e,{target:"space",format:t.exportOptions.exportType,recursive:!0}),"currentView"===t.exportOptions.collectionViewExportType&&(t.exportOptions.preferredViewMap=H(s.id));const n=V.exportSpace(e,t);await z(e,n,!0,i)}async function z(e,t,s,i){const{currentSpaceViewStore:n,currentSpaceStore:o}=F.default.state;if(!n)return;const r=new B;r.setState({pagesExported:0,targetEmailAddress:i});let a,l=!1;const c=n.getTeamsStores().filter((e=>e.getSetting("disable_export"))).flatMap((e=>e.getName()||[]));if(s){const t=c.length>0?6e3:1250;a=(0,d.Vs)(t);const s={exportProgressStore:r,disabledExportTeamNames:c};U.showDialog({message:(0,S.jsx)(v,{...s}),showCancel:!1,keepFocus:!0,disableBackgroundDismiss:!0,items:[{label:(0,S.jsx)(u.FormattedMessage,{id:"exportProgressDialog.closeButton.label",defaultMessage:"Close"}),onAccept:()=>{pe({environment:e,spaceId:null==o?void 0:o.id}),l=!0}}]})}else a=Promise.resolve(),L.j({message:G.exporting});for await(const d of t){if(l)return;if(d.error)return L.x(),void U.showErrorMessage(T.default.formatMessage(G.exportFailed));{const{value:t}=d;if("complete"===t.type||"partition"===t.type)return await a,L.x(),void("complete"===t.type?(U.dismissDialog(),!l&&t.exportURL&&q.downloadExportUrl(e,t.exportURL)):U.showMessage({message:T.default.formatMessage(G.partitionMessage)}));r.setState({...r.state,pagesExported:t.pagesExported})}}}function H(e){const t={};return r.Z.scan(((s,i)=>{if(s.includes(_.Z.PREFERENCE_KEY_PREFIX)&&s.includes(e)){const e=s.split(_.Z.PREFERENCE_KEY_PREFIX)[1];e&&i&&(t[e]=i)}})),t}function Q(e){const{root:t,environment:s,isCollectionViewExportTypeSupported:i}=e,o=s.currentUser.id,r=re(o),a=r&&r.exportType||"markdown",d=i?"currentView":void 0,l="pdf"===a?{exportType:"pdf",timeZone:(0,n.r)(),pdfFormat:ae(o),locale:"en",collectionViewExportType:d}:{exportType:a,timeZone:(0,n.r)(),locale:"en",collectionViewExportType:d};ie(s,{open:!0,root:t,recursive:"space"===t.table,exportOptions:l,shouldExportComments:!1})}const Y=(e,t)=>{switch(t){case"editor":return e.formatMessage(G.workspaceOwnerMessage);case"membership_admin":return e.formatMessage(G.membershipAdminMessage);case"read_and_write":return e.formatMessage(G.memberMessage);case"none":return e.formatMessage(G.guestMessage);default:return i.log({level:"error",from:"exportActions",type:"roleNotFound",data:{miscDataToConvertToString:{role:t}}}),""}};async function $(e,t){const{spaceStore:s,subscriptionData:i,intl:n}=t,o=s.getPermissionGroups();await V.exportSpaceMembers(e,{spaceId:s.getSpaceId()});const r=a.oA(await Promise.all(i.users.map((async e=>{const t=O.U.createChildStore(s,{table:c.KJ,id:e.userId});await t.load();const i=t.getEmail(),r=t.getFullName(n),d=a.oA(o.filter((t=>(t.user_ids||[]).includes(e.userId))).map((e=>e.name)).sort());if(i||r)return[i||"",r||"",Y(n,e.role),d.join(","),t.id]}))));X(J([[G.emailMessage,G.nameMessage,G.roleMessage,G.permissionGroupsMessage,G.idMessage].map((e=>n.formatMessage(e))),...r]),"members.csv")}function X(e,t){const s=document.createElement("a");s.setAttribute("href",`data:text/csv;charset=utf-8,${encodeURIComponent(e)}`),s.setAttribute("download",t),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)}function J(e){return e.map((e=>e.map((e=>((e=e.replace(/"/g,'""')).search(/("|,|\n)/g)>=0&&(e=`"${e}"`),e))).join(","))).join("\n")}async function ee(e,t){let{guests:s,intl:i,spaceStore:n}=t;await V.exportSpaceGuests(e,{spaceId:n.getSpaceId()});const o=i.formatMessage(G.pageSeparatorMessage),r=a.oA(await Promise.all(s.map((async t=>{const s=O.U.createChildStore(n,{table:c.KJ,id:t.userId});async function r(t){const s=E.G.createChildStore(n.getPagesStore(),{table:l.iU,id:t});return await s.load(),(0,I.V)(s,i,e,!1)??i.formatMessage(G.privatePageMessage)}const[,...a]=await Promise.all([s.load(),...t.guestPageIds.map((e=>async function(e){return i.formatMessage(G.pageTitleAndIdMessage,{pageId:e,pageTitle:await r(e)})}(e)))]),d=s.getEmail(),u=s.getFullName(i);if(d||u)return[d||"",u||"",a.join(o),s.id]})))),d=[[G.emailMessage,G.nameMessage,G.pagesMessage,G.idMessage].map((e=>i.formatMessage(e))),...r];X(J(d),"guests.csv"),N.LA0(e,{line_count:d.length})}function te(e){return!("pdf"===e.exportOptions.exportType&&e.recursive)||se(e.environment)}function se(e){return(0,D.qb)(e,"enterprise")||(0,D.qb)(e,"business")||k._T()}function ie(e,t){const s=Z.ZP.state,i=e.currentUser.id;let n=t;if(Z.Sw(n)&&!se(e))if("space"===n.root.table){const e=s.open&&!Z.Sw(s)?s.exportOptions.exportType:"html";n={...n,exportOptions:{...n.exportOptions,exportType:e}}}else n={...n,recursive:!1};if(!te({environment:e,...n}))throw new o.D3("Invalid export options",{data:n});Z.ZP.setState(n),function(e){const t=Z.ZP.state;if(t.open){const s={...re(e),exportType:t.exportOptions.exportType};"pdf"===t.exportOptions.exportType&&(s.pdfFormat=t.exportOptions.pdfFormat),r.Z.set({userId:e,key:oe,value:s})}}(i)}function ne(){Z.ZP.setState({open:!1,shouldExportComments:!1})}const oe="ExportSettings";function re(e){return r.Z.get({userId:e,key:oe})}function ae(e){const t=re(e);return t&&t.pdfFormat||Z.jR()}async function de(e,t){const{currentUserStore:s}=F.default.state,{spaceId:n}=t;if(!s)return i.log({level:"error",from:"exportActions",type:"exportAuditLogCSV-currentUserStoreNotFound",data:{miscDataToConvertToString:{spaceId:n}}}),U.showMessage({message:T.default.formatMessage(G.exportFailed)}),void N.y4(e,{target:"auditLog",format:"csv",recursive:!1});if(!s.isDefined())return i.log({level:"error",from:"exportActions",type:"exportAuditLogCSV-currentUserValueNotFound",data:{miscDataToConvertToString:{spaceId:n}}}),U.showMessage({message:T.default.formatMessage(G.exportFailed)}),void N.y4(e,{target:"auditLog",format:"csv",recursive:!1});N.Md8(e,{target:"auditLog",format:"csv",recursive:!1});const o=V.exportAuditLog(e,t);await ce(o,G.exportAuditLogEmail)}async function le(e){const{environment:t,data:s}=e;N.Md8(t,{target:"domainClaimableSpaces",format:"csv",recursive:!1});const i=V.exportDomainClaimableSpaces(t,s);await ce(i,G.exportCSVEmail)}async function ce(e,t){const s=await e.next();if(s.value.error){const e=(0,C.HV)(T.default.getIntl(),s.value.error);U.showErrorMessage(e)}else U.showMessage({message:T.default.formatMessage(t)})}async function ue(e,t){N.Md8(e,{target:"userAnalytics",format:"csv",recursive:!1});const s=V.exportUserAnalytics(e,t);await ce(s,G.exportCSVEmail)}async function me(e,t){N.Md8(e,{target:"contentAnalytics",format:"csv",recursive:!1});const s=V.exportContentAnalytics(e,t);await ce(s,G.exportCSVEmail)}async function ge(e,t){N.Md8(e,{target:"adminContentSearchAnalytics",format:"csv",recursive:!1});const s=V.exportAdminContentSearch(e,{spaceId:t.spaceId,sort:{field:"relevance",direction:"desc"},query:t.filters.query,audience:t.filters.audience,lastEditedTime:(0,m.Hq)(t.filters.lastEditedTime),createdTime:(0,m.Hq)(t.filters.createdTime),createdBy:t.filters.createdBy,sharedWith:t.filters.sharedWith,teamspaceIds:t.filters.teamIds});await ce(s,G.exportCSVEmail)}async function pe(e){let{environment:t,spaceId:s}=e;if(!s)return;const i=await V.getActiveExportTasks(t,{spaceId:s});"success"===i.type&&P.Z.setState({count:i.data.length})}},80136:(e,t,s)=>{s.d(t,{s:()=>p,w:()=>h});s(21703),s(67294);var i=s(68939),n=s(15010),o=s(34583),r=s(50906),a=s(54642),d=s(92625),l=s(76464),c=s(64964),u=s(39699),m=s(85893);const g=(0,i.defineMessages)({removingGuest:{id:"convertGuestToMember.removeGuest.updatingMessage",defaultMessage:"Updating…"},convertingGuest:{id:"convertGuestToMember.convertingGuest.updatingMessage",defaultMessage:"Updating…"}});async function p(e){const{environment:t,store:s,role:a,guestUserStore:p,isConvertToAdmin:h}=e,f=p.id,y=p.getEmail();try{d.j({message:g.convertingGuest});const i=[{type:"user_permission",role:a,user_id:f}],{serverCommitResult:c}=u.createAndCommit({userAction:"spacePerimssionGuestActions.convertGuestToMember",environment:t,perform:e=>{l.ep({environment:t,store:s,permissionItems:i,transaction:e,from:"convert_to_member"})}});await c,r.Rbv(t,{member_user_id:f,convert_to:h?"admin":"member",origin:e.origin}),r.jBu(t,{role:a,is_space:!0,invite_targets:[{type:"existingUser",value:{id:f,version:0,email:""},spaceRole:"none"}],is_onboarding:!1,invite_origin:"convert_to_member",permission_items:i,invite_message_length:0,domainType:(0,n.JF)()})}catch(x){c.oV({label:(0,m.jsx)(i.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.snackbar.failure",defaultMessage:"Failed to convert {email} to workspace member",values:{email:y}})})}finally{await o.bi(t),d.x()}}async function h(e){const{environment:t,store:s,guestUserStore:n}=e,l=n.id,u=n.getEmail();try{d.j({message:g.removingGuest});if("success"!==(await a.removeUsersFromSpace(t,{userIds:[l],spaceId:s.id,removePagePermissions:!0,revokeUserTokens:!1})).type)throw new Error("Failed to remove guest");r.bwR(t)}catch(p){c.oV({label:(0,m.jsx)(i.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.snackbar.failure",defaultMessage:"Failed to remove {email} from workspace",values:{email:u}})})}finally{await o.bi(t),d.x(),r.fNH(t,{origin:"space_setting_guest_tab",changedNumber:-1})}}},22974:(e,t,s)=>{s.d(t,{MH:()=>x,rz:()=>f,h0:()=>u,I6:()=>h,LH:()=>y});var i=s(8848);var n=s(97880),o=s(18514),r=s(30021),a=s(4926),d=s(47839);let l;const c=10;function u(e,t){const{device:s,ThemeStore:n}=e,{mode:o,usingSystemTheme:r}=t,l={mode:o};n.setState(l),e.mobileNative&&e.mobileNative.setTheme(o,r),d.setTheme(function(e){const t=(0,i.gh)({theme:e});return{mode:e,colors:{white:i.ZP.white,blue:i.ZP.blue},borderRadius:4,textColor:t.regularTextColor,popoverBackgroundColor:t.popoverBackground,popoverBoxShadow:t.mediumBoxShadow,inputBoxShadow:t.inputBoxShadow,inputBackgroundColor:t.inputBackground,dividerColor:t.darkDividerColor,shadowOpacity:t.shadowOpacity}}(o)),localStorage.setItem("theme",JSON.stringify(l)),function(e,t){if(0===e.nativeScrollbarWidth)return;const s=document.getElementById("scroll-properties");s&&(s.innerHTML=`\n\t\t\t::-webkit-scrollbar {\n\t\t\t\twidth: 10px;\n\t\t\t\theight: 10px;\n\t\t\t}\n\t\t\t::-webkit-scrollbar {\n\t\t\t\tbackground: transparent;\n\t\t\t}\n\t\t\t::-webkit-scrollbar-track {\n\t\t\t\tbackground: ${m[t]};\n\t\t\t}\n\t\t\t::-webkit-scrollbar-thumb {\n\t\t\t\tbackground:${g[t]};\n\t\t\t}\n\t\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\t\tbackground:${p[t]};\n\t\t\t}\n\t\t`,a.Z.setState(c))}(s,o),"dark"===o?document.body.classList.add("dark"):document.body.classList.remove("dark")}const m={light:"#EDECE9",dark:"rgba(202, 204, 206, 0.04)"},g={light:"#D3D1CB",dark:"#474c50"},p={light:"#AEACA6",dark:"rgba(202, 204, 206, 0.3)"};function h(e){l=e}function f(e){l=void 0,r.Z.setState(e)}function y(e){const t=S(e);switch(t){case"dark":case"light":u(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let s="light";s=t&&t.api.getTheme?await t.api.getTheme():e.device.prefersDarkInterface?"dark":"light",u(e,{mode:s,usingSystemTheme:!0})}(e);break;default:(0,n.t1)(t)}}function x(e){return l||S(e)}function S(e){let t=r.Z.state;return t||(t=e.device.isMobile||(0,o.Sr)()?"system":e.ThemeStore.state.mode),"dark"===(s=t)||"light"===s||"system"===s?s:"system";var s}},4653:(e,t,s)=>{s.d(t,{i:()=>c});var i=s(13991),n=s(88642),o=s(39634),r=s(24215),a=s(79897),d=s(58455),l=s(77080);function c(e){const t=d.default.state;if((0,r.Ug)()&&t.isZendeskEnabled){const{userHighestPlanType:s,isSalesAssistedPlan:r}=(0,a.rf)(e);n.j({locale:i.SP,analyticsSettings:t,isForethoughtEnabled:l.default.checkGate("forethought"),forethoughtInitializeArgs:o.z(e),userHighestPlanType:s,isSalesAssistedPlan:r,cookieService:e.cookieService})}}},27617:(e,t,s)=>{s.d(t,{Hq:()=>p,Ij:()=>g,KN:()=>a,PM:()=>l,Qb:()=>u,Zy:()=>c,dd:()=>r,eW:()=>m,mK:()=>h,o0:()=>d});var i=s(7057),n=s(53877),o=s(42875);function r(e,t){return(0,i.ZW)(n.OQ.notionDateTimeToLuxon(e,t.locale),"short")}function a(e,t){return(0,i.ZW)(n.OQ.notionDateTimeToLuxon(e,t.locale),"time")}function d(e,t){return n.OQ.notionDateTimeToLuxon(e,t.locale).toFormat(n._F)}function l(e,t){let s={starting:void 0,ending:void 0};var i,n,r,a;if(t.starting&&t.ending)s={starting:{type:"datetime",start_time:"",start_date:t.starting.start_date,time_zone:""},ending:{type:"datetime",start_time:"",start_date:t.ending.start_date,time_zone:""}},null!==(i=e.starting)&&void 0!==i&&i.start_time&&null!==(n=e.starting)&&void 0!==n&&n.time_zone&&(s.starting={...s.starting,start_time:e.starting.start_time,time_zone:e.starting.time_zone}),null!==(r=e.ending)&&void 0!==r&&r.start_time&&null!==(a=e.ending)&&void 0!==a&&a.time_zone?s.ending={...s.ending,start_time:e.ending.start_time,time_zone:e.ending.time_zone}:s={starting:{...s.starting,start_time:"00:00",time_zone:(0,o.r)()},ending:{...s.ending,start_time:"23:59",time_zone:(0,o.r)()}};else if(t.starting){var d,l;s=null!==(d=e.starting)&&void 0!==d&&d.start_time&&null!==(l=e.starting)&&void 0!==l&&l.time_zone?{starting:{type:"datetime",start_date:t.starting.start_date,start_time:e.starting.start_time,time_zone:e.starting.time_zone},ending:e.ending}:{starting:{type:"datetime",start_date:t.starting.start_date,start_time:"00:00",time_zone:(0,o.r)()},ending:e.ending}}else if(t.ending){var c,u;s=null!==(c=e.ending)&&void 0!==c&&c.start_time&&null!==(u=e.ending)&&void 0!==u&&u.time_zone?{ending:{type:"datetime",start_date:t.ending.start_date,start_time:e.ending.start_time,time_zone:e.ending.time_zone},starting:e.starting}:{ending:{type:"datetime",start_date:t.ending.start_date,start_time:"23:59",time_zone:(0,o.r)()},starting:e.starting}}else s={starting:e.starting,ending:e.ending};return s}function c(e){return e.starting&&e.ending?{starting:{type:"date",start_date:e.starting.start_date},ending:{type:"date",start_date:e.ending.start_date}}:e.starting?{starting:{type:"date",start_date:e.starting.start_date}}:e.ending?{ending:{type:"date",start_date:e.ending.start_date}}:{}}function u(e){if(e)return{type:"date",start_date:e.start_date}}function m(e){return`${e.actorType}:${e.actorId}`}function g(e){const t=e.split(":");if(2===t.length)return"bot"===t[0]?{actorId:t[1],actorType:"bot"}:"notion_user"===t[0]?{actorId:t[1],actorType:"notion_user"}:void 0}function p(e){return{starting:e.starting?{type:"date",start_date:e.starting.start_date}:void 0,ending:e.ending?{type:"date",start_date:e.ending.start_date}:void 0}}function h(e){return void 0===e.starting&&void 0===e.ending}},97832:(e,t,s)=>{s.d(t,{Z:()=>M});s(67294);var i=s(480),n=s(24405),o=s(8848),r=s(10020),a=s(72126),d=s(90965),l=s(82990),c=s(68939),u=s(7512),m=s(50906),g=s(86080),p=s(38755),h=s(80444),f=s(92083),y=s(11066),x=s(63296),S=s(44071),b=s(55422),v=s(85893);const M=function(e){var t;window.__c={n:"AccountDeletion"};const s=(0,i.O7)(),{device:M}=s,w=(0,n.yK)((e=>({icon:{width:20,height:20,fill:e.lightIconColor}})),[]),j=Boolean(null===(t=e.userEmailDomainSettings)||void 0===t?void 0:t.isDomainVerified),k=j?(0,v.jsx)(c.FormattedMessage,{defaultMessage:"Your organization has disabled account deletion.",id:"profileSettings.accountDeleteButton.disabledForManagedUser.tooltip"}):null,C=async()=>{const{currentUserStore:e,currentUserRootStore:t}=h.default.state;if(!e||!t)return;if(!e.isDefined())return;const i=a.oA(t.getSpaceViewStores().map((e=>e.getSpaceStore()))).filter((t=>!(0,d.XO)(e.id,t.getModel(),t.getRole()))),n=a.oA(i.map((e=>({id:e.id,name:(0,p.rn)(s,e)}))));m.qPY(s);await g.b({width:420,message:(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{children:[(0,v.jsx)(c.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.warning",defaultMessage:"This action cannot be undone. This will permanently delete your entire account. All private workspaces will be deleted, and you will be removed from all shared workspaces."}),n.length>0&&(0,v.jsx)("ul",{style:{padding:0},children:n.map((e=>{let{id:t,name:s}=e;return(0,v.jsx)("li",{style:{marginTop:6,color:o.ZP.red,fontWeight:l.Z.fontWeight.medium,listStyle:"none"},children:s},t)}))})," ",(0,v.jsx)(c.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.prompt",defaultMessage:"Please type in your email to confirm."})]}),(0,v.jsx)(S.Z,{style:{marginTop:16},translations:{es:"Esta acción no se puede deshacer. Esto eliminará permanentemente su cuenta completa. Se eliminarán todas las áreas de trabajo privadas y se eliminará de todas las áreas de trabajo compartidas. Por favor, escriba su correo electrónico para confirmar.",ru:"Это действие не может быть отменено. Это навсегда удалит всю вашу учетную запись. Все частные рабочие области будут удалены, и вы будете удалены из всех общих рабочих областей. Пожалуйста, введите ваш адрес электронной почты для подтверждения.",zh:"此操作无法撤消。 这将永久删除您的整个帐户。 将删除所有私有工作空间，您将从所有共享工作空间中删除。 请输入您的电子邮箱进行确认。",de:"Diese Aktion kann nicht rückgängig gemacht werden. Dadurch wird Ihr gesamtes Konto dauerhaft gelöscht. Alle privaten Arbeitsbereiche werden gelöscht und Sie werden aus allen freigegebenen Arbeitsbereichen entfernt. Bitte geben Sie Ihre E-Mail-Adresse zur Bestätigung ein.",fr:"Cette action ne peut pas être annulée. Cela supprimera définitivement votre compte en entier. Tous les espaces de travail privés seront supprimés et vous serez supprimé de tous les espaces de travail partagés. Veuillez taper votre email pour confirmer.",ja:"この操作を元に戻すことはできません。 これによりアカウント全体が完全に削除されます。 すべてのプライベートワークスペースが削除され、あなたはすべての共有ワークスペースから削除されます。 確認のためにメールアドレスを入力してください。",it:"Questa azione non può essere annullata. Questo eliminerà definitivamente l'intero account. Tutti gli spazi di lavoro privati verranno eliminati e verranno rimossi da tutti gli spazi di lavoro condivisi. Inserisci la tua email per confermare.",pt:"Essa ação não pode ser desfeita. Isso excluirá permanentemente sua conta inteira. Todos os espaços de trabalho privados serão excluídos e você será removido de todos os espaços de trabalho compartilhados. Por favor, digite o seu email para confirmar.",nl:"Deze actie kan niet ongedaan gemaakt worden. Hiermee wordt uw gehele account permanent verwijderd. Alle privéwerkruimten worden verwijderd en u wordt verwijderd uit alle gedeelde werkruimten. Voer je e-mailadres in om te bevestigen.",pl:"Tego działania nie można cofnąć. Spowoduje to trwałe usunięcie całego konta. Wszystkie prywatne obszary robocze zostaną usunięte, a użytkownik zostanie usunięty ze wszystkich współużytkowanych obszarów roboczych. Wpisz swój e-mail, aby potwierdzić.",sv:"Den här åtgärden kan inte ångras. Detta tar bort hela ditt konto permanent. Alla privata arbetsytor kommer att raderas, och du kommer att tas bort från alla delade arbetsytor. Vänligen skriv in din email för att bekräfta.",uk:"Цю дію не можна скасувати. Таким чином буде видалено весь обліковий запис назавжди. Всі приватні робочі області будуть видалені, і ви будете видалені з усіх спільних робочих областей. Будь ласка, введіть електронний лист для підтвердження.",no:"Denne handlingen kan ikke fortrykkes. Dette vil permanent slette hele kontoen din. Alle private arbeidsområder blir slettet, og du vil bli fjernet fra alle delte arbeidsområder. Vennligst skriv inn din epost for å bekrefte.",tr:"Bu işlem geri alınamaz. Bu işlem hesabınızın tamamını kalıcı olarak siler. Tüm özel çalışma alanları silinecek ve paylaşılan tüm çalışma alanlarından kaldırılacaksınız. Lütfen onaylamak için e-postanızı yazın.",cs:"Tuto akci nelze vrátit zpět. Tím bude trvale smazán celý váš účet. Všechny soukromé pracovní prostory budou smazány a budete ze všech sdílených pracovních prostor odstraněni. Pro potvrzení zadejte svůj e-mail.",vi:"Hành động này không thể được hoàn tác. Điều này sẽ xóa vĩnh viễn toàn bộ tài khoản của bạn. Tất cả các không gian làm việc riêng tư sẽ bị xóa và bạn sẽ bị xóa khỏi tất cả các không gian làm việc chung. Vui lòng nhập email của bạn để xác nhận.",da:"Denne handling kan ikke fortrydes. Dette vil permanent slette hele din konto. Alle private arbejdsområder slettes, og du vil blive fjernet fra alle delte arbejdsområder. Indtast venligst din email for at bekræfte.",hu:"Ez a művelet nem visszavonható. Ez véglegesen törli a teljes fiókot. Minden privát munkaterület törlődik, és eltávolításra kerül minden megosztott munkaterületről. Kérjük, írja be e-mail címét, hogy megerősítse.",ar:"لا يمكن التراجع عن هذا الإجراء. سيؤدي الإجراء إلى حذف حسابك بالكامل. سيتم أيضا حذف جميع مساحات العمل الخاصة ، وستتم إزالتك من جميع مساحات العمل المشتركة. يرجى كتابة البريد الإلكتروني الخاص بك للتأكيد.",th:"การกระทำนี้ไม่สามารถยกเลิกได้ นี่จะเป็นการลบบัญชีทั้งหมดของคุณอย่างถาวร พื้นที่ทำงานส่วนตัวทั้งหมดจะถูกลบและคุณจะถูกลบออกจากพื้นที่ทำงานที่ใช้ร่วมกันทั้งหมด กรุณาพิมพ์อีเมลของคุณเพื่อยืนยัน",he:"לא ניתן לבטל פעולה זו. פעולה זו תמחק לצמיתות את כל החשבון שלך. כל סביבות העבודה הפרטיות יימחקו, ותוסר מכל סביבות העבודה המשותפות. הקלד את האימייל שלך כדי לאשר.",fi:"Tätä toimintoa ei voi peruuttaa. Tämä poistaa koko tilin pysyvästi. Kaikki yksityiset työtilat poistetaan ja poistetaan kaikista jaetuista työtiloista. Vahvistaaksesi kirjoita sähköpostiosoitteesi.",id:"Tindakan ini tidak bisa dibatalkan. Ini akan secara permanen menghapus seluruh akun Anda. Semua ruang kerja pribadi akan dihapus, dan Anda akan dihapus dari semua ruang kerja bersama. Ketikkan email Anda untuk mengonfirmasi."}})]}),acceptLabel:0===n.length?(0,v.jsx)(c.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountButton.label",defaultMessage:"Permanently delete account"}):s.device.isMobile?(0,v.jsx)(c.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButtonMobile.label",defaultMessage:"{numberOfWorkspaces, plural, one {Delete account & 1 workspace} other {Delete account & {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:n.length}}):(0,v.jsx)(c.FormattedMessage,{id:"profileSettings.deleteAccountConfirmationDialog.deleteAccountAndWorkspacesButton.label",defaultMessage:"{numberOfWorkspaces, plural, one {Permanently delete account and 1 workspace} other {Permanently delete account and {numberOfWorkspaces} workspaces}}",values:{numberOfWorkspaces:n.length}}),requiredInputValue:e.getEmail()})&&(m.psf(s),f.Z.reset(),u.t(s))};return(0,v.jsx)(b.Z,{type:"custom",useFlexboxStyle:!0,isMobile:M.isMobile,title:(0,v.jsx)(c.FormattedMessage,{id:"profileSettings.accountDeletionSetting.title",defaultMessage:"Delete my account"}),caption:(0,v.jsx)(c.FormattedMessage,{id:"manageActiveSessions.accountDeletionSetting.label",defaultMessage:"Permanently delete the account and remove access from all workspaces."}),isCritical:!0,customButton:M.isMobile?(0,v.jsx)("div",{style:{marginTop:12},children:(0,v.jsx)(x.Z,{isLarge:!0,isRed:!0,onClick:C,disabled:j,disabledFeedback:j,children:(0,v.jsx)(c.FormattedMessage,{id:"profileSettings.deleteMyAccount.button.label",defaultMessage:"Delete my account"})})}):(0,v.jsx)(y.Z,{style:{borderRadius:"0.25em"},onClick:C,disabled:j,disabledFeedback:j,children:(0,r.C)(w.icon)}),disabled:j,tooltipLabel:k})}},55031:(e,t,s)=>{s.d(t,{G:()=>u,y:()=>c});var i=s(51454),n=s(28020),o=s(24646),r=s(5162),a=s(4926),d=s(85394),l=s(31156);function c(e,t){const{theme:s,rightEdgeDistance:r,isInPeekRenderer:d}=t,c=t.width??36,m=(0,o.ll)(e,d)-(0,o.vJ)(e);return{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",background:s.whiteButtonBackground,bottom:u(e,16+a.Z.state),right:r+a.Z.state,width:c,height:c,borderRadius:"100%",fontSize:20,boxShadow:s.lightBoxShadow,zIndex:i.hT,opacity:n.tu.state?0:1,transform:`translateX(-${m}px) translateZ(0)`,transition:`\n\t\t\topacity ${l.nk}ms,\n\t\t\tcolor ${l.nk}ms,\n\t\t\ttransform 200ms\n\t\t`}}function u(e,t){const s=e.device.isMobileNative,i=(0,r.Y)("supportsNativeBottomBar"),n=s&&!i;return e.WindowSizeStore.getSafePaddingBottomCSS(t+(n?d.MOBILE_BOTTOM_BAR_HEIGHT:0))}},79092:(e,t,s)=>{s.d(t,{Z:()=>c});s(67294);var i=s(83355),n=s(68939),o=s(37181),r=s(80444),a=s(55422),d=s(85893);class l extends i.Z{constructor(){super(...arguments),this.handleStartOfWeekToggle=()=>{1===u()?o.rx(this.environment):o.Zf(this.environment)}}renderComponent(){const{device:e}=this.environment;return(0,d.jsx)(a.Z,{isMobile:e.isMobile,title:(0,d.jsx)(n.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"}),caption:(0,d.jsx)(n.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}),type:"toggle",isOn:1===u(),onToggle:this.handleStartOfWeekToggle})}}l.displayName="CalendarSettings";const c=l;function u(){const{currentUserSettingsStore:e}=r.default.state;if(e){const t=e.getSettings();if(t)return t.start_day_of_week}}},67729:(e,t,s)=>{s.d(t,{Z:()=>f,h:()=>p});s(67294);var i=s(480),n=s(24405),o=s(86658),r=s(42853),a=s(68939),d=s(50950),l=s(12955),c=s(10182),u=s(89728),m=s(55422),g=s(85893);function p(e){return(0,l.canSetCookie)(e)&&(0,l.canShowCookieUi)(e)}function h(){window.__c={n:"CookieSettingsButton"};const e=(0,n.Fg)();return(0,g.jsx)(c.Z,{hasDismissButton:!1,renderOrigin:t=>(0,g.jsxs)(u.Z,{style:{paddingLeft:8,paddingRight:8,height:32},...t,children:[(0,g.jsx)(a.FormattedMessage,{id:"cookieSelector.label.customize",defaultMessage:"Customize"}),(0,r.i)({width:10,marginLeft:4,fill:e.lightIconColor})]})})}const f=function(e){let{isMobile:t}=e;return window.__c={n:"CookieSettings"},p((0,i.O7)())?(0,g.jsx)(m.Z,{isMobile:t,title:(0,g.jsx)(a.FormattedMessage,{...o.ze.cookieSettingsLabel}),caption:(0,o.Fd)(d.Tz,"settings"),type:"custom",customButton:(0,g.jsx)(h,{})}):null}},79603:(e,t,s)=>{s.d(t,{Pp:()=>V,Ub:()=>N,mS:()=>O});var i=s(67294),n=s(480),o=s(86628),r=s(24405),a=s(8848),d=s(33728),l=s(12174),c=s(36591),u=s(42853),m=s(72126),g=s(82990),p=s(68939),h=s(57400),f=(s(95477),s(87279)),y=s(80444),x=s(77080),S=s(7339),b=s(52275),v=s(31945),M=s(36488),w=s(74194),j=s(68785),k=s(78140),C=s(32163),T=s(63296),I=s(74136),P=s(89728),F=s(72495),_=s(64369),Z=s(27386),A=s(23189),R=s(40235),B=s(85893);const E="janus";function O(){var e;const t=null===(e=y.default.state.currentUserStore)||void 0===e?void 0:e.getEmail();return"makenotion.com"===(0,d.Gd)(t??"")||"on"===x.default.getGroup(E)}function D(e){return[...x.default.getExperiments(),...e?m.jj(l.l4).map((e=>({experimentId:e,experimentVersion:1,group:x.default.getEligibleGroup({experimentId:e,defaultGroup:l.nb,disableExposureLogging:!0}),groups:[...(0,l._n)(e),"control",l.nb],fromStatsig:!0,statsigOption:"EXPERIMENT"}))):[],...e?m.jj(l.b2).map((e=>({experimentId:e,experimentVersion:1,group:x.default.checkGate(e,!0).toString(),groups:["true","false"],fromStatsig:!0,statsigOption:"FEATUREGATE"}))):[]]}function N(e){window.__c={n:"ExperimentSettings"};const t=(0,n.O7)(),[s,d]=(0,i.useState)(""),[y,M]=(0,i.useState)(void 0),Z=x.default.isStatsigEnabled(),O=(0,o.VK)((()=>y?[]:D(Z).filter((e=>e.experimentId!==E&&(!s||0===s.length||e.experimentId.includes(s)))).sort(((e,t)=>e.experimentId>t.experimentId?1:-1))),[s,Z,y]),{device:N}=t,V=N.isMobile,U=(0,r.yK)((e=>({containerStyle:{width:"100%"},headerContainerStyle:{display:"flex",alignItems:"flex-start",cursor:"pointer",width:"100%",flexWrap:"wrap"},headerLabelStyle:{marginTop:2,marginBottom:12,padding:2,flex:1},filterContainerStyle:{paddingBottom:"12px"},resetButtonContainerStyle:{paddingBottom:"12px"},tableExperimentIDHeaderStyle:{width:"auto"},tableExperimentGroupHeaderStyle:{width:"auto",textAlign:"right"},experimentInfo:{display:"flex",flexDirection:V?"column":"row"},experimentId:{marginRight:5,maxWidth:V?215:300,...g.Z.textOverflowStyle},experimentGroupContainerStyle:{width:"100%",display:"flex",justifyContent:"flex-end"},experimentGroupButtonStyle:{overflowX:"hidden",justifyContent:"left"},experimentGroup:{maxWidth:V?90:300,...g.Z.textOverflowStyle},experimentGroupButtonChevronStyle:{width:10,marginLeft:4,fill:e.lightIconColor},experimentGroupButtonCheckContainerStyle:{width:V?16:14}})),[V]);return(0,B.jsxs)("div",{style:U.containerStyle,children:[(0,B.jsx)(A.Z,{large:!0,style:{fontSize:16,fontWeight:500},children:"Experiments"}),(0,B.jsxs)("div",{style:U.headerContainerStyle,children:[(0,B.jsx)(_.Z,{isSmall:!0,isMultiline:!0,style:U.headerLabelStyle,children:"Toggle experiments for yourself. This only works for experiments that are based on userId or deviceId. For debugging statsig experiments in production, or statsig experiments on the server-side, you should go to console.statsig.com."}),(0,B.jsx)("div",{style:U.resetButtonContainerStyle,children:(0,B.jsx)(T.Z,{isSmall:!0,onClick:()=>{M({reset:!0}),S.C.removeAllLocalOverrides(),h.Of(t).then((()=>{M(void 0)}))},children:null!=y&&y.reset?(0,B.jsx)(j.Z,{}):"Reset to defaults"})})]}),(0,B.jsx)("div",{style:U.filterContainerStyle,children:(0,B.jsx)(w.Z,{placeholder:"Filter by experiment ID or Feature Gate Name...",value:s,showClearButton:!0,autoCapitalize:"off",autoComplete:"off",onChange:e=>{d(e.target.value)}})}),(0,B.jsx)(R.Z,{columns:[{key:"name",header:"Experiment ID or Feature Gate Name",style:U.tableExperimentIDHeaderStyle},{key:"group",header:"Group",style:U.tableExperimentGroupHeaderStyle}],rows:O.map((e=>{const s=e.group,n=Z&&"fromStatsig"in e&&e.fromStatsig,o=n&&"FEATUREGATE"===e.statsigOption,r=n&&"EXPERIMENT"===e.statsigOption,d=n?`statsig:${e.experimentId}`:e.experimentId;return{key:d,columns:[(0,B.jsxs)("div",{style:U.experimentInfo,children:[(0,B.jsx)("span",{style:U.experimentId,children:e.experimentId}),n&&(0,B.jsx)(I.Z,{children:`Statsig ${e.statsigOption}`})]},`${d}-title`),(0,B.jsx)("div",{style:U.experimentGroupContainerStyle,children:(0,B.jsx)(v.ZP,{popupType:N.isMobile?v.Z4.SlideUp:v.Z4.Popup,renderOrigin:t=>(0,i.createElement)(P.Z,{...t,key:e.experimentId,style:U.experimentGroupButtonStyle},(0,B.jsx)("span",{style:U.experimentGroup,children:s??"unknown"}),(0,u.i)(U.experimentGroupButtonChevronStyle)),render:i=>{let d;d=N.isMobile?{menuType:f.og.Modal,title:e.experimentId,right:(0,B.jsx)(p.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:i.close}:{menuType:f.og.Popup,width:250};const u=e.groups.map((d=>({key:d,action:s=>{let n;n=r?new Promise((t=>{S.C.updateLocalOverrideConfig(e.experimentId,d),t(d)})):o?new Promise((t=>{S.C.updateLocalOverrideGate(e.experimentId,d),t(d)})):h.BX(t,e.experimentId,d),M({experimentId:e.experimentId,group:d}),n.then((()=>{M(void 0),m.gw((()=>{i.close()}),1e3)}))},render:(t,i)=>{const o=n&&d===l.nb;return(0,B.jsx)(b.Z,{...t,title:d,right:y&&y.experimentId===e.experimentId&&y.group===d?(0,B.jsx)("div",{style:U.experimentGroupButtonCheckContainerStyle,children:(0,B.jsx)(j.Z,{})}):d!==s||y?void 0:(0,B.jsx)("div",{style:U.experimentGroupButtonCheckContainerStyle,children:(0,c.e)()}),disabled:o,style:{...o&&{color:a.ZP.mediumTextColor}}})}})));return(0,B.jsx)(k.Z,{...d,children:(0,B.jsx)(C.Z,{type:C.i.Vertical,initialFocus:void 0,sections:[{key:e.experimentId,render:e=>(0,B.jsx)(F.Z,{...e}),items:u}]})})}})},`${d}-options`)]}}))})]})}function V(e){window.__c={n:"ExperimentSettingsSection"};const t=(0,r.yK)((e=>({headerLabelStyle:{marginTop:2,width:"80%"},PlainButtonStyle:{marginTop:12,marginBottom:4}})),[]);return(0,B.jsxs)("div",{children:[(0,B.jsx)(A.Z,{children:"Experiments"}),(0,B.jsx)(_.Z,{isSmall:!0,isMultiline:!0,style:t.headerLabelStyle,children:"Locally toggle experiments."}),(0,B.jsx)(v.ZP,{popupType:v.Z4.SlideUp,renderOrigin:e=>(0,B.jsx)(T.Z,{...e,isLarge:!0,style:t.PlainButtonStyle,children:"View Experiments"}),render:e=>{const t={menuType:f.og.Modal,whiteBackground:!0,title:"Experiments",right:(0,B.jsx)(p.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close};return(0,B.jsx)(M.Z,{capture:!0,allowEsc:!0,render:()=>(0,B.jsx)(k.Z,{...t,children:(0,B.jsx)(Z.Z,{disableScroller:!0,children:(0,B.jsx)(N,{})})})})}})]})}},85215:(e,t,s)=>{s.d(t,{l:()=>u});s(67294);var i=s(86628),n=s(68939),o=s(16639),r=s(80444),a=s(52275),d=s(12793),l=s(31278),c=s(85893);function u(e){window.__c={n:"GroupMenuItem"};const{group:t,menuListItemProps:s}=e,u=(0,i.VK)((()=>{const e=r.default.state.currentSpaceStore;if(e&&t.icon)return{pointer:{table:e.table,id:e.id},icon:t.icon}}),[t]),m=(0,n.useIntl)(),g=(0,o.kF)({intl:m,group:t});return(0,c.jsx)(a.Z,{...s,icon:u?(0,c.jsx)(l.Z,{disabled:!0,size:22,icon:u,isEmptyPage:!1,title:g}):(0,c.jsx)(d.Z,{size:22}),title:g})}},46247:(e,t,s)=>{s.d(t,{Z:()=>c});s(67294);var i=s(480),n=s(24405),o=s(84169),r=s(50906),a=s(64921),d=s(16354),l=s(85893);const c=function(e){window.__c={n:"HelpIconButtonMobile"};const t=(0,i.O7)(),s=(0,n.Fg)();return(0,l.jsx)(d.Z,{style:{display:"flex",alignSelf:"stretch",width:36,...e.isRight?{marginRight:-8}:{marginLeft:-8}},external:!0,href:e.href,onClick:()=>r.Fsx(t,{from:e.analyticsFrom}),children:(0,l.jsx)(a.Z,{mobileFeedback:!0,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,o.m)({width:18,marginTop:1,fill:s.lightIconColor})})})}},44071:(e,t,s)=>{s.d(t,{Z:()=>r});s(67294);function i(){return(navigator.languages?navigator.languages.map((e=>e.toLowerCase())):navigator.language?[navigator.language.toLowerCase()]:navigator.userLanguage?[navigator.userLanguage.toLowerCase()]:[]).map((e=>e.split("-")[0]))}const n=["ar","az","he","fa","ur"];var o=s(85893);const r=function(e){const{style:t,translations:s}=e,r=i();for(const i of r){const e=s[i];if(e){const s=n.includes(i);return(0,o.jsx)("div",{style:{...s&&{direction:"rtl"},...t},children:e})}}return null}},85394:(e,t,s)=>{s.r(t),s.d(t,{MOBILE_BOTTOM_BAR_HEIGHT:()=>w,default:()=>k});var i=s(67294),n=s(83355),o=s(480),r=s(86628),a=s(42107),d=s(81846),l=s(57037),c=s(20162),u=s(51454),m=s(50906),g=s(1892),p=s(87531),h=s(43250),f=s(74948),y=s(5162),x=s(80444),S=s(72653),b=s(64921),v=s(58925),M=s(85893);const w=44;class j extends n.Z{constructor(){super(...arguments),this.handleClickFind=()=>{p.Kf({environment:this.environment,analyticsFrom:"mobile-bottom-bar"}),m.nBz(this.environment,{itemName:"search"})},this.handleClickQuickAdd=()=>{f.quickAddPage({environment:this.environment,from:"mobile_bottom_bar"}),m.nBz(this.environment,{itemName:"add_page"})},this.handleUndo=()=>{g.Yw(this.environment,!0),m.nBz(this.environment,{itemName:"undo"})},this.handleRedo=()=>{g.KX(this.environment,!0),m.nBz(this.environment,{itemName:"redo"})},this.canQuickAdd=this.createComputedStore((()=>Boolean(x.default.state.currentSpaceStore&&x.default.state.currentSpaceStore.canEdit())))}renderComponent(){const e=S.Z.state,t=(0,y.Y)("supportsNativeBottomBar"),{isTablet:s}=this.environment.device;if(e)return t?(0,M.jsx)("div",{className:h.alX,children:(0,M.jsx)(P,{})}):(0,M.jsx)("div",{style:F(e,this.environment,this.theme),className:h.rKl,children:s?this.renderTabletButtons():this.renderPhoneButtons()})}renderPhoneButtons(){return(0,M.jsxs)(i.Fragment,{children:[this.renderSearchButton(),(0,M.jsx)(P,{}),this.renderQuickAddPageButton()]})}renderTabletButtons(){return(0,M.jsxs)(i.Fragment,{children:[this.renderSearchButton(),(0,M.jsx)(P,{}),this.renderQuickAddPageButton(),this.renderUndoRedoButtons()]})}renderSearchButton(){return(0,M.jsx)(b.Z,{style:C(this.environment),onClick:this.handleClickFind,mobileFeedback:!0,children:(0,l.w)(_(this.theme))})}renderQuickAddPageButton(){return(0,M.jsx)(b.Z,{style:T(this.environment),onClick:this.handleClickQuickAdd,mobileFeedback:!0,disabled:!this.canQuickAdd.state,disabledFeedback:!0,children:(0,a.d)(_(this.theme))})}renderUndoRedoButtons(){return(0,M.jsxs)(i.Fragment,{children:[(0,M.jsx)(b.Z,{style:I(this.environment),onClick:this.handleUndo,mobileFeedback:!0,disabled:!g.L0(),disabledFeedback:!0,children:(0,c.O)(_(this.theme))}),(0,M.jsx)(b.Z,{style:{display:"flex",alignItems:"center",justifyContent:"center",flex:"none",width:54,paddingRight:4},onClick:this.handleRedo,mobileFeedback:!0,disabled:!g.AZ(),disabledFeedback:!0,children:(0,d.Y)(_(this.theme))})]})}}j.displayName="MobileBottomBar";const k=j;function C(e){const{WindowSizeStore:t}=e,{isTablet:s}=e.device;return{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:1,paddingLeft:t.getSafePaddingLeftCSS(18),...s&&{flex:"none",paddingLeft:2,width:54,justifyContent:"center"}}}function T(e){const{WindowSizeStore:t}=e,{isTablet:s}=e.device;return{display:"flex",alignItems:"center",justifyContent:"flex-end",flex:1,paddingRight:t.getSafePaddingRightCSS(18),...s&&{justifyContent:"center",flex:"none",paddingRight:0,width:54,marginRight:"auto"}}}function I(e){const{WindowSizeStore:t}=e;return{display:"flex",alignItems:"center",justifyContent:"flex-start",flex:"none",paddingLeft:t.getSafePaddingLeftCSS(18),width:54}}function P(){window.__c={n:"MobileBottomBarUpdatesButton"};const e=(0,o.O7)(),t=(0,r.VK)((()=>e.device.isTablet),[e]);return(0,M.jsx)(v.Z,{format:t?v.Z.Format.MobileBottomBarTablet:v.Z.Format.MobileBottomBarPhone})}function F(e,t,s){const{WindowSizeStore:i}=t,{isTablet:n}=t.device;return{position:"absolute",left:0,right:0,bottom:0,display:"flex",justifyContent:n?"flex-start":"space-around",height:i.getSafePaddingBottomCSS(w),paddingBottom:i.state.paddingBottomCSS,background:s.contentBackground,borderTop:`1px ${s.darkDividerColor} solid`,zIndex:u.D_,pointerEvents:e?"auto":"none",cursor:"pointer"}}function _(e){return{width:26,fill:e.regularTextColor}}},905:(e,t,s)=>{s.d(t,{Z:()=>r});s(67294);var i=s(97880),n=s(68939),o=s(85893);function r(e){let{target:t,isProductNotifEmailImprovementsEnabled:s}=e;switch(t){case"notify_mobile":return(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app"});case"notify_desktop":return(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately on your desktop app"});case"notify_email":return s?(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.emailNotificationSettings.improvedDescription",defaultMessage:"Receive emails when you get comments, mentions, page invites, reminders, access requests, and property changes"}):(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.emailNotificationSettings.description2",defaultMessage:"Receive email updates, including mentions and comment replies"});case"notify_email_always":return s?(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.emailAlwaysNotificationSettings.improvedDescription",defaultMessage:"Receive emails about activity in your workspace, even when you're active on the app"}):(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.emailAlwaysNotificationSettings.description",defaultMessage:"Receive updates by email, even when you're active on the app"});case"notify_slack":return(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.slackNotificationsSettings.default.description",defaultMessage:"Receive notifications in your Slack workspace when you're mentioned in a page, database property, or comment"});case"notify_email_digest":return(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.emailDigestNotificationsSettings.default.description",defaultMessage:"Receive email digests every 8 hours for changes to pages you’re subscribed to"});case"marketing_emails":return(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.marketingEmails.description",defaultMessage:"Receive occasional emails about product launches and new features from Notion"});default:(0,i.t1)(t)}}},79080:(e,t,s)=>{s.d(t,{Z:()=>r});s(67294);var i=s(97880),n=s(68939),o=s(85893);function r(e){let{target:t,isProductNotifEmailImprovementsEnabled:s}=e;switch(t){case"notify_mobile":return(0,o.jsx)(n.FormattedMessage,{defaultMessage:"Mobile push notifications",id:"notificationSettings.mobilePushNotificationSettings.title"});case"notify_desktop":return(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.desktopNotificationSettings.title",defaultMessage:"Desktop push notifications"});case"notify_email":return s?(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.productNotifEmails.title",defaultMessage:"Activity in your workspace"}):(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.emailNotificationSettings.title",defaultMessage:"Email notifications"});case"notify_email_always":return(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"});case"notify_slack":return(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.slackNotificationSettings.title",defaultMessage:"Slack notifications"});case"notify_email_digest":return(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.emailDigestNotificationSettings.title",defaultMessage:"Email digests"});case"marketing_emails":return(0,o.jsx)(n.FormattedMessage,{id:"notificationSettings.marketingEmails.title",defaultMessage:"Announcements and update emails"});default:(0,i.t1)(t)}}},15311:(e,t,s)=>{s.d(t,{Z:()=>T});var i=s(67294),n=s(480),o=s(86628),r=s(97880),a=s(68939),d=s(98104),l=s(3924),c=s(18514),u=s(28187),m=s(50770),g=s(39675),p=s(80444),h=s(88632),f=s(67729),y=s(61519),x=s(64369),S=s(74523),b=s(21291),v=s(27386),M=s(23189),w=s(51124),j=s(97876),k=s(16347),C=s(85893);const T=(0,l.M)((function(e){let{isMobile:t,passwordRequestStore:s,userEmailDomainSettings:l}=e;window.__c={n:"NotificationsAndPersonalSettings"};const{isElectron:T,isPhone:I,isIOS:P}=(0,n.Fy)(),F=(0,n.O7)(),_=(0,o.VK)((()=>h.Z.state.online),[]),Z=(0,o.VK)((()=>{var e;const s=(null===(e=p.default.state.currentSpaceViewStore)||void 0===e?void 0:e.getNotifyEmail())||!1,i=(0,u.kC)(),n=(0,m.r)();return function(e){const{isMobile:t,isElectron:s,showNotifyEmailAlwaysSetting:i,showSlackNotificationSetting:n,emailImprovementsExperimentEnabled:o}=e;return[{key:"notify_mobile",renderSettingsItem:()=>(0,C.jsx)(b.A,{target:"notify_mobile"})},!t&&s?{key:"notify_desktop",renderSettingsItem:()=>(0,C.jsx)(b.A,{target:"notify_desktop"})}:void 0,{key:"notify_email",renderSettingsItem:()=>(0,C.jsx)(b.A,{target:"notify_email"})},i?{key:"notify_email_always",renderSettingsItem:()=>(0,C.jsx)(b.A,{target:"notify_email_always"})}:void 0,o?{key:"notify_email_digest",renderSettingsItem:()=>(0,C.jsx)(b.A,{target:"notify_email_digest"})}:void 0,n?{key:"notify_slack",renderSettingsItem:()=>(0,C.jsx)(j.O,{target:"notify_slack"})}:void 0,o?{key:"marketing_emails",renderSettingsItem:()=>(0,C.jsx)(b.A,{target:"marketing_emails"})}:void 0].filter(r.$K)}({isMobile:t,isElectron:T,showNotifyEmailAlwaysSetting:s,showSlackNotificationSetting:i,emailImprovementsExperimentEnabled:n})}),[t,T]),A=(0,o.VK)((()=>t?(0,g.E)({isPhone:I,isIOS:P,passwordRequestStore:s,userEmailDomainSettings:l}):(0,g.Z)({environment:F})),[F,t,I,P,s,l]),R=(0,o.VK)((()=>[(0,f.h)(F)?{key:"cookies",renderSettingsItem:()=>(0,C.jsx)(f.Z,{isMobile:t})}:void 0,{key:"view-history",renderSettingsItem:()=>(0,C.jsx)(k.H,{isMobile:t})}].filter(r.$K)),[F,t]),{paddingBottomCSS:B}=(0,o.VK)((()=>F.WindowSizeStore.state),[F]);return(0,i.useEffect)((()=>{d.ZH(F)}),[F]),_?(0,C.jsxs)(v.Z,{disableScroller:t,children:[(0,C.jsx)(M.Z,{large:!t,divider:"full",children:(0,C.jsx)(a.FormattedMessage,{id:"notificationAndPersonalSettings.notificationSection.title",defaultMessage:"My notifications"})}),(0,C.jsx)(w.O,{items:Z}),(0,C.jsx)(y.Z,{size:48,isHidden:!0}),(0,C.jsx)(M.Z,{large:!t,divider:"full",children:(0,C.jsx)(a.FormattedMessage,{id:"notificationAndPersonalSettings.settingsSection.title",defaultMessage:"My settings"})}),(0,C.jsx)(w.O,{items:A}),(0,C.jsx)(y.Z,{size:48,isHidden:!0}),(0,C.jsx)(M.Z,{large:!t,divider:"full",children:(0,C.jsx)(a.FormattedMessage,{id:"notificationAndPersonalSettings.privacySection.title",defaultMessage:"Privacy"})}),(0,C.jsx)(w.O,{items:R}),(0,C.jsx)(y.Z,{size:48,isHidden:!1}),(0,C.jsx)("div",{style:{marginTop:4,marginBottom:t?B:void 0},children:(0,C.jsx)(S.Z,{title:(0,C.jsx)(a.FormattedMessage,{id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about notifications & settings"}),href:(0,c.UY)("guides.notificationSettings"),analyticsFrom:"notifications_settings"})})]}):(0,C.jsx)(v.Z,{children:(0,C.jsx)(x.Z,{isSmall:!0,style:{textAlign:"center"},children:(0,C.jsx)(a.FormattedMessage,{defaultMessage:"Please go online to manage settings.",id:"notificationSettingsButton.goOnline.prompt"})})})}))},1548:(e,t,s)=>{s.d(t,{Z:()=>F});var i=s(67294),n=s(83355),o=s(8848),r=s(63874),a=s(29851),d=s(98519),l=s(96068),c=s(82990),u=s(68939),m=s(50906),g=s(54642),p=s(43250),h=s(33954),f=s(69503),y=s(61519),x=s(36488),S=s(74194),b=s(50506),v=s(64369),M=s(88175),w=s(75752),j=s(88606),k=s(24173),C=s(13490),T=s(55422),I=s(85893);class P extends n.Z{constructor(){super(...arguments),this.settingsStateMachine=void 0,this.handleChangePasswordClick=()=>{const{mfaStatus:e}=this.props;"on"===e?f.Z.setState({open:!0,verifyIdentity:!0,onCancel:()=>{var e;return null===(e=this.settingsStateMachine)||void 0===e?void 0:e.exit()}}):(m.Wbl(this.environment),f.Z.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}))},this.handlePasswordBlur=()=>{if(f.Z.isSetNewPasswordModal()){const{password:e,repeatPassword:t}=f.Z.state;e&&t&&e!==t&&f.Z.setState({...f.Z.state,alert:this.props.intl.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})})}},this.handleSubmit=async()=>{if(!f.Z.isSetNewPasswordModal())return;const{oldPassword:e,password:t,repeatPassword:s}=f.Z.state,{hasPassword:i}=this.props,{intl:n}=this.props;let o;if(i&&!e)o=n.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(t){const e=(0,l.I)(t);e.success?s?t!==s&&(o=n.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):o=n.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):o=this.getPasswordErrorMessage(e.reason)}else o=n.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(o)return void f.Z.setState({...f.Z.state,alert:o});const r=await g.setPassword(this.environment,{oldPassword:e,newPassword:t});if("success"===r.type)this.props.onReloadSettings(),f.Z.setState({...f.Z.state,isSet:!0});else{const e=(0,h.wf)(this.props.intl,r);f.Z.setState({...f.Z.state,alert:e})}},this.handleRemovePasswordClick=async()=>{if(!f.Z.isRemovePasswordModal())return;const{oldPassword:e}=f.Z.state;if(m.wrY(this.environment),!e)return void f.Z.setState({...f.Z.state,alert:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password."})});const t=await g.setPassword(this.environment,{oldPassword:e,clearPassword:!0});if("success"===t.type)this.props.onReloadSettings(),f.Z.isRemovePasswordModal()&&f.Z.setState({...f.Z.state,isSuccess:!0,oldPassword:"",alert:void 0});else{const e=(0,h.wf)(this.props.intl,t);f.Z.setState({...f.Z.state,alert:e||this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})})}},this.defaultErrorMessage=this.props.intl.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."})}UNSAFE_willMountOrUpdate(e){if(super.UNSAFE_willMountOrUpdate(e),"on"===e.mfaStatus&&void 0===this.settingsStateMachine){const e=new w.r(this.environment),t=new k.c;this.settingsStateMachine=new k.W(t,e)}}renderComponent(){const{device:e}=this.environment;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(T.Z,{type:"toggleToButton",isMobile:e.isMobile,title:(0,I.jsx)(u.FormattedMessage,{id:"profileSettings.accountSecuritySection.passwordSetting.label",defaultMessage:"Password"}),caption:(0,I.jsx)(R,{isError:this.props.isError,samlEnforced:this.props.samlEnforced,isEducationPlan:this.props.isEducationPlan}),isOn:this.props.hasPassword,buttonLabel:(0,I.jsx)(u.FormattedMessage,{id:"passwordSetting.changePasswordButton.label",defaultMessage:"Change password"}),onClick:this.handleChangePasswordClick}),this.renderPasswordModal()]})}renderPasswordModal(){const{open:e}=f.Z.state;return(0,I.jsx)(b.Z,{open:e,onDismiss:N,className:p.BKn,preventHideChildrenWhileOpening:!0,render:()=>(0,I.jsx)(x.Z,{capture:!0,allowEsc:!0,render:()=>(0,I.jsxs)(i.Fragment,{children:[this.renderPasswordEdit(),this.renderPasswordUpdateComplete(),this.renderRemovePassword(),this.renderVerifyIdentity(),this.renderPasswordRemoved()]})})})}renderVerifyIdentity(){if(f.Z.isVerifyIdentityWithMfaModal()&&void 0!==this.settingsStateMachine)return this.settingsStateMachine.settingsConfirmIdentityForPasswordSetting(),(0,I.jsx)(j.Z,{settingsStateMachine:this.settingsStateMachine,onDismiss:N,onStartSMS:()=>{},onStartTOTP:()=>{},onStartBackupCodes:()=>{}})}renderPasswordEdit(){const{isEducationPlan:e}=this.props;if(!f.Z.isSetNewPasswordModal())return;const{password:t,repeatPassword:s,oldPassword:i,alert:n}=f.Z.state,{hasPassword:o,email:r}=this.props,d=o?(0,I.jsx)(u.FormattedMessage,{id:"profileSettings.changePasswordModal.title",defaultMessage:"Change password"}):(0,I.jsx)(u.FormattedMessage,{id:"profileSettings.setPasswordModal.title",defaultMessage:"Set a password"}),l=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."}),e&&(0,I.jsxs)(I.Fragment,{children:[" ",(0,I.jsx)(Z,{})]})]}),c=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(C.Z,{children:(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.newPasswordInput.label",defaultMessage:"Enter a new password"})}),(0,I.jsx)(S.Z,{type:"password",value:t,onChange:D,showClearButton:!0,onClearButtonClick:V,placeholder:this.props.intl.formatMessage({id:"passwordSettings.passwordModal.newPasswordInput.placeholder",defaultMessage:"New password"}),focusInitial:!o,onBlur:this.handlePasswordBlur,autoComplete:"new-password"}),(0,I.jsx)(y.Z,{size:10,isHidden:!0}),(0,I.jsx)(C.Z,{children:(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.changePasswordModal.confirmPasswordInput.label",defaultMessage:"Confirm your new password"})}),(0,I.jsx)(S.Z,{type:"password",value:s,onChange:U,showClearButton:!0,onClearButtonClick:L,placeholder:this.props.intl.formatMessage({id:"passwordSettings.passwordModal.confirmPasswordInput.placeholder",defaultMessage:"Confirm password"}),onBlur:this.handlePasswordBlur,autoComplete:"new-password"})]}),m=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(S.Z,{style:{display:"none"},type:"text",value:r,autoComplete:"username",disabled:!0}),(0,I.jsx)(C.Z,{children:(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.currentPasswordInput.label",defaultMessage:"Enter your current password"})}),(0,I.jsx)(S.Z,{type:"password",value:i,onChange:E,showClearButton:!0,onClearButtonClick:O,placeholder:this.props.intl.formatMessage({id:"passwordSettings.passwordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,I.jsx)(y.Z,{size:10,isHidden:!0}),c]}),g={text:o?(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.changePasswordButton.label",defaultMessage:"Change password"}):(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.setPasswordButton.label",defaultMessage:"Set a password"}),onClick:this.handleSubmit},p=[{text:(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.removePasswordButton.label",defaultMessage:"Remove password"}),onClick:q,type:"button",view:"plain"}];return(0,I.jsxs)(M.Z,{title:d,header:l,icon:(0,a.z)(B(this.theme)),onDismiss:N,primaryAction:g,secondaryActions:A(this.props.isEducationPlan,this.props.hasPassword)?p:void 0,containerStyles:{width:350,padding:24},children:[o?m:c,(0,I.jsx)(v.Z,{isMultiline:!0,style:_(n),children:n})]})}renderPasswordUpdateComplete(){if(!f.Z.isPasswordSetModal())return;const{isEducationPlan:e}=this.props,{oldPassword:t}=f.Z.state,s=void 0===t?(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordUpdatedModal.passwordSetSuccessModal.title",defaultMessage:"Your password has been set"}):(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordUpdatedModal.passwordUpdatedModal.title",defaultMessage:"Your password has been saved"}),i=e?(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordUpdateSuccessModal.educationPlan.header",defaultMessage:"You'll be able to log in, even if you lose access to your school email address."}):(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordUpdateSuccessModal.header",defaultMessage:"We'll ask for this password when you log in to your account."});return(0,I.jsx)(M.Z,{title:s,header:i,icon:(0,d.k)(B(this.theme)),onDismiss:N})}renderRemovePassword(){const{isEducationPlan:e,mfaStatus:t}=this.props;if(!f.Z.isRemovePasswordModal())return;const{oldPassword:s,alert:i}=f.Z.state,n=(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.title",defaultMessage:"Remove password for temporary login codes?"}),o=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.header",defaultMessage:"You'll receive a link and login code via email when you try to login."}),e&&(0,I.jsxs)(I.Fragment,{children:[" ",(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.educationPlanWarning.message",defaultMessage:"If you lose access to your school email, you'll be unable to log back into Notion."})]}),"on"===t&&(0,I.jsxs)(I.Fragment,{children:[" ",(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.removeMfaWarning.message",defaultMessage:"<boldtext>2-step verification will also be removed if you continue.</boldtext>",values:{boldtext:e=>(0,I.jsx)("span",{style:{fontWeight:c.Z.fontWeight.semibold},children:e})}})]})]}),a={text:(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.continueButton.label",defaultMessage:"Continue"}),onClick:this.handleRemovePasswordClick,isRed:!0},d=[{text:(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.keepUsingPasswordButton.label",defaultMessage:"Keep using password"}),onClick:N,type:"button",view:"plain"}];return(0,I.jsxs)(M.Z,{title:n,header:o,icon:(0,r.L)(B(this.theme)),onDismiss:N,primaryAction:a,secondaryActions:d,containerStyles:{width:350,padding:24},children:[(0,I.jsx)(C.Z,{hasMarginTop:!0,children:(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordModal.passwordInput.label",defaultMessage:"Enter your current password"})}),(0,I.jsx)(S.Z,{type:"password",value:s,onChange:E,showClearButton:!0,onClearButtonClick:O,placeholder:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.currentPasswordInput.placeholder",defaultMessage:"Current password"}),focusInitial:!0,autoComplete:"current-password"}),(0,I.jsx)(v.Z,{isMultiline:!0,style:_(i),children:i})]})}renderPasswordRemoved(){if(!f.Z.isRemovePasswordSuccessModal())return;const e=(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordSuccessModal.title",defaultMessage:"Password removed"}),t=(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.removePasswordSuccessModal.header",defaultMessage:"To log into your account, we’ll send you a temporary login code to your email."});return(0,I.jsx)(M.Z,{title:e,header:t,icon:(0,d.k)(B(this.theme)),onDismiss:N})}getPasswordErrorMessage(e){const t=h.Ql[e.type];return t?this.props.intl.formatMessage(t):this.defaultErrorMessage}}P.displayName="PasswordSettings";const F=(0,u.injectIntl)(P);function _(e){return{display:e?"inherit":"none",marginTop:10,textAlign:"center",color:o.ZP.red,fontSize:c.Z.fontSize.UISmall.desktop}}function Z(){return(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordModal.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you'll be able to log in using your password."})}function A(e,t){return!e&&t}function R(e){let{isError:t,samlEnforced:s,isEducationPlan:i}=e;return t?(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}):s?(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML Single Sign-on Provider."}):i?(0,I.jsx)(Z,{}):(0,I.jsx)(u.FormattedMessage,{id:"passwordSettings.setPassword.message",defaultMessage:"Set a permanent password to login to your account."})}function B(e){return{width:27,height:27,fill:e.regularIconColor}}function E(e){(f.Z.isSetNewPasswordModal()||f.Z.isRemovePasswordModal())&&f.Z.setState({...f.Z.state,oldPassword:e.target.value,alert:void 0})}function O(){(f.Z.isSetNewPasswordModal()||f.Z.isRemovePasswordModal())&&f.Z.setState({...f.Z.state,oldPassword:"",alert:void 0})}function D(e){f.Z.isSetNewPasswordModal()&&f.Z.setState({...f.Z.state,password:e.target.value,alert:void 0})}function N(){const{onCancel:e}=f.Z.state;f.Z.reset(),e&&e()}function V(){f.Z.isSetNewPasswordModal()&&f.Z.setState({...f.Z.state,password:"",repeatPassword:"",alert:void 0})}function U(e){f.Z.isSetNewPasswordModal()&&f.Z.setState({...f.Z.state,repeatPassword:e.target.value,alert:void 0})}function L(){f.Z.isSetNewPasswordModal()&&f.Z.setState({...f.Z.state,repeatPassword:"",alert:void 0})}function q(){f.Z.setState({open:!0,removePassword:!0,isSuccess:!1,oldPassword:""})}},24145:(e,t,s)=>{s.d(t,{Z:()=>h});var i=s(67294),n=s(480),o=s(86628),r=s(68939),a=s(45101),d=s(65598),l=s(26781),c=s(4023),u=s(26388),m=s(91487),g=s(47082),p=s(85893);const h=function(e){window.__c={n:"PermissionsInviteInput"};const{origin:t,permissionsInviteStore:s,store:h,handleClickRemoveToken:f,handleInputChange:y,handleInputSubmit:x,defaultRoleForNonBot:S,isTeamsEnabled:b,right:v,focus:M,handleFocus:w}=e,j="share_menu"===t||"add_members"===t,k="add_members"===t,[C,T]=(0,o.AF)(s),I=(0,n.O7)(),{device:P}=I,F=(0,r.useIntl)(),{tokenQuery:_}=C,Z=(0,l.S)(h),A=C.inviteTargets.map((e=>{const t="newUser"===e.type?e.value.email:`${e.type}-${e.value.id}`,s=(0,a.OA)(e),n="newUser"===e.type||"existingUser"===e.type?e.value.email:void 0,o=s?Z:void 0,d={key:t,target:e,onClickRemove:f,role:C.inviteRole,shouldWrap:j,showInfoIcon:Boolean(o)};return j&&n?(0,p.jsx)(u.Z,{placement:c.u.Top,disableTooltip:k,renderTooltip:()=>s?o||(0,p.jsx)(r.FormattedMessage,{defaultMessage:"{email} will be invited as a guest",id:"ContextualInvite.permissions_invites.guest.tooltip",values:{email:n}}):n,render:s=>(0,i.createElement)("span",{...s,key:t},(0,p.jsx)(m.Z,{...d,backgroundColor:(0,a.gQ)(e)}))},t):(0,i.createElement)(m.Z,{...d,key:t})}));return(0,p.jsx)(g.Z,{focus:P.isMobile?void 0:M,focusInitial:P.isMobile,focusAfterAnimation:!0,onClick:()=>{P.isMobile||null==w||w()},format:g.Z.Format.Share,value:_,onChange:y,type:"email",tokens:A,disabled:!1,autoComplete:"off",placeholder:j?b?F.formatMessage({defaultMessage:"Add people, groups, or emails…",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithTeams"}):F.formatMessage({defaultMessage:"Add emails or people",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithoutBots"}):(0,d.Mm)(h)?F.formatMessage({id:"inviteUserModal.searchInput.placeholder",defaultMessage:"Search name or emails"}):F.formatMessage({id:"permissionsInvite.searchInput.placeholder",defaultMessage:"Search emails, names, or groups"}),onRemoveLastToken:()=>{const e={...C};e.inviteTargets=e.inviteTargets.slice(0,-1),0===e.inviteTargets.length&&(e.isInviteTargetsEmpty=!0,e.inviteRole=S),T(C)},right:v,inputFullWidth:!0,inputAndTokenWrapRightStyle:{paddingTop:I.device.isMobile?0:C.isInviteTargetsEmpty?5:6,paddingBottom:I.device.isMobile||j?0:4},onEmptySubmit:()=>x(),dontShowBorderBottom:P.isAndroid,showBorder:j,...j&&{style:{borderRadius:4,paddingTop:C.isInviteTargetsEmpty?3:0,paddingBottom:0,...M&&{background:"none"}}}})}},43579:(e,t,s)=>{s.d(t,{Z:()=>Z});s(57658);var i=s(67294),n=s(480),o=s(86628),r=s(24405),a=s(66897),d=s(33728),l=s(8843),c=s(82990),u=s(7928),m=s(68939),g=s(50906),p=s(95209),h=s(23586),f=s(4708),y=s(45101),x=s(65598),S=s(29677),b=s(35057),v=s(52275),M=s(32163),w=s(43765),j=s(72495),k=s(26388),C=s(85215),T=s(69507),I=s(97680),P=s(85893);const F=(0,m.defineMessages)({invited_page:{id:"PermissionsInviteSearchRequest.userTooltip.invited_page",defaultMessage:"{userNameAndEmail} is invited to this page already"},invited_space:{id:"PermissionsInviteSearchRequest.userTooltip.invited_space",defaultMessage:"{userNameAndEmail} is invited to this workspace already"},invited_team:{id:"PermissionsInviteSearchRequest.userTooltip.invited_team",defaultMessage:"{userNameAndEmail} is invited to this team already"},not_in_space:{id:"PermissionsInviteSearchRequest.userTooltip.admin",defaultMessage:"Click to invite {userNameAndEmail}"}});function _(e,t){return e.filter(((e,s)=>s<t))}const Z=function(e){window.__c={n:"PermissionsInviteSearchRequest"};const{store:t,shouldShowBots:s,shouldShowGroups:Z,sectionRenderLimit:A,membersOnly:R,hideUserTypeToken:B,disableInvitedUsers:E,guestsMustBeRequested:O}=e,[D,N,V]=(0,o.AF)(e.permissionsInviteStore),U=(0,n.O7)(),{device:L}=U,q=(0,m.useIntl)(),{tokenQuery:G}=D,W=(0,i.useMemo)((()=>y.ZK({environment:{device:L}})),[L]),K=(0,r.yK)((e=>({roleBadge:{...W},invitedBadge:{...W,backgroundColor:e.defaultBadgeBackground}})),[W]),z=(0,o.VK)((()=>(0,f._6)(U)?"invitee-popup-closed":"invitee"),[U]),H={request:G,performRequest:e=>p.jL({query:e,sectionLimit:{userLimit:10,botLimit:s?10:0,groupLimit:Z?10:0,importContactLimit:0},membersOnly:R,environment:U,intl:q}),render:(e,s,i)=>{if(e)return(0,P.jsx)(T.l,{loading:!i,children:(0,P.jsx)(w.Z,{title:(0,P.jsx)(m.FormattedMessage,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})})});const n=s&&{...s,importedContacts:(0,y.Bu)(s.inviteUsers,s.importedContacts)},o=n&&(null==G?void 0:G.length)>0,{inviteUsers:r,inviteGroups:p,importedContacts:h=[]}=o?n:(0,y.NN)({currentInviteActors:n,permissionsInviteStore:V,targetStore:t}),f=[..._(r,A),..._(h,10)].map(((e,s)=>{const i="newUser"===e.type?e.value.email:e.value.id,n=(0,y.fR)(e),r=Boolean(o&&(0,y.cm)({permissionsInviteStore:V,userTarget:e,targetStore:t}));return{key:i,render:s=>{const{tooltip:i,userTypeToken:o}=function(e){const{userTarget:t,targetStore:s,isInvited:i,userSpaceRole:n,styles:o,intl:r}=e,a="newUser"!==t.type&&t.value.name?`${t.value.name} (${t.value.email})`:t.value.email,d=n&&"not_in_space"!==n;if(i)return{tooltip:(0,x.Mm)(s)?r.formatMessage(F.invited_space,{userNameAndEmail:a}):(0,x.OY)(s)?r.formatMessage(F.invited_page,{userNameAndEmail:a}):r.formatMessage(F.invited_team,{userNameAndEmail:a}),userTypeToken:(0,P.jsx)("div",{style:{...o.invitedBadge},children:(0,P.jsx)(m.FormattedMessage,{id:"inviteUserModal.userRole.invitedBadge.label",defaultMessage:"Invited"})})};if(d){const e=y.Ji({role:n,intl:r,nameOrEmail:a});return{tooltip:e.tooltip,userTypeToken:(0,P.jsx)("div",{style:{...o.roleBadge},children:e.userRoleBadge})}}return{tooltip:r.formatMessage(F.not_in_space,{userNameAndEmail:a}),userTypeToken:void 0}}({userTarget:e,targetStore:t,userSpaceRole:n,isInvited:r,styles:K,intl:q});return"existingUser"===e.type?(0,P.jsx)(I.Z,{...s,actor:(0,a.dp)(e.value),right:B?void 0:o,tooltip:i,tooltipPlacement:k.Z.Placement.Left,disabled:E&&r}):(0,P.jsx)(k.Z,{placement:k.Z.Placement.Left,alignment:k.Z.Alignment.Start,textWrap:!0,render:t=>(0,P.jsx)(v.Z,{...s,...t,icon:(0,l.h)({width:24,height:24}),right:o,title:e.value.email.trim(),disabled:E&&r}),disableTooltip:!i,renderTooltip:()=>i})},action:()=>{if(r)return;if(!D.isInviteTargetsEmpty&&(0,S.ow)(D))return;const t={...e,..."existingUser"===e.type&&{spaceRole:n}};g.hEo(U,{subscription_tier:(0,b.zt)(),invite_token_query:G,selected_user_token:e,selected_user_token_rank:s,from:"permission_invite"}),V.setState({...D,inviteTargets:[...D.inviteTargets,t],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:z})}}})),R=_(p,A).map((e=>{const{value:t}=e;return{key:t.id,render:e=>(0,P.jsx)(C.l,{group:t,menuListItemProps:e}),action:()=>{!D.isInviteTargetsEmpty&&(0,S.ow)(D)||V.setState({...D,inviteTargets:[...D.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:z})}}})),N=[],L=D.isInviteTargetsEmpty||!(0,S.ow)(D);if(f.length>0&&L&&N.push({key:"user results",render:e=>(0,P.jsx)(T.l,{...e,loading:!i}),items:f}),Z&&R.length>0&&L&&N.push({key:"group results",render:e=>(0,P.jsx)(j.Z,{...e,title:(0,P.jsx)(m.FormattedMessage,{id:"inviteUserModal.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!i}),items:R}),0===N.length&&L){const e=(0,d.H3)(D.tokenQuery);if((0,d.oH)(e)){const n={type:"newUser",value:{email:e},source:"email"},o=(0,y.Nd)({target:n,permissionsInviteStore:V});if(!o)return;if(o)return(0,P.jsx)(T.l,{loading:!i,children:(0,P.jsx)(w.Z,{title:(0,P.jsx)(m.FormattedMessage,{id:"inviteUserModal.userAlreadyInvitedMessage",defaultMessage:"Already inviting {user}.",values:{user:(0,P.jsx)("span",{style:{fontWeight:c.Z.fontWeight.bold},children:(0,y.DF)({intl:q,target:o})})}})})});const r=(s&&s.inviteUsers||[]).find((t=>"existingUser"===t.type&&t.value.email===e));if(r&&"existingUser"===r.type&&(0,y.Zp)({store:t,target:r}))return(0,P.jsx)(T.l,{loading:!i,children:(0,P.jsx)(w.Z,{title:(0,P.jsx)(m.FormattedMessage,{id:"inviteUserModal.userAlreadyHasPermissionMessage",defaultMessage:"{user} already has permission.",values:{user:(0,P.jsx)("span",{style:{fontWeight:c.Z.fontWeight.bold},children:(0,u.Nz)(q,r.value)})}})})})}else{if(!D.tokenQuery)return(0,P.jsx)(T.l,{loading:!i,children:(0,P.jsx)(w.Z,{title:(0,P.jsx)(m.FormattedMessage,{id:"inviteUserModal.searchPersonDropdown.noSearchResultsMessage",defaultMessage:"Type or paste in emails above, separated by commas."})})});N.push({key:"user results",render:e=>(0,P.jsx)(T.l,{...e,loading:!i,title:O?(0,P.jsx)(m.FormattedMessage,{id:"inviteUserModal.searchDropdown.requestPeople",defaultMessage:"Keep typing to request inviting an email"}):(0,P.jsx)(m.FormattedMessage,{id:"inviteUserModal.searchDropdown.addPeople",defaultMessage:"Keep typing to invite email"})}),items:[{key:D.tokenQuery,render:e=>(0,P.jsx)(v.Z,{icon:(0,l.h)({width:24,height:24}),title:D.tokenQuery,...e}),action:()=>{}}]})}}return(0,P.jsx)(M.Z,{type:M.i.Vertical,initialFocus:G.length>0?0:void 0,sections:N})}};return(0,P.jsx)(h.Z,{...H})}},91487:(e,t,s)=>{s.d(t,{Z:()=>h});s(67294);var i=s(83355),n=s(15070),o=s(84619),r=s(44495),a=s(97880),d=s(7928),l=s(68939),c=s(16639),u=s(26388),m=s(85567),g=s(85893);class p extends i.Z{constructor(){super(...arguments),this.handleClickRemove=e=>{e.stopPropagation(),this.props.onClickRemove(this.props.target)}}renderComponent(){const{device:e}=this.environment;return(0,g.jsx)(m.Z,{showRemoveButton:!0,isSingle:!1,isStrikedThrough:this.props.isStrikedThrough,backgroundColor:this.props.backgroundColor,format:e.isMobile?o.lo.Large:o.lo.Medium,onClickRemove:this.handleClickRemove,disabled:this.props.disabled,disabledFeedback:!0,value:y(this.props.target,this.props.intl,this.props.role,this.props.showInfoIcon),style:this.props.style,shouldWrap:this.props.shouldWrap})}}p.displayName="PermissionsInviteToken";const h=(0,l.injectIntl)(p);function f(e){return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,r.D)({marginRight:4,width:14,height:14}),e]})}function y(e,t,s,i){if("group"===e.type&&"owner"===s)return(0,g.jsx)(u.Z,{renderTooltip:()=>(0,g.jsx)(l.FormattedMessage,{id:"permissionInviteToken.groupRole.ownerAlert.tooltip",defaultMessage:"Groups cannot be added as teamspace owners."}),render:s=>(0,g.jsx)("div",{...s,children:f((0,c.kF)({intl:t,group:e.value}))})});let o;switch(e.type){case"newUser":o=e.value.email.trim();break;case"existingUser":o=(0,d.Nz)(t,e.value);break;case"bot":o=(0,n.Mh)(e.value);break;case"group":o=(0,c.kF)({intl:t,group:e.value});break;default:(0,a.t1)(e)}return i?f(o):o}},21291:(e,t,s)=>{s.d(t,{A:()=>j});var i=s(67294),n=s(480),o=s(86628),r=s(33728),a=s(9999),d=s(97880),l=s(68939),c=s(50906),u=s(54642),m=s(9953),g=s(75018),p=s(97627),h=s(39699),f=s(50770),y=s(10929),x=s(80444),S=s(63296),b=s(905),v=s(79080),M=s(55422),w=s(85893);function j(e){let{target:t}=e;window.__c={n:"PushAndEmailNotificationSetting"};const s=(0,n.O7)(),j=(0,o.VK)((()=>x.default.state.currentSpaceViewStore),[]),k=(0,o.VK)((()=>(0,f.r)()),[]),C=(0,o.VK)((()=>{var e,s;switch(t){case"notify_mobile":case"notify_desktop":case"notify_email":case"notify_email_always":return(null==j||null===(e=j.getKeyStore(t))||void 0===e?void 0:e.getValue())||!1;case"notify_email_digest":return(null==j||null===(s=j.getSettingsStore())||void 0===s||null===(s=s.getKeyStore(t))||void 0===s?void 0:s.getValue())||!1;case"marketing_emails":case"notify_slack":return!1;default:(0,d.t1)(t)}}),[j,t]),T=(0,i.useCallback)((()=>{if(j){const e=!C;"notify_email_digest"===t?p.MA(s,e):h.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,perform:s=>{m.sW({store:j,data:{[t]:e},transaction:s})}}),"notify_slack"!==t&&"marketing_emails"!==t&&c.Zh2(s,{is_on:e,target:t})}}),[s,j,C,t]),I=async()=>{const e=await u.getAuthorizedEmailPreferenceCenterLink(s,{});if(e&&"success"===e.type&&e.data.preferenceCenterLink)return c.MdY(s),g.navigateToExternalURL({environment:s,url:e.data.preferenceCenterLink});{const e=await(0,y.iF)(s),t=(0,r.t_)(e);return c.MdY(s),g.navigateToExternalURL({environment:s,url:t})}};return"marketing_emails"===t?(0,w.jsx)(M.Z,{type:"custom",isMobile:!0,title:(0,w.jsx)(v.Z,{target:t,isProductNotifEmailImprovementsEnabled:k}),caption:(0,w.jsx)(b.Z,{target:t,isProductNotifEmailImprovementsEnabled:k}),customButton:(0,w.jsx)(S.Z,{isLarge:!0,onClick:I,icon:a.J,children:(0,w.jsx)(l.FormattedMessage,{id:"notificationSettings.marketingEmails.manageSettingsButton",defaultMessage:"Manage settings"})}),disableSettingsItemClick:!0}):(0,w.jsx)(M.Z,{isMobile:!0,title:(0,w.jsx)(v.Z,{target:t,isProductNotifEmailImprovementsEnabled:k}),caption:(0,w.jsx)(b.Z,{target:t,isProductNotifEmailImprovementsEnabled:k}),type:"toggle",isOn:C,onToggle:T})}},29825:(e,t,s)=>{s.d(t,{Z:()=>I});var i=s(67294),n=s(480),o=s(86628),r=s(24405),a=s(8848),d=s(82990),l=s(68939),c=s(50906),u=s(95209),m=s(64964),g=s(79817),p=s(87279),h=s(45101),f=s(52878),y=s(42922),x=s(1743),S=s(74194),b=s(78140),v=s(9019),M=s(53437),w=s(64369),j=s(24145),k=s(43579),C=s(85893);const T=(0,l.defineMessages)({reason_placeholder:{id:"RequestMembersModal.reason.placeholder",defaultMessage:"Add a reason (optional)"}});const I=function(e){window.__c={n:"RequestMembersModal"};const t=(0,n.O7)(),{store:s,origin:I,analyticsFrom:P}=e,[F,_]=(0,i.useState)(!1),[Z,A]=(0,i.useState)("none"),R=(0,o.qz)(void 0,f.Z),B=(0,l.useIntl)(),E=(0,r.yK)((()=>({modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:420},container:{padding:20},title:{fontWeight:d.Z.fontWeight.medium,marginBottom:10},reasonTitle:{color:a.ZP.mediumTextColor,marginTop:10,marginBottom:5},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20}})),[]),O=e=>{e.currentTarget===e.target&&A("none")},D=async()=>{c.cir(t,{...g.Oh(t,R.state.contextualInviteStore),from:P}),u.eH({permissionsInviteStore:R.state.permissionsInviteStore,contextualInviteStore:R.state.contextualInviteStore}),R.state.contextualInviteStore.startRequestMembership();const e=R.state.contextualInviteStore.state.invitedUsers;_(!1);const i=await g.fC({environment:t,spaceStore:s,originId:void 0,originType:P,reasonMessage:R.state.permissionsInviteStore.state.emailMessage,contextualInviteStore:R.state.contextualInviteStore,intl:B});N({success:i,intl:B,users:e}),R.reset()},N=e=>{const{success:t,intl:s,users:i}=e;0!==i.length&&(t?m.oV({label:s.formatMessage({id:"requestMembersModal.requestSuccess.toast",defaultMessage:"Successfully requested membership for {users} to your workspace admins."},{users:g.uJ(i,s)})}):m.oV({label:s.formatMessage({id:"requestMembersModal.requestFail.toast",defaultMessage:"Failed to invite {users} to the workspace."},{users:g.uJ(i,s)})}))};return(0,C.jsx)(v.Z,{modalStyle:E.modalStyle,open:F,onDismiss:async()=>{await(0,h.Aw)({environment:t,permissionsInviteStoreState:R.state.permissionsInviteStore.state,from:"space_settings_add_members"})||(_(!1),R.reset()),A("none")},renderContent:()=>(0,C.jsxs)("div",{style:E.container,onClick:O,children:[(0,C.jsx)("div",{style:E.title,onClick:O,children:(0,C.jsx)(l.FormattedMessage,{id:"requestMembersModal.title",defaultMessage:"Request to invite members"})}),(0,C.jsx)(M.ZP,{popupType:M.kQ.Popup,alignmentToOrigin:M.ZP.Alignment.Start,placementToOrigin:M.ZP.Placement.Bottom,open:"invites"===Z,sameWidthAsOrigin:!0,originGap:10,disableMouseCapture:!0,origin:(0,C.jsx)(j.Z,{permissionsInviteStore:R.state.permissionsInviteStore,store:s,handleClickRemoveToken:e=>{u.PV({targetToRemove:e,permissionsInviteStore:R.state.permissionsInviteStore,defaultRoleForNonBot:"read_and_write"})},handleInputChange:async e=>{A("invites"),await u.jC({environment:t,event:e,permissionsInviteStore:R.state.permissionsInviteStore})},handleInputSubmit:async()=>{},origin:"add_members",defaultRoleForNonBot:"read_and_write",isTeamsEnabled:!1,right:(0,C.jsx)("div",{}),focus:"invites"===Z,handleFocus:()=>A("invites")}),onDismiss:()=>A("none"),render:()=>{const e=(0,C.jsx)(k.Z,{permissionsInviteStore:R.state.permissionsInviteStore,store:s,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!1,sectionRenderLimit:10,membersOnly:!1}),t={menuType:p.og.Popup,disableScroller:!1};return(0,C.jsx)("div",{children:(0,C.jsx)(b.Z,{...t,width:380,children:e})})},style:{width:"100%"}}),(0,C.jsx)("div",{style:E.reasonTitle,onClick:O,children:(0,C.jsx)(l.FormattedMessage,{id:"requestMembersModal.reasonForRequest.title",defaultMessage:"Reason for request"})}),(0,C.jsx)(x.Z,{capture:!0,allowEsc:!0,children:(0,C.jsx)(S.Z,{textarea:!0,style:{padding:8},value:R.state.permissionsInviteStore.state.emailMessage,focus:"reason"===Z,onFocus:()=>A("reason"),onChange:e=>{R.state.permissionsInviteStore.setState({...R.state.permissionsInviteStore.state,emailMessage:e.target.value})},placeholder:B.formatMessage(T.reason_placeholder)})}),(0,C.jsxs)("div",{style:E.footer,onClick:O,children:[(0,C.jsx)(w.Z,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,C.jsx)(l.FormattedMessage,{id:"RequestMembersModal.caption",defaultMessage:"Your admins will approve or decline your request."})}),(0,C.jsx)(y.Z,{isLarge:!0,style:E.requestInvitesButton,onClick:D,children:(0,C.jsx)(l.FormattedMessage,{id:"requestMembersModal.requestInvitesButton.label",defaultMessage:"Request invites"})})]})]}),origin:(0,C.jsx)("div",{onClick:()=>{_(!0)},children:I})})}},27386:(e,t,s)=>{s.d(t,{Z:()=>u,k:()=>l});s(67294);var i=s(83355),n=s(34859),o=s(91754),r=s(61519),a=s(53336),d=s(85893);function l(e){return e?18:60}class c extends i.Z{static renderDivider(){return(0,d.jsx)(r.Z,{size:37})}renderComponent(){const{device:e}=this.environment,{children:t,controlRow:s,bannerText:i,controlRowPaddingTopBottom:r=16,removeBoxShadow:c=!1,contentPaddingLeftRight:u,controlRowPaddingLeftRight:m,getPaddingTopBottom:g=(()=>e.isMobile?18:36)}=this.props;return this.props.disableScroller?(0,d.jsxs)("div",{style:{paddingLeft:l(e.isMobile),paddingRight:l(e.isMobile)},children:[(0,d.jsx)("div",{style:{paddingTop:g(),paddingBottom:g()},children:t}),s&&(0,d.jsx)("div",{style:{paddingTop:r,paddingBottom:r,boxShadow:`0 -1px 0 ${this.theme.regularDividerColor}`},children:s})]}):(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:this.theme.cardContentBackground},children:[i&&(0,d.jsx)(o.Z,{styleKey:o.v.Blue,isMobile:!1,children:i}),(0,d.jsx)(a.Z,{type:n.Z.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:u??l(e.isMobile),paddingRight:u??l(e.isMobile),paddingTop:i?15:g(),paddingBottom:i?22:g()},children:t}),s&&(0,d.jsx)("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:m??l(e.isMobile),paddingRight:m??l(e.isMobile),paddingTop:r,paddingBottom:r,boxShadow:c?void 0:`0 -1px 0 ${this.theme.regularDividerColor}`},children:s})]})}}c.displayName="SettingBox";const u=c},51221:(e,t,s)=>{s.d(t,{Z:()=>g});s(67294);var i=s(480),n=s(24405),o=s(32566),r=s(82990),a=s(68939),d=s(50906),l=s(92083),c=s(11066),u=s(64369),m=s(85893);function g(e){window.__c={n:"SettingsDeeplinkBanner"};const{icon:t,title:s,calloutTitle:g,deeplinkTab:p}=e,h=(0,i.O7)(),f=(0,n.yK)((e=>({cardContainer:{backgroundColor:e.accentColors.gray[30],width:"100%",marginTop:20,marginBottom:20,padding:10,border:4,display:"flex",alignItems:"center",justifyContent:"space-between",gap:4},calloutTitle:{fontWeight:r.Z.fontWeight.semibold},titleContainer:{display:"flex",alignItems:"center"},button:{borderRadius:2,padding:4,display:"flex",alignItems:"center"},linkTitle:{color:e.mediumTextColor,fontWeight:r.Z.fontWeight.medium},titleIcon:{marginRight:8,height:20,width:20,color:e.mediumTextColor},arrowIcon:{marginLeft:4,color:e.mediumTextColor,height:14,width:14}})),[]);return(0,m.jsxs)("div",{style:f.cardContainer,children:[(0,m.jsxs)("div",{style:f.titleContainer,children:[t(f.titleIcon),(0,m.jsxs)("div",{children:[(0,m.jsx)(u.Z,{style:f.calloutTitle,children:g}),(0,m.jsx)(u.Z,{children:s})]})]}),p?(0,m.jsxs)(c.Z,{onClick:()=>function(e,t){d.jkE(t,{source_tab:l.Z.state.currentTab,destination_tab:e.currentTab,destination_subtab:e.defaultSubtab}),l.Z.setState({...l.Z.state,...e})}(p,h),style:f.button,children:[(0,m.jsx)(u.Z,{style:f.linkTitle,children:(0,m.jsx)(a.FormattedMessage,{id:"settingsDeeplinkBanner.deeplinkMessage",defaultMessage:"View settings"})}),(0,o.k)(f.arrowIcon)]}):null]})}},55422:(e,t,s)=>{s.d(t,{Z:()=>_});s(57658);var i=s(67294),n=s(480),o=s(86628),r=s(24405),a=s(36591),d=s(42853),l=s(97880),c=s(68939),u=s(61045),m=s(11368),g=s(87279),p=s(23570),h=s(44041),f=s(91694),y=s(52275),x=s(31945),S=s(78140),b=s(28992),v=s(32163),M=s(63296),w=s(89728),j=s(72495),k=s(24006),C=s(26388),T=s(64369),I=s(27386),P=s(23189),F=s(85893);function _(e){window.__c={n:"SettingsItem"};const{title:t,caption:s,captionStyle:a,isMobile:d,upsellOptions:l,type:c,shouldHighlight:g}=e,y=(0,n.O7)(),{paddingLeftCSS:x,paddingRightCSS:S}=(0,o.VK)((()=>y.WindowSizeStore.state),[y]),[b,v]=(0,i.useState)(!1),M=(0,i.useCallback)((()=>v(!0)),[v]),w=(0,i.useCallback)((()=>v(!1)),[v]),j=(0,i.useContext)(m.Ue),k=(0,i.useRef)(null);(0,i.useEffect)((()=>{g&&k.current&&u.bx({element:k.current,scrollers:{verticalScroller:null==j?void 0:j.verticalScroller},vertical:{reveal:"closest"},horizontal:void 0,animate:!0})}),[g,k,null==j?void 0:j.verticalScroller]);const _=(0,i.useMemo)((()=>{if(d){if("dropdown"===c)return{display:"flex",flexDirection:"column"};if("toggleToButton"===e.type&&e.isOn||"custom"===e.type&&!0===e.useFlexboxStyle)return{}}return{display:"flex",alignItems:"center",justifyContent:"space-between"}}),[d,c,e]),A=(0,r.yK)((t=>({container:{..._,paddingLeft:d?x:void 0,paddingRight:d?S:void 0,cursor:b&&!e.disabled?"pointer":e.disabled?"not-allowed":"default",...g?{backgroundColor:t.buttonHoveredBackground,marginLeft:-1*(0,I.k)(d),marginRight:-1*(0,I.k)(d),paddingLeft:(0,I.k)(d),paddingRight:(0,I.k)(d),marginTop:-1*(0,p.f)(d)/2,marginBottom:-1*(0,p.f)(d)/2,paddingTop:(0,p.f)(d)/2,paddingBottom:(0,p.f)(d)/2}:{}},description:{display:"flex",flexDirection:"column",marginRight:"10%"},captionStyle:{...a},title:{display:"flex",flexDirection:"row"}})),[d,x,S,g,b,a,e.disabled,_]),R="toggle"===e.type||"toggleToButton"===e.type||"custom"===e.type&&!e.disableSettingsItemClick,B=(0,F.jsxs)("div",{ref:k,style:A.container,onClick:()=>{if(!(e.disabled||"custom"===e.type&&e.disableSettingsItemClick))return l&&l.shouldUpsell?h.y(y,{from:l.analyticsName,for:l.subscriptionTier}):void("toggle"===e.type?e.onToggle():"toggleToButton"===e.type?e.onClick():"custom"===e.type&&e.customButton&&i.isValidElement(e.customButton)&&e.customButton.props.onClick&&"function"==typeof e.customButton.props.onClick&&e.customButton.props.onClick())},onMouseEnter:R?M:void 0,onMouseLeave:R?w:void 0,children:[(0,F.jsxs)("div",{style:A.description,children:[(0,F.jsxs)(P.Z,{smallMarginBottom:!0,disabled:e.disabled,isCritical:e.isCritical,children:[(0,F.jsxs)("div",{style:A.title,children:[t,e.badge]}),l&&l.shouldUpsell&&(0,F.jsx)(f.Z,{subscriptionTier:l.subscriptionTier,analyticsName:l.analyticsName,onClick:()=>h.y(y,{from:l.analyticsName,for:l.subscriptionTier}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}})]}),(0,F.jsx)(T.Z,{style:A.captionStyle,isSmall:!0,isMultiline:!0,children:s})]}),(0,F.jsx)(Z,{...e})]});return e.tooltipLabel?(0,F.jsx)(C.Z,{placement:C.Z.Placement.Bottom,alignment:C.Z.Alignment.Center,disableTooltip:e.disableTooltip,renderTooltip:()=>e.tooltipLabel,render:e=>(0,F.jsx)("div",{...e,children:B})}):B}function Z(e){return"toggle"===e.type?(0,F.jsx)(k.Z,{on:e.isOn,disabled:e.disabled}):"dropdown"===e.type?(0,F.jsx)(A,{...e}):"custom"===e.type?(0,F.jsx)(F.Fragment,{children:e.customButton}):"toggleToButton"===e.type?e.isOn?(0,F.jsx)("div",{style:{marginTop:12},children:(0,F.jsx)(M.Z,{isLarge:!0,onClick:e.onClick,style:e.buttonStyle,disabled:e.disabled,children:e.buttonLabel})}):(0,F.jsx)(k.Z,{on:!1,onClick:e.onClick,disabled:e.disabled}):void(0,l.t1)(e)}function A(e){var t;window.__c={n:"Dropdown"};const{isMobile:s,title:i,upsellOptions:n,currentOption:o,options:l,info:u,onSelectOption:m,menuStyle:p}=e,h=null===(t=l.find((e=>{let{key:t}=e;return t===o})))||void 0===t?void 0:t.label,f=(0,r.yK)((e=>({button:{marginTop:12,marginBottom:4,marginRight:s?"auto":void 0,paddingLeft:s?12:8,paddingRight:s?12:8,height:s?44:28,border:s?`1px solid ${e.outlineButtonBorder}`:void 0},icon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[s]),M=Boolean(n&&n.shouldUpsell)||e.disabled;return(0,F.jsx)(x.ZP,{popupType:s?x.Z4.SlideUp:x.Z4.Popup,placementToOrigin:x.pO.Right,renderOrigin:e=>(0,F.jsxs)(w.Z,{...e,isLarge:!0,style:{...f.button,opacity:M?.4:1},disabled:M,children:[h,(0,d.i)(f.icon)]}),render:e=>{let t;t=s?{menuType:g.og.Modal,title:i,right:(0,F.jsx)(c.FormattedMessage,{defaultMessage:"Done",id:"settingItem.buttonPopup.done.label"}),onClickRight:e.close}:{menuType:g.og.Popup,width:250,...p};const n=[{key:"settings-item-section",render:e=>(0,F.jsx)(j.Z,{...e}),items:l.map((t=>{let{key:i,label:n,caption:o}=t;return{key:i,action:()=>{m(i),e.close()},render:e=>(0,F.jsx)(y.Z,{...e,title:n,caption:o,shouldWrapCaption:!0,right:h===n?(0,F.jsx)("div",{style:{width:s?16:14},children:(0,a.e)()}):void 0})}}))}];if(u){const e=u.map((e=>{let{key:t,label:s}=e;return{key:t,action:()=>{},render:e=>(0,F.jsx)(b.Z,{...e,shouldWrapCaption:!0,caption:s})}}));n.push({key:"info-item-section",render:e=>(0,F.jsx)(j.Z,{...e,topBorder:!0}),items:e})}return(0,F.jsx)(S.Z,{...t,children:(0,F.jsx)(v.Z,{type:v.i.Vertical,sections:n,initialFocus:void 0})})}})}},51124:(e,t,s)=>{s.d(t,{O:()=>l});var i=s(67294),n=s(480),o=s(76725),r=s(23570),a=s(61519),d=s(85893);function l(e){window.__c={n:"SettingsItems"};const{items:t}=e,{isMobile:s}=(0,n.Fy)();return(0,d.jsx)(d.Fragment,{children:(0,o.Z)(t.map((e=>{let{key:t,renderSettingsItem:s}=e;return(0,d.jsx)(i.Fragment,{children:s()},t)})),(e=>(0,d.jsx)(a.Z,{size:(0,r.f)(s),isHidden:!s},e)))})}},97876:(e,t,s)=>{s.d(t,{O:()=>D});var i=s(67294),n=s(480),o=s(86628),r=s(24405),a=s(32161),d=s(82990),l=s(68939),c=s(18441),u=s(50770),m=s(80444),g=s(30874),p=s(26136),h=s(905),f=s(79080),y=s(77657),x=s(36591),S=s(42853),b=s(47453),v=s(149),M=s(50906),w=s(42631),j=s(9953),k=s(39699),C=s(87279),T=s(64921),I=s(52275),P=s(31945),F=s(78140),_=s(32163),Z=s(72495),A=s(85893);function R(e){window.__c={n:"PersonalSlackNotificationsAccountDropdownButton"};const{currentExternalAuthentication:t,externalAuthentications:s,spaceId:a,spaceViewStore:d}=e,u=(0,n.O7)(),m=(0,n.Fy)(),p=(0,o.VK)((()=>g.Z.integrations.state.find((e=>e.id===y.nO))),[]),h=(0,r.yK)((e=>({popupContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:14,marginTop:12},dropdownButtonContainer:{display:"flex",alignItems:"center",minWidth:0,padding:"0px 8px",borderRadius:4,marginLeft:8},currentValueLabel:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flex:1},icon:{marginLeft:8,width:12,height:12,color:e.lightTextColor}})),[]);let f;f=m.isPhone?{menuType:C.og.ActionSheet}:{menuType:C.og.Popup,width:280,maxHeight:"50vh"};const R=i.useCallback((e=>Object.entries((0,c.YJ)(s)).map(((s,i)=>{let[n,o]=s;return{key:n,items:o.map((s=>{let{externalAuthentication:i,workspaceName:n}=s;return{key:i.id,action:()=>{e.close(),B({environment:u,spaceViewStore:d,currentExternalBotId:null==t?void 0:t.parent_id,selectedExternalBotId:i.parent_id})},render:e=>(0,A.jsx)(I.Z,{...e,title:n,right:i.id===(null==t?void 0:t.id)&&(0,x.e)({width:12,height:12})})}})),render:e=>(0,A.jsx)(Z.Z,{...e,title:n,topBorder:0!==i})}}))),[null==t?void 0:t.id,null==t?void 0:t.parent_id,u,s,d]),O=i.useCallback((e=>p?[{key:"disable-notification",items:[{key:"disable-slack-notification",action:()=>{e.close(),function(e){const{environment:t,spaceViewStore:s}=e;k.createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,perform:e=>{j.sW({store:s.getSettingsStore(),data:{notify_slack:null},transaction:e})}}),M.xim(t,{type:"personal",source:"notifications_and_settings"})}({environment:u,spaceViewStore:d})},render:e=>(0,A.jsx)(I.Z,{...e,title:(0,A.jsx)(l.FormattedMessage,{id:"personalSlackNotificationsAccountDropdownButton.disableNotification.label",defaultMessage:"Off"}),right:void 0===t&&(0,x.e)({width:12,height:12})})}],render:e=>(0,A.jsx)(Z.Z,{...e,topBorder:R.length>0})},{key:"create-new-auth",items:[{key:"connect",render:e=>(0,A.jsx)(I.Z,{...e,icon:(0,b.R)({width:12,height:12}),title:(0,A.jsx)(l.FormattedMessage,{id:"database.viewSettings.notificationsTab.slack.addNewAccount.label",defaultMessage:"Add new account"})}),action:async()=>{var e;const t=await w.hM({environment:u,integration:p,spaceId:a,from:"notifications_and_settings"});if(v.x.isFail(t))return;const s=null===(e=t.value.externalAuthentication)||void 0===e?void 0:e.parent_id;s&&B({environment:u,spaceViewStore:d,currentExternalBotId:void 0,selectedExternalBotId:s})}}],render:e=>(0,A.jsx)(Z.Z,{...e,topBorder:!0})}]:[]),[t,u,R.length,a,d,p]);return(0,A.jsx)("div",{style:h.popupContainer,children:(0,A.jsx)(P.ZP,{popupType:P.Z4.Popup,alignmentToOrigin:P.vR.End,render:e=>(0,A.jsx)(F.Z,{...f,children:(0,A.jsx)(_.Z,{type:_.i.Vertical,initialFocus:0,sections:[...R(e),...O(e)]})}),renderOrigin:t=>(0,A.jsxs)(T.Z,{...t,style:h.dropdownButtonContainer,children:[(0,A.jsx)("div",{style:h.currentValueLabel,children:(0,A.jsx)(E,{...e})}),(0,S.i)(h.icon)]})})})}function B(e){const{environment:t,spaceViewStore:s,selectedExternalBotId:i,currentExternalBotId:n}=e;n!==i&&(k.createAndCommit({userAction:"NotificationsAndPersonalSettings.SlackNotificationsAccountSetting",environment:t,perform:e=>{j.sW({store:s.getSettingsStore(),data:{notify_slack:{external_bot_id:i}},transaction:e})}}),void 0===n?M.XCt(t,{type:"personal",source:"notifications_and_settings"}):M.OSl(t,{type:"personal",source:"notifications_and_settings"}))}function E(e){const{currentExternalAuthentication:t}=e;if(!t)return(0,A.jsx)(l.FormattedMessage,{id:"SlackNotificationsPersonalSettingsAccountPicker.accountDropdown.selectPlaceholder",defaultMessage:"Off"});const s=(0,c.jg)(t).organizationName;return(0,A.jsx)(A.Fragment,{children:s})}var O=s(55422);function D(e){window.__c={n:"SlackNotificationsSetting"};const{target:t}=e,{isMobile:s}=(0,n.Fy)(),i=(0,o.VK)((()=>m.default.state.currentSpaceViewStore),[]),y=(0,o.VK)((()=>(0,u.r)()),[]),x=(0,o.VK)((()=>m.default.state.currentSpaceStore),[]),S=(0,o.VK)((()=>g.Z.completeSlackAuthentications.state),[]),b=(0,o.VK)((()=>{var e;const s=null==i||null===(e=i.getSettings())||void 0===e||null===(e=e[t])||void 0===e?void 0:e.external_bot_id;if(!s)return;const n=S.find((e=>e.parent_id===s));if(n)return n;if(!i)return;return(0,p.Kv)(i,{id:s,table:a.P}).getValue()}),[i,S,t]),v=(0,r.yK)((e=>({notifySlackSelectedWorkspaceName:{fontWeight:d.Z.fontWeight.bold,color:e.darkTextColor},titleWithBadgeContainer:{display:"flex",alignItems:"center"},betaBadgeContainer:{marginTop:-3},betaBadge:{display:"inline",marginLeft:6}})),[]);return i&&x?(0,A.jsx)(O.Z,{type:"custom",isMobile:s,title:(0,A.jsx)(f.Z,{target:t,isProductNotifEmailImprovementsEnabled:y}),caption:(0,A.jsx)(A.Fragment,{children:b?(0,A.jsx)(l.FormattedMessage,{id:"notificationSettings.slackNotificationsSettings.workspaceSelected.description",defaultMessage:"Receive notifications in {slackWorkspaceName} when you're mentioned in a page, database property, or comment.",values:{slackWorkspaceName:(0,A.jsx)("span",{style:v.notifySlackSelectedWorkspaceName,children:(0,c.jg)(b).organizationName})}}):(0,A.jsx)(h.Z,{target:t,isProductNotifEmailImprovementsEnabled:y})}),customButton:(0,A.jsx)(R,{currentExternalAuthentication:b,externalAuthentications:S,spaceId:x.id,spaceViewStore:i})}):null}},41977:(e,t,s)=>{s.d(t,{Z:()=>Ae});var i=s(67294),n=s(86628),o=s(24405),r=s(58573),a=s(82990),d=s(68939),l=s(16639),c=s(95697),u=s(40394),m=s(64369),g=s(480),p=s(42853),h=s(33929),f=s(87279),y=s(55838),x=s(61766),S=s(31194),b=s(30397),v=s(9867),M=s(74016),w=s(48019),j=s(52275),k=s(31945),C=s(68894),T=s(78140),I=s(89728),P=s(72495),F=s(85893);const _=(0,d.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForGroupMenu.filterForTeams.placeholder"}});function Z(e){window.__c={n:"TeamsPopup"};const t=(0,g.O7)(),s=(0,o.yK)((()=>({teamMenuItem:{fontWeight:400}})),[]),[r,a]=(0,i.useState)(""),l=(0,i.useCallback)((e=>v.RF({environment:t,teamId:e,tab:y.a.Members,from:"teams_dropdown_for_group"})),[t]),c=(0,n.VK)((()=>[{key:"teams for group",render:e=>(0,F.jsx)(P.Z,{...e}),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>(0,F.jsx)(j.Z,{icon:(0,F.jsx)(M.p,{disabled:!0,store:e}),title:(0,F.jsx)(m.Z,{style:s.teamMenuItem,children:e.getName()}),right:(0,F.jsx)(d.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsInGroupMenu.filterForTeams.numMembers",values:{numMembers:e.getUserIdsInTeam().length}}),...t}),action:()=>{l(e.id)},closeParentMenu:!0})))}]),[s,e.teamStores,l]),u=r,p=(0,F.jsx)(w.Z,{filter:u,context:{blocks:[],environment:t,publicEditMode:void 0},sections:c,initialFocus:0}),x=(0,F.jsx)(P.Z,{isInput:!0,children:(0,F.jsx)(C.ZP,{value:u,onChange:(0,i.useCallback)((e=>{a(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:h.default.formatMessage(_.filterTeams)})}),S={menuType:f.og.Popup,width:280,maxHeight:"50vh",header:e.teamStores.length>5?x:void 0};return(0,F.jsx)(T.Z,{...S,children:p})}const A=function(e){window.__c={n:"TeamsDropdownForGroup"};const t=(0,n.qz)(void 0,x.Z),[s]=(0,n.AF)(b.Z),r=(0,o.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),a=(0,n.VK)((()=>s.teams.filter((t=>t.getMembers().some((t=>"group"===t.entity_type&&t.group_id===e.group.id))))),[s,e.group]);return(0,F.jsx)(k.ZP,{popupType:k.Z4.Popup,renderOrigin:e=>(0,F.jsxs)(I.Z,{disabled:0===a.length,style:0===a.length?r.noTeams:r.button,...e,children:[0===a.length?(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCountNone",defaultMessage:"None"}):(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.teamsCount",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:a.length}}),a.length>0&&(0,p.i)(r.chevron)]}),buttonPopupStore:t,placementToOrigin:S.Iw.Bottom,render:e=>(0,F.jsx)(Z,{parent:e,teamStores:a}),onClose:(0,i.useCallback)((()=>{t.reset()}),[t])})};var R=s(56666),B=s(72126),E=s(50906),O=s(47307),D=s(29974),N=s(39699),V=s(68418),U=s(93405),L=s(73063),q=s(32163),G=s(53437);function W(e){window.__c={n:"GroupActionMenu"};const{group:t,spaceStore:s,settingsStore:i}=e,o=(0,n.qz)(void 0,x.Z);return(0,F.jsx)(k.ZP,{popupType:G.kQ.Popup,render:()=>(0,F.jsx)(K,{group:t,spaceStore:s,popupStore:o,settingsStore:i}),buttonPopupStore:o,renderOrigin:e=>(0,F.jsx)(L.Z,{icon:R.o,...e})})}function K(e){window.__c={n:"ActionMenu"};const{group:t,spaceStore:s,popupStore:r,settingsStore:a}=e,l=(0,c.Gc)(),u=(0,n.VK)((()=>s.canAdmin()),[s]),m=(0,g.O7)(),p=(0,o.yK)((e=>({deleteButton:{color:e.redBadgeBackground}})),[]),h=(0,i.useCallback)((async()=>{r.setState({open:!1});await O.confirmUserAction({message:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group? Any pages that are private to this group will be transferred to you."}),acceptLabel:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})})&&(await N.createAndCommitAsync({environment:m,userAction:"SpacePermissionGroup.handleDelete",waitForServerCommit:!1,perform:async e=>{await D.Xv({environment:m,spaceStore:s,group:t,transaction:e})}}),E.dan(m))}),[t,m,s,r]),y=(0,i.useCallback)((()=>{a.setState({...a.state,editingNameGroupId:t.id,groupNameInputValue:t.name||""}),r.setState({open:!1}),E.XbW(m)}),[t,m,r,a]),x=(0,i.useCallback)((()=>{V.Z.setState({...V.Z.state,name:t.name||"",defaultInviteTargets:[{type:"group",value:t}]}),v.lo("group_settings")}),[t]),S={key:"action_menu",render:e=>(0,F.jsx)(P.Z,{...e}),items:B.oA([{key:"rename",render:e=>(0,F.jsx)(U.Z,{...e,title:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})}),action:y},l?{key:"create_team_from_group",render:e=>(0,F.jsx)(U.Z,{...e,title:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.createTeamFromGroup",defaultMessage:"Create teamspace from group"})}),action:x}:void 0,u&&{key:"delete",render:e=>(0,F.jsx)(U.Z,{...e,title:(0,F.jsx)("div",{style:p.deleteButton,children:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"})})}),action:h}])};return(0,F.jsx)(T.Z,{menuType:f.og.Popup,children:(0,F.jsx)(q.Z,{type:q.i.Vertical,initialFocus:0,sections:[S],onAccept:()=>{r.setState({open:!1})}})})}var z=s(8848),H=s(72141),Q=s(67669),Y=s(49085);class $ extends Y.default{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const X=$;var J=s(86125),ee=s(29302),te=s(66897),se=s(33728),ie=s(47453),ne=s(19889),oe=s(23586),re=s(77907),ae=s(80444),de=s(26136),le=s(78291),ce=s(88893),ue=s(42922),me=s(43765),ge=s(92864),pe=s(47082),he=s(97680);function fe(e){window.__c={n:"GroupAddMembersButton"};const{group:t,spaceStore:s,groupStore:i}=e,r=(0,n.qz)(void 0,x.Z),a=(0,o.yK)((()=>({popup:{width:400},button:{marginTop:4}})),[]);return(0,F.jsx)(k.ZP,{popupType:G.kQ.Popup,render:()=>(0,F.jsx)(ye,{spaceStore:s,group:t,popupStore:r,groupStore:i}),buttonPopupStore:r,onClose:()=>i.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),style:a.popup,renderOrigin:e=>(0,F.jsx)("div",{children:(0,F.jsx)(I.Z,{isGray:!0,icon:ie.R,style:a.button,...e,children:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})})})})}function ye(e){window.__c={n:"AddMemberMenu"};const t=(0,g.O7)(),s=(0,d.useIntl)(),{group:o,spaceStore:r,popupStore:a,groupStore:l}=e,c=(0,n.VK)((()=>l.state.temporaryUserIds.map((e=>{const t=r.getRecordValue({table:ne.KJ,id:e});return(0,F.jsx)(ge.vw,{userValue:t,format:ge.vw.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const t=l.state.temporaryUserIds.filter((t=>t!==e));l.setState({...l.state,temporaryUserIds:t})},shouldShrink:!0,isSingle:!1},e)}))),[r,l]),u=(0,n.VK)((()=>()=>{const{temporaryUserIds:e}=l.state,s=o.user_ids||[],i=B.G0(s,e),n={...o,user_ids:i,last_edited_time:Date.now()};N.createAndCommit({userAction:"SpacePermissionGroup.handleAddDoneClick",environment:t,perform:e=>{D.jF({spaceStore:r,group:n,transaction:e})}}),l.setState({userInputValue:"",temporaryUserIds:[],limitUsers:!0}),a.setState({open:!1}),E.Kf$(t,{add_member_count:e.length})}),[o,t,l,a,r]),m=(0,i.useCallback)((()=>{const{temporaryUserIds:e}=l.state,t=e.slice(0,e.length-1);l.setState({...l.state,temporaryUserIds:t})}),[l]),p=(0,i.useCallback)((e=>{const t=e.target.value,{extractedEmails:s,newInputValue:i}=(0,se.zI)(t),{currentSpaceStore:n}=ae.default.state,{data:o}=le.default.state;if(!o||!n)return;const r=(0,ce.CM)(o).map((e=>e.userId)),a=B.oA(r.map((e=>de.U6.createChildStore(n,{table:ne.KJ,id:e}).getValue()))).filter((e=>s.includes(e.email)&&!l.state.temporaryUserIds.includes(e.id)));l.setState({...l.state,temporaryUserIds:[...l.state.temporaryUserIds,...a.map((e=>e.id))],userInputValue:i})}),[l]),h=(0,n.VK)((()=>l.state.userInputValue),[l]),y=(0,n.VK)((()=>l.state.temporaryUserIds),[l]);return(0,F.jsx)(T.Z,{menuType:f.og.Popup,tokenInputHeader:!0,header:(0,F.jsx)(pe.Z,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:pe.Z.Format.Group,tokens:c,placeholder:s.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:m,value:h,onChange:p,inputAndTokenWrapRightStyle:{paddingTop:t.device.isMobile?0:6,paddingBottom:t.device.isMobile?0:6},right:(0,F.jsx)(ue.Z,{isLarge:!0,onClick:u,children:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"})})}),children:(0,F.jsx)(oe.Z,{request:{query:h,temporaryUserIds:y},performRequest:async s=>{let{query:i,temporaryUserIds:n}=s;const o=e.group.user_ids||[],r=await re.deps.searchActions.loader();return(await r.searchVisibleSpaceUsers({environment:t,query:i,membersOnly:!0})).filter((e=>o.indexOf(e.id)<0&&n.indexOf(e.id)<0)).slice(0,20)},render:(e,t)=>(0,F.jsx)(xe,{results:t,spaceStore:r,groupStore:l})})})}function xe(e){window.__c={n:"AddMemberResults"};const{spaceStore:t,groupStore:s}=e,[i,o]=(0,n.AF)(s,X),r=(e.results||[]).map((e=>{let{id:t}=e;return t})),a=(0,n.VK)((()=>r.map((e=>{const s=de.U6.createChildStore(t,{table:ne.KJ,id:e}).getValue();return{key:e,render:e=>(0,F.jsx)(he.Z,{...e,actor:(0,te.m3)(s),useEmailAsTooltip:!0}),action:()=>{const t=[...i.temporaryUserIds,e];o({...i,temporaryUserIds:t,userInputValue:""})}}}))),[t,o,i,r]);if(0===r.length)return(0,F.jsx)(P.Z,{children:(0,F.jsx)(me.Z,{title:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})})});{const e={key:"user_menu",render:e=>(0,F.jsx)(P.Z,{...e}),items:a};return(0,F.jsx)(q.Z,{type:q.i.Vertical,initialFocus:0,sections:[e]})}}function Se(e){window.__c={n:"GroupMembers"};const{group:t,canEdit:s,spaceStore:i,settingsStore:o}=e,r=(0,d.useIntl)(),a=(0,n.qz)(void 0,X),{groupMembers:c,remainingMembers:u}=(0,n.VK)((()=>{const{countRemainingUsers:e,totalNumberMembers:s,limitedUserStores:n}=(0,l.rm)({group:t,spaceStore:i,limit:a.state.limitUsers&&!o.state.groupsFilter?10:void 0});return{groupMembers:(0,l.N5)({userStores:n,spaceStore:i,intl:r}),remainingMembers:e,totalMembers:s}}),[t,i,o,a,r]);return(0,F.jsxs)("div",{style:{padding:"4px 42px 8px"},children:[c.map((t=>(0,F.jsx)(be,{userStore:t,...e},t.id))),u>0&&(0,F.jsx)(I.Z,{isGray:!0,style:{marginTop:4},onClick:()=>{a.setState({...a.state,limitUsers:!1})},children:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:u}})}),s?(0,F.jsx)(fe,{group:t,spaceStore:i,groupStore:a}):c.length<1&&(0,F.jsx)(I.Z,{disabled:!0,isGray:!0,children:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.noMembersInside",defaultMessage:"No members inside"})})]})}function be(e){window.__c={n:"GroupMember"};const{spaceStore:t,userStore:s,group:i,canEdit:o}=e,r=(0,g.O7)(),a=(0,n.VK)((()=>t.isDefined()?(0,Q.su)(t.getPermissionItems(),s.id):"none"),[t,s]);return(0,F.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,F.jsxs)("div",{style:{display:"flex"},children:[(0,F.jsx)(ee.Z,{userStore:s,style:{fontSize:14,fontWeight:400,lineHeight:"17px",paddingRight:6,minHeight:34,width:"100%"},avatarSize:22}),(0,H.Bc)(a)&&(0,F.jsx)(J.Z,{role:"membership_admin"===a?"membership_admin":"admin"})]}),o&&(0,F.jsx)(I.Z,{isGray:!0,hoveredStyle:{color:z.ZP.red},onClick:async()=>{if(await O.confirmUserAction({message:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})})){const e=(i.user_ids||[]).filter((e=>e!==s.id)),n={...i,user_ids:e,last_edited_time:Date.now()};N.createAndCommit({userAction:"SpacePermissionGroup.renderUser",environment:r,perform:e=>{D.jF({spaceStore:t,group:n,transaction:e})}}),E.xtf(r)}},children:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})})]},s.id)}var ve=s(13991),Me=s(75071),we=s(44295),je=s(22808),ke=s(69015),Ce=s(12793),Te=s(74194),Ie=s(3386),Pe=s(31278),Fe=s(26388),_e=s(5210);function Ze(e){window.__c={n:"GroupNameToggle"};const{row:t,canEdit:s,open:r,toggleOpenState:c,spaceStore:u,settingsStore:p}=e,h=t.group,f=(0,d.useIntl)(),y=(0,o.Fg)(),x=(0,g.O7)(),S=l.kF({intl:f,group:h}),b=(0,o.yK)((e=>({container:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"},toggle:{flexShrink:0,marginRight:2},chevron:{width:12,height:12,transition:"transform 200ms ease-out",transform:`rotateZ(${r?0:-90}deg)`,fill:"inherit",opacity:.5,marginRight:4},name:{fontFamily:a.Z.getCompositeFontFamily(ve.SP).sans,fontSize:14,lineHeight:"17px",marginRight:4},input:{fontWeight:a.Z.fontWeight.medium,padding:"4px 6px",background:e.contentBackgroundTransparent},icon:{marginRight:9}})),[r]),v=(0,i.useCallback)((e=>{const t={...h,icon:e,last_edited_time:Date.now()};N.createAndCommit({userAction:"SpacePermissionGroup.handleIconChange",environment:x,perform:e=>{D.jF({spaceStore:u,group:t,transaction:e})}}),E.zUE(x,{is_emoji:(0,je.Z)(e)})}),[h,u,x]),M=(0,i.useCallback)((()=>{p.setState({...p.state,editingNameGroupId:void 0,groupNameInputValue:""})}),[p]),w=(0,i.useCallback)((e=>{p.setState({...p.state,groupNameInputValue:e.target.value})}),[p]),j=(0,i.useCallback)((()=>{const{editingNameGroupId:e,groupNameInputValue:t}=p.state,s=t.trim();if(e===h.id){if(s!==h.name){const e={...h,name:s,last_edited_time:Date.now()};N.createAndCommit({userAction:"SpacePermissionGroup.handleNameAccept",environment:x,perform:t=>{D.jF({spaceStore:u,group:e,transaction:t})}})}p.setState({...p.state,editingNameGroupId:void 0,groupNameInputValue:""})}}),[h,x,u,p]),k=(0,n.VK)((()=>p.state.editingNameGroupId===h.id),[h,p]),C=(0,n.VK)((()=>p.state.groupNameInputValue),[p]);function T(e){const t={width:e-4,height:e-4,fill:y.mediumIconColor},s={width:12,height:12,fill:y.mediumIconColor};return(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,we.I)(t),(0,Me.f)(s)]})}return(0,F.jsxs)("div",{style:b.container,children:[(0,F.jsx)(_e.Z,{isSidebar:!1,fill:!0,icon:"chevron",open:r,color:y.mediumIconColor,onClick:()=>c(h.id),style:b.toggle}),(0,F.jsx)(Ce.Z,{size:28,style:b.icon}),k?(0,F.jsx)(Ie.Z,{capture:!0,onEsc:M,children:(0,F.jsx)(Te.Z,{disabled:!s,type:ke.Z.Type.Inline,style:b.input,placeholder:f.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:C,onChange:w,onBlur:j,onSubmit:j})}):(0,F.jsx)(m.Z,{style:b.name,showTooltipWhenTruncated:!0,children:S}),(I=t.isRowHovered,h.icon?s?(0,F.jsx)(Pe.Z,{disabled:!1,bucket:"public",icon:h.icon?{pointer:u.pointer,icon:h.icon}:void 0,size:18,isEmptyPage:!1,title:S,onChange:v,style:b.icon}):(0,F.jsx)(Pe.Z,{disabled:!0,bucket:"public",icon:h.icon?{pointer:u.pointer,icon:h.icon}:void 0,size:18,isEmptyPage:!1,title:S,style:b.icon}):I&&s?(0,F.jsx)(Fe.Z,{renderTooltip:()=>(0,F.jsx)(d.FormattedMessage,{defaultMessage:"Add icon",id:"spacePermissionsSettings.groupsTab.userGroup.groupIcon.tooltip"}),render:e=>(0,F.jsx)(Pe.Z,{disabled:!1,bucket:"public",icon:h.icon?{pointer:u.pointer,icon:h.icon}:void 0,size:18,isEmptyPage:!1,title:S,onChange:v,style:{...b.icon,width:30},defaultIcon:T(18),...e})}):void 0)]});var I}function Ae(e){let{groups:t,canEdit:s,spaceStore:l,permissionsSettingsStore:g}=e;window.__c={n:"SpaceGroupsTable"};const[p,h]=(0,i.useState)([]),f=(0,o.Fg)(),y=(0,c.Gc)(),x=(0,n.VK)((()=>(0,r.ZP)(g.state.groupsFilter,t,(e=>e.name||""))),[g,t]),S=(0,i.useCallback)((e=>{h((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat(e)))}),[h]),b=(0,i.useMemo)((()=>function(e){return e.map((e=>({id:e.id,group:e,isClickable:!1})))}(x)),[x]),v=(0,i.useMemo)((()=>function(e){let{openRowIds:t,toggleOpenRowId:s,canEdit:i,spaceStore:n,settingsStore:o,isTeamEnabled:r}=e;const l={id:"title",headerTitle:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.groups",defaultMessage:"Group"}),renderCell:e=>(0,F.jsx)(Ze,{row:e,open:t.includes(e.id),toggleOpenState:s,canEdit:i,spaceStore:n,settingsStore:o}),widthData:{width:120},hasClickableContents:!1,sortable:!1},c={id:"teams",headerTitle:(0,F.jsx)("div",{style:{paddingLeft:8},children:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.teams",defaultMessage:"Teamspaces"})}),renderCell:e=>(0,F.jsx)("div",{style:a.Z.textOverflowStyle,children:(0,F.jsx)(A,{group:e.group})}),widthData:{width:40},hasClickableContents:!1,sortable:!1},u={id:"members",headerTitle:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.member",defaultMessage:"Members"}),renderCell:e=>(0,F.jsx)(Re,{spaceStore:n,row:e}),widthData:{width:40},hasClickableContents:!1,sortable:!1},m={id:"menu",headerTitle:null,renderCell:e=>(0,F.jsx)(W,{group:e.group,spaceStore:n,settingsStore:o}),widthData:{width:20},hasClickableContents:!0,sortable:!1};return[l,...r?[c]:[],u,...i?[m]:[]]}({openRowIds:p,toggleOpenRowId:S,canEdit:s,spaceStore:l,settingsStore:g,isTeamEnabled:y})),[p,S,s,l,g,y]),M=(0,u.b)({columnRenderInfo:v,theme:f});return(0,F.jsx)(u.D,{showRowBorders:!0,hideHeaderRowPadding:!0,columnRenderInfo:v,rows:b,styles:M,renderNoRowsComponent:()=>(0,F.jsx)(m.Z,{isSmall:!0,style:{marginLeft:5,marginTop:10,marginBottom:20},children:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.spaceGroupsTable.noGroupsFound",defaultMessage:"No groups found."})}),renderRowChild:e=>p.includes(e.id)?(0,F.jsx)(Se,{group:e.group,canEdit:s,spaceStore:l,settingsStore:g}):void 0})}function Re(e){window.__c={n:"MembersCountCell"};const{spaceStore:t,row:s}=e,i=(0,n.VK)((()=>(0,l.kQ)({group:s.group,spaceStore:t}).length),[t,s.group]);return(0,F.jsx)("div",{style:a.Z.textOverflowStyle,children:(0,F.jsx)(d.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:i}})})}},44625:(e,t,s)=>{s.d(t,{Z:()=>wt});s(57658);var i=s(67294),n=s(83355),o=s(480),r=s(86628),a=s(24405),d=s(49085),l=s(8848),c=s(58573),u=s(7189),m=s(56666),g=s(76781),p=s(19981),h=s(28495),f=s(35840),y=s(72263),x=s(72126),S=s(72141),b=s(4615),v=s(15047),M=s(19889),w=s(2438),j=s(97880),k=s(82990),C=s(7928),T=s(68939),I=s(48298),P=s(50906),F=s(54642),_=s(14871),Z=s(47307),A=s(61652),R=s(92625),B=s(76464),E=s(29974),O=s(80136),D=s(39699),N=s(23586),V=s(4708),U=s(15010),L=s(87279),q=s(67669),G=s(18514),W=s(38755),K=s(95697),z=s(77907),H=s(80444),Q=s(88632),Y=s(77080),$=s(26136),X=s(72087),J=s(64404),ee=s(92083),te=s(78291),se=s(98905),ie=s(24665),ne=s(34583),oe=s(9634),re=s(1564),ae=s(2469),de=s(88893),le=s(35057),ce=s(91567),ue=s(21752),me=s(42922),ge=s(64921),pe=s(52275),he=s(31945),fe=s(61519),ye=s(73063),xe=s(74194),Se=s(68785),be=s(78140),ve=s(32163),Me=s(63296),we=s(72495),je=s(62385),ke=s(24006),Ce=s(26388),Te=s(64369),Ie=s(26774),Pe=s(16639),Fe=s(31278),_e=s(53695),Ze=s(85893);function Ae(e){let{spaceStore:t,groups:s,onGroupClick:i}=e;window.__c={n:"GroupsDowndownForMember"};const n=(0,T.useIntl)(),o=s.length,r=(0,a.yK)((e=>({title:{marginRight:8,color:0===o?e.lightTextColor:void 0},defaultGroupIconPill:{height:14,width:14,color:e.mediumTextColor,fill:"currentColor"},untitled:{color:e.lightTextColor}})),[o]),d=s.map((e=>({key:e.id,render:s=>{var i;const o=Pe.kF({intl:n,group:e});return(0,Ze.jsx)(pe.Z,{icon:(0,Ze.jsx)(Fe.Z,{disabled:!0,icon:e.icon&&t?{pointer:t.pointer,icon:e.icon}:void 0,size:18,isEmptyPage:!1,title:o,defaultIcon:(0,Ie.O)(r.defaultGroupIconPill)}),title:(0,Ze.jsx)(Te.Z,{style:e.name?void 0:r.untitled,children:o}),caption:(0,Ze.jsx)(T.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"groupsDropdownForMember.numMembers",values:{numMembers:(null===(i=e.user_ids)||void 0===i?void 0:i.length)||0}}),inline:!0,...s})},action:i})));return(0,Ze.jsx)(_e.N,{title:(0,Ze.jsx)(Te.Z,{style:r.title,children:0===o?(0,Ze.jsx)(T.FormattedMessage,{id:"groupsDropdownForMember.groupsCountNone.label",defaultMessage:"None"}):(0,Ze.jsx)(T.FormattedMessage,{id:"groupsDropdownForMember.groupsCount.label",defaultMessage:"{numberOfGroups, plural, one {{numberOfGroups} group} other {{numberOfGroups} groups}}",values:{numberOfGroups:o}})}),items:d,disabled:0===o})}var Re=s(15145),Be=s(42853),Ee=s(21202),Oe=s(75018),De=s(84210),Ne=s(61766),Ve=s(28992),Ue=s(43765),Le=s(89728),qe=s(11470);class Ge extends n.Z{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:Ne.Z},this.renderPopup=()=>{const{device:e}=this.environment,{store:t,guest:s,hideActionButtons:i}=this.props,n=t.canEditMembership(),o=s.guestPageIds.map((e=>{const s=$.G.createChildStore(t,{table:Ee.iU,id:e});return{key:e,render:e=>(0,Ze.jsx)(qe.Z,{...e,store:s,placeholder:(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const s=$.G.createChildStore(t,{table:Ee.iU,id:e}),i=(0,De.ZP)({store:s,fullyQualified:!1,pageVisitSource:Re.tY.LinkInPage});Oe.navigate({environment:this.environment,url:i,openInNew:"tab"})}}}));let r,a;r=e.isMobile?{menuType:L.og.ActionSheet}:{menuType:L.og.Popup,width:300},(0,de.qF)(this.environment)&&(a=(0,Ze.jsx)(Ce.Z,{renderTooltip:()=>Ke()?(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>(0,Ze.jsx)(Me.Z,{isLarge:!0,onClick:this.handleConvertToMemberClick,...e,children:Ke()?(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"})})}));const d=!i&&n;return(0,Ze.jsxs)(be.Z,{...r,children:[d&&(0,Ze.jsx)(Ve.Z,{title:(0,Ze.jsxs)("div",{style:{paddingTop:12,paddingBottom:8,display:"flex",alignItems:"flex-start"},children:[a,(0,Ze.jsx)(Ce.Z,{renderTooltip:()=>(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.tooltip",defaultMessage:"This guest will be removed from all pages in this Workspace."}),render:e=>(0,Ze.jsx)(Me.Z,{isLarge:!0,isRed:!0,style:{marginLeft:a?8:0},onClick:this.handleRemoveClick,...e,children:(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.label",defaultMessage:"Remove"})})})]})}),d&&(0,Ze.jsx)(Ue.Z,{title:1===o.length?(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.guestHasAccessToSinglePageCaption",defaultMessage:"This guest can access this page:"}):(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.guestHasAccessToMultiplePagesCaption",defaultMessage:"This guest can access these pages:"})}),(0,Ze.jsx)(ve.Z,{type:ve.i.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>(0,Ze.jsx)(we.Z,{...e}),items:o}]})]})},this.handleRemoveClick=()=>{Z.showDialog({showCancel:!0,keepFocus:!1,message:(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{const{store:e,guestStore:t}=this.props;this.stores.buttonPopupStore.setState({...this.stores.buttonPopupStore.state,open:!1}),await O.w({environment:this.environment,guestUserStore:t,store:e})}}]})},this.handleConvertToMemberClick=async()=>{const{store:e,guestStore:t,isSubscribed:s}=this.props,i=s?"read_and_write":"editor";this.stores.buttonPopupStore.setState({...this.stores.buttonPopupStore.state,open:!1}),await O.s({environment:this.environment,guestUserStore:t,role:i,store:e,isConvertToAdmin:!s,origin:"guest_pages_popup"})}}renderComponent(){const{device:e}=this.environment,{buttonPopupStore:t}=this.stores,{store:s,guest:i}=this.props;return i.guestPageIds.map((e=>{$.G.createChildStore(s,{table:Ee.iU,id:e}).load()})),0===i.guestPageIds.length?(0,Ze.jsx)(Le.Z,{disabled:!0,children:(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.permissionsForUserGuest.label",defaultMessage:"Guest"})}):(0,Ze.jsx)(he.ZP,{popupType:e.isMobile?he.Z4.SlideUp:he.Z4.Popup,renderOrigin:e=>(0,Ze.jsxs)(Le.Z,{...e,children:[(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.page",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:i.guestPageIds.length}}),(0,Be.i)({width:10,marginLeft:4,fill:this.theme.lightIconColor})]}),buttonPopupStore:t,render:this.renderPopup})}}Ge.displayName="GuestPagesPopup";const We=(0,T.injectIntl)(Ge);function Ke(){const{data:e}=te.default.state;return Boolean(e&&(0,de.YK)(e))}var ze=s(74523),He=s(42402),Qe=s(7567),Ye=s(64768),$e=s(29825),Xe=s(83890),Je=s(8319),et=s(27386),tt=s(23189),st=s(51221),it=s(41977),nt=s(93963),ot=s(66957),rt=s(40235),at=s(33929),dt=s(55838),lt=s(30397),ct=s(9867),ut=s(74016),mt=s(48019),gt=s(68894);const pt=(0,T.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function ht(e){window.__c={n:"TeamGuestPageContent"};const{teamGuest:t}=e,s=(0,o.O7)(),i=(0,r.VK)((()=>H.default.state.currentSpaceStore),[]);if(!i)return null;if(0===t.guestPageIds.length)return null;const n=[{key:"pages",render:e=>(0,Ze.jsx)(we.Z,{...e}),items:t.guestPageIds.map((e=>{const t=$.G.createChildStore(i,{table:Ee.iU,id:e});return{key:e,render:e=>(0,Ze.jsx)(qe.Z,{...e,store:t,placeholder:(0,Ze.jsx)(T.FormattedMessage,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})}),action:()=>{const t=$.G.createChildStore(i,{table:Ee.iU,id:e}),n=(0,De.ZP)({store:t,fullyQualified:!1,pageVisitSource:Re.tY.LinkInPage});Oe.navigate({environment:s,url:n,openInNew:"tab"})}}}))}],a={menuType:L.og.Popup,minWidth:300,maxWidth:350,maxHeight:300,header:t.guestPageIds.length>0&&(0,Ze.jsx)(Te.Z,{isSmall:!0,style:{color:l.ZP.regularTextColor,marginLeft:15,marginRight:15,paddingTop:6},children:(0,Ze.jsx)(T.FormattedMessage,{id:"guestpagesforteamguest.header",defaultMessage:"Pages"})})};return(0,Ze.jsx)(be.Z,{...a,children:(0,Ze.jsx)(ve.Z,{type:ve.i.Vertical,initialFocus:void 0,sections:n})})}function ft(e){window.__c={n:"TeamGuestTeamContent"};const t=(0,o.O7)(),[s,n]=(0,i.useState)(""),d=(0,i.useCallback)((e=>ct.RF({environment:t,teamId:e,tab:dt.a.Members,from:"teams_dropdown_for_team_guest"})),[t]),l=(0,a.yK)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),c=(0,r.VK)((()=>[{key:"teams for team guest",render:e=>(0,Ze.jsx)(we.Z,{...e}),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>(0,Ze.jsx)(pe.Z,{icon:(0,Ze.jsx)(ut.p,{disabled:!0,store:e}),title:(0,Ze.jsx)(Te.Z,{style:l.teamMenuItem,children:e.getName()}),caption:(0,Ze.jsx)(T.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:e.getUserIdsInTeam().length}}),inline:!0,...t}),action:()=>{d(e.id)},closeParentMenu:!1})))}]),[e.teamStores,l.teamMenuItem,d]),u=(0,Ze.jsx)(we.Z,{isInput:!0,children:(0,Ze.jsx)(gt.ZP,{value:s,onChange:(0,i.useCallback)((e=>{n(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:at.default.formatMessage(pt.filterTeams)})}),m={menuType:L.og.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?u:void 0};return(0,Ze.jsx)(be.Z,{...m,children:(0,Ze.jsx)(mt.Z,{filter:s,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:c})})}const yt=function(e){window.__c={n:"TeamsAndPagesDropdownForTeamGuest"};const{teamGuest:t}=e,s=(0,r.VK)((()=>lt.Z.state.teams),[]),i=(0,r.VK)((()=>s.filter((e=>e.getMembers().some((e=>"user"===e.entity_type&&e.user_id===t.userId))))),[s,t]),n=(0,a.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),o=i.length??0;return(0,Ze.jsx)(he.ZP,{popupType:he.Z4.Popup,renderOrigin:e=>(0,Ze.jsx)(Le.Z,{disabled:0===o,style:0===o?n.noTeams:n.button,...e,children:0===o?(0,Ze.jsx)(T.FormattedMessage,{id:"teamsDropdownForTeamGuest.teamsCountNone.label",defaultMessage:"No access"}):(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(T.FormattedMessage,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:o}}),(0,Be.i)(n.chevron)]})}),render:()=>(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(ft,{teamGuest:t,teamStores:i}),(0,Ze.jsx)(fe.Z,{size:"100%"}),(0,Ze.jsx)(ht,{teamGuest:t})]})})};var xt=s(88775),St=s(5210);const bt={maxWidth:275,borderRadius:30},vt={marginTop:8};class Mt extends n.Z{constructor(){super(...arguments),this.storeTypes={spacePermissionsSettingsStore:J.Z,getRecoverableSpaceUserContentRequestStore:X.Z,accessRequestsStore:X.Z,isPageGuestsOpen:d.default.createClass(!0),isTeamGuestsOpen:d.default.createClass(!0)},this.userIdsWithContentBeingReprovisioned=d.default.createValue([]),this.isTeamGuestsEnabled=this.createComputedStore((()=>(0,V.F$)())),this.renderReprovisioningData=(e,t,s)=>t?(0,Ze.jsx)(rt.Z,{columns:[{key:"user",header:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"50%"}},{key:"count",header:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.userTable.pageCountColumn.header",defaultMessage:"Private pages"}),style:{width:"25%"}},{key:"action",header:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.userTable.actionLevelColumn.header",defaultMessage:"Action"}),style:{width:"25%"}}],rows:this.getSpaceRecoverRows(t.recentSpaceRecoverPages)}):!s&&(0,Ze.jsx)(kt,{}),this.handleTabClick=(e,t)=>{const s=Dt(t,this.props.store)[e];switch(s){case J.Q.Members:P.qTS(this.environment,{tab:"members"});break;case J.Q.Groups:P.qTS(this.environment,{tab:"groups"});break;case J.Q.Guests:P.qTS(this.environment,{tab:"guests"});break;case J.Q.Reprovisioning:P.qTS(this.environment,{tab:"reprovisioning"});break;case J.Q.Requests:P.qTS(this.environment,{tab:"requests"});break;default:(0,j.t1)(s)}this.stores.spacePermissionsSettingsStore.state.currentTab===J.Q.Requests&&s!==J.Q.Requests&&se.Z.reset(),this.navigateToTab(s)},this.navigateToTab=e=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,currentTab:e})},this.handleCreateGroupClick=()=>{D.createAndCommit({userAction:"SpacePermissionsSettings.handleCreateGroupClick",environment:this.environment,perform:e=>{const t=E.mo({environment:this.environment,spaceStore:this.props.store,transaction:e});t&&this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,editingNameGroupId:t.id,groupNameInputValue:""})}}),P.O8v(this.environment)},this.handleFilterChange=e=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,groupsFilter:e.target.value})},this.handleMembersShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitMembers:!1})},this.handleGuestsShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitGuests:!1})},this.handleTeamGuestsShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitTeamGuests:!1})},this.handleInviteLinkClick=()=>{const e=!Rt(this.props.store);P.eoz(this.environment,{enabled:e}),D.createAndCommit({userAction:"SpacePermissionsSettings.handleInviteLinkClick",environment:this.environment,perform:t=>{E.ys({transaction:t,spaceStore:this.props.store,inviteLinkEnabled:Boolean(e)})}})},this.handleSortClick=(e,t)=>{const s=this.stores.spacePermissionsSettingsStore.state.sorts[e];let i;i=!(!s||s.by!==t)&&s.asc,this.stores.spacePermissionsSettingsStore.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!i}}})))},this.handleMemberPermissionRoleChange=async(e,t,s)=>{const{store:i}=this.props,n=this.environment.currentUser.id;if(e.userId!==n||"none"!==t)zt(),"none"===t?(await F.removeUsersFromSpace(this.environment,{userIds:[e.userId],spaceId:i.id,removePagePermissions:!0,revokeUserTokens:!0}),await ne.bi(this.environment)):D.createAndCommit({userAction:"SpacePermissionsSettings.handleMemberPermissionRoleChange",environment:this.environment,perform:s=>B.ep({environment:this.environment,store:i,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s,from:"space_permission_setting_table"})}),Ht();else{await E.bf({environment:this.environment,spaceId:i.id,userSettingsStore:s})&&(P.JkE(this.environment,{invite_origin:"workspace_leave",domainType:(0,U.JF)(),new_workspace_member_count:-1,new_workspace_member_ids:[n]}),ee.Z.setState({...ee.Z.state,open:!1}))}},this.handleReprovisionToUserChange=async(e,t)=>{if(!(await Z.confirmUserAction({message:(0,Ze.jsx)("span",{children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmationMessage",defaultMessage:"Are you sure you want to transfer their private pages? This action cannot be undone."})}),acceptLabel:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.reprovisionPrivatePagesConfirmationDialog.confirmButton.label",defaultMessage:"Transfer private pages"})})))return;this.userIdsWithContentBeingReprovisioned.setState([...this.userIdsWithContentBeingReprovisioned.state,e]);const s=await F.transferSpaceUserContent(this.environment,{spaceId:this.props.store.id,fromUserId:e,toUserId:t});"failed"===s.type&&Z.showError(s),await this.stores.getRecoverableSpaceUserContentRequestStore.refresh(),this.userIdsWithContentBeingReprovisioned.setState(this.userIdsWithContentBeingReprovisioned.state.filter((t=>t!==e)))}}UNSAFE_willMount(){this.setInitialSubtabOnMount()}renderComponent(){const{store:e,isMobile:t}=this.props;if(!Q.Z.state.online)return(0,Ze.jsx)(Ct,{});const{data:s}=te.default.state;if(!s)return(0,Ze.jsx)(kt,{});const n=de.CM(s);if(!x.yW(n.map((t=>$.U6.createChildStore(e,{table:M.KJ,id:t.userId}).isReady()))))return(0,Ze.jsx)(kt,{});const o=n.filter(w.CF),r=n.filter(w.du),a=this.isTeamGuestsEnabled.state?r.length:r.filter((e=>!e.isTeamGuest&&e.isPageGuest)).length,{currentTab:d}=this.stores.spacePermissionsSettingsStore.state;if(t)return(0,Ze.jsxs)(i.Fragment,{children:[At(this.props.store)&&(0,Ze.jsxs)(we.Z,{shouldShowBottomDivider:!0,children:[this.renderMobileInviteButton(),(0,Ze.jsx)("div",{style:Wt(this.environment,this.theme),children:this.renderInviteLink()})]}),(0,Ze.jsx)(we.Z,{children:this.renderSpaceMembers(o)})]});const l={[J.Q.Members]:(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members"}),(0,Ze.jsx)("span",{children:" "}),(0,Ze.jsx)("span",{style:{color:this.theme.lightTextColor},children:o.length})]}),[J.Q.Groups]:(0,Ze.jsx)(T.FormattedMessage,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"}),[J.Q.Guests]:(0,Ze.jsxs)(Ze.Fragment,{children:[this.isTeamGuestsEnabled.state?(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.externalTab.title",defaultMessage:"External"}):(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests"}),(0,Ze.jsx)("span",{children:" "}),(0,Ze.jsx)("span",{style:{color:this.theme.lightTextColor},children:a})]}),[J.Q.Reprovisioning]:(0,Ze.jsx)(T.FormattedMessage,{id:"spaceBasicSettings.reprovisioningTab.title",defaultMessage:"Recently left"}),[J.Q.Requests]:(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(T.FormattedMessage,{id:"spaceBasicSettings.requestsTab.title",defaultMessage:"Requests"}),(0,Ze.jsx)("span",{children:" "}),(0,Ze.jsx)("span",{style:{color:this.theme.lightTextColor},children:this.renderNumberOfRequests()}),(0,Ze.jsx)(Kt,{unreadAccessRequests:this.props.unreadAccessRequests})]})},c=Dt(r,this.props.store),u=c.map((e=>l[e]));return(0,Ze.jsxs)(et.Z,{children:[this.isTeamGuestsEnabled.state&&(0,Ze.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,marginBottom:20},children:[(0,Ze.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:7},children:[(0,Ze.jsx)(Te.Z,{style:{fontWeight:k.Z.fontWeight.medium,fontSize:17},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spaceBasicSettings.people.title",defaultMessage:"People"})}),(0,Ze.jsx)(ze.Z,{href:(0,G.UY)("guides.members"),analyticsFrom:"members_settings"})]}),(0,Ze.jsx)(Te.Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spaceBasicSettings.people.subtitle",defaultMessage:"Manage members, external guests, groups and permissions."})})]}),(0,Ze.jsx)(ot.Z,{tabs:u,selectedIndex:c.indexOf(d),onChange:e=>this.handleTabClick(e,r),style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),this.renderTab(d,o,r)]})}renderTab(e,t,s){return e===J.Q.Members?(0,Ze.jsx)(i.Fragment,{children:this.renderSpaceMembers(t)}):e===J.Q.Guests?this.renderGuestsTab(s):e===J.Q.Groups?this.renderGroupsTab():e===J.Q.Reprovisioning?this.renderReprovisioning():e===J.Q.Requests?this.renderRequestsTab():void(0,j.t1)(e)}renderExternalTab(e){const{store:t}=this.props,s=!Boolean(t.getSettingsStore().getKeyStore("disable_team_guests").getValue());return(0,Ze.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[s&&(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsxs)("div",{style:{display:"flex"},children:[(0,Ze.jsx)(St.Z,{open:this.stores.isTeamGuestsOpen.state,onClick:()=>this.stores.isTeamGuestsOpen.setState(!this.stores.isTeamGuestsOpen.state),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,Ze.jsxs)("div",{style:{marginLeft:3},children:[(0,Ze.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,Ze.jsx)(Te.Z,{style:{fontSize:15},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionSettings.teamGuests.title",defaultMessage:"Teamspace guests"})}),(0,Ze.jsx)("span",{children:" "}),(0,Ze.jsx)(Te.Z,{isSecondaryColor:!0,style:{fontSize:15},children:e.filter((e=>e.isTeamGuest)).length})]}),(0,Ze.jsx)(Te.Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionSettings.teamGuests.subtitle",defaultMessage:"Teamspace guests are billed as members and can access all pages in teamspaces they've been invited to."})})]})]}),this.stores.isTeamGuestsOpen.state&&this.renderTeamGuests(e)]}),(0,Ze.jsxs)("div",{style:{display:"flex"},children:[(0,Ze.jsx)(St.Z,{open:this.stores.isPageGuestsOpen.state,onClick:()=>this.stores.isPageGuestsOpen.setState(!this.stores.isPageGuestsOpen.state),isSidebar:!1,fill:!0,style:{marginLeft:-27}}),(0,Ze.jsxs)("div",{style:{marginLeft:3},children:[(0,Ze.jsxs)("div",{style:{display:"flex",alignItems:"center",height:24},children:[(0,Ze.jsx)(Te.Z,{style:{fontSize:15},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionSettings.pageGuests.title",defaultMessage:"Page guests"})}),(0,Ze.jsx)("span",{children:" "}),(0,Ze.jsx)(Te.Z,{isSecondaryColor:!0,style:{fontSize:15},children:e.filter((e=>e.isPageGuest&&!e.isTeamGuest)).length})]}),(0,Ze.jsx)(Te.Z,{isSecondaryColor:!0,style:{fontSize:15},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionSettings.pageGuests.subtitle",defaultMessage:"Page guests are free but can only access pages they've been invited to."})})]})]}),this.stores.isPageGuestsOpen.state&&this.renderSpaceGuests(e)]})}renderGroupsTab(){const{store:e}=this.props,{groupsFilter:t}=this.stores.spacePermissionsSettingsStore.state,s=Nt(this.environment),i=At(this.props.store),n=(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupCreationInsufficientPermissions",defaultMessage:"Only membership admins and workspace owners can add a permission group."});if(e.isDefined()){const o=e.getPermissionGroups();return(0,Ze.jsxs)("div",{children:[s?(0,Ze.jsx)(Te.Z,{isMultiline:!0,style:{width:"80%"},children:(0,K.bq)()?(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.captionWithTeamsV2",defaultMessage:"Set up groups to streamline page permissions from the share menu and manage teamspace members in bulk."}):(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})}):(0,Ze.jsx)(re.Z,{for:"plus",from:"permission_groups",icon:g.x,title:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeCaption.plus",defaultMessage:"Upgrade to the Plus Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),(0,Ze.jsx)(fe.Z,{size:24,isHidden:!0}),(0,Ze.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s&&(0,Ze.jsx)(Ce.Z,{renderTooltip:()=>!i&&n,render:e=>(0,Ze.jsx)(me.Z,{isLarge:!0,onClick:this.handleCreateGroupClick,disabled:!i,...i?void 0:e,children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"})})}),o.length>0&&(0,Ze.jsx)(xe.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupNamesInput.placeholder",defaultMessage:"Filter by group name…"}),left:(0,f.R)(Gt(this.theme)),showClearButton:!0,format:xe.Z.Format.Small,value:t,style:{...bt,marginRight:0},onChange:this.handleFilterChange,onClick:()=>{P.RPK(this.environment,{current_tab:J.Q.Groups})}})]}),o.length>0&&(0,Ze.jsx)(it.Z,{spaceStore:e,permissionsSettingsStore:this.stores.spacePermissionsSettingsStore,groups:o,canEdit:qt(this.props.store,this.environment)})]})}}renderSpaceMembers(e){return this.props.isMobile?this.renderMobileMemberList(e):(0,Ze.jsxs)("div",{children:[(0,Ze.jsx)(Tt,{}),this.renderInviteLink(),this.renderDesktopMemberList(e)]})}renderInviteLink(){if(e=this.props.store,t=this.environment,!At(e)||!de.qF(t))return;var e,t;const s=function(e,t){if(!At(e))return;const s=te.default.state.data,i=e.id,n=s&&("subscribed_admin"===s.type||"unsubscribed_admin"===s.type||"subscribed_membership_admin"===s.type)&&s.inviteLinkCode;if(!n)return;return(0,W.cJ)(t,i,n)}(this.props.store,this.environment),i=Rt(this.props.store);if(!s)return;const{spacePermissionsSettingsStore:n}=this.stores;return(0,Ze.jsxs)("div",{children:[(0,Ze.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"},children:[(0,Ze.jsxs)("div",{style:{marginRight:8,flexGrow:1},children:[(0,Ze.jsx)(tt.Z,{children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})}),(0,Ze.jsxs)(Te.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"},children:[(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only users who can invite members can see this."})," ",!this.props.isMobile&&(0,Ze.jsx)(Vt,{store:this.props.store})]})]}),(0,Ze.jsx)("div",{style:{marginTop:5},children:(0,Ze.jsx)(ke.Z,{on:i,onClick:this.handleInviteLinkClick})})]}),n&&i&&s&&(0,Ze.jsx)(Ut,{isMobile:this.props.isMobile,inviteLinkUrl:s}),(0,Ze.jsx)(fe.Z,{size:40})]})}renderMobileMemberList(e){const{store:t}=this.props;return(0,Ze.jsx)(i.Fragment,{children:e.map((e=>{const s=$.U6.createChildStore(t,{table:M.KJ,id:e.userId});return(0,Ze.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:10,borderBottom:`1px solid ${this.theme.lightDividerColor}`,background:this.theme.cardContentBackground},children:[(0,Ze.jsx)(Pt,{userStore:s}),(0,Ze.jsx)("div",{style:{textAlign:"center",marginLeft:"auto"},children:this.renderUserPermission("members",e,s)})]},e.userId)}))})}renderDesktopMemberList(e){const{spacePermissionsSettingsStore:t}=this.stores,{membersFilter:s,limitMembers:n}=t.state,o=_t(e,s,this.props.store,this.props.intl),r=this.sortUsers("members",o),a=n?r.slice(0,50):r;return(0,Ze.jsxs)(i.Fragment,{children:[(0,Ze.jsx)("div",{style:{marginRight:8,flexGrow:1},children:(0,Ze.jsx)(tt.Z,{children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"})})}),(0,Ze.jsx)(Ot,{store:this.props.store}),(0,Ze.jsx)(fe.Z,{size:16,isHidden:!0}),(0,Ze.jsxs)("div",{children:[(0,Ze.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[this.renderInviteButton(),(0,Ze.jsx)(xe.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,f.R)(Gt(this.theme)),showClearButton:!0,format:xe.Z.Format.Small,value:s,style:bt,onChange:e=>{t.setState({...t.state,membersFilter:e.target.value,limitMembers:!0})},onClick:()=>{P.RPK(this.environment,{current_tab:J.Q.Members})}})]}),this.renderUserTable("members",a),r.length>50&&n&&(0,Ze.jsx)(je.Z,{style:vt,onClick:this.handleMembersShowMoreClick,children:(0,Ze.jsx)(T.FormattedMessage,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:r.length-50}})})]})]})}renderTeamGuests(e){const{spacePermissionsSettingsStore:t}=this.stores,{teamGuestsFilter:s,limitTeamGuests:i}=t.state,n=_t(e.filter((e=>e.isTeamGuest)),s,this.props.store,this.props.intl),o=this.sortUsers("team_guests",n),r=i?o.slice(0,5):o;return(0,Ze.jsx)("div",{style:{marginBottom:5},children:(0,Ze.jsxs)("div",{children:[(0,Ze.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:(0,Ze.jsx)(xe.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterTeamGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,f.R)(Gt(this.theme)),showClearButton:!0,format:xe.Z.Format.Small,value:s,style:bt,onChange:e=>{t.setState({...t.state,teamGuestsFilter:e.target.value,limitTeamGuests:!0})}})}),this.renderUserTable("team_guests",r),o.length>5&&i&&(0,Ze.jsx)(je.Z,{style:vt,onClick:this.handleTeamGuestsShowMoreClick,children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:o.length-5}})})]})})}renderGuestsTab(e){const t=(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.deeplinkCard.title",defaultMessage:"Change who can invite guests in the <bold>Security</bold> tab",values:{bold:e=>(0,Ze.jsx)("span",{style:{fontWeight:k.Z.fontWeight.semibold},children:e})}});return 0===e.length?(0,Ze.jsx)(Ze.Fragment,{children:(0,Ze.jsx)(st.Z,{icon:h.v,calloutTitle:(0,Ze.jsx)("span",{style:{fontWeight:k.Z.fontWeight.semibold},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.deeplinkCard.noGuests.title",defaultMessage:"Your workspace has no guests"})}),title:Zt(this.props.store)?(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.deeplinkCard.title",defaultMessage:"Change who can invite guests in the <bold>Security</bold> tab",values:{bold:e=>(0,Ze.jsx)("span",{style:{fontWeight:k.Z.fontWeight.semibold},children:e})}}):void 0,deeplinkTab:Zt(this.props.store)?{currentTab:"security",defaultSubtab:void 0}:void 0})}):(0,Ze.jsxs)(Ze.Fragment,{children:[Zt(this.props.store)?(0,Ze.jsx)(st.Z,{icon:h.v,title:t,deeplinkTab:{currentTab:"security",defaultSubtab:void 0}}):null,this.isTeamGuestsEnabled.state?this.renderExternalTab(e):this.renderSpaceGuests(e)]})}renderSpaceGuests(e){const{spacePermissionsSettingsStore:t}=this.stores,{guestsFilter:s,limitGuests:i}=t.state,n=_t(e.filter((e=>!e.isTeamGuest&&e.isPageGuest)),s,this.props.store,this.props.intl),o=this.sortUsers("guests",n),r=this.isTeamGuestsEnabled.state?5:50,a=i?o.slice(0,r):o,{currentSpaceStore:d}=H.default.state,{data:l}=te.default.state,c=Boolean(d&&l&&"subscribed_admin"===l.type&&Y.default.checkGate("enable_guest_export"));return(0,Ze.jsx)("div",{children:(0,Ze.jsxs)("div",{children:[(0,Ze.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,Ze.jsx)(xe.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:(0,f.R)(Gt(this.theme)),showClearButton:!0,format:xe.Z.Format.Small,value:s,style:bt,onChange:e=>{t.setState({...t.state,guestsFilter:e.target.value,limitGuests:!0})},onClick:()=>{P.RPK(this.environment,{current_tab:J.Q.Guests})}}),c&&(0,Ze.jsx)(Me.Z,{isLarge:!1,disabled:!1,isBlue:!0,onClick:()=>function(e,t,s){const{currentSpaceStore:i}=H.default.state,{data:n}=te.default.state;i&&n&&"subscribed_admin"===n.type&&A.Mj(s,{intl:t,spaceStore:i,guests:e})}(o,this.props.intl,this.environment),disabledFeedback:!0,children:(0,Ze.jsx)(T.FormattedMessage,{id:"exportGuestsButton.label",defaultMessage:"Export guests as CSV"})})]}),this.renderUserTable("guests",a),o.length>r&&i&&(0,Ze.jsx)(je.Z,{style:vt,onClick:this.handleGuestsShowMoreClick,children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:o.length-r}})})]})})}renderMobileInviteButton(){return(0,Ze.jsxs)(i.Fragment,{children:[(0,Ze.jsx)("div",{style:Wt(this.environment,this.theme),children:this.renderInviteButton({flex:1})}),(0,Ze.jsx)("div",{style:{borderBottom:`1px solid ${this.theme.regularDividerColor}`}})]})}renderInviteButton(e){const{store:t}=this.props;return t.canEditMembership()||t.getDisableMembershipRequests()||!(0,V.p1)()?(0,Ze.jsxs)("div",{style:{display:"flex"},children:[(0,Ze.jsx)(z.LazyPermissionsInviteWithModal,{disabled:!At(this.props.store),store:t,onInviteClick:zt,onInviteComplete:Ht,isSubscribed:jt(),membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:e}),(0,Ze.jsx)(z.LazySlackImportsInviteWithModal,{inviteOrigin:"space_setting_slack_imports",canEditPermission:At(this.props.store),onInviteClick:zt,onInviteComplete:Ht})]}):(0,Ze.jsx)($e.Z,{store:t,analyticsFrom:"space_settings_add_members",origin:(0,Ze.jsx)(me.Z,{isLarge:!0,children:(0,Ze.jsx)(T.FormattedMessage,{id:"inviteUserButton.requestMemberLabel",defaultMessage:"Add members"})})})}sortUsers(e,t){const s=this.stores.spacePermissionsSettingsStore.state.sorts[e];if(!s)return t;const{store:i}=this.props;switch(s.by){case"role":return t.sort(((e,t)=>(S.xm[t.role]-S.xm[e.role])*(s.asc?-1:1)));case"name":return t.map((e=>({user:e,store:$.U6.createChildStore(i,{table:M.KJ,id:e.userId})}))).sort(((e,t)=>{const i=e.store.getValue(),n=t.store.getValue(),o=(0,C.Nz)(this.props.intl,i),r=(0,C.Nz)(this.props.intl,n);return o.localeCompare(r)*(s.asc?1:-1)})).map((e=>e.user))}}renderUserTable(e,t){const{store:s}=this.props,n=this.stores.spacePermissionsSettingsStore.state.sorts[e],o=s.getPermissionGroups().reduce(((e,t)=>{const s=t.user_ids||[];for(const i of s)e[i]=e[i]?e[i].concat(t):[t];return e}),{}),r={key:"user",header:(0,Ze.jsxs)(ge.Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{this.handleSortClick(e,"name")},style:{display:"flex",alignItems:"center"},children:[(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),n&&"name"===n.by&&(0,Ze.jsx)(It,{up:n.asc})]}),style:{width:"45%"}},a={key:"groups",header:(0,Ze.jsx)(ge.Z,{disabled:!0,ignoreLocalHoverState:!0,style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.userTable.groupsColumn.header",defaultMessage:"Groups"})}),style:{width:"15%"}},d={key:"teams",header:(0,Ze.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.userTable.teamsColumn.header",defaultMessage:"Teamspaces"})}),style:{width:"20%",textAlign:"center"}},l={key:"access_level",header:(0,Ze.jsxs)(ge.Z,{disabled:!1,ignoreLocalHoverState:!0,onClick:()=>{this.handleSortClick(e,"role")},style:{display:"flex",alignItems:"center",paddingLeft:8},children:[(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),n&&"role"===n.by&&(0,Ze.jsx)(It,{up:n.asc})]}),style:{width:"20%",textAlign:"center"}},c={key:"pages",header:(0,Ze.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:8},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.userTable.pagesColumn.header",defaultMessage:"Pages"})}),style:{width:"20%",textAlign:"center"}},u={key:"three_dot",header:(0,Ze.jsx)(ge.Z,{disabled:!0,ignoreLocalHoverState:!0})},m=Nt(this.environment)&&"team_guests"!==e&&"guests"!==e,g=("team_guests"===e||"guests"===e)&&this.isTeamGuestsEnabled.state&&At(this.props.store);let p="members"===e&&(0,K.bq)()?[r,d,l]:g?[r,c,u]:[r,c];return m&&(p=[...p.slice(0,1),a,...p.slice(1)]),(0,Ze.jsx)(rt.Z,{columns:p,rows:t.map((e=>({member:e,store:$.U6.createChildStore(s,{table:M.KJ,id:e.userId})}))).filter((e=>void 0!==e.store.getValue())).map((t=>{const{member:s,store:n}=t,r=o[s.userId]?o[s.userId]:[],a=[(0,Ze.jsx)(i.Fragment,{children:(0,Ze.jsx)(Pt,{userStore:n})},"member")];return m&&a.push((0,Ze.jsx)(i.Fragment,{children:this.renderGroups(r)},"groups")),"members"===e&&(0,K.bq)()&&a.push((0,Ze.jsx)(i.Fragment,{children:(0,Ze.jsx)(Ft,{user:s})},"teams")),a.push((0,Ze.jsx)(i.Fragment,{children:this.renderUserPermission(e,s,n)},"user-permission")),g&&a.push((0,Ze.jsx)(i.Fragment,{children:(0,Ze.jsx)(Lt,{group:e,user:s,userStore:n,store:this.props.store})},"three-dot")),{key:s.userId,columns:a}}))})}renderGroups(e){return(0,Ze.jsx)(Ae,{spaceStore:this.props.store,groups:e,onGroupClick:()=>{this.navigateToTab(J.Q.Groups)}})}renderUserPermission(e,t,s){return"none"===t.role?this.isTeamGuestsEnabled.state&&"team_guests"===e?(0,Ze.jsx)(yt,{teamGuest:t}):(0,Ze.jsx)(We,{store:this.props.store,guest:t,guestStore:s,isSubscribed:jt(),hideActionButtons:this.isTeamGuestsEnabled.state}):this.renderMemberRoleSelect(t)}renderMemberRoleSelect(e){const t=this.environment.currentUser.id,{currentUserSettingsStore:s,currentSpaceStore:i}=H.default.state;if(!s)return;const n=function(e,t){const s=e.formatMessage({id:"spacePermissionSettings.memberRoleSelect.permissionitem.roleUpgradeDisabled",defaultMessage:"Cannot upgrade to a higher role than member"}),i=(0,q.U7)();return x.oA(S.an.map((e=>{if(i||"membership_admin"!==e)return{role:e,disabledInfo:!Zt(t)&&S.Bc(e)?{isDisabled:!0,disabledMessage:s}:void 0}})))}(this.props.intl,this.props.store);let o=!0;return(Zt(this.props.store)||At(this.props.store)&&(S.RN(e.role)||e.userId===t))&&(o=!1),(0,Ze.jsx)(Qe.ZP,{role:e.role,table:v.bx,type:"user_permission",disabled:o,isUserPermission:e.userId===t,upgradeButtonName:"space_permission_item",availableRoleItems:n,onChange:async t=>{await this.handleMemberPermissionRoleChange(e,t,s)},onRemoveMemberClick:async()=>{const t=async t=>{await this.handleMemberPermissionRoleChange(e,"none",s),P.SwX(this.environment,{member_user_id:e.userId,member_role:e.role,contraction_survey_id:t,is_space:!0,invite_origin:"workspace_remove_member",domainType:(0,U.JF)(),new_workspace_member_count:-1})};let n,o;if(ae.U()&&(o=(0,b.c9)(),n=await(0,ce.f)({environment:this.environment,contractionSurveyId:o}),!n))return;await(async()=>await(0,oe.q)(this.environment,e.userId,null==i?void 0:i.id))()&&(await t(o),n&&ie.wA(this.environment))}})}renderReprovisioning(){return(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(Te.Z,{isMultiline:!0,style:{width:"80%"},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption",defaultMessage:"View users that were previously part of the workspace in the past 30 days. Only workspace owners can see this."})}),(0,Ze.jsx)(Te.Z,{isMultiline:!0,style:{width:"80%"},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.reprovisioningTab.workspaceOwner.caption.disclaimer",defaultMessage:"Only users who had private pages will appear here."})}),(0,Ze.jsx)(fe.Z,{size:24,isHidden:!0}),(0,Ze.jsx)(N.Z,{requestStore:this.stores.getRecoverableSpaceUserContentRequestStore,request:{spaceId:this.props.store.id},performRequest:async e=>{const t=await F.getRecoverableSpaceUserContent(this.environment,{spaceId:e.spaceId});if("failed"===t.type)throw Z.showError(t),t;return t.data},render:this.renderReprovisioningData})]})}renderRequestsTab(){return(0,Ze.jsx)(Ye.ZP,{spaceStore:this.props.store,accessRequestsStore:this.stores.accessRequestsStore})}renderNumberOfRequests(){return(0,Ze.jsx)(N.Z,{throttle:1e3,request:{parentTable:"space",parentId:this.props.store.id,size:100,status:"pending"},requestStore:this.stores.accessRequestsStore,performRequest:async e=>{const t=await F.getAccessRequests(this.environment,e);if("failed"===t.type)throw t.error;const s=t.data.accessRequestIds;return I.Vy(this.props.store,s)},render:(e,t,s)=>e||!t?(0,Ze.jsx)("span",{}):t?(0,Ze.jsx)("span",{children:t.filter((e=>"pending"===e.accessRequestStore.getKeyStore("status").getValue())).length}):void 0})}getSpaceRecoverRows(e){const t=[];for(const{userId:s,privatePagesCount:i}of e){if(i<1)continue;const e=$.U6.createChildStore(this.props.store,{table:M.KJ,id:s});t.push({key:s,columns:[(0,Ze.jsx)(Pt,{userStore:e},"Member"),i,this.userIdsWithContentBeingReprovisioned.state.includes(s)?(0,Ze.jsx)(kt,{}):(0,Ze.jsx)("div",{style:{marginLeft:-4},children:(0,Ze.jsx)(Xe.Z,{mode:Je.z.Button,focused:!1,title:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.reprovision.toUser.title",defaultMessage:"Transfer private pages"}),parentStore:this.props.store,userIds:this.userIdsWithContentBeingReprovisioned.state,onChange:e=>{let[t]=e;this.handleReprovisionToUserChange(s,t)}})})]})}return t}setInitialSubtabOnMount(){ee.Z.state.open&&"members"===ee.Z.state.currentTab&&ee.Z.state.defaultSubtab&&(this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,currentTab:ee.Z.state.defaultSubtab}),ee.Z.setState({...ee.Z.state,defaultSubtab:void 0}))}}Mt.displayName="SpacePermissionsSettings";const wt=(0,T.injectIntl)(Mt);function jt(){const{data:e}=te.default.state;return Boolean(e&&de.YK(e))}function kt(){return(0,Ze.jsx)(Se.Z,{style:{margin:"calc(50% - 1em) auto"}})}function Ct(){return(0,Ze.jsx)(et.Z,{children:(0,Ze.jsx)(Te.Z,{isSmall:!0,style:{textAlign:"center"},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."})})})}function Tt(){return(0,Ze.jsx)("div",{style:{marginTop:24,marginBottom:24},children:(0,Ze.jsx)(ze.Z,{title:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.helpButton.caption",defaultMessage:"Learn about adding members to your workspace"}),href:(0,G.UY)("guides.members"),analyticsFrom:"members_settings"})})}function It(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?(0,u.K)({...s,transform:"rotate(180deg)"}):(0,u.K)(s)}function Pt(e){let{userStore:t}=e;return(0,Ze.jsx)(ue.Z,{actorStore:t})}function Ft(e){let{user:t}=e;return"none"!==t.role?(0,Ze.jsx)(xt.ZP,{member:t}):null}function _t(e,t,s,i){return t&&t.length>0?(0,c.ZP)(t,e,(e=>{const t=$.U6.createChildStore(s,{table:M.KJ,id:e.userId});return t.isDefined()?t.getSearchName(i):""})):e}function Zt(e){return e.canAdmin()}function At(e){return e.canEditMembership()}function Rt(e){return Boolean(e.getKeyStore("invite_link_enabled").getValue())}function Bt(e){return Zt(e)&&le.wP()}function Et(e){return At(e)&&(0,V.p1)()}function Ot(e){let{store:t}=e;window.__c={n:"InviteViaDomainCaption"};return(0,r.VK)((()=>E.LV(t)),[t])?(0,Ze.jsx)(Te.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})}):(0,Ze.jsxs)("div",{children:[(0,Ze.jsx)(Te.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:6},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",values:{setupdomainlink:e=>(0,Ze.jsx)(He.Z,{onClick:()=>{ee.Z.setState({...ee.Z.state,currentTab:"settings",defaultSubtab:void 0})},children:e})}})}),(0,Ze.jsx)(Te.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spaceBasicSettings.membersTab.payPerMemberCaption",defaultMessage:"You will be charged for each member added. Visit <billingguidelink>our guide</billingguidelink> for more information on how we bill.",values:{billingguidelink:e=>(0,Ze.jsx)(He.Z,{href:(0,G.UY)("guides.billingGuide"),children:e})}})})]})}function Dt(e,t){return[J.Q.Members,J.Q.Groups,J.Q.Guests,...Bt(t)?[J.Q.Reprovisioning]:[],...Et(t)?[J.Q.Requests]:[]]}function Nt(e){return de.qF(e)&&jt()}function Vt(e){let{store:t}=e;window.__c={n:"InviteLinkReset"};const s=(0,o.O7)();return(0,r.VK)((()=>t.isDefined()),[t])?(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",values:{resetlink:e=>(0,Ze.jsx)(He.Z,{onClick:()=>{Z.showDialog({message:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:Z.dismissDialog,items:[{label:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await F.refreshInviteLink(s,{spaceId:t.id}),ne.bi(s)}}]})},children:e})}}):null}function Ut(e){let{inviteLinkUrl:t,isMobile:s}=e;window.__c={n:"InviteLinkUrl"};const i=(0,o.O7)(),{mobileNative:n}=i,r=(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),a=()=>{_.RD({environment:i,stringValue:t,copiedMessage:_.tq.copiedLinkToClipboard}),P.nlj(i)},d=()=>{n&&n.share(t),P.nlj(i)};return s?(0,Ze.jsxs)("div",{children:[(0,Ze.jsx)(xe.Z,{type:"text",format:xe.B.Default,value:t,disabled:!0}),n?(0,Ze.jsx)(Me.Z,{onClick:d,style:{marginTop:10,width:"100%"},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})}):(0,Ze.jsx)(Me.Z,{onClick:a,style:{marginTop:10,width:"100%"},children:r})]}):(0,Ze.jsx)("div",{children:(0,Ze.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12},children:[(0,Ze.jsx)(xe.Z,{type:"text",format:xe.B.Default,value:t,disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0,width:"calc(100% - 90px)",height:32}}),(0,Ze.jsx)(me.Z,{onClick:a,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0},isLarge:!0,children:r})]})})}function Lt(e){let{group:t,user:s,userStore:i,store:n}=e;window.__c={n:"PageGuestOrTeamGuestThreeDotMenu"};const r=(0,o.O7)();return(0,Ze.jsx)(he.ZP,{popupType:he.Z4.Popup,renderOrigin:e=>(0,Ze.jsx)(ye.Z,{...e,icon:m.o,iconStyle:{height:14,width:14}}),render:e=>{const o=[{key:"team section",render:e=>(0,Ze.jsx)(we.Z,{...e}),items:[{key:"convertToMember",render:e=>(0,Ze.jsx)(pe.Z,{...e,icon:(0,y._)({height:17,width:17}),title:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.title",defaultMessage:"Convert to member"}),shouldWrapCaption:!0,caption:"team_guests"===t&&(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.caption",defaultMessage:"Workspace members are not restricted to specific teamspaces"})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e,o=jt()?"read_and_write":"editor";Z.showDialog({message:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.message",defaultMessage:"Are you sure you want to convert this user into a workspace member?"}),description:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.description",defaultMessage:"This is a billable event."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{Z.dismissDialog(),n.close()},items:[{label:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.convertToMember.confirmationDialog.confirm",defaultMessage:"Convert to workspace member"}),color:"blue",onAccept:async()=>{n.close(),await O.s({environment:s,guestUserStore:i,role:o,store:t,isConvertToAdmin:!jt(),origin:"page_or_teamspace_guest_three_dot_menu"})}}]})}({user:s,userStore:i,parent:e},n,r)},{key:"removeFromWorkspace",render:e=>(0,Ze.jsx)(pe.Z,{...e,icon:(0,p.V)({height:17,width:17,color:l.ZP.red}),title:(0,Ze.jsx)("span",{style:{color:l.ZP.red},children:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.title",defaultMessage:"Remove from workspace"})})}),action:()=>function(e,t,s){const{userStore:i,parent:n}=e;Z.showDialog({message:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.message",defaultMessage:"Are you sure you want to remove this user from the workspace?"}),description:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.description",defaultMessage:"This action will completely remove the user from the workspace, including any teamspaces and pages they have access to."}),showCancel:!0,keepFocus:!1,handleCancel:()=>{Z.dismissDialog(),n.close()},items:[{label:(0,Ze.jsx)(T.FormattedMessage,{id:"spacePermissionsSettings.externalTab.userThreeDotMenu.removeFromWorkspace.confirmationDialog.confirm",defaultMessage:"Remove from workspace"}),color:"red",onAccept:async()=>{n.close(),await O.w({environment:s,guestUserStore:i,store:t})}}]})}({user:s,userStore:i,parent:e},n,r)}]}];return(0,Ze.jsx)(be.Z,{menuType:L.og.Popup,children:(0,Ze.jsx)(ve.Z,{type:ve.i.Vertical,sections:o,initialFocus:void 0,style:{minWidth:265}})})}})}function qt(e,t){return Nt(t)&&At(e)}function Gt(e){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}}function Wt(e,t){const{WindowSizeStore:s}=e;return{display:"flex",paddingTop:14,paddingBottom:14,paddingLeft:14,paddingRight:s.getSafePaddingRightCSS(14),background:t.cardContentBackground}}function Kt(e){let{unreadAccessRequests:t}=e;window.__c={n:"UnreadRequestDotComponent"};const s=(0,a.Fg)();return t&&t>0?(0,Ze.jsx)(nt.z,{color:s.redBadgeBackground,style:{marginLeft:6}}):null}function zt(){const e=(0,T.defineMessages)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});R.j({message:e.updatingPermissions})}function Ht(){R.x()}},42982:(e,t,s)=>{s.d(t,{Z:()=>c});s(67294);var i=s(480),n=s(68939),o=s(16354),r=s(63296),a=s(64369),d=s(23189),l=s(85893);const c=function(){window.__c={n:"SubscriptionSettings"};const e=(0,i.O7)();return(0,l.jsxs)("div",{children:[(0,l.jsx)(g,{}),(0,l.jsxs)("div",{style:m(e),children:[(0,l.jsx)(a.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"},children:(0,l.jsx)(p,{})}),(0,l.jsx)(u,{})]})]})};function u(){return(0,l.jsx)(o.Z,{href:"https://apps.apple.com/account/subscriptions",children:(0,l.jsx)(r.Z,{isLarge:!0,style:{marginTop:12,marginBottom:4},children:(0,l.jsx)(n.FormattedMessage,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"})})})}function m(e){const{device:t,WindowSizeStore:s}=e;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:t.isMobile?s.state.paddingLeftCSS:0,paddingRight:t.isMobile?s.state.paddingRightCSS:0}}function g(){window.__c={n:"Header"};const e=(0,i.O7)(),{device:t}=e;return(0,l.jsx)(d.Z,{large:!t.isMobile||void 0,divider:t.isMobile?void 0:"full",children:(0,l.jsx)(n.FormattedMessage,{id:"subscriptionSettings.title",defaultMessage:"Subscription"})})}function p(){window.__c={n:"Message"};const e=(0,i.O7)(),{device:t}=e;return t.isMobile?(0,l.jsx)(n.FormattedMessage,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your Personal Pro subscription though the App Store."}):(0,l.jsx)(n.FormattedMessage,{id:"subscriptionSettings.description",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings."})}},66957:(e,t,s)=>{s.d(t,{Z:()=>u});var i=s(67294),n=s(480),o=s(86628),r=s(24405),a=s(87279),d=s(89728),l=s(85893);function c(e){let{tabs:t,selectedIndex:s,onChange:c,separatorIndexes:u,right:m,style:g,rightStyle:p,tabStyle:h,tabTitleStyle:f,tabBorderStyle:y,selectedTabStyle:x,readOnly:S,hideTabBorder:b}=e;window.__c={n:"TabBarMenuItem"};const v=(0,i.useContext)(a.Xp),{device:M,WindowSizeStore:w}=(0,n.O7)(),{safePaddingLeft:j,safePaddingRight:k}=(0,o.VK)((()=>({safePaddingLeft:w.getSafePaddingLeftCSS(16),safePaddingRight:w.getSafePaddingRightCSS(16)})),[w]),C=(0,r.yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...h},s=`inset 0 -1px 0 ${e.regularDividerColor}`,i=v.menuType===a.og.Popup,n={fontSize:16,paddingTop:2,paddingLeft:i?16:j,paddingRight:i?16:k,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:b?void 0:s,...M.isMobile?n:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...g},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...x},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...y},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...p}}}),[v.menuType,M.isMobile,p,j,k,x,g,y,h,b]);return(0,l.jsxs)("div",{className:"hide-scrollbar",style:C.container,children:[t.map(((e,t)=>{const n=t===s;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{style:n?C.selectedTab:C.tab,children:[(0,l.jsx)(d.Z,{style:f,onClick:()=>c(t),disabled:S,mobileFeedback:M.isMobile,children:e}),n&&(0,l.jsx)("div",{style:C.border})]},`tabButton-${t}`),u&&u.includes(t)&&(0,l.jsx)("div",{style:C.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),m&&(0,l.jsx)("div",{style:C.rightContainer,children:m})]})}const u=i.memo(c)},88775:(e,t,s)=>{s.d(t,{ZP:()=>C});var i=s(67294),n=s(480),o=s(86628),r=s(24405),a=s(42853),d=s(68939),l=s(33929),c=s(87279),u=s(55838),m=s(30397),g=s(9867),p=s(74016),h=s(48019),f=s(52275),y=s(31945),x=s(68894),S=s(78140),b=s(89728),v=s(72495),M=s(64369),w=s(85893);const j=(0,d.defineMessages)({filterTeams:{defaultMessage:"Filter teamspaces…",id:"teamsDropdownForMember.filterForTeams.placeholder"}});function k(e){window.__c={n:"MemberTeamContent"};const t=(0,n.O7)(),s=(0,r.yK)((()=>({teamMenuItem:{fontWeight:400,maxWidth:180}})),[]),[a,m]=(0,i.useState)(""),y=(0,i.useCallback)((e=>g.RF({environment:t,teamId:e,tab:u.a.Members,from:"teams_dropdown_for_team_member"})),[t]),b=(0,o.VK)((()=>[{key:"teams for member",render:e=>(0,w.jsx)(v.Z,{...e}),actions:e.teamStores.map((e=>({key:e.id,displayName:e.getName(),analyticsName:e.getName()||"team_unknown",searchName:e.getName(),render:t=>(0,w.jsx)(f.Z,{icon:(0,w.jsx)(p.p,{disabled:!0,store:e}),title:(0,w.jsx)(M.Z,{style:s.teamMenuItem,children:e.getName()}),caption:(0,w.jsx)(d.FormattedMessage,{defaultMessage:"{numMembers} {numMembers, plural, one {member} other {members}}",id:"teamsDropdownForMember.numMembers",values:{numMembers:e.getUserIdsInTeam().length}}),inline:!0,...t}),action:()=>{y(e.id)},closeParentMenu:!1})))}]),[e.teamStores,s.teamMenuItem,y]),k=a,C=(0,w.jsx)(v.Z,{isInput:!0,children:(0,w.jsx)(x.ZP,{value:k,onChange:(0,i.useCallback)((e=>{m(e.target.value)}),[]),focus:!0,focusAfterAnimation:!0,placeholder:l.default.formatMessage(j.filterTeams)})}),T={menuType:c.og.Popup,maxWidth:350,maxHeight:300,header:e.teamStores.length>5?C:void 0};return(0,w.jsx)(S.Z,{...T,children:(0,w.jsx)(h.Z,{filter:k,context:{blocks:[],environment:t,publicEditMode:void 0},initialFocus:0,sections:b})})}const C=function(e){window.__c={n:"TeamsDropdownForMember"};const[t]=(0,o.AF)(m.Z),s=(0,r.yK)((e=>({button:{marginRight:8},noTeams:{marginRight:8,color:e.lightTextColor},chevron:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),i=(0,o.VK)((()=>t.teams.filter((t=>t.getMembers().some((t=>"user"===t.entity_type&&t.user_id===e.member.userId))))),[t,e.member]),n=i.length;return(0,w.jsx)(y.ZP,{popupType:y.Z4.Popup,renderOrigin:e=>(0,w.jsx)(b.Z,{disabled:0===n,style:0===n?s.noTeams:s.button,...e,children:0===n?(0,w.jsx)(d.FormattedMessage,{id:"teamsDropdownForMember.teamsCountNone.label",defaultMessage:"No access"}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.FormattedMessage,{id:"teamsDropdownForMember.teamsCount.label",defaultMessage:"{numberOfTeams, plural, one {{numberOfTeams} teamspace} other {{numberOfTeams} teamspaces}}",values:{numberOfTeams:n}}),(0,a.i)(s.chevron)]})}),render:()=>(0,w.jsx)(k,{teamStores:i})})}},58925:(e,t,s)=>{s.d(t,{Z:()=>O});s(67294);var i=s(83355),n=s(86628),o=s(24405),r=s(9555),a=s(59078),d=s(79102),l=s(82990),c=s(68939),u=s(19719),m=s(17659),g=s(75018),p=s(98742),h=s(50659),f=s(18514),y=s(51811),x=s(77907),S=s(48451),b=s(50770),v=s(4023),M=s(5162),w=s(62820),j=s(4761),k=s(64921),C=s(31945),T=s(58261),I=s(26388),P=s(39849),F=s(92955),_=s(14694),Z=s(85893);const A={display:"flex",alignItems:"center",justifyContent:"center",width:62,flex:"none"},R={display:"flex",alignItems:"center",justifyContent:"center",flex:1},B={display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,height:"100%",minWidth:34,position:"relative"};class E extends i.Z{constructor(){super(...arguments),this.closeMenu=()=>{(0,M.Y)("supportsNativeInbox")&&f.__(this.environment)&&f.NW(this.environment)?g.back(this.environment):(this.handleCloseUpdatesPopup(),w.Z.setState({...w.Z.state,open:!1}))},this.handleDismiss=()=>{this.handleCloseUpdatesPopup()},this.handleClick=()=>{j.ZP.endSession(),m.G7({environment:this.environment,newTab:"mentions",shouldTrack:!0})},this.handleCloseUpdatesPopup=()=>{u.nI(this.environment),m.G7({environment:this.environment,newTab:"mentions",shouldTrack:!1})}}willUnmount(){this.handleCloseUpdatesPopup()}renderComponent(){const{device:e,mobileNative:t}=this.environment;if(this.props.format===y.EX.RenderAsPage)return(0,Z.jsx)("div",{style:{background:this.theme.popoverBackground},children:(0,b.H)()?(0,Z.jsx)(S.LV,{format:this.props.format,onClose:this.closeMenu}):(0,Z.jsx)(x.LazyUpdatesPopup,{format:this.props.format,onClose:this.closeMenu})});const s=(0,Z.jsx)(c.FormattedMessage,{defaultMessage:"Updates for all pages in this workspace",id:"updatesButton.tooltip"});return(0,Z.jsx)(I.Z,{renderTooltip:()=>(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{children:s}),(0,Z.jsx)(T.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleAllUpdates"})]}),originGap:6,placement:v.u.Right,render:s=>(0,Z.jsx)(C.ZP,{popupType:e.isMobile?C.Z4.SlideUp:C.Z4.Popup,alignmentToOrigin:v.v.Start,placementToOrigin:v.u.Right,onClick:this.handleClick,originGap:0,style:{...!e.isMobile&&{width:500,overflow:"hidden"}},isWideTabletWidth:!0,render:()=>(0,b.H)()?(0,Z.jsx)(S.LV,{format:this.props.format,onClose:this.closeMenu}):(0,Z.jsx)(x.LazyUpdatesPopup,{format:this.props.format,onClose:this.closeMenu}),onClose:this.handleDismiss,isFullWidthOnMobile:!0,preventScaleTransition:!0,preventSlideUpTransition:(null==t?void 0:t.supportsNativeHomeOnPhone())||!1,buttonPopupStore:w.Z,renderOrigin:e=>(0,Z.jsx)(D,{format:this.props.format,tooltipEvents:s,buttonPopupEvents:e})})})}}E.displayName="UpdatesButton",E.Format=y.EX;const O=E;function D(e){let{tooltipEvents:t,buttonPopupEvents:s,format:i}=e;window.__c={n:"ButtonComponent"};const u=(0,o.Fg)(),g=(0,n.VK)((()=>w.Z.state.open),[]),f=(0,n.VK)((()=>m.aY()),[]),x=(0,n.VK)((()=>(0,b.H)()),[]),S=(0,n.VK)((()=>function(e){return e===y.EX.Sidebar&&w.Z.state.open}(i)),[i]),v=P.Z.Color.Red;if(i===y.EX.MobileBottomBarPhone)return(0,Z.jsx)(k.Z,{style:R,mobileFeedback:!0,...s,children:(0,Z.jsxs)("div",{style:{position:"relative"},children:[x?(0,a.W)({height:26,width:26,fill:u.regularTextColor}):(0,r.Y)({width:26,fill:u.regularTextColor}),(0,Z.jsx)(F.Z,{type:"currentSpace",color:v,style:{position:"absolute",top:-3,right:f<99?-5:-8}})]})});if(i===y.EX.MobileBottomBarTablet)return(0,Z.jsx)(k.Z,{style:A,mobileFeedback:!0,...s,children:(0,Z.jsxs)("div",{style:{position:"relative"},children:[(0,r.Y)({width:26,fill:u.regularTextColor}),(0,Z.jsx)(F.Z,{type:"currentSpace",color:v,style:{position:"absolute",top:-3,right:f<99?-5:-8}})]})});if(i===y.EX.TopbarMobile)return(0,Z.jsxs)(k.Z,{style:{...B,marginLeft:2,marginRight:2},mobileFeedback:!0,...s,children:[x?(0,a.W)({height:26,width:26}):(0,r.Y)({width:26}),(0,Z.jsx)(F.Z,{type:"currentSpace",color:v,style:{position:"absolute",top:8,right:0}})]});if(i===y.EX.SidebarMobile)return(0,Z.jsxs)(k.Z,{style:B,mobileFeedback:!0,...s,children:[x?(0,a.W)({height:26,width:26}):(0,r.Y)({width:26}),(0,Z.jsx)(F.Z,{type:"currentSpace",color:v,style:{position:"absolute",top:8,right:0}})]});if(i===y.EX.Sidebar){const e=(0,Z.jsx)(c.FormattedMessage,{defaultMessage:"Updates",id:"updatesButton.allUpdates.sidebarButton"}),i=x?(0,a.W)({fill:S?u.regularIconColor:u.mediumIconColor,width:20}):(0,d.Y)({fill:S?u.regularIconColor:u.mediumIconColor,width:20});return(0,Z.jsx)(k.Z,{style:{...S&&{fontWeight:l.Z.fontWeight.medium,color:u.regularTextColor},...(0,h.G$)({isMobile:!1})},...(0,p.Z)(t,s),children:(0,Z.jsx)(_.Z,{left:(0,Z.jsx)("div",{style:{color:S?u.regularTextColor:"inherit"},children:i}),right:(0,Z.jsx)(F.Z,{type:"currentSpace",color:v,style:{marginBottom:2,marginLeft:6}}),style:{background:g?u.buttonHoveredBackground:"none"},children:e})})}return null}},30045:(e,t,s)=>{s.d(t,{Z:()=>S});s(67294);var i=s(83355),n=s(13991),o=s(480),r=s(86628),a=s(7057),d=s(50501),l=s(68939),c=s(54642),u=s(23586),m=s(80444),g=s(72087),p=s(25777),h=s(26388),f=s(55422),y=s(85893);class x extends i.Z{constructor(){super(...arguments),this.storeTypes={requestStore:g.Z},this.renderResult=(e,t,s)=>(0,y.jsx)(p.Z,{loaded:s,spinnerSize:16,showSpinnerTimeout:600,children:e||!t?(0,y.jsx)("div",{children:this.props.intl.formatMessage({id:"userDataConsent.render.error",defaultMessage:"Something went wrong"})}):this.renderOutput(t)}),this.renderOutput=e=>{const t=Boolean(e.expiryTime&&Number(e.expiryTime)>Date.now()),s=t?this.revokeDataAccess:this.grantDataAccess;return(0,y.jsx)(M,{emailDomainSettings:this.props.emailDomainSettings,accessGranted:t,onClick:s,output:e})},this.grantDataAccess=async()=>{b(this.props.emailDomainSettings)||await this.setDataAccessExpiryTime({expiryTime:Date.now()+d.g})},this.revokeDataAccess=async()=>{b(this.props.emailDomainSettings)||await this.setDataAccessExpiryTime({})},this.setDataAccessExpiryTime=async e=>{const t=await c.setDataAccessConsent(this.environment,e);if("success"===t.type&&t.data){const e=this.stores.requestStore.state;this.stores.requestStore.setState({...e,result:t.data})}}}renderComponent(){const{currentUserStore:e}=m.default.state;return e&&(0,y.jsx)(u.Z,{requestStore:this.stores.requestStore,request:{userId:e.id,expiryTime:Date.now()+d.g},performRequest:e=>async function(e,t){const s=await c.getDataAccessConsent(t,{});if("failed"===s.type)throw s.error;return s.data}(0,this.environment),render:this.renderResult})}}x.displayName="UserDataConsentSettings";const S=(0,l.injectIntl)(x);function b(e){return Boolean(e.prevent_granting_support_access)}function v(e){window.__c={n:"UserDataConsentSettingsItem"};const t=(0,o.O7)(),{accessGranted:s,onClick:i,output:r,emailDomainSettings:d}=e,{device:c}=t;return(0,y.jsx)(f.Z,{disabled:b(d),isMobile:c.isMobile,title:(0,y.jsx)(l.FormattedMessage,{id:"personalSettings.supportSection.userDataConsentSettings.label",defaultMessage:"Support access"}),caption:s&&r.expiryTime?(0,y.jsx)(l.FormattedMessage,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:(0,a.Yx)(r.expiryTime,"medium_with_time",n.SP)}}):(0,y.jsx)(l.FormattedMessage,{id:"personalSettings.supportSection.userDataConsentSettings.message",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."}),type:"toggle",isOn:s,onToggle:i})}function M(e){window.__c={n:"UserDataConsentSettingsWithTooltip"};const{accessGranted:t,onClick:s,output:i,emailDomainSettings:n}=e,o=(0,r.VK)((()=>{var e;return null===(e=m.default.state.currentUserStore)||void 0===e?void 0:e.getEmail()}),[]);return(0,y.jsx)(h.Z,{disableTooltip:!b(n),renderTooltip:()=>(0,y.jsx)(l.FormattedMessage,{id:"userDataConsentSetting.disabledByOrganization",defaultMessage:"Granting support access has been disabled by your organization, {emailDomain}",values:{emailDomain:o}}),placement:h.Z.Placement.Bottom,alignment:h.Z.Alignment.Center,render:e=>(0,y.jsx)("div",{...e,children:(0,y.jsx)(v,{emailDomainSettings:n,accessGranted:t,onClick:s,output:i})})})}},16347:(e,t,s)=>{s.d(t,{H:()=>p});s(67294);var i=s(480),n=s(86628),o=s(68939),r=s(39699),a=s(37181),d=s(24215),l=s(18514),c=s(80444),u=s(42402),m=s(55422),g=s(85893);function p(e){let{isMobile:t}=e;window.__c={n:"ViewHistorySettings"};const s=(0,i.O7)(),p=(0,n.VK)((()=>c.default.state.currentUserSettingsStore),[]),h=(0,n.VK)((()=>{var e;return!0===(null==p||null===(e=p.getSettings())||void 0===e?void 0:e.disable_page_analytics)?"do_not_record":"record"}),[p]);return(0,g.jsx)(m.Z,{isMobile:t,title:(0,g.jsx)(o.FormattedMessage,{id:"viewHistorySettings.title",defaultMessage:"Show my view history"}),caption:(0,g.jsx)(o.FormattedMessage,{id:"viewHistorySettings.description.message",defaultMessage:"People with edit or full access will be able to see when you’ve viewed a page. <inlinelink>Learn more</inlinelink>.",values:{inlinelink:e=>(0,g.jsx)(u.Z,{external:!0,href:(0,l.UY)("guides.pageAnalytics"),children:e})}}),type:"dropdown",currentOption:h,options:[{key:"record",label:(0,g.jsx)(o.FormattedMessage,{id:"viewHistorySettings.record.label",defaultMessage:"Record"})},{key:"do_not_record",label:(0,g.jsx)(o.FormattedMessage,{id:"viewHistorySettings.do_not_record.label",defaultMessage:"Don't record"})}],onSelectOption:e=>{const t="do_not_record"===e;r.createAndCommit({userAction:"ViewHistorySettings.onSelectOption",environment:s,perform:e=>{p&&a.d2({userSettingsStore:p,data:{disable_page_analytics:t},transaction:e})}}),d.j(s,t?"page_analytics_account_opt_out":"page_analytics_account_opt_in")}})}},5474:(e,t,s)=>{s.d(t,{Z:()=>g});var i=s(67294),n=s(24405),o=s(81864),r=s(96451),a=s(94900),d=s(82990),l=s(68785),c=s(63296),u=s(64369),m=s(85893);function g(e){window.__c={n:"MFAActionButton"};const{type:t,isActive:s,title:g,caption:p,onClick:h,isLoading:f,style:y,disabled:x}=e,[S,b]=(0,i.useState)(!1),v=(0,i.useCallback)((()=>b(!0)),[b]),M=(0,i.useCallback)((()=>b(!1)),[b]),w=(0,n.yK)((e=>({button:{width:"100%",justifyContent:"left",padding:"10px 16px",alignItems:"start",height:"auto",...y},buttonLoading:{width:"100%",height:59,...y},buttonInner:{minWidth:0},icon:{width:20,height:20,marginRight:10,fill:s||S&&!x?e.blueColor:e.regularIconColor},caption:{fontSize:d.Z.fontSize.UISmall.desktop,lineHeight:1.35,color:e.mediumTextColor,whiteSpace:"normal"}})),[s,S,x,y]),j=(0,i.useMemo)((()=>f?w.buttonLoading:w.button),[f,w.buttonLoading,w.button]),k={totp:(0,o.X)(w.icon),sms:(0,a.u)(w.icon),backup_code:(0,r.k)(w.icon)}[t];return(0,m.jsx)(c.Z,{style:j,onClick:h,onMouseEnter:v,onMouseLeave:M,hovered:S,disabled:x,disabledFeedback:x,children:f?(0,m.jsx)(l.Z,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{style:w.icon,children:k}),(0,m.jsxs)("div",{style:w.buttonInner,children:[(0,m.jsx)(u.Z,{children:g}),(0,m.jsx)("span",{style:w.caption,children:p})]})]})})}},88175:(e,t,s)=>{s.d(t,{Z:()=>g});var i=s(67294),n=s(24405),o=s(8848),r=s(80721),a=s(64275),d=s(82990),l=s(42922),c=s(89728),u=s(46600),m=s(85893);function g(e){let{onDismiss:t,onBack:s,disableBackButton:o,primaryAction:d,secondaryActions:g,title:h,header:f,children:y,errorMessage:x,alertMessage:S,icon:b,containerStyles:v}=e;window.__c={n:"MFAPrompt"};const M=(0,n.yK)(p,[]),w=(0,i.useMemo)((()=>(0,m.jsxs)(i.Fragment,{children:[(0,m.jsxs)("div",{style:s&&t?M.topIconRow:{...M.topIconRow,justifyContent:"flex-end"},children:[s?(0,m.jsx)(c.Z,{isSmall:!0,style:M.backButton,onClick:s,disabled:o,children:(0,r.W)(M.backIcon)}):null,t?(0,m.jsx)(c.Z,{isSmall:!0,style:M.dismissButton,hoveredStyle:M.dismissButtonHovered,onClick:t,children:(0,a.D)(M.dismissIcon)}):null]}),b?(0,m.jsx)("div",{style:M.titleIconRow,children:b}):null]})),[M,b,t,s,o]),j=(0,i.useMemo)((()=>d?(0,m.jsx)(l.Z,{style:M.primaryActionButton,isLarge:!0,onClick:d.onClick,disabled:d.disabled,isRed:d.isRed,children:d.text}):null),[d,M]),k=(0,i.useMemo)((()=>null==g?void 0:g.map(((e,t)=>(0,i.createElement)(u.Z,{...e,key:t})))),[g]),C=(0,i.useCallback)((e=>{e.preventDefault(),d&&!d.disabled&&d.onClick()}),[d]),T=x?(0,m.jsx)("div",{style:M.error,children:x}):void 0,I=S?(0,m.jsx)("div",{style:M.alert,children:S}):void 0;return(0,m.jsxs)("form",{style:{...M.container,...v},onSubmit:C,children:[w,(0,m.jsx)("h2",{style:M.title,children:h}),(0,m.jsx)("div",{style:M.header,children:f}),T,I,y,j,k,(0,m.jsx)("button",{style:M.hiddenButton})]})}function p(e){return(0,n.EM)({container:{position:"relative",width:280,padding:16},topIconRow:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:4,width:"100%"},titleIconRow:{display:"flex",justifyContent:"center",marginBottom:15},dismissButton:{marginTop:-5,marginRight:-5,borderRadius:"50%",width:18,height:18,background:"light"===e.mode?o.FN.light.gray[75]:o.FN.dark.gray[400],display:"flex",justifyContent:"center",alignItems:"center",padding:0},dismissButtonHovered:{background:"light"===e.mode?o.FN.light.gray[100]:o.FN.dark.gray[500]},backButton:{marginTop:-5,marginLeft:-5,height:20,width:20,display:"flex",justifyContent:"center",alignItems:"center"},title:{fontWeight:d.Z.fontWeight.medium,fontSize:d.Z.fontSize.UIRegular.desktop,lineHeight:1.2,color:e.regularTextColor,marginTop:0,marginBottom:4,paddingLeft:10,paddingRight:10,textAlign:"center"},error:{color:o.ZP.red,width:"100%",marginBottom:8,textAlign:"center",fontSize:d.Z.fontSize.UISmall.desktop},alert:{color:o.ZP.red,width:"100%",marginBottom:10,textAlign:"center",fontSize:d.Z.fontSize.UISmall.desktop},header:{fontWeight:d.Z.fontWeight.regular,fontSize:d.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,textAlign:"center",marginBottom:16,lineHeight:1.35},primaryActionButton:{width:"100%",margin:"15px auto 0"},hiddenButton:{display:"none"},backIcon:{width:14,height:14,fill:e.mediumIconColor},dismissIcon:{width:12,height:12,fill:e.mediumIconColor}})}},46600:(e,t,s)=>{s.d(t,{Z:()=>m});var i=s(67294),n=s(24405),o=s(97880),r=s(82990),a=s(63296),d=s(85740),l=s(8848),c=s(85893);function u(e){let{onClick:t,disabled:s,view:i,icon:o,isRed:r,href:a,isExternal:d,saveAs:u,style:m,children:g}=e;window.__c={n:"MFAPromptLink"};const p=(0,n.yK)((e=>({link:{userSelect:"none",WebkitUserSelect:"none",transition:"background 20ms ease-in",cursor:s?void 0:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",borderRadius:4,height:"outline"===i?32:28,paddingLeft:Boolean(o)?6:"outline"===i?12:8,paddingRight:12,fontSize:14,lineHeight:1.2,color:r?l.O9.red:e.regularTextColor,..."outline"===i?{border:`1px solid ${r?e.outlineRedButtonBorder:e.outlineButtonBorder}`}:{},...m}})),[i,r,o,m,s]);return(0,c.jsx)("a",{style:p.link,target:d?"_blank":void 0,href:a,download:u,onClick:t,rel:"noopener noreferrer",children:g})}function m(e){window.__c={n:"MFAPromptSecondaryAction"};const{type:t,view:s,text:l,disabled:m,isRed:g,icon:p}=e,h=(0,n.yK)((e=>(0,n.EM)({secondaryActionBase:{width:"100%",margin:"8px auto 0",justifyContent:"center"},secondaryActionPlainButton:{width:"100%",margin:"8px auto 0",justifyContent:"center",fontWeight:r.Z.fontWeight.regular,fontSize:r.Z.fontSize.UIRegular.desktop,color:"button"===t?e.lightTextColor:e.regularTextColor},secondaryActionOutlineButton:{width:"100%",margin:"8px auto 0",justifyContent:"center",fontWeight:r.Z.fontWeight.regular,fontSize:r.Z.fontSize.UIRegular.desktop,color:"link"===t&&"outline"!==s||"plain"===s?e.lightTextColor:e.regularTextColor},secondaryActionIcon:{width:12,height:12,marginRight:4}})),[t,s]),f=g?h.secondaryActionBase:h.secondaryActionOutlineButton,y=(0,c.jsxs)(i.Fragment,{children:[p?p(h.secondaryActionIcon):null,l]});if("button"===t){const t="outline"===s?a.Z:d.Z;return(0,c.jsx)(t,{onClick:e.onClick,style:f,isRed:g,disabled:m,children:y})}if("link"===t)return(0,c.jsx)(u,{onClick:e.onClick,view:s,isExternal:e.isExternal,icon:p,isRed:g,href:e.href,saveAs:e.saveAs,style:f,disabled:m,children:y});throw(0,o.t1)(t)}},73602:(e,t,s)=>{s.d(t,{y:()=>h});var i=s(67294),n=s(24405),o=s(77058),r=s(97880),a=s(82990),d=s(63143),l=s(68939),c=s(68785),u=s(26388),m=s(42402),g=s(85893);const p=60*d.C0;function h(e){let{resentStatus:t,resentAt:s,onResendLink:a}=e;window.__c={n:"MFASMSVerificationResendText"};const d=(0,n.yK)(f,[]),[h,y]=(0,i.useState)((()=>Date.now()));(0,i.useEffect)((()=>{if(s+p>h){const e=setTimeout((()=>{y(Date.now())}),1e3);return()=>{clearTimeout(e)}}}),[s,y,h]);const x=Math.max(Math.floor((s+p-h)/1e3),0);if("not-resent"===t||"resent"===t&&0===x)return(0,g.jsx)(l.FormattedMessage,{id:"mfa.sms.resend.resend.link",defaultMessage:"<resend>Resend</resend>",values:{resend:e=>(0,g.jsx)(m.Z,{style:d.resendLink,disableUnderline:!0,onClick:a,children:e})}});if("resending"===t)return(0,g.jsx)(l.FormattedMessage,{id:"mfa.sms.resend.sending.label",defaultMessage:"<sending>Sending</sending>",values:{sending:e=>(0,g.jsxs)(g.Fragment,{children:[e,(0,g.jsx)(c.Z,{style:d.loading})]})}});if("resent"===t)return(0,g.jsx)(u.Z,{placement:u.Z.Placement.Bottom,renderTooltip:()=>(0,g.jsx)(l.FormattedMessage,{id:"mfa.sms.resend.resent.tooltip",defaultMessage:"You can send a code again in {resendTimeout} seconds",values:{resendTimeout:x}}),render:e=>(0,g.jsx)("span",{...e,style:d.resent,children:(0,g.jsx)(l.FormattedMessage,{id:"mfa.sms.resend.resent.message",defaultMessage:"<resent>Resent</resent>",values:{resent:e=>(0,g.jsxs)(g.Fragment,{children:[e,(0,o.$)(d.checkmark)]})}})})});throw(0,r.t1)(t)}function f(e){return(0,n.EM)({resendLink:{fontWeight:a.Z.fontWeight.medium,color:e.blueColor},checkmark:{width:12,height:12,display:"inline",verticalAlign:"middle",marginLeft:2,color:"green"},resent:{userSelect:"none",WebkitUserSelect:"none"},loading:{width:12,height:12,display:"inline",verticalAlign:"middle",marginLeft:2}})}},75752:(e,t,s)=>{s.d(t,{r:()=>o});var i=s(63143),n=s(54642);class o{constructor(e){this.environment=void 0,this.environment=e}async confirmIdentity(){const{settings:e,sessionVerificationExpirationInSeconds:t}=await this.loadSettings();return t&&t>2*i.hw?{status:"ready"}:e.length>0?{status:"mfa",settings:e}:{status:"password"}}async loadSettings(){const e=await n.authGetLoginConfiguration(this.environment,{});if("success"===e.type){const{data:t}=e;return"required"===t.samlSignIn?{settings:[],sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}:{settings:t.mfaOptions,sessionVerificationExpirationInSeconds:t.sessionVerificationExpirationInSeconds}}throw e}async sendTemporaryPassword(e){const{email:t}=e,s=await n.sendTemporaryPassword(this.environment,{passwordReset:!0,email:t});if("success"===s.type)return{status:"ok"};throw s}async verifyBackupCode(e){var t;const{code:s}=e,i=s.split("-").join(""),o=await n.authVerifyBackupCodesLogin(this.environment,{code:i});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithPassword(e){var t;const{password:s}=e,i=await n.authVerifyPassword(this.environment,{password:s});if("success"===i.type)return{status:"match"};if("incorrect_password"===(null===(t=i.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw i}async disableMFA(){const e=await n.authUpdateMfa(this.environment,{action:"disable_all"});if("success"===e.type)return{status:"ok"};throw e}async verifyIdentityWithTOTP(e){var t;const{mfaSettingId:s,code:i}=e,o=await n.authVerifyTotpLogin(this.environment,{mfaSettingId:s,code:i});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async verifyIdentityWithSMS(e){var t;const{mfaSettingId:s,code:i}=e,o=await n.authVerifySmsLogin(this.environment,{mfaSettingId:s,code:i});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async renameSettings(e){var t,s,i;const{mfaSettingId:o,friendlyName:r}=e,a=await n.authUpdateMfa(this.environment,{action:"rename",mfaSettingId:o,friendlyName:r});if("success"===a.type)return{status:"saved",settings:a.data.mfaOptions};if("mfa_duplicate_friendly_name"===(null===(t=a.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"duplicate"};if("mfa_empty_friendly_name"===(null===(s=a.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"empty"};if("mfa_bad_friendly_name"===(null===(i=a.body)||void 0===i||null===(i=i.clientData)||void 0===i?void 0:i.type))return{status:"bad_friendly_name"};throw a}async deleteSettings(e){const t=await n.authUpdateMfa(this.environment,{action:"delete",mfaSettingId:e});if("success"===t.type)return{settings:t.data.mfaOptions};throw t}async createTOTP(){const e=await n.authCreateTotp(this.environment,{});if("success"===e.type)return{mfaSettingId:e.data.mfaSettingId,secret:e.data.authCode,qrCode:e.data.qrCode};throw e}async verifyTOTP(e){var t;const{mfaSettingId:s,code:i}=e,o=await n.authVerifyTotpEnroll(this.environment,{mfaSettingId:s,code:i});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async createSMS(e,t){var s,i,o,r;const a=await n.authCreateSms(this.environment,{countryCode:e,phoneNumber:t});if("success"===a.type)return{status:"created",mfaSettingId:a.data.mfaSettingId};if("already_verified_phone_number"===(null===(s=a.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type))return{status:"already_verified_phone_number"};if("invalid_country_code"===(null===(i=a.body)||void 0===i||null===(i=i.clientData)||void 0===i?void 0:i.type))return{status:"invalid_country_code"};if("invalid_phone_number"===(null===(o=a.body)||void 0===o||null===(o=o.clientData)||void 0===o?void 0:o.type))return{status:"invalid_phone_number"};if("mfa_sms_unsupported_country_code_for_enrollment"===(null===(r=a.body)||void 0===r||null===(r=r.clientData)||void 0===r?void 0:r.type))return{status:"sms_unsupported_country_code_for_enrollment"};throw a}async verifySMS(e){var t;const{mfaSettingId:s,code:i}=e,o=await n.authVerifySmsEnroll(this.environment,{mfaSettingId:s,code:i});if("success"===o.type)return{status:"match"};if("invalid_mfa_code"===(null===(t=o.body)||void 0===t||null===(t=t.clientData)||void 0===t?void 0:t.type))return{status:"incorrect"};throw o}async sendSMS(e){const{mfaSettingId:t}=e,s=await n.authSendSms(this.environment,{mfaSettingId:t});if("success"===s.type)return{status:"ok"};throw s}async createBackupCodes(e){if(!e){const{settings:e}=await this.loadSettings();if(e.find((e=>"backup_code"===e.mfaMethod)))return{status:"already-exists"}}const t=await n.authCreateBackupCodes(this.environment,{});if("success"===t.type)return{status:"new",mfaSettingId:t.data.mfaSettingId,backupCodes:t.data.codes};throw t}}},11898:(e,t,s)=>{s.d(t,{ZP:()=>g,rN:()=>m});var i=s(67294),n=s(480),o=s(24405),r=s(8848),a=s(72126),d=s(97880),l=s(71119),c=s(89224),u=s(85893);const m=e=>e>="0"&&e<="9";function g(e){let{numInputs:t,disabled:s,value:n,format:d,onChange:l,autoFocus:c,isValidKey:m}=e;window.__c={n:"MFAVerificationSingleInput"};const g=(0,o.yK)((e=>function(e,t){return(0,o.EM)({inputRow:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},cell:{display:"flex",alignItems:"center",justifyContent:"center",width:"login"===t?40:33,height:44,paddingLeft:0,paddingRight:0,fontSize:18,background:"light"===e.mode?r.ZP.transparent:e.inputBackground,lineHeight:"20px",borderRadius:4,boxShadow:e.inputBoxShadow},focusedCell:{boxShadow:"rgba(35, 131, 226, 0.57) 0px 0px 0px 1px inset, rgba(35, 131, 226, 0.35) 0px 0px 0px 2px"},cellInput:{textAlign:"center",color:e.darkTextColor},hiddenInput:{position:"absolute",top:"0",left:"0",height:"100%",width:"100%",opacity:0}})}(e,d)),[d]),[h,f]=(0,i.useState)(void 0),y=(0,i.useMemo)((()=>(0,a.DZ)(t,(e=>{const s=void 0!==h&&(h.selectionStart<=e&&e<=h.selectionEnd||e===t-1&&h.selectionStart>=t),i={...g.cell,...s?g.focusedCell:{}};return(0,u.jsx)("div",{style:i,children:(0,u.jsx)("div",{style:g.cellInput,children:n[e]||""})})}))),[t,h,g,n]),x=(0,i.useMemo)((()=>(0,u.jsx)(p,{value:n,cursor:h,isValidCharacter:m,disabled:s,maxLength:{limit:t,method:"replaceLast"},onSetValue:l,onSetCursor:f,autoFocus:c,style:g.hiddenInput})),[t,m,l,f,c,g,n,h,s]);return(0,u.jsxs)("div",{style:{position:"relative"},children:[x,(0,u.jsx)("div",{style:g.inputRow,children:y})]})}function p(e){let{isValidCharacter:t,cursor:s,value:o,maxLength:r,onSetCursor:m,onSetValue:g,style:p,autoFocus:h,disabled:f}=e;window.__c={n:"FilteredInput"};const y=(0,i.useRef)(null),x=(0,n.Fy)();(0,i.useEffect)((()=>{const e=y.current;if(e){const{selectionStart:t,selectionEnd:i}=e;if(s&&s.selectionStart!==t&&s.selectionEnd!==i){const t=document.createRange();t.selectNode(e),c.set(t,x),e.setSelectionRange(s.selectionStart,s.selectionEnd)}}}),[y,s,o,x]);const S=(0,i.useCallback)(((e,s)=>{const i=s.filter(t);if(void 0===r)return i;if(i.length<=r.limit)return i;const n=e.slice(0,r.limit),o=i.slice(0,r.limit);if("truncate"!==r.method&&(0,a.Xy)(n,o)){if("replaceLast"===r.method){return[...i.slice(0,r.limit-1),...i.slice(-1)]}return(0,d.t1)(r.method)}return o}),[t,r]),b=(0,i.useCallback)((e=>{const{selectionStart:t,selectionEnd:s}=e.target;null!==t&&null!==s&&m({selectionStart:t,selectionEnd:s})}),[m]),v=(0,i.useCallback)((e=>{"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||b(e)}),[b]),M=(0,i.useCallback)((e=>{const{selectionStart:t,selectionEnd:s}=e.target,i=Array.from(e.target.value),n=S(o,i);if(null!==t&&null!==s){const e=Math.min(i.length,(null==r?void 0:r.limit)??1/0)-n.length;m({selectionStart:t-e,selectionEnd:s-e})}else m(void 0);g(n)}),[m,g,o,S,r]),w=(0,i.useCallback)((e=>{const t=e.clipboardData;if(t&&t.getData){const s=t.getData("text"),i=Array.from(s),n=S([],i);m({selectionStart:n.length,selectionEnd:n.length}),g(n),e.preventDefault()}}),[S,g,m]);return(0,u.jsx)("input",{onChange:M,onBlur:()=>{m(void 0)},onFocus:b,onPaste:w,disabled:f,autoFocus:h,type:"text",inputMode:"numeric",pattern:"[0-9]*",onKeyUp:v,ref:y,value:o.join(""),style:p,...l.pf})}},88606:(e,t,s)=>{s.d(t,{Z:()=>fe});var i=s(67294),n=s(480),o=s(86628),r=s(97880),a=s(28020),d=s(24405),l=s(33679),c=s(82990),u=s(68939),m=s(5474),g=s(88175),p=s(85893);function h(e){window.__c={n:"MFAPromptAddMethod"};const{errorMessage:t,onStartTOTP:s,onStartSMS:n,onDismiss:o}=e,r=(0,d.yK)(f,[]),a=(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOnSettings.title",defaultMessage:"Turn on 2-step verification"}),c=(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOnSettings.message",defaultMessage:"Confirm it's you after using a password with a verification code from an authenticator app or text message."}),h=(0,i.useMemo)((()=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(m.Z,{type:"totp",title:(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOnSettings.setupAuthenticator.button.title",defaultMessage:"Code from authenticator"}),caption:(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOnSettings.setupAuthenticator.button.message",defaultMessage:"Generate a one-time code in your authenticator app"}),onClick:s,style:r.button}),(0,p.jsx)(m.Z,{type:"sms",title:(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOnSettings.setupSMS.button.title",defaultMessage:"Text me a code"}),caption:(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOnSettings.setupSMS.button.message",defaultMessage:"Add and verify your phone number"}),onClick:n,style:r.button})]})),[r,n,s]);return(0,p.jsx)(g.Z,{title:a,header:c,children:h,icon:(0,l.j)(r.icon),errorMessage:t,onDismiss:o})}function f(e){return(0,d.EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:c.Z.fontWeight.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var y=s(37612),x=s(68785);function S(e){window.__c={n:"MFAPromptDeleteMethodConfirmation"};const{isLoading:t,mfaSetting:s,errorMessage:i,onDismiss:n,onCancel:o,onDeleteMethod:a}=e,l=(0,d.yK)(b,[]),c={text:t?(0,p.jsx)(x.Z,{}):(0,p.jsx)(u.FormattedMessage,{id:"mfa.deleteSetting.permanentlyDelete.button.message",defaultMessage:"Permanently delete"}),onClick:()=>a(s),isRed:!0},m=[{text:(0,p.jsx)(u.FormattedMessage,{id:"mfa.deleteSetting.cancel.button.message",defaultMessage:"Cancel"}),onClick:o,type:"button",view:"outline"}];return(0,p.jsx)(g.Z,{title:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,p.jsx)(u.FormattedMessage,{id:"mfa.deleteSetting.sms.title",defaultMessage:"Delete {phoneHint}",values:{phoneHint:s.phoneNumber}});case"totp":return(0,p.jsx)(u.FormattedMessage,{id:"mfa.deleteSetting.totp.title",defaultMessage:"Delete {friendlyName}",values:{friendlyName:s.friendlyName}});default:return(0,r.t1)(e)}})(),header:(()=>{const e=s.mfaMethod;switch(e){case"sms":return(0,p.jsx)(u.FormattedMessage,{id:"mfa.deleteSetting.sms.header",defaultMessage:"Once deleted, you will no longer receive codes sent to {phoneHint}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{phoneHint:s.phoneNumber,boldtext:e=>(0,p.jsx)("span",{style:l.boldText,children:e})}});case"totp":return(0,p.jsx)(u.FormattedMessage,{id:"mfa.deleteSetting.totp.header",defaultMessage:"Once deleted, you will no longer be able to use codes generated from {friendlyName}. <boldtext>Are you sure you want to delete this?</boldtext>",values:{friendlyName:s.friendlyName,boldtext:e=>(0,p.jsx)("span",{style:l.boldText,children:e})}});default:return(0,r.t1)(e)}})(),icon:(0,y.y)(l.crossIcon),primaryAction:c,secondaryActions:m,errorMessage:i,onDismiss:n})}function b(e){return(0,d.EM)({crossIcon:{width:30,fill:"red"},boldText:{fontWeight:c.Z.fontWeight.semibold}})}var v=s(71119),M=s(18514),w=s(97567),j=s(45653);function k(e){window.__c={n:"MFAUserAvatarIcon"};const{userStore:t}=e,s=(0,d.yK)(C,[]);return(0,p.jsxs)("div",{style:s.iconContainer,children:[(0,p.jsx)(j.Z,{userStore:t,size:36,avatarShouldShowShadow:!0,style:s.userIcon}),(0,p.jsx)("span",{children:(0,w.y)(s.lockIcon)})]})}function C(){return(0,d.EM)({iconContainer:{position:"relative"},userIcon:{position:"relative"},lockIcon:{position:"absolute",width:9,height:20,right:0,left:26,top:21}})}function T(e){window.__c={n:"MFAPromptMethodChooser"};const{mfaSettings:t,isSMSLoading:s,chosenMfaSettingId:n,userStore:o,errorMessage:a,onClick:l,onDismiss:c}=e,h=(0,d.yK)(I,[]),f=(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.title",defaultMessage:"To continue, we need to verify your identity"}),y=(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.header",defaultMessage:"Select a method to verify your identity."}),x=[{text:(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.needHelp.button",defaultMessage:"Need help?"}),href:(0,M.UY)("guides.mfa"),isExternal:!0,type:"link",view:"plain"}],S=(0,i.useMemo)((()=>(0,v.UG)(t).map((e=>{const t=e.mfaMethod;switch(t){case"totp":return(0,p.jsx)(m.Z,{type:t,title:e.friendlyName,caption:(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useAuthenticator.button.message",defaultMessage:"Use code from authenticator"}),onClick:()=>l(e),style:h.actionButton,isActive:!0,disabled:s});case"sms":return(0,p.jsx)(m.Z,{type:t,title:e.phoneNumber,caption:(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useSMS.button.message",defaultMessage:"Text me a code"}),onClick:()=>l(e),style:h.actionButton,isActive:!0,isLoading:s&&n===e.mfaSettingId,disabled:s&&n!==e.mfaSettingId});case"backup_code":return(0,p.jsx)(m.Z,{type:t,title:(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.title",defaultMessage:"Use a backup code"}),caption:(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.methodChooser.useBackupCode.button.message",defaultMessage:"Use a one-time backup code"}),onClick:()=>l(e),style:h.actionButton,isActive:!0,disabled:s});default:return(0,r.t1)(t)}}))),[t,l,s,n,h.actionButton]);return(0,p.jsx)(g.Z,{title:f,header:y,errorMessage:a,icon:(0,p.jsx)(k,{userStore:o}),secondaryActions:x,onDismiss:c,children:S})}function I(e){return(0,d.EM)({resendLink:{fontWeight:c.Z.fontWeight.medium,color:e.blueColor},actionButton:{marginBottom:5}})}var P=s(3338);function F(e){window.__c={n:"MFAPromptTurnOffMFAComplete"};const t=(0,d.yK)(_,[]),{errorMessage:s,onDismiss:i}=e,n=(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOffMFAComplete.title",defaultMessage:"2-step verification is turned off"}),o=(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOffMFAComplete.header",defaultMessage:"2-step verification has been removed from your account. Notion will only ask for your password during log in."}),r=[{text:(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOffMFAComplete.button.message",defaultMessage:"Complete"}),onClick:i,type:"button",view:"outline"}];return(0,p.jsx)(g.Z,{title:n,header:o,errorMessage:s,icon:(0,P.p)(t.confirmationIcon),secondaryActions:r,onDismiss:i})}function _(e){return(0,d.EM)({confirmationIcon:{width:30,fill:"green"}})}var Z=s(87586);function A(e){window.__c={n:"MFAPromptTurnOffMFAConfirmation"};const{isLoading:t,lastMFASetting:s,errorMessage:i,onDismiss:n,onTurnOffMFA:o,onCancel:r}=e,a=(0,d.yK)(R,[]),l=(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOffMFA.title",defaultMessage:"Turn off 2-step verification"}),m={text:t?(0,p.jsx)(x.Z,{}):(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOffMFA.disableMFA.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:o,isRed:!0},h=[{text:(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOffMFA.cancel.button.message",defaultMessage:"Cancel"}),onClick:r,type:"button",view:"outline"}];return(0,p.jsx)(g.Z,{title:l,header:s?(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOffMFA.lastMFASettingDeleted.header",defaultMessage:"Deleting {mfaSettingName} will turn off 2-step verification and remove the additional layer of security on your account. Notion will only ask for your password during log in.",values:{mfaSettingName:"sms"===s.mfaMethod?`${s.phoneNumber}`:s.friendlyName,boldtext:e=>(0,p.jsx)("span",{style:{fontWeight:c.Z.fontWeight.semibold},children:e})}}):(0,p.jsx)(u.FormattedMessage,{id:"mfa.turnOffMFA.header",defaultMessage:"Turning off 2-step verification will remove the additional layer of security on your account. Notion will only ask for your password during log in. "}),icon:(0,Z.B)(a.crossIcon),primaryAction:m,secondaryActions:h,errorMessage:i,onDismiss:n})}function R(e){return(0,d.EM)({crossIcon:{width:30,fill:"red"}})}var B=s(13991),E=s(7057),O=s(61519),D=s(64369),N=s(81864),V=s(56666),U=s(25651),L=s(94900),q=s(64921),G=s(52275),W=s(31945),K=s(74194);function z(e){window.__c={n:"MFAActiveActionInputTitle"};const{setting:t,setIsEditing:s,isEditing:n,onUpdateMethod:o}=e,r=(0,d.yK)(H,[]),[a,l]=(0,i.useState)(""),c=t.friendlyName,u=""===a?c:a,m=(0,i.useCallback)((e=>""!==e&&e!==c),[c]),g=(0,i.useCallback)((()=>{m(u)?(o({mfaMethod:t.mfaMethod,mfaSettingId:t.mfaSettingId,action:"rename",friendlyName:u}),l(a)):l(c),s(!n)}),[u,n,s,o,a,c,m,t.mfaMethod,t.mfaSettingId]),h=(0,i.useCallback)((e=>{"Enter"!==e.key&&"Escape"!==e.key||g()}),[g]),f=(0,i.useCallback)((e=>{m(e.target.value)&&l(e.target.value)}),[m]);return n?(0,p.jsx)(K.Z,{value:u,maxlength:30,onChange:f,onKeyDown:h,onBlur:g,focus:n,style:r.inputField,inputStyle:r.input}):(0,p.jsx)(D.Z,{children:u})}function H(){return(0,d.EM)({inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14,...c.Z.textOverflowStyle}})}var Q=s(87279),Y=s(78140),$=s(32163),X=s(72495);function J(e){const{activeMenuActions:t}=e;return(0,p.jsx)(Y.Z,{menuType:Q.og.Popup,children:(0,p.jsx)($.Z,{type:$.i.Vertical,sections:[{key:"mfaMethodActions",render:e=>(0,p.jsx)(X.Z,{...e}),items:t}],initialFocus:void 0})})}function ee(e){window.__c={n:"MFAActiveAction"};const{type:t,title:s,caption:n,setting:o,onDeleteMethod:a,onUpdateMethod:l}=e,c=(0,d.yK)(te,[]),m={totp:(0,N.X)(c.icon),sms:(0,L.u)(c.icon)},[g,h]=(0,i.useState)(!1),f=e=>({key:"deleteMFAMethod",render:e=>(0,p.jsx)(G.Z,{...e,title:(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.activeSection.editMenu.delete.button.message",defaultMessage:"Delete"}),icon:(0,y.y)(c.menuItemIcon)}),action:()=>{a(o),e.close()}}),x=e=>({key:"editMFAMethod",render:e=>(0,p.jsx)(G.Z,{...e,title:(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.activeSection.editMenu.editTitle.button.message",defaultMessage:"Edit title"}),icon:(0,U.R)(c.menuItemIcon)}),action:()=>{h(!0),e.close()}});return(0,p.jsxs)("div",{style:c.activeMethodContainer,children:[(0,p.jsxs)("div",{style:c.activeMethodLeftContainer,children:[(0,p.jsx)("div",{style:c.icon,children:m[t]}),(0,p.jsxs)("div",{style:c.activeMethodText,children:[(()=>{switch(t){case"sms":return(0,p.jsx)(D.Z,{children:s});case"totp":return(0,p.jsx)(z,{setting:o,setIsEditing:h,isEditing:g,onUpdateMethod:l});default:return(0,r.t1)(t)}})(),(0,p.jsx)("span",{style:c.activeMethodCaption,children:n})]})]}),(0,p.jsx)(W.ZP,{render:e=>{switch(t){case"sms":return(0,p.jsx)(J,{activeMenuActions:[f(e)]});case"totp":return(0,p.jsx)(J,{activeMenuActions:[x(e),f(e)]});default:(0,r.t1)(t)}},alignmentToOrigin:W.vR.Start,renderOrigin:e=>(0,p.jsx)(q.Z,{style:c.menuButton,disabled:g,...e,children:(0,V.o)(c.menuIcon)}),popupType:W.Z4.Popup})]})}function te(e){return(0,d.EM)({activeMethodContainer:{display:"flex",justifyContent:"space-between",border:`1px solid ${e.outlineButtonBorder}`,width:"100%",padding:"10px 14px 10px 16px",alignItems:"start",height:"auto",borderRadius:4,marginBottom:5},activeMethodLeftContainer:{display:"flex",justifyContent:"left",minWidth:0},activeMethodText:{display:"flex",flexDirection:"column",minWidth:0},activeMethodCaption:{fontSize:c.Z.fontSize.UISmall.desktop,lineHeight:c.Z.lineHeight.UISmall.desktop,color:e.mediumTextColor,whiteSpace:"normal"},icon:{width:20,height:20,marginRight:10,fill:e.blueColor},menuIcon:{fill:e.lightIconColor,width:15,height:15},menuButton:{borderRadius:4,padding:3},menuItemIcon:{width:17,height:17},inputField:{width:"auto",marginRight:5,marginBottom:1},input:{fontSize:14}})}function se(e){window.__c={n:"MFAPromptUpdateMethod"};const{mfaSettings:t,errorMessage:s,onStartTOTP:n,onStartSMS:o,onTurnOffMFA:a,onStartBackupCodes:c,onDismiss:h,onDeleteMethod:f,onUpdateMethod:y}=e,x=(0,d.yK)(ie,[]),S=(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.title",defaultMessage:"2-step verification"}),b=(0,p.jsx)(u.FormattedMessage,{id:"mfa.settingModal.message",defaultMessage:"Confirm it's you after using a password by providing a verification code."}),M=(0,i.useMemo)((()=>(0,v.UG)(t).map((e=>{const{mfaMethod:t}=e,s=(0,E.tv)(e.createdAt,B.SP);switch(t){case"totp":return(0,p.jsx)(ee,{type:t,title:e.friendlyName,caption:(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.activeSection.useAuthenticator.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:f,onUpdateMethod:y});case"sms":return(0,p.jsx)(ee,{type:t,title:`${e.phoneNumber}`,caption:(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.activeSection.useSMS.button.message",defaultMessage:"Set up {createdTimeNormalized}",values:{createdTimeNormalized:s}}),setting:e,onDeleteMethod:f,onUpdateMethod:y});case"backup_code":return;default:(0,r.t1)(t)}}))),[t,f,y]),w=t.filter((e=>"totp"===e.mfaMethod)).length,j=t.filter((e=>"sms"===e.mfaMethod)).length,k=(0,i.useMemo)((()=>[{type:"totp",title:(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.title",defaultMessage:"Add authenticator"}),caption:w>=2?(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.disabled.button.message",defaultMessage:"2 of 2 authenticators added"}):(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherAuthenticator.button.message",defaultMessage:"{numOfTotpSettings} of 2 authenticators added",values:{numOfTotpSettings:w}}),onClick:n,style:x.button,disabled:w>=2},{type:"sms",title:(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.title",defaultMessage:"Add phone number"}),caption:j>=2?(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.disabled.button.message",defaultMessage:"2 of 2 phones added"}):(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.addMoreSection.addAnotherPhoneNumber.button.message",defaultMessage:"{numOfSmsSettings} of 2 phones added",values:{numOfSmsSettings:j}}),onClick:o,style:x.button,disabled:j>=2},{type:"backup_code",title:(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.title",defaultMessage:"Regenerate backup codes"}),caption:(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.activeSection.useBackupCodes.button.message",defaultMessage:"Use for account recovery when other methods don't work"}),onClick:c,style:x.button,disabled:!1}].sort(((e,t)=>(e.disabled?1:0)-(t.disabled?1:0)))),[n,o,c,w,j,x]),C=(0,i.useMemo)((()=>k.map(((e,t)=>(0,i.createElement)(m.Z,{...e,key:t})))),[k]),T=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(D.Z,{style:x.settingsTitle,isSmall:!0,children:(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.activeSection.title",defaultMessage:"Active"})}),M,(0,p.jsx)(O.Z,{size:15,isHidden:!0}),(0,p.jsx)(D.Z,{style:x.settingsTitle,isSmall:!0,children:(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.addMoreMethodsSection.title",defaultMessage:"Add more methods"})}),C]}),I=[{text:(0,p.jsx)(u.FormattedMessage,{id:"mfa.updateSettings.turnOffVerification.button.message",defaultMessage:"Turn off 2-step verification"}),onClick:a,type:"button",view:"plain",isRed:!0}];return(0,p.jsx)(g.Z,{title:S,header:b,errorMessage:s,icon:(0,l.j)(x.icon),onDismiss:h,secondaryActions:I,children:T})}function ie(e){return(0,d.EM)({button:{marginBottom:5},settingsTitle:{color:e.mediumTextColor,fontWeight:c.Z.fontWeight.medium,marginBottom:8},icon:{width:30,height:30,fill:e.mediumIconColor}})}var ne=s(8848),oe=s(1799);function re(e){window.__c={n:"MFAPromptVerifyWithBackupCode"};const{isLoading:t,userStore:s,errorMessage:n,onDismiss:o,onVerifyBackupCode:r,onTryAnotherMethod:a}=e,l=(0,d.yK)(ae,[]),[c,m]=(0,i.useState)(""),h=(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.title",defaultMessage:"To continue, we need to verify your identity"}),f=(0,p.jsx)(u.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withBackupCode.header",defaultMessage:"Enter an unused one-time backup code."}),y={text:t?(0,p.jsx)(x.Z,{}):(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.button.message",defaultMessage:"Continue"}),onClick:()=>r(c.replace(/[^0-9a-zA-Z]/g,"")),disabled:t||""===c},S=[{text:(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withBackupCode.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>a(),disabled:t}];return(0,p.jsx)(g.Z,{title:h,header:f,icon:(0,p.jsx)(k,{userStore:s}),primaryAction:y,secondaryActions:S,errorMessage:n,onDismiss:o,children:(0,p.jsx)(K.Z,{type:"text",value:c,onChange:e=>{m((0,oe.K)(e.target.value))},placeholder:"0000-0000",style:l.backupCodeInput,disabled:t,autoFocus:!0})})}function ae(e){return(0,d.EM)({backupCodeInput:{width:"100%",background:"light"===e.mode?ne.ZP.transparent:e.inputBackground}})}function de(e){window.__c={n:"MFAPromptVerifyWithPassword"};const{isLoading:t,isForgotPasswordLoading:s,userStore:n,errorMessage:r,alertMessage:a,onDismiss:l,onVerifyPassword:c,onForgotPassword:m}=e,h=(0,d.yK)(le,[]),[f,y]=(0,i.useState)(""),S=(0,o.VK)((()=>null==n?void 0:n.getEmail()),[n]),b=(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.title",defaultMessage:"To continue, we need to verify your identity"}),v={text:t?(0,p.jsx)(x.Z,{}):(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.button.message",defaultMessage:"Continue"}),onClick:()=>c(f),disabled:t||""===f},M=[{text:(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withPassword.secondaryButton.message",defaultMessage:"Forgot password?"}),view:"plain",type:"button",disabled:s,onClick:()=>m(S)}];return(0,p.jsx)(g.Z,{title:b,header:S,icon:(0,p.jsx)(k,{userStore:n}),primaryAction:v,secondaryActions:M,errorMessage:r,alertMessage:a,onDismiss:l,children:(0,p.jsx)(K.Z,{type:"password",value:f,onChange:e=>y(e.target.value),placeholder:"Your password",style:h.passwordInput,disabled:t,autoComplete:"current-password",autoFocus:!0})})}function le(){return(0,d.EM)({passwordInput:{width:"100%"}})}var ce=s(72126),ue=s(73602),me=s(11898);function ge(e){window.__c={n:"MFAPromptVerifyWithSMS"};const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:o,resentStatus:r,resentAt:a,onDismiss:d,onVerifySMS:l,onResendLink:c,onTryAnotherMethod:m}=e,[h,f]=(0,i.useState)([]),y=(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.title",defaultMessage:"To continue, we need to verify your identity"}),S=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withSMS.header",defaultMessage:"Enter the code sent to {phoneHint}.",values:{phoneHint:`${t.phoneNumber}`}})," ",(0,p.jsx)(ue.y,{resentAt:a,resentStatus:r,onResendLink:c})]}),b={text:s?(0,p.jsx)(x.Z,{}):(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.button.message",defaultMessage:"Continue"}),onClick:()=>l(t.mfaSettingId,h.join("")),disabled:s||"resending"===r||6!==(0,ce.oA)(h).length},v=[{text:(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withSMS.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>m(),disabled:s}];return(0,p.jsx)(g.Z,{title:y,header:S,icon:(0,p.jsx)(k,{userStore:n}),primaryAction:b,secondaryActions:v,errorMessage:o,onDismiss:d,children:(0,p.jsx)("div",{children:(0,p.jsx)(me.ZP,{numInputs:6,value:h,format:"settings",disabled:!1,onChange:f,autoFocus:!0,isValidKey:me.rN})})})}function pe(e){window.__c={n:"MFAPromptVerifyWithTOTP"};const{mfaSetting:t,isLoading:s,userStore:n,errorMessage:o,onDismiss:r,onVerifyTOTP:a,onTryAnotherMethod:l}=e,c=(0,d.yK)(he,[]),[m,h]=(0,i.useState)([]),f=(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.title",defaultMessage:"To continue, we need to verify your identity"}),y=(0,p.jsx)(u.FormattedMessage,{id:"profileSeettings.mfa.verifyIdentity.withTOTP.header",defaultMessage:"Enter code from authenticator <boldtext>{friendlyName}</boldtext>.",values:{friendlyName:t.friendlyName,boldtext:e=>(0,p.jsx)("span",{style:c.boldText,children:e})}}),S={text:s?(0,p.jsx)(x.Z,{}):(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.button.message",defaultMessage:"Continue"}),onClick:()=>a({mfaSettingId:t.mfaSettingId,code:m.join("")}),disabled:s||6!==(0,ce.oA)(m).length},b=[{text:(0,p.jsx)(u.FormattedMessage,{id:"profileSettings.mfa.verifyIdentity.withTOTP.secondaryButton.message",defaultMessage:"Try another method"}),view:"plain",type:"button",onClick:()=>l(),disabled:s}];return(0,p.jsx)(g.Z,{title:f,header:y,icon:(0,p.jsx)(k,{userStore:n}),primaryAction:S,secondaryActions:b,errorMessage:o,onDismiss:r,children:(0,p.jsx)("div",{children:(0,p.jsx)(me.ZP,{numInputs:6,value:m,format:"settings",disabled:!1,onChange:h,autoFocus:!0,isValidKey:me.rN})})})}function he(e){return(0,d.EM)({boldText:{fontWeight:c.Z.fontWeight.semibold}})}function fe(e){window.__c={n:"SettingsRouter"};const{settingsStateMachine:t,onDismiss:s,onStartTOTP:i,onStartSMS:d,onStartBackupCodes:l}=e,c=(0,n.O7)(),u=(0,o.VK)((()=>(0,a.B7)(c)),[c]),m=t.useCurrentStep();switch(m.step){case"settingsUninitialized":return null;case"settingsVerifyWithPassword":return(0,p.jsx)(de,{isLoading:m.isLoading,isForgotPasswordLoading:m.isForgotPasswordLoading,userStore:u,errorMessage:m.error,alertMessage:m.alert,onVerifyPassword:e=>t.settingsVerifyPassword(e),onForgotPassword:e=>t.settingsForgotPassword(e),onDismiss:s});case"settingsVerifyChooseMFAMethod":return(0,p.jsx)(T,{isSMSLoading:m.isSMSLoading,chosenMfaSettingId:m.chosenMfaSettingId,mfaSettings:m.mfaSettings,userStore:u,errorMessage:m.error,onClick:e=>t.settingsChooseVerifyMethod(e),onDismiss:s});case"settingsVerifyWithTOTP":return(0,p.jsx)(pe,{isLoading:m.isLoading,mfaSetting:m.mfaSetting,userStore:u,errorMessage:m.error,onDismiss:s,onVerifyTOTP:e=>t.settingsVerifyTOTP(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithSMS":return(0,p.jsx)(ge,{isLoading:m.isLoading,mfaSetting:m.mfaSetting,userStore:u,errorMessage:m.error,resentAt:m.resentAt,resentStatus:m.resentStatus,onDismiss:s,onVerifySMS:(e,s)=>t.settingsVerifySMS({mfaSettingId:e,code:s}),onResendLink:()=>t.settingsVerifyResendSMS(m.mfaSetting.mfaSettingId),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsVerifyWithBackupCode":return(0,p.jsx)(re,{isLoading:m.isLoading,userStore:u,errorMessage:m.error,onDismiss:s,onVerifyBackupCode:e=>t.settingsVerifyBackupCode(e),onTryAnotherMethod:()=>t.settingsTryAnotherMethod()});case"settingsLoadSettings":return null;case"settingsInitialSetup":return(0,p.jsx)(h,{errorMessage:m.error,onStartTOTP:i,onStartSMS:d,onDismiss:s});case"settingsShowSettings":const e=m.mfaSettings;return(0,p.jsx)(se,{mfaSettings:e,errorMessage:m.error,onStartTOTP:i,onStartSMS:d,onStartBackupCodes:l,onTurnOffMFA:()=>t.settingsConfirmDisableMFA(),onDismiss:s,onDeleteMethod:e=>t.settingsConfirmDelete(e),onUpdateMethod:e=>t.settingsUpdate(e)});case"settingsDeleteSettings":return(0,p.jsx)(S,{isLoading:m.isLoading,mfaSetting:m.mfaSettingToDelete,errorMessage:m.error,onDismiss:s,onCancel:()=>t.settingsConfirmIdentityForSettings(),onDeleteMethod:()=>t.settingsDelete()});case"settingsConfirmIdentity":case"settingsDisableMFA":const n="settingsConfirmIdentity"===m.step&&"disableMFA"===m.source;return"settingsDisableMFA"===m.step||n?(0,p.jsx)(A,{isLoading:n,lastMFASetting:m.lastMFASetting,errorMessage:m.error,onDismiss:s,onTurnOffMFA:()=>t.settingsDisableMFA(),onCancel:()=>t.settingsConfirmIdentityForSettings()}):null;case"settingsIdentityConfirmed":return"disableMFA"===m.source?(0,p.jsx)(F,{errorMessage:m.error,onDismiss:s}):null;default:return(0,r.t1)(m)}}},49682:(e,t,s)=>{s.d(t,{Q3:()=>d,Qj:()=>r,to:()=>a});s(67294);var i=s(97880),n=s(68939),o=s(85893);const r={unexpectedError:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.unexpectedError",defaultMessage:"Something went wrong, please try again."}),smsIncorrectCode:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.incorrectSMSCode",defaultMessage:"The code didn’t work, try typing it again or resend code."}),smsInvalidCountryCode:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.smsInvalidCountryCode",defaultMessage:"The country code is not valid."}),smsInvalidPhoneCode:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.smsInvalidPhoneNumber",defaultMessage:"The phone number is not valid."}),smsUnsupportedCountryCodeForEnrollment:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.smsUnsupportedCountryCodeForEnrollment",defaultMessage:"SMS authentication is currently not supported for this country. You may consider using an authenticator app as an alternative authentication method."}),smsEmptyPhoneNumber:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.smsEmptyPhoneNumber",defaultMessage:"Phone number cannot be empty."}),smsAlreadyVerifiedPhoneNumber:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.smsAlreadyVerifedPhoneNumber",defaultMessage:"This phone number has already been verified."}),smsUnsupportedPhoneNumber:e=>(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.unsupportedPhoneNumber",defaultMessage:"SMS authentication is currently not available in {countryName}. You may consider using an authenticator app as an alternative authentication method.",values:{countryName:e}}),totpIncorrectCode:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.incorrectTOTPCode",defaultMessage:"The code didn’t work, try typing it again."}),totpEmptyFriendlyName:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.totpEmptyFriendlyName",defaultMessage:"Authenticator name cannot be empty."}),totpDuplicateFriendlyName:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.totpDuplicateFriendlyName",defaultMessage:"Authenticator name is already in use."}),totpBadFriendlyName:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.totpBadFriendlyName",defaultMessage:"Authenticator name cannot be used."}),backupCodeIncorrectCode:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.incorrectBackupCode",defaultMessage:"The backup code didn’t work, try typing it again or use a different one."}),incorrectPassword:(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.error.incorrectPassword",defaultMessage:"Incorrect password."})},a={passwordResentLinkSent:e=>(0,o.jsx)(n.FormattedMessage,{id:"general.mfa.passwordResentLinkSent",defaultMessage:"A password reset link has been sent to {email}.",values:{email:e}})};function d(e){switch(e){case"totp":return r.totpIncorrectCode;case"sms":return r.smsIncorrectCode;case"backup_code":return r.backupCodeIncorrectCode;default:throw(0,i.t1)(e)}}},24173:(e,t,s)=>{s.d(t,{W:()=>u,c:()=>c});var i=s(49085),n=s(62965),o=s(97880),r=s(69503),a=s(49682),d=s(16010);const l={settingsVerifyWithPassword:a.Qj.incorrectPassword,settingsVerifyWithSMS:a.Qj.smsIncorrectCode,settingsVerifyWithTOTP:a.Qj.totpIncorrectCode,settingsVerifyWithBackupCode:a.Qj.backupCodeIncorrectCode};class c extends i.default{getInitialState(){return{step:"settingsUninitialized"}}}class u extends d.o{constructor(e,t){super(e,"settings"),this.service=void 0,this.service=t}settingsConfirmIdentityForPasswordSetting(){this.checkStep("settingsUninitialized")&&(this.store.setState({step:"settingsConfirmIdentity",source:"passwordSetting"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsConfirmIdentityForSettings(){this.checkStep(["settingsUninitialized","settingsDeleteSettings","settingsDisableMFA"])&&(this.store.setState({step:"settingsConfirmIdentity",source:"settings"}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}settingsVerifyPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithPassword(e).catch(this.handleUnexpectedError))}settingsForgotPassword(e){const t=this.checkStep("settingsVerifyWithPassword");t&&(this.store.setState({...t,isForgotPasswordLoading:!0}),this.doForgotPassword(e).catch(this.handleUnexpectedError))}settingsChooseVerifyMethod(e){const t=this.checkStep("settingsVerifyChooseMFAMethod");if(!t)return;const s=e.mfaMethod;switch(s){case"sms":this.store.setState({...t,isSMSLoading:!0,chosenMfaSettingId:e.mfaSettingId}),this.doVerifyIdentitySendSMS({mfaSetting:e});break;case"totp":this.store.setState({mfaSetting:e,step:"settingsVerifyWithTOTP",isLoading:!1,source:t.source});break;case"backup_code":this.store.setState({step:"settingsVerifyWithBackupCode",isLoading:!1,source:t.source});break;default:(0,o.t1)(s)}}settingsTryAnotherMethod(){this.checkStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"])&&this.doTryAnotherMethod().catch(this.handleUnexpectedError)}settingsVerifyTOTP(e){const t=this.checkStep("settingsVerifyWithTOTP");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithTOTP(e).catch(this.handleUnexpectedError))}settingsVerifySMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithSMS(e).catch(this.handleUnexpectedError))}settingsVerifyResendSMS(e){const t=this.checkStep("settingsVerifyWithSMS");t&&(this.store.setState({...t,resentStatus:"resending"}),this.doVerifyIdentityResendSMS(e).catch(this.handleUnexpectedError))}settingsVerifyBackupCode(e){const t=this.checkStep("settingsVerifyWithBackupCode");t&&(this.store.setState({...t,isLoading:!0}),this.doVerifyIdentityWithBackupCode({code:e}).catch(this.handleUnexpectedError))}settingsShow(e){const{refresh:t}=e,s=this.getCurrentStep();if("settingsUninitialized"===s.step)return this.settingsConfirmIdentityForSettings();t&&("settingsShowSettings"===s.step||"settingsInitialSetup"===s.step)&&(this.store.setState({step:"settingsLoadSettings"}),this.doLoadSettings().catch(this.handleUnexpectedError))}settingsUpdate(e){this.checkStep("settingsShowSettings")&&this.doUpdateSettings(e).catch(this.handleUnexpectedError)}settingsConfirmDelete(e){const t=this.checkStep("settingsShowSettings");if(!t)return;t.mfaSettings.find((t=>t.mfaSettingId===e.mfaSettingId));1===t.mfaSettings.filter((e=>"totp"===e.mfaMethod||"sms"===e.mfaMethod)).length?this.store.setState({step:"settingsDisableMFA",lastMFASetting:e}):this.store.setState({step:"settingsDeleteSettings",mfaSettings:t.mfaSettings,mfaSettingToDelete:e,isLoading:!1})}settingsDelete(){const e=this.checkStep("settingsDeleteSettings");e&&(this.store.setState({...e,isLoading:!0}),this.doDeleteSettings(e.mfaSettingToDelete.mfaSettingId).catch(this.handleUnexpectedError))}settingsConfirmDisableMFA(){this.checkStep("settingsShowSettings")&&this.store.setState({step:"settingsDisableMFA"})}settingsDisableMFA(){const e=this.checkStep("settingsDisableMFA");e&&(this.store.setState({step:"settingsConfirmIdentity",source:"disableMFA",lastMFASetting:e.lastMFASetting}),this.doConfirmIdentity().catch(this.handleUnexpectedError))}exit(){this.store.setState({step:"settingsUninitialized"})}async doConfirmIdentity(){const e=await this.withStep("settingsConfirmIdentity",(()=>this.service.confirmIdentity()));if(!e)return;const{result:t,state:s}=e,i=t.status;switch(i){case"ready":this.store.setState({step:"settingsIdentityConfirmed",source:s.source});const e=s.source;"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(r.Z.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,o.t1)(e);break;case"mfa":this.store.setState({step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings,source:s.source});break;case"password":this.store.setState({step:"settingsVerifyWithPassword",isLoading:!1,isForgotPasswordLoading:!1,source:"settings"});break;default:throw(0,o.t1)(i)}}async doForgotPassword(e){if(!e)return void this.store.setState({step:"settingsVerifyWithPassword",source:"settings",isLoading:!1,isForgotPasswordLoading:!1,error:a.Qj.unexpectedError});const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.sendTemporaryPassword({email:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isForgotPasswordLoading:!1,alert:a.to.passwordResentLinkSent(e)});break;case"error":this.store.setState({...i,isForgotPasswordLoading:!1,error:a.Qj.unexpectedError});break;default:return(0,o.t1)(s.status)}}async doVerifyIdentityWithPassword(e){const t=await this.withStep("settingsVerifyWithPassword",(()=>this.service.verifyIdentityWithPassword({password:e})));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithTOTP(e){const t=await this.withStep("settingsVerifyWithTOTP",(()=>this.service.verifyIdentityWithTOTP(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityWithSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.verifyIdentityWithSMS(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async doVerifyIdentityResendSMS(e){const t=await this.withStep("settingsVerifyWithSMS",(()=>this.service.sendSMS({mfaSettingId:e})));if(!t)return;const{result:s,state:i}=t;switch(s.status){case"ok":this.store.setState({...i,isLoading:!1,resentStatus:"resent",resentAt:Date.now()});break;case"error":this.store.setState({...i,resentStatus:"not-resent",error:a.Qj.unexpectedError});break;default:return(0,o.t1)(s.status)}}async doVerifyIdentityWithBackupCode(e){const t=await this.withStep("settingsVerifyWithBackupCode",(()=>this.service.verifyBackupCode(e)));if(!t)return;const{result:s,state:i}=t;await this.handleVerifyIdentityResponse({status:s.status,state:i})}async handleVerifyIdentityResponse(e){const{status:t,state:s}=e;switch(t){case"match":const e=s.source;this.store.setState({step:"settingsIdentityConfirmed",source:s.source}),"settings"===e?await this.doLoadSettings():"disableMFA"===e?await this.doDisableMFA():"passwordSetting"===e?(r.Z.setState({open:!0,setNewPassword:!0,isSet:!1,password:"",repeatPassword:""}),this.exit()):(0,o.t1)(e);break;case"incorrect":this.store.setState({...s,isLoading:!1,error:l[s.step]});break;case"error":this.store.setState({...s,isLoading:!1,error:a.Qj.unexpectedError});break;default:return(0,o.t1)(t)}}async doTryAnotherMethod(){const e=await this.withStep(["settingsVerifyWithSMS","settingsVerifyWithTOTP","settingsVerifyWithBackupCode"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e;t.settings.length>0?this.store.setState({...s,step:"settingsVerifyChooseMFAMethod",mfaSettings:t.settings}):this.store.setState({...s,error:a.Qj.unexpectedError})}async doLoadSettings(){const e=await this.withStep(["settingsLoadSettings","settingsIdentityConfirmed"],(()=>this.service.loadSettings()));if(!e)return;const{result:t,state:s}=e,i=s.step;switch(i){case"settingsIdentityConfirmed":case"settingsLoadSettings":t.settings.length>0?this.store.setState({step:"settingsShowSettings",mfaSettings:t.settings}):this.store.setState({step:"settingsInitialSetup"});break;default:return(0,o.t1)(i)}}async doVerifyIdentitySendSMS(e){const{mfaSetting:t}=e,s=await this.withStep("settingsVerifyChooseMFAMethod",(()=>this.service.sendSMS({mfaSettingId:t.mfaSettingId})));if(!s)return;const{result:i,state:n}=s;switch(i.status){case"ok":this.store.setState({mfaSetting:t,step:"settingsVerifyWithSMS",isLoading:!1,resentAt:0,resentStatus:"not-resent",source:n.source});break;case"error":break;default:return(0,o.t1)(i.status)}}async doUpdateSettings(e){const{mfaMethod:t,mfaSettingId:s}=e;if("totp"!==t)return;const i=await this.withStep("settingsShowSettings",(()=>this.service.renameSettings({mfaSettingId:s,friendlyName:e.friendlyName})));if(!i)return;const{result:o,state:r}=i;"saved"===o.status?o.settings.length>0&&!(0,n.Z)(o,r.mfaSettings)?this.store.setState({step:"settingsShowSettings",mfaSettings:o.settings}):this.store.setState({...r,error:void 0}):this.store.setState({...r,error:"duplicate"===o.status?a.Qj.totpDuplicateFriendlyName:"bad_friendly_name"===o.status?a.Qj.totpBadFriendlyName:a.Qj.totpEmptyFriendlyName})}async doDisableMFA(){const e=await this.withStep("settingsIdentityConfirmed",(()=>this.service.disableMFA()));if(!e)return;const{result:t}=e;switch(t.status){case"ok":case"error":break;default:return(0,o.t1)(t.status)}}async doDeleteSettings(e){const t=await this.withStep("settingsDeleteSettings",(()=>this.service.deleteSettings(e)));if(!t)return;const{result:s}=t;this.store.setState({step:"settingsShowSettings",mfaSettings:s.settings})}}},16010:(e,t,s)=>{s.d(t,{o:()=>l});var i=s(86628),n=s(68626),o=s(91155),r=s(33954),a=s(33929),d=s(49682);class l{constructor(e,t){this.debugName=void 0,this.store=void 0,this.handleUnexpectedError=e=>{const t={...this.store.getState()};if("object"==typeof e&&null!==e){const s=e,{body:i,error:l,data:c}=s;let u;if(i)u=i;else if(c){u=c.responseBody}if(u){if("object"==typeof u&&null!==u){const e=u,{clientData:s}=e;if(s){const e=s,i=(0,r.mH)(e);if(i){const e=a.default.getIntl();this.store.setState({...t,error:e.formatMessage(i)})}}}}else n.log({level:"error",from:this.debugName,type:"handleUnexpectedError",error:(0,o.Ui)(l)}),this.store.setState({...t,error:d.Qj.unexpectedError})}else this.store.setState({...t,error:d.Qj.unexpectedError})},this.store=e,this.debugName=t}getState(){return this.store.getState()}getCurrentStep(){return this.store.getState()}useCurrentStep(){const[e]=(0,i.AF)(this.store);return e}async withStep(e,t){const s=this.store.getState();if(!(Array.isArray(e)?e.includes(s.step):s.step===e))return;const i=await t(s),n=this.store.getState();return n.step===s.step?{result:i,state:n}:void 0}checkStep(e){const t=this.store.getState();if(Array.isArray(e)?e.includes(t.step):t.step===e)return t}}},64768:(e,t,s)=>{s.d(t,{ms:()=>de,Xr:()=>le,dy:()=>ae,ZP:()=>re});var i=s(67294),n=s(480),o=s(86628),r=s(24405),a=s(8843),d=s(82990),l=s(68939),c=s(5851),u=s(39699),m=s(78730),g=s(4708),p=s(80444),h=s(53680),f=s(44041),y=s(91694),x=s(68785),S=s(24006),b=s(64369),v=s(23189),M=s(51221),w=s(93963),j=s(40235),k=(s(57658),s(7057)),C=s(53877),T=s(33728),I=s(42875),P=s(85397),F=s(42853),_=s(5257),Z=s(59753),A=s(97880),R=s(48298),B=s(64964),E=s(64921),O=s(63296),D=s(89728),N=s(26388),V=s(29302),U=s(45653),L=s(15145),q=s(86517),G=s(21202),W=s(75018),K=s(84210),z=s(26136),H=s(84076),Q=s(31278),Y=s(76798),$=s(85893);function X(e){window.__c={n:"PageTitleWithRole"};const{pageAndRole:t,environment:s,intl:i,accessRequestStore:n}=e,a=(0,r.yK)((e=>({title:{marginLeft:2},role:{marginLeft:4},linkContainer:{display:"inline-flex",alignItems:"center"}})),[]),d=(0,o.VK)((()=>z.G.createChildStore(n,{table:G.iU,id:t.id})),[n,t.id]),l=(0,o.VK)((()=>{var e;return null===(e=d.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:d.getRecordModel})}),[d]),c=(0,o.VK)((()=>(0,K.ZP)({store:d,pageVisitSource:L.tY.LinkInPage})),[d]);return(0,$.jsxs)(H.Z,{style:a.linkContainer,onClick:()=>{W.navigate({environment:s,url:c,openInNew:"tab"})},children:[(0,$.jsx)(Q.Z,{icon:l,size:16,isEmptyPage:!1,disabled:!0}),(0,$.jsx)("b",{children:(0,$.jsx)(Y.Z,{style:a.title,store:d})}),(0,$.jsx)(b.Z,{style:a.role,isSecondaryColor:!0,children:`(${i.formatMessage((0,q.kD)(t.role,G.iU)).toLocaleLowerCase()})`})]})}function J(e){window.__c={n:"SpaceSettingsRequestRow"};const{store:t,request:s}=e,{forActor:a,accessRequestStore:d}=s,c=(0,n.O7)(),u=(0,r.yK)((e=>({actionButtons:{display:"flex",alignItems:"center",gap:12},requestMetadata:{minWidth:0,marginLeft:10,marginRight:6},tooltip:{marginBottom:2},tooltipHeader:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em",marginBottom:2},tooltipUserRow:{display:"flex",justifyContent:"space-between",marginBottom:4},tooltipUserRowEmail:{marginLeft:5},requestBody:{marginLeft:38,marginTop:8}})),[]),m=(0,l.useIntl)(),p=(0,i.useMemo)((()=>Z.kk.fromAccessRequest(s.accessRequest)),[s]),h=(0,o.VK)((()=>{var e;const t=[],i=new Set;return null===(e=s.createdByActorsWithReason)||void 0===e||e.forEach((e=>{i.has(e.actor.id)||t.push(e.actor),i.add(e.actor.id)})),t}),[s.createdByActorsWithReason]),f=(0,o.VK)((()=>s.createdByActorsWithReason.filter((e=>{let{reason:t}=e;return Boolean(t)})).map((e=>`${e.actor.name} · ${e.reason}`))),[s]),y=(0,o.VK)((()=>{var e;return p.isGuestInviteRequest()?null===(e=p.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e?void 0:e[0]:void 0}),[p]),x=(0,o.VK)((()=>(0,g.wd)()),[]),S=(0,o.VK)((()=>{if(!p.isGuestInviteRequest())return;const e=(0,T.H3)(s.forActor.email),i=e&&(0,T.Gd)(e);return i?t.getEmailDomains().find((e=>e===i)):void 0}),[p,s.forActor,t]),v=(0,i.useCallback)((()=>{p.isGuestInviteRequest()?R.yW({environment:c,accessRequest:p,status:"approved",from:"requests_center",forActor:Z.kk.fromUser(a),onResolveComplete:e=>{e?B.oV({label:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.success",defaultMessage:"Invited {actorEmail} as guest",values:{actorEmail:a.email}})}):B.oV({label:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveGuestInvite.failure",defaultMessage:"Failed to invite {actorEmail} as a guest",values:{actorEmail:a.email}})})}}):p.isSpaceMembershipRequest()&&R.kn({environment:c,store:t,accessRequestStore:d,forActor:a,status:"approved",from:"requests_center",onResolveComplete:e=>{e?B.oV({label:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.success",defaultMessage:"Added {actorEmail} as a member",values:{actorEmail:a.email}})}):B.oV({label:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequestRow.requestRowActions.toast.approveSpaceMembership.failure",defaultMessage:"Failed to add {actorEmail} as a member",values:{actorEmail:a.email}})})}})}),[p,c,d,a,t]),M=(0,i.useCallback)((()=>{p.isGuestInviteRequest()?R.yW({environment:c,accessRequest:p,status:"rejected",from:"requests_center",forActor:Z.kk.fromUser(a)}):p.isSpaceMembershipRequest()&&R.kn({environment:c,store:t,accessRequestStore:d,forActor:a,status:"rejected",from:"requests_center"})}),[p,c,d,a,t]);if(!s||!s.forActor||!s.createdByActorsWithReason.length)return null;const w=C.CQ(s.latestRequestTime,(0,I.r)()),j=(0,k.ZV)({value:w,date_format:"relative",userTimeZone:(0,I.r)(),intl:m,allowRelativeDates:!0}),P=f.length>0||(0,A.$K)(y);return(0,$.jsxs)("div",{style:{width:"100%"},children:[(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,$.jsx)(ie,{forActor:s.forActor,type:p.getType(),shouldShowUpdatedRequestInbox:x}),(0,$.jsxs)("div",{style:u.requestMetadata,children:[(0,$.jsx)(se,{type:p.getType(),forActor:s.forActor,shouldShowUpdatedRequestInbox:x}),(0,$.jsxs)(b.Z,{isSmall:!0,children:[(0,$.jsx)(N.Z,{renderTooltip:()=>(0,$.jsxs)("div",{style:u.tooltip,children:[(0,$.jsx)(b.Z,{style:u.tooltipHeader,children:(0,$.jsx)(l.FormattedMessage,{defaultMessage:"Requested by",id:"spaceSettingsRequests.requestRowAction.requestedByMoreThanTwo.tooltip"})}),h.map((e=>(0,$.jsxs)("div",{style:u.tooltipUserRow,children:[(0,$.jsx)(V.Z,{avatarSize:18,userValue:e}),(0,$.jsx)("div",{style:u.tooltipUserRowEmail,children:e.email})]},e.id)))]}),render:e=>(0,$.jsx)("span",{...e,children:(0,$.jsx)(ne,{request:s,createdByActors:h,shouldShowUpdatedRequestInbox:x})})})," · ",j]})]})]}),(0,$.jsxs)("div",{style:u.actionButtons,children:[(0,$.jsx)(D.Z,{isGray:!0,onClick:M,children:(0,$.jsx)(l.FormattedMessage,{defaultMessage:"Decline",id:"spaceSettingsRequests.requestRowAction.declineButton.label"})}),(0,$.jsx)(N.Z,{render:e=>(0,$.jsx)(O.Z,{isBlue:!0,onClick:v,...e,children:(0,$.jsx)(l.FormattedMessage,{defaultMessage:"Approve",id:"spaceSettingsRequests.requestRowAction.acceptButton.label"})}),renderTooltip:()=>(0,$.jsx)("div",{style:{width:300},children:(0,$.jsx)(l.FormattedMessage,{defaultMessage:"This user will automatically be added to the workspace when approved since {domain} is an allowed email domain",id:"spaceSettingsRequests.requestRowAction.allowedEmailDomain.tooltip",values:{domain:S}})}),disableTooltip:!S,textWrap:!0,placement:N.Z.Placement.Bottom})]})]}),P&&(0,$.jsxs)("div",{style:u.requestBody,children:[y&&(0,$.jsx)(X,{accessRequestStore:s.accessRequestStore,pageAndRole:y,environment:c,intl:m}),f.length>0&&(0,$.jsx)(te,{reasonMessages:f})]})]})}const ee=e=>(0,$.jsx)("b",{children:e});function te(e){window.__c={n:"ViewReasonsToggle"};const{reasonMessages:t}=e,[s,n]=(0,i.useState)(!1),o=(0,r.yK)((e=>({viewReasonsToggle:{paddingLeft:2,paddingRight:2,borderRadius:2,display:"inline-flex",alignItems:"center"},viewReasonsCaratIcon:{marginLeft:2,width:12,height:12,color:e.accentColors.gray[500]},reasonMessageBody:{marginTop:2}})),[]);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(E.Z,{style:o.viewReasonsToggle,onClick:()=>n(!s),children:[(0,$.jsx)(b.Z,{isSmall:!0,children:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.requestRowAction.viewReasonsButton.label",defaultMessage:"View reasons"})}),s?(0,F.i)(o.viewReasonsCaratIcon):(0,_.o)(o.viewReasonsCaratIcon)]}),s&&(0,$.jsx)("div",{style:o.reasonMessageBody,children:t.map(((e,t)=>(0,$.jsx)("div",{children:e},t)))})]})}function se(e){window.__c={n:"RequestTitle"};const{shouldShowUpdatedRequestInbox:t,forActor:s,type:i}=e,n=(0,r.yK)((e=>({title:{display:"flex",gap:4},semibold:{fontWeight:d.Z.fontWeight.semibold}})),[]);if(!t)return(0,$.jsx)("div",{style:n.title,children:(0,$.jsx)(b.Z,{className:"notranslate",children:s.email})});const o="guest_invite_request"===i?(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.requestRow.title.guestInviteRequest",defaultMessage:"Invite {actorEmail} as a guest",values:{actorEmail:(0,$.jsx)("span",{style:n.semibold,children:s.email})}}):(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.requestRow.title.membershipRequest",defaultMessage:"Add {actorEmail} as a member",values:{actorEmail:(0,$.jsx)("span",{style:n.semibold,children:s.email})}});return(0,$.jsx)("div",{style:n.title,children:(0,$.jsx)(b.Z,{className:"notranslate",children:o})})}function ie(e){window.__c={n:"RequestAvatar"};const{type:t,shouldShowUpdatedRequestInbox:s,forActor:i}=e,n=(0,r.yK)((e=>({avatarWrapper:{borderRadius:"100%",background:e.accentColors.gray[75],width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center"},addPersonIcon:{width:18,height:18,color:e.accentColors.gray[500]}})),[]);return s&&"guest_invite_request"===t?(0,$.jsx)("div",{style:n.avatarWrapper,children:(0,P.a)(n.addPersonIcon)}):(0,$.jsx)(U.Z,{userValue:i,size:28,borderStyle:"dashed"})}function ne(e){const{createdByActors:t,request:s,shouldShowUpdatedRequestInbox:i}=e,n=t.filter((e=>e.email!==s.forActor.email)),o=n.length!==t.length;return i?1===t.length?o?(0,$.jsx)(l.FormattedMessage,{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}):(0,$.jsx)(l.FormattedMessage,{defaultMessage:"Requested by <b>{actorName}</b>",id:"spaceSettingsRequests.requestRowAction.requestedBySingular.v2",values:{actorName:t[0].name,b:ee}}):o?(0,$.jsx)(l.FormattedMessage,{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and requested by <b>{secondActorName}</b>} other {Guest self request and requested by <b>{numberOfOtherActors}</b> more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest.v2",values:{secondActorName:n[0].name,numberOfOtherActors:n.length,b:ee}}):(0,$.jsx)(l.FormattedMessage,{defaultMessage:"{numberOfOtherActors, plural, one {Requested by {firstActorName} and {secondActorName}} other {Requested by {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural.v2",values:{firstActorName:t[0].name,secondActorName:t[1].name,numberOfOtherActors:t.length-1}}):1===t.length?o?(0,$.jsx)(l.FormattedMessage,{defaultMessage:"Guest self request",id:"spaceSettingsRequests.requestRowAction.requestedBySingularGuestSelfRequest"}):(0,$.jsx)(l.FormattedMessage,{defaultMessage:"From {actorName}",id:"spaceSettingsRequests.requestRowAction.requestedBySingular",values:{actorName:t[0].name}}):o?(0,$.jsx)(l.FormattedMessage,{defaultMessage:"{numberOfOtherActors, plural, one {Guest self request and from {secondActorName}} other {Guest self request and from {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPluralIncludingGuestSelfRequest",values:{secondActorName:n[0].name,numberOfOtherActors:n.length}}):(0,$.jsx)(l.FormattedMessage,{defaultMessage:"{numberOfOtherActors, plural, one {From {firstActorName} and {secondActorName}} other {From {firstActorName} and {numberOfOtherActors} more}}",id:"spaceSettingsRequests.requestRowAction.requestedByPlural",values:{firstActorName:t[0].name,secondActorName:t[1].name,numberOfOtherActors:t.length-1}})}function oe(e){window.__c={n:"SpaceSettingsRequestsTable"};const{spaceStore:t,accessRequestRenderValues:s,lastOpenedRequestCenterTime:i}=e,n=(0,o.VK)((()=>s.filter((e=>"pending"===e.accessRequestStore.getKeyStore("status").getValue())).sort(((e,t)=>t.latestRequestTime-e.latestRequestTime))),[s]),d=(0,r.yK)((e=>({requestColumn:{width:"100%"},zeroStateContainer:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor,borderStyle:"solid",borderColor:e.regularDividerColor,borderWidth:1,borderRadius:4},mailIcon:{height:12,width:17,color:e.mediumIconColor,marginRight:6}})),[]),c={key:"request",header:void 0,style:d.requestColumn};return 0===n.length?(0,$.jsxs)("div",{style:d.zeroStateContainer,children:[(0,a.h)(d.mailIcon),(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.emptyRequests.message",defaultMessage:"No invite requests yet"})]}):(0,$.jsx)(j.Z,{hideHeader:!0,columns:[c],rows:n.map(((e,s)=>({key:`request${s.toString()}`,columns:[(0,$.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[i<e.accessRequest.created_time&&(0,$.jsx)("div",{style:{marginLeft:-18,marginRight:10},children:(0,$.jsx)(w.z,{size:8})}),(0,$.jsx)(J,{store:t,request:e})]},e.accessRequest.id)]})))})}function re(e){window.__c={n:"SpaceSettingsRequests"};const{spaceStore:t,accessRequestsStore:s}=e,c=(0,n.O7)(),[m,f]=(0,i.useState)(Date.now()),[,,y]=(0,o.AF)(void 0,h.Z),S=(0,o.VK)((()=>y.getValueForSpace(t)),[t,y]),[b,,]=(0,o.AF)(s),w=(0,o.VK)((()=>b.result?b.result.filter((e=>"pending"===e.accessRequestStore.getKeyStore("status").getValue())).length:0),[b]),j=(0,o.VK)((()=>(0,g.wd)()),[]),k=(0,o.VK)((()=>t.canAdmin()),[t]),C=(0,r.yK)((e=>({errorContainer:{display:"flex",justifyContent:"center",alignItems:"center",padding:40,color:e.mediumTextColor},settingHeader:{fontSize:16,fontWeight:d.Z.fontWeight.medium},requestCount:{color:e.lightTextColor}})),[]);(0,i.useEffect)((()=>{const{currentSpaceViewStore:e}=p.default.state;if(!e)return;const t=e.getKeyStore("settings").getKeyStore("last_opened_request_center").getValue();t&&f(t),u.createAndCommit({userAction:"SpaceSettingsRequests.updateLastOpened",environment:c,perform:t=>{u.applyOperation({store:e,operation:{pointer:e.pointer,path:["settings","last_opened_request_center"],command:"set",args:Date.now()},transaction:t})}})}),[]);return T=b.error,I=b.result,b.ready?T||!I?(0,$.jsx)("div",{style:C.errorContainer,children:(0,$.jsx)(l.FormattedMessage,{defaultMessage:"Something went wrong.",id:"notificationUpdates.unknownErrorMessage"})}):(0,$.jsxs)($.Fragment,{children:[j&&k?(0,$.jsx)(M.Z,{icon:a.h,title:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequest.deeplinkCard.title",defaultMessage:"Change request settings in the <bold>Security</bold> tab",values:{bold:e=>(0,$.jsx)("span",{style:{fontWeight:d.Z.fontWeight.semibold},children:e})}}),deeplinkTab:{currentTab:"security",defaultSubtab:void 0}}):null,j?k?null:(0,$.jsx)(ue,{securitySettingsStoreState:S,spaceStore:t,environment:c,isReadOnly:!0}):(0,$.jsx)(ue,{securitySettingsStoreState:S,spaceStore:t,environment:c,isReadOnly:!1}),(0,$.jsxs)(v.Z,{divider:"none",large:!0,style:C.settingHeader,children:[(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequest.title",defaultMessage:"Requests"}),(0,$.jsx)("span",{children:" "}),(0,$.jsx)("span",{style:C.requestCount,children:w>0?w:void 0})]}),(0,$.jsx)(oe,{spaceStore:t,accessRequestRenderValues:I,lastOpenedRequestCenterTime:m})]}):(0,$.jsx)("div",{style:C.errorContainer,children:(0,$.jsx)(x.Z,{})});var T,I}function ae(e){return(0,$.jsx)(ce,{...e,title:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.title",defaultMessage:"Allow members to request adding other members"}),description:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.allowMembersToRequestMembers.description",defaultMessage:"Members can submit requests to admins to add more members"})})}function de(e){return(0,$.jsx)(ce,{...e,title:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.title",defaultMessage:"Allow any user to request to be added as a member of the workspace"}),description:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.allowExternalUsersToRequestMembership.description",defaultMessage:"If enabled, users with teamspace invite links can submit requests to admins to be added as members"})})}function le(e){return(0,$.jsx)(ce,{...e,title:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.title",defaultMessage:"Allow page guests to request to be added as members to the workspace"}),description:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.allowGuestsToSelfRequest.description",defaultMessage:"Guests of the workspace can submit requests to admins to be added as members"})})}function ce(e){window.__c={n:"RequestToggle"};const{toggleOn:t,shouldShowUpsell:s,onClick:n,style:o,upsellOrigin:a,environment:d,description:c,title:u,isReadOnly:m}=e,g=(0,r.yK)((()=>({toggleContainer:{display:"flex",alignItems:"center",cursor:m?"auto":"pointer",marginBottom:14,...o},titleDescription:{fontSize:14,marginRight:8,flexGrow:1},description:{marginTop:2,width:"80%"}})),[o,m]),p=(0,i.useCallback)((()=>{m||(s?f.y(d,{from:a,for:"plus"}):n())}),[d,a,m,s,n]);return(0,$.jsxs)("div",{style:g.toggleContainer,onClick:p,children:[(0,$.jsxs)("div",{style:g.titleDescription,children:[u,s?(0,$.jsx)(y.Z,{subscriptionTier:"plus",analyticsName:a,onClick:()=>f.y(d,{from:a,for:"plus"}),desktopStyle:{display:"inline-block",marginLeft:8,marginTop:-3}}):null,(0,$.jsx)(b.Z,{isSmall:!0,isMultiline:!0,style:g.description,children:c})]}),m?(0,$.jsx)(b.Z,{isSmall:!0,children:(0,$.jsx)(l.FormattedMessage,{id:"spaceSettingsRequests.readOnlyState.label",defaultMessage:"{isEnabled, select, true {Enabled} other {Disabled}}",values:{isEnabled:t}})}):(0,$.jsx)(S.Z,{on:t,disabled:s})]})}function ue(e){window.__c={n:"RequestToggleSection"};const{securitySettingsStoreState:t,spaceStore:s,environment:n,isReadOnly:r}=e,a=Boolean(null==t?void 0:t.disableMembershipRequests),d=Boolean(null==t?void 0:t.disableExternalMembershipRequests),l=Boolean(null==t?void 0:t.disableGuestMembershipRequests),u=(0,o.VK)((()=>(0,m.U)(s,n)),[n,s]),p=(0,o.VK)((()=>(0,g.Or)()),[]),h=(0,i.useCallback)((()=>{t&&c.n(n,{securitySettingsState:{...t,disableMembershipRequests:!t.disableMembershipRequests},spaceStore:s})}),[n,t,s]),f=(0,i.useCallback)((()=>{t&&c.n(n,{securitySettingsState:{...t,disableExternalMembershipRequests:!t.disableExternalMembershipRequests},spaceStore:s})}),[n,t,s]),y=(0,i.useCallback)((()=>{t&&c.n(n,{securitySettingsState:{...t,disableGuestMembershipRequests:!t.disableGuestMembershipRequests},spaceStore:s})}),[n,t,s]);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(ae,{environment:n,upsellOrigin:"members_settings",toggleOn:!a,shouldShowUpsell:!1,isReadOnly:r,onClick:h}),p&&(0,$.jsx)(de,{environment:n,upsellOrigin:"members_settings",toggleOn:!d,shouldShowUpsell:!1,isReadOnly:r,onClick:f}),u&&(0,$.jsx)(le,{environment:n,upsellOrigin:"members_settings",toggleOn:!l,shouldShowUpsell:!1,isReadOnly:r,onClick:y})]})}},69098:(e,t,s)=>{s.d(t,{j:()=>c,o:()=>i});var i={};s.r(i),s.d(i,{showAsyncModal:()=>m,showAsyncModalComponent:()=>g,testOnly:()=>v});var n=s(67294),o=s(86628),r=s(49085);class a extends r.default{getInitialState(){return{asyncModals:[]}}}const d=new a;var l=s(85893);const c=n.memo((e=>{window.__c={n:"AsyncModalRenderer"};const{store:t=d}=e,s=(0,o.VK)((()=>t.state.asyncModals),[t]);return(0,l.jsx)(l.Fragment,{children:s.map((e=>{const{id:t,internalRenderModal:s,isOpen:i}=e,o=s(i);return(0,l.jsx)(n.Fragment,{children:o},t)}))})}));var u=s(4615);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return new Promise(((s,i)=>{try{p({asyncModal:x({renderModal:e,promiseResolve:s,promiseReject:i,store:t}),store:t})}catch(n){i(n)}}))}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;const s=t=>n.createElement(e,t);return m(s,t)}function p(e){const{asyncModal:t,store:s=d}=e;s.update((e=>({asyncModals:[...e.asyncModals,t]})))}function h(e){const{id:t,promiseResolve:s,store:i=d}=e;return e=>{const n=S({id:t,store:i});null!=n&&n.isOpen&&(b({id:t,store:i,update:{isOpen:!1}}),s(e))}}function f(e){const{id:t,promiseResolve:s,store:i=d}=e;return()=>{const e=S({id:t,store:i});null!=e&&e.isOpen&&(b({id:t,store:i,update:{isOpen:!1}}),s())}}function y(e){const{id:t,store:s=d}=e;return()=>{s.update((e=>({asyncModals:e.asyncModals.filter((e=>e.id!==t))})))}}function x(e){const{renderModal:t,promiseResolve:s,promiseReject:i,store:n=d}=e,o=(0,u.ZP)(),r=y({id:o,store:n}),a=f({id:o,promiseResolve:s,store:n}),l=h({id:o,promiseResolve:s,store:n});return{id:o,internalRenderModal:e=>{try{return t({isOpen:e,onClosed:r,onDismiss:a,resolve:l})}catch(s){throw i(s),s}},isOpen:!0}}function S(e){const{id:t,store:s=d}=e;return s.state.asyncModals.find((e=>e.id===t))}function b(e){const{id:t,update:s,store:i=d}=e;i.update((e=>({asyncModals:e.asyncModals.map((e=>e.id!==t?e:{...e,...s}))})))}const v={addAsyncModal:p,createAsyncModal:x,createOnClosed:y,createOnDismiss:f,createResolve:h,getAsyncModal:S,updateAsyncModal:b}},78730:(e,t,s)=>{s.d(t,{U:()=>n});var i=s(4708);function n(e,t){return e.getKeyStore("settings").getKeyStore("seen_guest_membership_requests").getValue()&&(0,i.Ye)(t)}},3924:(e,t,s)=>{s.d(t,{M:()=>a});var i=s(67294),n=s(480),o=s(54642),r=s(85893);function a(e){return t=>{const s=(0,n.O7)(),[a,d]=(0,i.useState)({isDomainVerified:!1,settings:{}});(0,i.useEffect)((()=>{o.getEmailDomainSettings(s,{}).then((e=>{"success"===e.type&&d(e.data)}))}),[s]);const l={...t,userEmailDomainSettings:a};return(0,r.jsx)(e,{...l})}}},71119:(e,t,s)=>{s.d(t,{UG:()=>l,cR:()=>c,pf:()=>d,pu:()=>u});var i=s(97880),n=s(68939),o=s(54642),r=s(33929);const a=(0,n.defineMessages)({sms:{id:"mfaMethod.sms",defaultMessage:"SMS"},totp:{id:"mfaMethod.totp",defaultMessage:"Authenticator"},backupCode:{id:"mfaMethod.backupCode",defaultMessage:"Backup code"}}),d={"data-1p-ignore":"true","data-lpignore":"true"};function l(e){const t=["totp","sms","backup_code"];return e.sort(((e,s)=>{const i=t.indexOf(e.mfaMethod),n=t.indexOf(s.mfaMethod);return i===n?e.createdAt-s.createdAt:i-n}))}function c(e){switch(e){case"sms":return r.default.formatMessage(a.sms);case"totp":return r.default.formatMessage(a.totp);case"backup_code":return r.default.formatMessage(a.backupCode);default:(0,i.t1)(e)}}async function u(e){const t=await o.authGetLoginConfiguration(e,{});if("success"===t.type){const e=t.data,s="required"!==e.samlSignIn&&e.hasAccount&&e.passwordSignIn,i="required"===e.samlSignIn,n="required"!==e.samlSignIn&&e.hasAccount&&e.mfaOptions.length>0,o=s&&!i?n?"on":"off":"disabled",r=e.mfaOptions.find((e=>"backup_code"===e.mfaMethod));return{hasPassword:s,canConfigurePassword:!i,isSamlEnforced:i,mfaStatus:o,numMfaSettings:e.mfaOptions.length,regenerateBackupCodes:void 0===r&&"on"===o}}throw t.error}},18441:(e,t,s)=>{s.d(t,{P9:()=>d,YJ:()=>l,jc:()=>a,jg:()=>r});s(57658);var i=s(77657),n=s(59753),o=s(32161);function r(e){if(e.integration_id!==i.nO)throw"Cannot render account for integration.";const t=/(.+) - (.+)/.exec(e.account_name);if(!t)return{accountName:e.account_name};const[,s,n]=t;return{organizationName:s,accountName:n}}function a(e){return n.kk.fromValue(o.P,e).getSlackWorkspaceId()}function d(e,t){return t?e.filter((e=>{const s=a(e);return!!s&&t(s)})):e}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s={};for(const i of e){const{accountName:e,organizationName:n}=r(i);c({query:t,accountName:e,organizationName:n})&&(s[e]||(s[e]=[]),s[e].push({externalAuthentication:i,workspaceName:n}))}return s}function c(e){const{accountName:t,organizationName:s,query:i}=e;if(0===i.length)return!0;const n=t.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0,o=!!s&&s.toLocaleLowerCase().indexOf(i.trim().toLocaleLowerCase())>=0;return n||o}},23570:(e,t,s)=>{function i(e){return e?32:18}s.d(t,{f:()=>i})},53353:(e,t,s)=>{s.d(t,{Z:()=>l});var i=s(86628),n=s(98165),o=s(65598),r=s(38755),a=s(80444);function d(e,t){return(0,r.Q6)(e)?{isGuestRequestRequired:!0}:t?{isStoreInTeam:!0,teamAllowsGuests:!0,spaceAllowsGuests:!0,isGuestRequestRequired:!1}:{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1}}const l=function(e){return(0,i.VK)((()=>{if(!(0,o.OY)(e))return(0,r.kt)(e)?d(e,void 0):{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1};const t=(0,n.VP)(e),s=(0,n.Pj)(e),i=s||a.default.state.currentSpaceStore;if((0,r.kt)(i))return d(i,t);const l=!(null!=s&&s.getDisableGuests());return t?{isStoreInTeam:!0,teamAllowsGuests:!t.getDisableGuests(),spaceAllowsGuests:l,isGuestRequestRequired:!1}:{isStoreInTeam:!1,spaceAllowsGuests:l,isGuestRequestRequired:!1}}),[e])}},26781:(e,t,s)=>{s.d(t,{S:()=>r});s(67294);var i=s(68939),n=s(53353),o=s(85893);function r(e){const t=(0,n.Z)(e);return t.isGuestRequestRequired?(0,o.jsx)(i.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.guestRequestRequired",defaultMessage:"This guest must be approved by a workspace owner first"}):t.isStoreInTeam?t.teamAllowsGuests?void 0:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{children:(0,o.jsx)(i.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine1",defaultMessage:"This teamspace doesn't allow guests."})}),(0,o.jsx)("div",{children:(0,o.jsx)(i.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})})]}):t.spaceAllowsGuests?void 0:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{children:(0,o.jsx)(i.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine1",defaultMessage:"This workspace doesn't allow guests."})}),(0,o.jsx)("div",{children:(0,o.jsx)(i.FormattedMessage,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})})]})}},39675:(e,t,s)=>{s.d(t,{E:()=>V,Z:()=>U});var i=s(67294),n=s(480),o=s(86628),r=s(89101),a=s(97880),d=s(68939),l=s(50906),c=s(47839),u=s(58188),m=s(75018),g=s(22974),p=s(39699),h=s(37181),f=s(97832),y=s(79092),x=s(42922),S=s(16354),b=s(68785),v=s(79603),M=s(42402),w=s(1548),j=s(55422),k=s(42982),C=s(30045),T=s(21969),I=s(38755),P=s(5162),F=s(80444),_=s(24042),Z=s(77080),A=s(45946),R=s(92083),B=s(78291),E=s(88893),O=s(34980),D=s(86706),N=s(85893);function V(e){let{isPhone:t,isIOS:s,passwordRequestStore:i,userEmailDomainSettings:n}=e;const{data:o}=B.default.state,r=s&&E.wY(o),d=(0,v.mS)();return[{key:"password",renderSettingsItem:()=>(0,N.jsx)(L,{passwordRequestStore:i})},{key:"appearance",renderSettingsItem:()=>(0,N.jsx)(q,{isMobile:!0})},!(t&&(0,P.Y)("supportsNativeHome"))?{key:"page-on-app-start",renderSettingsItem:()=>(0,N.jsx)(W,{isMobile:!0})}:void 0,Z.default.checkGate("block_attribution")?{key:"block-attribution",renderSettingsItem:()=>(0,N.jsx)(G,{isMobile:!0})}:void 0,r?{key:"subscription",renderSettingsItem:()=>(0,N.jsx)(k.Z,{})}:void 0,{key:"user-consent",renderSettingsItem:()=>(0,N.jsx)(C.Z,{emailDomainSettings:n.settings})},{key:"calendar",renderSettingsItem:()=>(0,N.jsx)(y.Z,{})},d?{key:"experiments",renderSettingsItem:()=>(0,N.jsx)(v.Pp,{})}:void 0,{key:"deleteAccount",renderSettingsItem:()=>(0,N.jsx)(f.Z,{userEmailDomainSettings:n})}].filter(a.$K)}function U(e){var t;const{environment:s}=e,i=Z.default.checkGate("block_attribution"),n=s.device.isDesktop&&(s.device.isMac||s.device.isWindows||!1),o=s.device.isDesktop&&s.device.isMac,r=_.Z.state,d=r.isQuickSearchSupported,l=Boolean(null===(t=r.preferences)||void 0===t?void 0:t.isQuickSearchEnabled),c=r.isMenuBarIconSupported,u=s.device.isElectron;return[{key:"appearance",renderSettingsItem:()=>(0,N.jsx)(q,{isMobile:!1})},{key:"page-on-app-start",renderSettingsItem:()=>(0,N.jsx)(W,{isMobile:!1})},n?{key:"open-in-desktop-app",renderSettingsItem:()=>(0,N.jsx)(z,{})}:void 0,o?{key:"close-browser-tabs",renderSettingsItem:()=>(0,N.jsx)(K,{})}:void 0,u&&d?{key:"quick-search-enabled",renderSettingsItem:()=>(0,N.jsx)(H,{})}:void 0,u&&d&&l?{key:"quick-search-shortcut",renderSettingsItem:()=>(0,N.jsx)(Q,{})}:void 0,u&&s.device.isMac&&c&&l?{key:"menu-bar-icon-enabled",renderSettingsItem:()=>(0,N.jsx)(Y,{})}:void 0,i?{key:"block-attribution",renderSettingsItem:()=>(0,N.jsx)(G,{isMobile:!1})}:void 0].filter(a.$K)}function L(e){let{passwordRequestStore:t}=e;window.__c={n:"LoadingPasswordSettings"};const s=(0,o.VK)((()=>{const{data:e}=B.default.state;return E.wl(e)}),[]),i=(0,o.VK)((()=>{var e;return(null===(e=F.default.state.currentUserStore)||void 0===e?void 0:e.getEmail())??""}),[]),{hasPassword:n,canConfigurePassword:r,isSamlEnforced:a,mfaStatus:d,error:l,ready:c}=(0,o.VK)((()=>({...t.state.result,error:t.state.error,ready:t.state.result})),[t]);return l?(0,N.jsx)(w.Z,{hasPassword:!1,hasPasswordActions:!1,samlEnforced:!1,mfaStatus:"loading",email:i,onReloadSettings:()=>t.refresh(),isError:!0}):c?(0,N.jsx)(w.Z,{hasPassword:n,hasPasswordActions:r,samlEnforced:a,mfaStatus:d,isEducationPlan:s,email:i,onReloadSettings:()=>t.refresh(),isError:!1}):(0,N.jsx)(b.Z,{})}function q(e){let{isMobile:t}=e;window.__c={n:"AppearanceSetting"};const s=(0,n.O7)(),i=(0,o.VK)((()=>g.MH(s)),[s]);return(0,N.jsx)(j.Z,{isMobile:t,title:(0,N.jsx)(d.FormattedMessage,{id:"appearanceSettings.title",defaultMessage:"Appearance"}),caption:(0,N.jsx)(d.FormattedMessage,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."}),type:"dropdown",currentOption:i,options:[{key:"system",label:(0,N.jsx)(d.FormattedMessage,{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"})},{key:"light",label:(0,N.jsx)(d.FormattedMessage,{id:"appearanceSetting.light.label",defaultMessage:"Light"})},{key:"dark",label:(0,N.jsx)(d.FormattedMessage,{id:"appearanceSetting.dark.label",defaultMessage:"Dark"})}],onSelectOption:e=>{g.rz(e)}})}function G(e){let{isMobile:t}=e;window.__c={n:"AttributionSetting"};const s=(0,n.O7)(),{currentUserSettingsStore:r}=(0,o.VK)((()=>F.default.state),[]),a=(0,o.VK)((()=>{var e;return(null==r||null===(e=r.getSettings())||void 0===e?void 0:e.show_block_attribution)??!0}),[r]),l=(0,i.useCallback)((()=>{r&&p.createAndCommit({userAction:"NotificationsAndPersonalSettings.onToggle",environment:s,perform:e=>{h.d2({userSettingsStore:r,data:{show_block_attribution:!a},transaction:e})}})}),[r,a,s]);return(0,N.jsx)(j.Z,{isMobile:t,title:(0,N.jsx)(d.FormattedMessage,{id:"attributionSetting.title",defaultMessage:"Block attribution"}),caption:(0,N.jsx)(d.FormattedMessage,{id:"attributionSetting.description.message",defaultMessage:"See your teammates’ initials to the left of blocks they created or edited."}),type:"toggle",isOn:a,onToggle:l})}function W(e){let{isMobile:t}=e;window.__c={n:"PageOnAppStartSetting"};const s=(0,n.O7)(),i=(0,o.VK)((()=>F.default.state.currentSpaceViewStore),[]),r=(0,o.VK)((()=>(0,O.o)()),[]),a=(0,o.VK)((()=>I.g4(s,i)),[s,i]);return(0,N.jsx)(j.Z,{isMobile:t,title:(0,N.jsx)(d.FormattedMessage,{id:"pageOnAppStoreSetting.title",defaultMessage:"Open on start"}),caption:(0,N.jsx)(d.FormattedMessage,{id:"pageOnAppStoreSetting.description.message",defaultMessage:"Choose what to show when Notion starts or when you switch workspaces."}),type:"dropdown",currentOption:a,options:r,onSelectOption:e=>{u.N({userAction:"NotificationsAndPersonalSettings.PageOnAppStartSetting",environment:s,option:e,from:"user_settings"})}})}function K(){window.__c={n:"CloseBrowserTabsSetting"};const{isElectron:e,isMac:t}=(0,n.Fy)(),s=(0,o.VK)((()=>{var e;return null===(e=_.Z.state.preferences)||void 0===e?void 0:e.isClosingBrowserTabs}),[]),r=(0,i.useCallback)((()=>{const e=!s;c.electronAppFeatures.setPreference("isClosingBrowserTabs",e)}),[s]);if(!e||!t||void 0===s)return null;const a=(0,N.jsx)(d.FormattedMessage,{id:"openInDesktopAppSettings.closeBrowserTabs.title",defaultMessage:"Close redirecting browser tabs"}),l=(0,N.jsx)(d.FormattedMessage,{id:"openInDesktopAppSettings.closeBrowserTabs.caption",defaultMessage:'When opening links in the desktop app, close "Redirecting to your Notion app..." browser tabs.'});return(0,N.jsx)(j.Z,{isMobile:!1,title:a,caption:l,type:"toggle",isOn:s,onToggle:r})}function z(){window.__c={n:"OpenInDesktopAppSetting"};const e=(0,n.O7)(),{isElectron:t}=(0,n.Fy)(),s=(0,o.VK)((()=>A.Z.state),[]),i=(0,N.jsx)(d.FormattedMessage,{id:"openInDesktopAppSetting.title",defaultMessage:"Open links in desktop app"}),a=(0,o.VK)((()=>R.Z.state.highlightedSetting===R.R.OpenInDesktopApp),[]);if(t)return(0,N.jsx)(j.Z,{isMobile:!1,title:i,caption:(0,N.jsx)(d.FormattedMessage,{id:"openInDesktopAppSetting.desktopConfigureCaption",defaultMessage:"You can configure browser links to open in this app."}),type:"custom",customButton:(0,N.jsx)(S.Z,{href:(0,T.H)(window.location.href),external:!0,onClick:()=>{l.rZ2(e)},children:(0,N.jsx)(x.Z,{children:(0,N.jsx)(d.FormattedMessage,{id:"openInDesktopAppSetting.desktopConfigureButton",defaultMessage:"Configure"})})})});return(0,N.jsx)(j.Z,{isMobile:!1,title:i,caption:(0,N.jsx)(d.FormattedMessage,{id:"openInDesktopAppSetting.description.messageWindows",defaultMessage:"You must have the <desktopapplink>Mac or Windows app</desktopapplink> installed",values:{desktopapplink:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,N.jsx)(M.Z,{external:!0,href:r.AR.desktop,onClick:e=>{e.stopPropagation()},children:t})}}}),type:"toggle",isOn:"always"===s,onToggle:()=>{const t="always"===s?"never":"always";A.Z.setState(t),"always"===t&&m.openInNativeApp({url:(0,T.W)(window.location.href),environment:e}),l.wz6(e,{toggled_to:"always"===t?"on":"off"})},shouldHighlight:a})}function H(){window.__c={n:"QuickSearchEnabledSetting"};const{currentPreference:e}=(0,o.VK)((()=>{var e;const t=_.Z.state;return{currentPreference:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isQuickSearchEnabled)}}),[]),t=(0,i.useCallback)((()=>{const t=!e;c.electronAppFeatures.setPreference("isQuickSearchEnabled",t)}),[e]),s=(0,N.jsx)(d.FormattedMessage,{id:"desktopQuickSearch.toggle.title",defaultMessage:"Enable Command Search"}),n=(0,N.jsx)(d.FormattedMessage,{id:"desktopQuickSearch.toggle.caption",defaultMessage:"Open search anywhere with a shortcut, even when your Notion app isn't active."});return(0,N.jsx)(j.Z,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}function Q(){window.__c={n:"QuickSearchShortcutSetting"};const{quickSearchShortcut:e}=(0,o.VK)((()=>{var e;return{quickSearchShortcut:null===(e=_.Z.state.preferences)||void 0===e?void 0:e.quickSearchShortcut}}),[]),t=(0,i.useCallback)((e=>{c.electronAppFeatures.setPreference("quickSearchShortcut",e)}),[]),s=(0,N.jsx)(d.FormattedMessage,{id:"desktopQuickSearch.shortcut.title",defaultMessage:"Command Search shortcut"}),n=(0,N.jsx)(d.FormattedMessage,{id:"desktopQuickSearch.shortcut.caption",defaultMessage:"Customize the shortcut used to trigger Command Search."});return(0,N.jsx)(j.Z,{isMobile:!1,type:"custom",title:s,caption:n,disableSettingsItemClick:!0,customButton:(0,N.jsx)("div",{children:(0,N.jsx)(D.nx,{shortcut:e,onChange:t})})})}function Y(){window.__c={n:"MenuBarIconEnabledSetting"};const{isMenuBarIconEnabled:e}=(0,o.VK)((()=>{var e;const t=_.Z.state;return{isMenuBarIconEnabled:Boolean(null===(e=t.preferences)||void 0===e?void 0:e.isMenuBarIconEnabled)}}),[]),t=(0,i.useCallback)((()=>{c.electronAppFeatures.setPreference("isMenuBarIconEnabled",!e)}),[e]),s=(0,N.jsx)(d.FormattedMessage,{id:"menuBarIconMacSetting.toggle.title",defaultMessage:"Show Notion in menu bar"}),n=(0,N.jsx)(d.FormattedMessage,{id:"menuBarIconMacSetting.toggle.caption",defaultMessage:"Access Notion faster from the top right of your screen"});return(0,N.jsx)(j.Z,{isMobile:!1,type:"toggle",title:s,caption:n,isOn:e,onToggle:t})}},25976:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(49085);class n extends i.default{getInitialState(){return{count:0}}}const o=new n},30021:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(53809),n=s(30548);const o=new i.D({key:"appearanceSettingStorageKey",namespace:n.$p,important:!0,trackingType:"necessary"})},71071:(e,t,s)=>{s.d(t,{Sw:()=>r,ZP:()=>l,jR:()=>a});var i=s(13991),n=s(49085);const o=["en","en-us","en-ca"];function r(e){return"pdf"===e.exportOptions.exportType}function a(){return o.includes(i.SP.toLowerCase())?"Letter":"A4"}class d extends n.default{getInitialState(){return{open:!1,shouldExportComments:!1}}}const l=new d},72653:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(14577),n=s(5162),o=s(69454),r=s(55320);const a=new i.Z((()=>{const{phase:e}=o.Z.state;if(r.default.state.open)return!0;return(0,n.Y)("supportsFixedSizeWebView")&&!o.Z.state.shouldResizeWebView||e===o.i.hidden||e===o.i.willHide}),{debugName:"MobileBottomBarStore"})},53680:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(49085);class n extends i.default{getInitialState(){return{disablePublicAccess:!1,disableGuests:!1,disableMoveToSpace:!1,disableExport:!1,disableSpacePageEdits:!1,disablePublicAccessRequests:!1,disableTeamCreation:!1,disableMembershipRequests:!1,disableExternalMembershipRequests:!1,disableGuestMembershipRequests:!1,enableGuestInviteRequests:!1,enableAiFeature:!1,disableTeamGuests:!1,disableGuestsModalOpen:!1}}getValueForSpace(e){if(e.isDefined())return{disablePublicAccess:Boolean(e.getDisablePublicAccess()),disableGuests:Boolean(e.getDisableGuests()),disableMoveToSpace:Boolean(e.getDisableMoveToSpace()),disableExport:Boolean(e.getDisableExport()),disableSpacePageEdits:Boolean(e.getDisableSpacePageEdits()),disablePublicAccessRequests:Boolean(e.getDisablePublicAccessRequests()),disableTeamCreation:Boolean(e.getDisableTeamCreation()),disableMembershipRequests:Boolean(e.getKeyStore("settings").getKeyStore("disable_membership_requests").getValue()),disableExternalMembershipRequests:Boolean(e.getKeyStore("settings").getKeyStore("disable_external_membership_requests").getValue()),disableGuestMembershipRequests:Boolean(e.getKeyStore("settings").getKeyStore("disable_guest_membership_requests").getValue()),enableGuestInviteRequests:Boolean(e.getKeyStore("settings").getKeyStore("enable_guest_invite_requests").getValue()),enableAiFeature:Boolean(e.getKeyStore("settings").getKeyStore("enable_ai_feature").getValue()),disableTeamGuests:Boolean(e.getKeyStore("settings").getKeyStore("disable_team_guests").getValue())}}}const o=n},24665:(e,t,s)=>{s.d(t,{$A:()=>b,Vu:()=>v,wA:()=>S});var i=s(4615),n=s(68939),o=s(50906),r=s(54642),a=s(92625),d=s(76464),l=s(29974),c=s(39699),u=s(37181),m=s(15010),g=s(80444),p=s(92083),h=s(34583),f=s(9634),y=s(2469),x=s(91567);function S(e){const t=g.default.state.currentUserSettingsStore;t&&c.createAndCommit({userAction:"saveContractionSurveySeenDate",environment:e,perform:e=>{u.d2({userSettingsStore:t,transaction:e,data:{seen_contraction_survey_at:(new Date).getTime()}})}})}async function b(e){let{environment:t,user:s,spaceStore:n,userSettingStore:r}=e;let a,d;if(y.U()&&(d=(0,i.ZP)(),a=await(0,x.f)({environment:t,contractionSurveyId:d}),!a))return;await(async()=>await(0,f.q)(t,s.userId,n.id))()&&(await(async e=>{await v({member:s,newRole:"none",currentUserSettingsStore:r,spaceStore:n,environment:t}),o.SwX(t,{member_user_id:s.userId,member_role:s.role,contraction_survey_id:e,is_space:!0,invite_origin:"workspace_remove_member",domainType:(0,m.JF)(),new_workspace_member_count:-1})})(d),a&&S(t))}async function v(e){let{member:t,newRole:s,currentUserSettingsStore:i,spaceStore:u,environment:g}=e;const f=g.currentUser.id;if(t.userId!==f||"none"!==s)!function(){const e=(0,n.defineMessages)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});a.j({message:e.updatingPermissions})}(),"none"===s?(await r.removeUsersFromSpace(g,{userIds:[t.userId],spaceId:u.id,removePagePermissions:!0,revokeUserTokens:!0}),await h.bi(g)):c.createAndCommit({userAction:"contractionActions.handleMemberPermissionRoleChange",environment:g,perform:e=>d.ep({environment:g,store:u,permissionItems:[{type:"user_permission",role:s,user_id:t.userId}],transaction:e,from:"space_permission_setting_table"})}),a.x();else{await l.bf({environment:g,spaceId:u.id,userSettingsStore:i})&&(o.JkE(g,{invite_origin:"workspace_remove_member",domainType:(0,m.JF)(),new_workspace_member_count:-1,new_workspace_member_ids:[f]}),p.Z.setState({...p.Z.state,open:!1}))}}},9634:(e,t,s)=>{s.d(t,{q:()=>I});s(57658);var i=s(67294),n=s(86628),o=s(24405),r=s(19889),a=s(68939),d=s(50906),l=s(54642),c=s(45653),u=s(80444),m=s(26136),g=s(35057),p=s(12309),h=s(8848),f=s(82990),y=s(64921),x=s(85893);function S(e){window.__c={n:"ButtonStack"};const{items:t,clickHandlerContext:s}=e,n=b(),o=function(){const e=b();return(0,i.useMemo)((()=>({destructive:{default:e.destructiveButtonDefault,hovered:e.destructiveButtonHovered,pressed:e.destructiveButtonPressed},primary:{default:e.primaryButtonDefault,hovered:e.primaryButtonHovered,pressed:e.primaryButtonPressed},secondary:{default:e.secondaryButtonDefault}})),[e.destructiveButtonDefault,e.destructiveButtonHovered,e.destructiveButtonPressed,e.primaryButtonDefault,e.primaryButtonHovered,e.primaryButtonPressed,e.secondaryButtonDefault])}();return(0,x.jsx)("div",{style:n.wrapper,children:t.map((e=>{const t=e.combinedStyles??o[e.buttonType];return(0,x.jsx)(y.Z,{style:null==t?void 0:t.default,hoveredStyle:null==t?void 0:t.hovered,pressedStyle:null==t?void 0:t.pressed,onClick:()=>e.onClick(e,s),children:e.label},e.key)}))})}function b(){return(0,o.yK)((e=>{const t={alignItems:"center",borderRadius:4,boxShadow:void 0,display:"inline-flex",flexShrink:0,fontSize:14,fontWeight:f.Z.fontWeight.medium,height:28,justifyContent:"center",lineHeight:1.2,paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",width:"100%"};return{destructiveButtonDefault:{...t,background:e.redBadgeBackground,color:h.ZP.white,fill:h.ZP.lightTextColor},destructiveButtonHovered:{background:h.ZP.redWithAlpha(.8)},destructiveButtonPressed:{background:h.ZP.red},primaryButtonDefault:{...t,background:h.ZP.blue,color:h.ZP.white,fill:h.ZP.lightTextColor,height:32},primaryButtonHovered:{background:e.blueButtonHoveredBackground},primaryButtonPressed:{background:e.blueButtonPressedBackground},secondaryButtonDefault:{...t,background:e.whiteButtonBackground,color:e.mediumTextColor,fill:h.ZP.lightTextColor},wrapper:{display:"flex",flexDirection:"column",gap:4}}}),[])}function v(e){window.__c={n:"BillingModalStackLayout"};const t=(0,o.yK)((()=>({wrapper:{display:"flex",flexDirection:"column",gap:24,marginTop:20}})),[]);return(0,x.jsx)("div",{style:{...t.wrapper,...e.styles},children:e.children})}function M(e){window.__c={n:"SmallModalHeader"};const{icon:t,title:s,description:i,customIcon:n}=e,r=(0,o.yK)((e=>({description:{color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:-.154,textAlign:"center"},icon:{display:"inline",height:34,fill:"#8E8B87"},title:{color:e.text.primary,textAlign:"center",fontSize:16,lineHeight:"1.3",fontWeight:f.Z.fontWeight.medium,letterSpacing:-.32,textWrap:"balance"},wrapper:{display:"flex",flexDirection:"column",gap:8}})),[]);return(0,x.jsxs)("div",{style:r.wrapper,children:[t?t(r.icon):n||null,(0,x.jsx)("div",{style:r.title,children:s}),i?(0,x.jsx)("div",{style:r.description,children:i}):null]})}function w(e){window.__c={n:"ContractionConfirmation"};const{onFinished:t,userId:s,userContractionMessages:d}=e,l=(0,o.yK)((e=>({highlights:{color:e.text.secondary,fontSize:14,lineHeight:"18px",letterSpacing:-.154,textAlign:"left",marginTop:-28,marginBottom:-20,marginLeft:-16},customIcon:{alignSelf:"center"},wrapper:{marginTop:4}})),[]),p=(0,a.useIntl)(),h=(0,i.useCallback)((e=>{"submit"!==e.key?t(!1):t(!0)}),[t]),f=(0,n.VK)((()=>u.default.state.currentSpaceStore),[]),y=(0,n.VK)((()=>{if(!f)return;const e=m.U6.createChildStore(f,{id:s,table:r.KJ});return e.isDefined()&&!e.getIsDeleted()?e:void 0}),[f,s]),{name:b,isEnterprise:w}=(0,n.VK)((()=>({name:null==y?void 0:y.getDisplayName(p),isEnterprise:(0,g.wP)()})),[y,p]);return(0,x.jsxs)(v,{styles:l.wrapper,children:[(0,x.jsx)(M,{customIcon:(0,x.jsx)(c.Z,{userStore:y,size:34,style:l.customIcon}),title:T(b),description:k(d,w)}),(0,x.jsx)("div",{style:l.highlights,children:(0,x.jsx)("ul",{children:d.map(((e,t)=>(0,x.jsx)("li",{children:e},`contraction_highlight_${t}`)))})}),(0,x.jsx)(S,{items:[{key:"submit",buttonType:"destructive",label:C(b),onClick:h},{key:"cancel",buttonType:"secondary",label:(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.cancel",defaultMessage:"Cancel"}),onClick:h}]})]})}function j(e){return e>2e3?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.amount.2000",defaultMessage:"2000+"}):e>1500?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.amount.1500",defaultMessage:"1500+"}):e>1e3?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.amount.1000",defaultMessage:"1000+"}):e>500?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.amount.500",defaultMessage:"500+"}):e>250?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.amount.250",defaultMessage:"250+"}):e>100?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.amount.100",defaultMessage:"100+"}):e>75?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.amount.75",defaultMessage:"75+"}):e>50?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.amount.50",defaultMessage:"50+"}):e>25?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.amount.25",defaultMessage:"25+"}):e>10?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.amount.10",defaultMessage:"10+"}):e>5?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.amount.5",defaultMessage:"5+"}):(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.amount.2",defaultMessage:"2+"})}function k(e,t){return e.length>0?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.description.withName",defaultMessage:"They have been an active Notion member. {isEnterprise, select, true {} other {Removing them may cause permanent loss of their private pages.}}",values:{isEnterprise:t}}):(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.description",defaultMessage:"They will immediately lose access to this workspace{isEnterprise, select, true {.} other { and no one will be able to access their private pages.}}",values:{isEnterprise:t}})}function C(e){return e&&e.length<16?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.remove.withName",defaultMessage:"Remove {name}",values:{name:e}}):(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.remove",defaultMessage:"Remove member"})}function T(e){return e?(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.title.withName",defaultMessage:"Are you sure you want to remove {name}?",values:{name:e}}):(0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.title",defaultMessage:"Are you sure you want to remove this member?"})}async function I(e,t,s){let i=[],n={};if(s){const o=await l.getUserContractionData(e,{userId:t,spaceId:s});"success"===o.type&&(n=o.data,i=function(e){const t=[];if(!("l28_active"in e))return t;const s=Number(e.l28_active);s>1&&t.push((0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.activity",defaultMessage:"Visited <bold>{activeDays} days</bold> in the past month",values:{activeDays:j(s),bold:e=>(0,x.jsx)("b",{children:e})}}));const i=Number(e.num_comments);i>1&&t.push((0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.numberOfComments",defaultMessage:"Made <bold>{numberOfComments} comments</bold> in their lifetime",values:{numberOfComments:j(i),bold:e=>(0,x.jsx)("b",{children:e})}}));const n=Number(e.num_pages_created);return n>1&&t.push((0,x.jsx)(a.FormattedMessage,{id:"contractionConfirmation.numberOfPages",defaultMessage:"Created <bold>{numberOfPages} pages</bold> in their lifetime",values:{numberOfPages:j(n),bold:e=>(0,x.jsx)("b",{children:e})}})),t}(n))}return d.b9E({environment:e,userContractionData:n}),await p.Z.showModal((s=>{const o=t=>{t?d.oIe({environment:e,userContractionData:n}):d.vwI({environment:e,userContractionData:n}),s(t)};return{dismissUsing:"onlyEscape",onDismiss:()=>o(!1),content:(0,x.jsx)(w,{onFinished:o,userId:t,userContractionMessages:i})}}))}},1564:(e,t,s)=>{s.d(t,{Z:()=>h});s(67294);var i=s(83355),n=s(24405),o=s(82990),r=s(68939),a=s(50906),d=s(75018),l=s(42922),c=s(63296),u=s(18514),m=s(44041),g=s(85893);class p extends i.Z{constructor(){super(...arguments),this.handleUpgradeClick=e=>{const{from:t,for:s,onUpgradeClick:i}=this.props;m.y(this.environment,{from:t,for:s}),i&&i(e)},this.handleLearnMoreClick=()=>{const{from:e,learnMoreRoute:t}=this.props;d.navigateToExternalURL({environment:this.environment,url:(0,u.UY)(t)}),a.Fsx(this.environment,{from:e})}}renderComponent(){return(0,g.jsxs)("section",{style:y(this.environment,this.props.style),children:[(0,g.jsx)(S,{icon:this.props.icon}),(0,g.jsx)(f,{title:this.props.title}),(0,g.jsx)(b,{caption:this.props.caption}),this.renderActions()]})}renderActions(){return(0,g.jsxs)("footer",{style:{display:"flex",flexWrap:"wrap",gap:"8px 12px"},children:[this.renderUpgradeButton(),this.renderLearnMoreButton()]})}renderUpgradeButton(){const{upgradeMessage:e}=this.props;return(0,g.jsx)(l.Z,{onClick:this.handleUpgradeClick,isLarge:!0,children:e||(0,g.jsx)(r.FormattedMessage,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"})})}renderLearnMoreButton(){return(0,g.jsx)(c.Z,{onClick:this.handleLearnMoreClick,children:(0,g.jsx)(r.FormattedMessage,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"})})}}p.displayName="UpsellCallout";const h=p;function f(e){let{title:t}=e;return(0,g.jsx)("header",{style:{fontWeight:o.Z.fontWeight.semibold},children:t})}function y(e,t){const{device:s}=e;return{...t,fontSize:14,...!s.isMobile&&{maxWidth:340}}}function x(e){return{color:e.mediumTextColor,marginTop:4,marginBottom:16}}function S(e){let{icon:t}=e;window.__c={n:"IconComponent"};const s=(0,n.Fg)();return t?t(function(e){return{width:32,height:"auto",fill:e.mediumIconColor,marginBottom:8}}(s)):null}function b(e){let{caption:t}=e;window.__c={n:"CaptionComponent"};const s=(0,n.Fg)();return(0,g.jsx)("p",{style:x(s),children:t})}},2469:(e,t,s)=>{s.d(t,{U:()=>o});var i=s(53877),n=s(80444);function o(){const e=n.default.state.currentUserSettingsStore;if(!e)return!1;const t=e.getSettings();if(!t)return!1;if(!t.seen_contraction_survey_at)return!0;return Date.now()>(0,i.Xz)({date:t.seen_contraction_survey_at,daysToAdd:1})}},12309:(e,t,s)=>{s.d(t,{Z:()=>r});var i=s(49085),n=s(4615);class o extends i.default{getInitialState(){return{modalInfoById:{}}}async showModal(e){const t=(0,n.ZP)();return new Promise((s=>{const i=e((e=>{s(e),this.internalCloseModal(t,(()=>{this.internalRemoveModal(t)}))}));this.update((e=>({modalInfoById:{...e.modalInfoById,[t]:{...i,isOpen:!0}}})))}))}internalRemoveModal(e){this.update((t=>{const s={...t.modalInfoById};return delete s[e],{modalInfoById:s}}))}internalCloseModal(e,t){this.update((s=>({modalInfoById:{...s.modalInfoById,[e]:{...s.modalInfoById[e],isOpen:!1,onClosed:t}}})))}}const r=new o},91567:(e,t,s)=>{s.d(t,{f:()=>M});s(67294);var i=s(25651),n=s(72126),o=s(68939),r=s(50906),a=s(85893);const d={noLongerNeedAccess:{optionName:"no_longer_need_access",type:"checkbox",label:(0,a.jsx)(o.FormattedMessage,{id:"survey.options.noLongerNeedAccess",defaultMessage:"No longer need access to Notion"})},noLongerWorkTogether:{optionName:"no_longer_work_together",type:"checkbox",label:(0,a.jsx)(o.FormattedMessage,{id:"survey.options.noLongerWorksHere",defaultMessage:"No longer works here"})},notUsingEnough:{optionName:"not_using_enough",type:"checkbox",label:(0,a.jsx)(o.FormattedMessage,{id:"survey.options.notUsingEnough",defaultMessage:"Not using it enough"})},other:{optionName:"other",type:"checkboxAndInput",label:(0,a.jsx)(o.FormattedMessage,{id:"survey.options.other",defaultMessage:"Other"})},switching:{optionName:"switching",type:"checkbox",label:(0,a.jsx)(o.FormattedMessage,{id:"survey.options.switching",defaultMessage:"Switching to another tool"})},switchingToAnotherWorkspace:{optionName:"switching_to_another_workspace",type:"checkbox",label:(0,a.jsx)(o.FormattedMessage,{id:"survey.options.switchingToAnotherWorkspace",defaultMessage:"Switching to another Notion workspace"})},tooExpensive:{optionName:"too_expensive",type:"checkbox",label:(0,a.jsx)(o.FormattedMessage,{id:"survey.options.tooExpensive",defaultMessage:"Too expensive"})}};var l=s(44342),c=s(7184),u=s(69098),m=s(86628),g=s(97880),p=s(24405),h=s(60458);function f(e){window.__c={n:"SurveyCheckbox"};const{isChecked:t,label:s,onClickToggle:i}=e,n=(0,p.yK)((()=>({checkbox:{marginTop:4},row:{alignItems:"flex-start",cursor:"pointer",display:"flex",fontSize:14,gap:10,padding:"4px 20px 4px 0"}})),[]);return(0,a.jsxs)("div",{style:n.row,onClick:i,children:[(0,a.jsx)("div",{style:n.checkbox,children:(0,a.jsx)(h.Z,{checked:t,size:14})}),(0,a.jsx)("div",{children:s})]})}var y=s(74194);function x(e){window.__c={n:"SurveyCheckboxAndInput"};const{inputText:t,isChecked:s,label:i,onClickToggle:n,placeholderText:o,setInputText:r}=e,d=(0,p.yK)((()=>({inlineInput:{margin:"0 12px 12px 12px",width:"calc(100% - 24px)"}})),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{label:i,isChecked:s,onClickToggle:n}),s?(0,a.jsx)(y.Z,{style:d.inlineInput,autoFocus:!0,value:t,placeholder:o,onChange:e=>r(e.target.value)}):null]})}function S(e){window.__c={n:"Survey"};const{store:t}=e,s=(0,m.VK)((()=>t.state.options),[t]),{selectedIndexes:i,customTextByIndex:n}=(0,m.VK)((()=>t.state),[t]);return(0,a.jsx)("div",{children:s.map(((e,s)=>{const{type:o}=e,r=i.has(s);switch(o){case"checkbox":return(0,a.jsx)(f,{isChecked:r,label:e.label,onClickToggle:()=>t.toggleIndex(s)},s);case"checkboxAndInput":return(0,a.jsx)(x,{inputText:n[s]??"",isChecked:r,label:e.label,onClickToggle:()=>t.toggleIndex(s),placeholderText:e.placeholderText,setInputText:e=>t.setCustomTextByIndex(s,e)},s);default:(0,g.t1)(o)}}))})}s(57658);var b=s(49085);class v extends b.default{getInitialState(){return{options:[],customTextByIndex:{},selectedIndexes:new Set}}setOptions(e){this.setState({customTextByIndex:{},options:e,selectedIndexes:new Set})}setCustomTextByIndex(e,t){this.update((s=>({...s,customTextByIndex:{...s.customTextByIndex,[e]:t}})))}toggleIndex(e){this.update((t=>{const s=new Set(t.selectedIndexes);return s.has(e)?s.delete(e):s.add(e),{...t,selectedIndexes:s}}))}toSurveyResult(){const{customTextByIndex:e,options:t,selectedIndexes:s}=this.state,i=[],n=[],o={};return s.forEach((s=>{const r=t[s];i.push(r.optionName),n.push(s),"checkboxAndInput"===r.type&&e[s]&&(o[r.optionName]=e[s])})),{reasons:i,reasonIndexes:n,customTextByReason:o}}}async function M(e){const{environment:t,contractionSurveyId:s}=e;r.wjW({environment:t,contractionSurveyId:s});const n=await async function(e){const{icon:t,options:s,title:i,description:n}=e;return await u.o.showAsyncModal((e=>{const r=new v;return r.setOptions(s),(0,a.jsx)(c.c,{isOpen:e.isOpen,onDismiss:e.onDismiss,onClosed:e.onClosed,areaConstraint:{width:{min:299,max:299},height:{scroll:!0}},children:(0,a.jsx)(l.sR,{header:(0,a.jsx)(l.vI,{iconAndTitle:(0,a.jsx)(l.kC,{icon:t,title:i}),description:n}),footer:(0,a.jsx)(l.a6,{layout:"vertical",primaryButtons:[{label:(0,a.jsx)(o.FormattedMessage,{id:"contractionSurvey.continue",defaultMessage:"Continue"}),onClick:()=>e.resolve(r.toSurveyResult())}],secondaryButtons:[{buttonType:"dismiss"}]}),children:(0,a.jsx)(S,{store:r})})})}))}({icon:i.R,title:(0,a.jsx)(o.FormattedMessage,{id:"contractionSurvey.title",defaultMessage:"Why are you removing this member from your workspace?"}),description:(0,a.jsx)(o.FormattedMessage,{id:"contractionSurvey.description",defaultMessage:"We'd love your input to make Notion better"}),options:w()});return n?r.OK8({environment:t,contractionSurveyId:s,reasons:n.reasons,reasonIndexes:n.reasonIndexes,reasonOther:n.customTextByReason.other}):r.Wr9({environment:t,contractionSurveyId:s}),n}function w(){return[...(0,n.TV)([d.noLongerNeedAccess,d.noLongerWorkTogether,d.notUsingEnough,d.switching,d.switchingToAnotherWorkspace,d.tooExpensive]),d.other]}},50501:(e,t,s)=>{s.d(t,{g:()=>i});const i=14*s(63143).A0},1799:(e,t,s)=>{s.d(t,{A:()=>i,K:()=>n});const i="XXXX-XXXX";function n(e){return e.replace(/[^a-z0-9A-Z]/g,"").replace(/^(.{4})/,"$1-")}},96068:(e,t,s)=>{s.d(t,{I:()=>n});var i=s(72126);function n(e){if(i.jj(e).length<=3)return{success:!1,reason:{type:"password_too_consistent"}};if(e.length>=15)return{success:!0};if(e.length<8)return{success:!1,reason:{type:"password_too_short"}};const t=function(e){return e.match(/[a-z]/i)}(e),s=function(e){return e.match(/\d/)}(e);return t&&s?{success:!0}:t||s?s?t?{success:!1,reason:{type:"password_too_short"}}:{success:!1,reason:{type:"password_missing_letter"}}:{success:!1,reason:{type:"password_missing_number"}}:{success:!1,reason:{type:"password_missing_letter_and_number"}}}}}]);