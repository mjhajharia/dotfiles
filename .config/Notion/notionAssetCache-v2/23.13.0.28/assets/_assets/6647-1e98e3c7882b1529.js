"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6647],{3992:(e,t,o)=>{o.r(t),o.d(t,{addRecurrence:()=>g,createRecurrenceInner:()=>h,disableRecurrence:()=>y});var n=o(40506),i=o(4615),r=o(98963),a=o(18844),s=o(6287),l=o(80444),c=o(26136),d=o(50906),p=o(96802),u=o(9953),m=o(39699);function g(e){let{environment:t,blockStore:o,recurrence:l}=e;const p=o.getAutomationId(),g=function(e){return{...e,start_date:(0,n.Io)(new Date(e.start_date))}}(l);p?function(e,t,o,n){const l=o.getParentStore();if(!l||l.table!==s.v)return;const p=o.getSpaceId(),g={table:r.cv,id:t,spaceId:p},y=c.Mz.createChildStore(o,g),h=y.getTrigger();if(!h)return;const v=y.getActionStores()[0];m.createAndCommit({environment:e,userAction:"recurrenceActions.updateRecurrence",perform:t=>{const r=f({automationId:y.id,spaceId:p,collectionPointer:l.getSpaceShardedPointer(),templatePageId:o.id});let s;v?(s=v.id,u.sW({store:v,data:r,transaction:t})):(s=(0,i.ZP)(),u.ae({environment:e,table:a.Xj,inMemoryRecordCache:y.inMemoryRecordCache,transaction:t,value:{id:s,...r}})),u.sW({store:y,data:{status:"active",trigger:{id:h.id,type:"recurrence",recurrence:n},action_ids:[s]},transaction:t})}}),d.h$X(e,{type:"updated",frequency:n.frequency})}(t,p,o,g):function(e,t,o){m.createAndCommit({environment:e,userAction:"recurrenceActions.createRecurrence",perform:n=>{h(n,e,t,o)}})}(t,o,g)}function y(e){let{environment:t,blockStore:o}=e;const n=o.getAutomationId();if(!n)return;const i={table:r.cv,id:n,spaceId:o.getSpaceId()};m.createAndCommit({environment:t,userAction:"recurrenceActions.disableRecurrence",perform:e=>{u.sW({store:(0,c.Kv)(o,i),data:{status:"disabled",run_at:void 0},transaction:e})}}),d.h$X(t,{type:"disabled"})}function h(e,t,o,n){const{currentUserRootStore:c}=l.default.state;if(!c)return;const m=o.getParentStore();if(!m||m.table!==s.v)return;if(!m.getParentBlockStore())return;const g=o.getSpaceId(),y=(0,i.ZP)(),h=(0,i.ZP)();u.ae({environment:t,table:r.cv,inMemoryRecordCache:o.inMemoryRecordCache,value:{id:y,parent_id:o.id,parent_table:o.table,alive:!0,space_id:g,status:"active",trigger:{id:(0,i.ZP)(),type:"recurrence",recurrence:n},action_ids:[h]},transaction:e}),p.FH({stores:[o],update:{automation_id:y},transaction:e}),u.ae({environment:t,table:a.Xj,inMemoryRecordCache:o.inMemoryRecordCache,transaction:e,value:{id:h,...f({automationId:y,spaceId:g,collectionPointer:m.getSpaceShardedPointer(),templatePageId:o.id})}}),d.h$X(t,{type:"created",frequency:n.frequency})}function f(e){const{automationId:t,spaceId:o,collectionPointer:n,templatePageId:i}=e;return{parent_id:t,parent_table:r.cv,type:"create_page",alive:!0,space_id:o,config:{collection:n,template_page_id:i}}}},19454:(e,t,o)=>{o.d(t,{v:()=>w});var n=o(67294),i=o(480),r=o(86628),a=o(24405),s=o(63362),l=o(83372),c=o(4615),d=o(97880),p=o(68939),u=o(39699),m=o(52275),g=o(78140),y=o(32163),h=o(72495),f=o(26388),v=o(60442),S=o(30912),x=o(98742),b=o(63474),C=o(2553),M=o(95193),k=o(85893);function w(e){window.__c={n:"AddActionMenu"};const{contextStore:t,onActionAdded:o,insertionPoint:a}=e,w=(0,p.useIntl)(),P=(0,i.O7)(),_=(0,b.D)(),A=(0,M.F)({width:280}),I=function(e){const{contextStore:t}=e,[o,i]=(0,n.useState)([]),a=(0,r.VK)((()=>(0,S.uV)(t.context.automationStore,t.context.type)),[t.context.automationStore,t.context.type]),s=(0,n.useMemo)((()=>(0,l.P)("display")),[]);return(0,r.VK)((async()=>{if(a){const e=await Promise.all(s.map((async e=>await e.isAvailableForContext(a))));return i(function(e){const t=e=>e?1:-1;return e.slice().sort(((e,o)=>t(o.display.hasSideEffects)-t(e.display.hasSideEffects)))}(s.filter(((t,o)=>e[o]))))}o.length>0&&i([])}),[a,o.length,s]),o}({contextStore:t}).map((e=>{const{display:n}=e;return{key:e.type,render:e=>{const t=t=>(0,k.jsx)(m.Z,{...(0,x.Z)(t??{},e),icon:(0,k.jsx)(j,{display:n}),disabled:!1,title:w.formatMessage(n.name)}),o=n.description;return o?(0,k.jsx)(f.Z,{renderTooltip:()=>(0,k.jsx)(v.Z,{caption:w.formatMessage(o)}),placement:f.Z.Placement.Right,delayThreshold:0,render:t}):t()},action:()=>{const n=(0,c.ZP)(),i=t.context.automationStore;u.createAndCommit({userAction:"AutomationActionList.addAction",environment:P,perform:t=>{C.zY({actionId:n,actionType:e.type,automationStore:i,environment:P,intl:w,transaction:t,insertionPoint:a})}}),(0,s.eI)(_,{automation_id:i.id,automation_action_id:n,automation_action_type:e.type}),o(n)}}})).filter(d.$K);return(0,k.jsx)(g.Z,{...A,children:(0,k.jsx)(y.Z,{type:y.i.Vertical,sections:[{key:0,render:e=>(0,k.jsx)(h.Z,{enableActionSheetTitle:!0,...e}),items:I}],initialFocus:0})})}function j(e){window.__c={n:"AddActionIcon"};const{display:t}=e,o=(0,a.yK)((e=>({icon:{width:13,height:13,fill:t.hasSideEffects?e.blueColor:e.mediumIconColor},iconWrapper:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",background:t.hasSideEffects?"rgba(35, 131, 226, 0.14)":e.accentColors.gray[50],borderRadius:4,marginLeft:-2}})),[t.hasSideEffects]);return(0,k.jsx)("div",{style:o.iconWrapper,children:t.icon(o.icon)})}},48312:(e,t,o)=>{o.d(t,{X:()=>N});var n=o(67294),i=o(480),r=o(86628),a=o(24405),s=o(63362),l=o(83372),c=o(40745),d=o(8597),p=o(56666),u=o(88437),m=o(1230),g=o(41490),y=o(37612),h=o(98963),f=o(97880),v=o(82990),S=o(68939),x=o(39699),b=o(23063),C=o(52275),M=o(31945),k=o(50478),w=o(73063),j=o(91839),P=o(78140),_=o(32163),A=o(53437),I=o(72495),T=o(28267),V=o(63474),Z=o(24461),B=o(2553),R=o(95193),E=o(35294),D=o(19454),F=o(85893);const W=(0,S.defineMessages)({moreActionsButtonAriaLabel:{defaultMessage:"More actions",id:"buttonBlock.button.moreActionsButtonAriaLabel"}});function N(e){window.__c={n:"AutomationActionHeader"};const{contextStore:t,actionStore:o,disabled:i,dragging:s,title:c,picker:d,onActionAdded:p}=e,u=(0,n.useRef)(null),m=(0,T.X)(u),g=(0,n.useMemo)((()=>Boolean(m&&m.width<320)),[m]),[y,h]=(0,n.useState)(!1),f=(0,n.useMemo)((()=>s||!i&&y),[i,s,y]),S=(0,a.yK)((e=>({iconHandle:{display:"flex",justifyContent:"center",left:0,position:"absolute",top:0,width:24},iconWrap:{position:"relative",width:24},nameRow:{display:"flex",alignItems:g?"flex-start":"center"},name:{flexGrow:1,fontWeight:v.Z.fontWeight.medium,display:"flex",overflow:"hidden",...g?{flexDirection:"row",flexWrap:"wrap",marginLeft:8,alignItems:"center"}:{alignItems:"center",marginLeft:8}},title:{whiteSpace:"nowrap"},picker:{position:"relative",left:-4,...g?{flexShrink:1,display:"inline-flex",minWidth:0}:{flexGrow:1,width:0}}})),[g]),x=(0,r.VK)((()=>o.getType()),[o]);if(!x)return null;const C=(0,l.z)(x),{display:M}=C;return(0,F.jsxs)("div",{onMouseLeave:()=>h(!1),onMouseEnter:()=>h(!0),style:S.nameRow,ref:u,children:[(0,F.jsxs)("div",{style:S.iconWrap,children:[(0,F.jsx)(b.Z,{isVisible:!0,animationStyle:{opacity:f?0:1},enterAnimationStyle:{opacity:1},exitAnimationStyle:{opacity:1},render:()=>(0,F.jsx)(O,{display:M})}),(0,F.jsx)(b.Z,{isVisible:!i,animationStyle:{opacity:f?1:0},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>(0,F.jsx)("div",{style:S.iconHandle,children:(0,F.jsx)(k.ZP,{hideClickMessage:!0})})})]}),(0,F.jsxs)("div",{style:S.name,children:[(0,F.jsx)("div",{style:S.title,children:c}),!g&&(0,F.jsx)(F.Fragment,{children:"Â "}),d&&(0,F.jsx)("div",{style:S.picker,children:d})]}),!i&&(0,F.jsx)(L,{contextStore:t,actionStore:o,onActionAdded:p})]})}function O(e){window.__c={n:"ActionIcon"};const{display:t}=e,o=(0,a.yK)((e=>({iconWrap:{width:24,height:24,display:"flex",alignItems:"center",borderRadius:4,background:t.hasSideEffects?"rgba(35, 131, 226, 0.14)":e.accentColors.gray[50],flexShrink:0},icon:{width:14,height:14,fill:t.hasSideEffects?e.blueColor:e.accentColors.gray[500],margin:"0 auto"}})),[t.hasSideEffects]);return(0,F.jsx)("div",{style:o.iconWrap,children:t.icon(o.icon)})}function L(e){window.__c={n:"MoreActionsButton"};const{contextStore:t,actionStore:o,onActionAdded:i}=e,r=(0,S.useIntl)(),a=(0,E.d)(),[s,l]=(0,n.useState)("closed"),[c,d]=n.useState(void 0);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(M.ZP,{popupType:a,alignmentToOrigin:M.vR.Center,placementToOrigin:M.pO.Bottom,originGap:0,renderOrigin:e=>(0,F.jsx)(w.Z,{ariaLabel:r.formatMessage(W.moreActionsButtonAriaLabel),icon:p.o,...e}),render:t=>(0,F.jsx)(H,{onClose:()=>t.close(),onAddStep:e=>{d(new DOMRect(Z.IL.x,Z.IL.y,1,1)),l(e?"above":"below"),t.close()},...e})}),(0,F.jsx)(A.ZP,{popupType:a,open:"closed"!==s,originRect:c,placementToOrigin:A.ZP.Placement.Bottom,alignmentToOrigin:A.ZP.Alignment.Center,render:()=>(0,F.jsx)(D.v,{contextStore:t,onActionAdded:e=>{i(e),l("closed")},insertionPoint:"above"===s?{beforeActionId:o.id}:{afterActionId:o.id}}),onDismiss:()=>l("closed")})]})}function K(e,t,o){if(t<0||t>=e.length||o<0||o>=e.length)return e;const n=[...e];return n[t]=e[o],n[o]=e[t],n}function H(e){window.__c={n:"MoreActionsMenu"};const{onClose:t,contextStore:o,actionStore:a,onAddStep:l}=e,p=(0,S.useIntl)(),v=(0,i.O7)(),b=(0,V.D)(),M=(0,r.VK)((()=>o.context.automationStore),[o]),k=(0,r.VK)((()=>M.getActionIds()),[M]),[w,A]=(0,n.useState)(!1),T=k.length<h.FT,Z=k.indexOf(a.id),E=0===Z,D=Z===k.length-1,W=(0,R.F)(),N={key:"duplicate",action:async()=>{A(!0);const e=x.createAndCommit({userAction:"AutomationAction.duplicateAction",environment:v,perform:e=>B.AN({actionStore:a,automationStore:M,environment:v,intl:p,transaction:e})});a.isDefined()&&(0,s.eI)(b,{automation_id:o.context.automationStore.id,automation_action_id:a.id,automation_action_type:a.getType(),from:"duplicate"});try{await e.performResult.onComplete}finally{A(!1)}t()},render:e=>{const t=w?(0,F.jsx)(j.Z,{}):(0,u.a)({height:16,width:16}),o=w?(0,F.jsx)(S.FormattedMessage,{id:"automations.duplicatingActionButton.label",defaultMessage:"Duplicating..."}):(0,F.jsx)(S.FormattedMessage,{id:"automations.duplicateBelowActionButton.label",defaultMessage:"Duplicate below"});return(0,F.jsx)(C.Z,{...e,disabled:w,icon:t,title:o})}},O={key:"delete",action:()=>{x.createAndCommit({userAction:"AutomationAction.removeAction",environment:v,perform:e=>{B.sl({clientContext:o.context,actionStore:a,transaction:e}),a.isDefined()&&(0,s.co)(b,{automation_id:o.context.automationStore.id,automation_action_id:a.id,automation_action_type:a.getType()})}}),t()},render:e=>(0,F.jsx)(C.Z,{...e,icon:(0,y.y)({height:16,width:16}),title:(0,F.jsx)(S.FormattedMessage,{id:"automations.deleteActionButton.label",defaultMessage:"Delete"})})},L=[!0,!1].map((e=>{if(!(e&&E||!e&&D))return{key:e?"moveUp":"moveDown",action:()=>{x.createAndCommit({userAction:"AutomationAction.moveAction",environment:v,perform:t=>{let n;n=K(k,e?Z-1:Z+1,Z),B.kM({clientContext:o.context,transaction:t,newActionIds:n})}}),t()},render:t=>(0,F.jsx)(C.Z,{...t,icon:(e?d.Z:c.M)({width:16,height:16}),title:e?(0,F.jsx)(S.FormattedMessage,{id:"automations.moveUpButton.label",defaultMessage:"Move up"}):(0,F.jsx)(S.FormattedMessage,{id:"automations.moveDownButton.label",defaultMessage:"Move down"})})}})).filter(f.$K),H=[!0,!1].map((e=>({key:e?"addStepAbove":"addStepBelow",action:()=>{l(e)},render:t=>(0,F.jsx)(C.Z,{...t,disabledFeedback:!0,icon:e?(0,g.F)({width:16,height:16}):(0,m.H)({width:16,height:16}),title:e?(0,F.jsx)(S.FormattedMessage,{id:"automations.addStepAboveButton.label",defaultMessage:"Add step above"}):(0,F.jsx)(S.FormattedMessage,{id:"automations.addStepBelowButton.label",defaultMessage:"Add step below"})})})));return(0,F.jsx)(P.Z,{...W,children:(0,F.jsx)(_.Z,{type:_.i.Vertical,sections:[...L.length>0?[{key:"movement",render:e=>(0,F.jsx)(I.Z,{enableActionSheetTitle:!0,...e}),items:L}]:[],...T?[{key:"addSteps",render:e=>(0,F.jsx)(I.Z,{enableActionSheetTitle:!0,topBorder:!0,...e}),items:H},{key:"duplicate",render:e=>(0,F.jsx)(I.Z,{enableActionSheetTitle:!0,topBorder:!0,...e}),items:[N]}]:[],{key:"delete",render:e=>(0,F.jsx)(I.Z,{enableActionSheetTitle:!0,topBorder:!0,...e}),items:[O]}],initialFocus:0})})}},64973:(e,t,o)=>{o.d(t,{mv:()=>k,pW:()=>M,rn:()=>w});var n=o(67294),i=o(480),r=o(6740),a=o(37989),s=o(86628),l=o(24405),c=o(25651),d=o(37612),p=o(77744),u=o(97880),m=o(68939),g=o(64921),y=o(52275),h=o(78140),f=o(32163),v=o(72495),S=o(61766),x=o(95193),b=o(74197),C=o(85893);function M(e){window.__c={n:"AutomationBaseStepElement"};const{icon:t,onBlur:o,onClick:c,onFocus:d,onMouseDown:u,onMouseEnter:m,onMouseLeave:y,title:h,caption:f,onEdit:v,onDelete:x,disabled:b}=e,{isMobile:M}=(0,i.Fy)(),[w,j]=(0,r.Z)(),[P,_]=(0,a.Z)(),[A,I]=(0,n.useState)(!1),T=A||j||_,V=(0,p.lq)(w,P),Z=(0,s.qz)(void 0,S.Z),B=(0,l.yK)((e=>({button:{position:"relative"},moreButtonWrap:{display:T||M?"block":"none",position:"absolute",right:12,top:14},container:{background:e.cardContentBackground,display:"flex",flexDirection:"column",gap:8,justifyContent:"center",paddingBlock:16,paddingInline:12},title:{alignItems:"center",display:"flex",flexDirection:"row",gap:6},iconWrap:{flexShrink:0,alignSelf:"baseline",height:"24px",display:"flex",alignItems:"center"},iconStyle:{width:16,height:16,color:e.mediumIconColor},body:{flex:"1 1 auto",fontSize:14,lineHeight:1.3,minWidth:0,whiteSpace:"pre"}})),[T,M]),R=(0,n.useCallback)((e=>{I(!0),m&&m(e)}),[m]),E=(0,n.useCallback)((e=>{I(!1),y&&y(e)}),[y]);return(0,C.jsxs)(g.Z,{onBlur:o,onClick:()=>{null==c||c(Z)},onFocus:d,onMouseDown:u,onMouseEnter:R,onMouseLeave:E,style:B.button,disabled:b,disabledFeedback:b,ref:V,focused:T,children:[!b&&(v||x)&&(0,C.jsx)("div",{style:B.moreButtonWrap,children:(0,C.jsx)(k,{onEdit:v,onDelete:x,disabled:b,buttonPopupStore:Z})}),(0,C.jsxs)("div",{style:B.container,children:[(0,C.jsxs)("div",{style:B.title,children:[t&&(0,C.jsx)("div",{"aria-hidden":"true",style:B.iconWrap,children:t(B.iconStyle)}),(0,C.jsx)("div",{style:B.body,children:h})]}),f]})]})}function k(e){window.__c={n:"MoreActionsButton"};const{onDelete:t,onEdit:o,disabled:i,buttonPopupStore:r}=e,a=(0,s.qz)(r,S.Z),l=(0,n.useCallback)((()=>a.setState({open:!1})),[a]),c=(0,n.useMemo)((()=>(0,C.jsx)(w,{onClose:l,onEdit:o,onDelete:t})),[l,t,o]);return(0,C.jsx)(b.f,{actionMenu:c,buttonPopupStore:a,disabled:i})}function w(e){window.__c={n:"MoreActionsMenu"};const{onClose:t,onEdit:o,onDelete:n}=e,i=(0,x.F)(),r=[o?{action:()=>{null==t||t(),o()},key:"edit",render:e=>(0,C.jsx)(y.Z,{...e,icon:(0,c.R)({height:16,width:16}),title:(0,C.jsx)(m.FormattedMessage,{id:"automationBaseStepElement.moreActionsMenu.edit",defaultMessage:"Edit"})})}:void 0,n?{action:()=>{null==t||t(),n()},key:"delete",render:e=>(0,C.jsx)(y.Z,{...e,icon:(0,d.y)({height:16,width:16}),title:(0,C.jsx)(m.FormattedMessage,{id:"automationBaseStepElement.moreActionsMenu.delete",defaultMessage:"Delete"})})}:void 0].filter(u.$K);return(0,C.jsx)(h.Z,{...i,children:(0,C.jsx)(f.Z,{type:f.i.Vertical,sections:[{items:r,key:"items",render:e=>(0,C.jsx)(v.Z,{enableActionSheetTitle:!0,topBorder:!0,...e})}],initialFocus:0})})}},40190:(e,t,o)=>{o.d(t,{S:()=>g,d:()=>y});var n=o(67294),i=o(480),r=o(24405),a=o(42853),s=o(54497),l=o(82990),c=o(24677),d=o(98104),p=o(89728),u=o(26388),m=o(85893);const g=n.forwardRef(((e,t)=>{window.__c={n:"AutomationDropdownButton"};const{variant:o,onClick:g,style:y,icon:h,children:f,disabled:v}=e,S=(0,i.O7)(),x=(0,r.yK)((e=>({button:{..."gray"===o&&{color:e.mediumTextColor},..."blue"===o&&{color:e.blueColor,fontWeight:500},..."error"===o&&{color:e.errorText},maxWidth:"calc(100% + 2px)",marginLeft:1,padding:"0 8px 0 5px",...y},warningIcon:{width:12,height:12,marginLeft:-6,marginLeft:6,fill:e.errorText,color:e.errorText},chevronIcon:{width:10,height:10,marginLeft:4,marginTop:2,fill:e.lightIconColor},spacer:{flexGrow:1}})),[o,y]),b=(0,n.useCallback)((e=>{d.ZH(S),c.ZH(S),null==g||g(e)}),[g,S]);return(0,m.jsx)(u.Z,{renderTooltip:()=>"error"===o?e.errorMessage:null,placement:u.Z.Placement.Bottom,disableTooltip:"error"!==o,delayThreshold:0,render:e=>(0,m.jsxs)(p.Z,{...e,style:x.button,icon:h,onClick:b,ref:t,shouldShrink:!0,disabled:v,disabledFeedback:v,children:[(0,m.jsx)("div",{style:{...l.Z.textOverflowStyle},children:f}),(0,m.jsx)("div",{style:x.spacer}),"error"===o&&(0,s.t)(x.warningIcon),(0,a.i)(x.chevronIcon)]})})}));function y(e){const{errorMessage:t,hasValue:o}=e;return(0,n.useMemo)((()=>t?{variant:"error",errorMessage:t}:o?{variant:"gray"}:{variant:"blue"}),[t,o])}},77463:(e,t,o)=>{o.d(t,{lb:()=>I,nT:()=>A,mR:()=>j,vs:()=>P});var n=o(67294),i=o(86628),r=o(24405),a=o(97880),s=o(26388),l=o(12455),c=o(73266);const d=()=>null,p={create_page:d,update_pages:d,query_collection:d,open_page:d,duplicate_blocks:o(26612).JM,modal_confirmation:d,slack_notification:d};var u=o(93060),m=o(8161),g=o(82990),y=o(68939),h=o(56812),f=o(66315),v=o(85893);function S(){window.__c={n:"ButtonClickedTrigger"};const e=(0,y.useIntl)(),{automationStore:t}=(0,l.i)();if(!(0,i.VK)((()=>t.isTriggerType("button")),[t]))return null;const o=e.formatMessage(h.Bo.triggerButtonClicked,{b:x});return(0,v.jsx)(f.R,{icon:m.e,tooltip:o,children:o})}function x(e){return(0,v.jsx)("span",{style:{fontWeight:g.Z.fontWeight.medium},children:e})}var b=o(480),C=o(47453),M=o(39699);function k(){window.__c={n:"PageAddedTrigger"};const e=(0,b.O7)(),{automationStore:t}=(0,l.i)(),o=(0,y.useIntl)(),a=(0,r.yK)((()=>({title:{fontWeight:g.Z.fontWeight.medium}})),[]),s=(0,n.useCallback)((()=>{M.createAndCommit({userAction:"deleteAutomationTrigger",environment:e,perform:e=>{M.applyOperation({store:t,operation:{args:{pagesAdded:!1},path:["trigger","event"],pointer:t.pointer,command:"update"},transaction:e})}})}),[t,e]);if(!(0,i.VK)((()=>{var e;return(t.isTriggerType("event")||t.isTriggerType("notification_event"))&&(null===(e=t.getTrigger())||void 0===e?void 0:e.event.pagesAdded)}),[t]))return null;const c=h.Mz(o);return(0,v.jsx)(f.R,{icon:C.R,onDelete:s,tooltip:c,children:(0,v.jsx)("div",{style:a.title,children:c})})}var w=o(80624);const j="automation-list-item",P="automation-list-item-narrow";function _(e){window.__c={n:"List"};const t=(0,c.Z)(),o=(0,r.yK)((()=>({list:{display:"grid",gap:t?0:8,gridTemplateColumns:"1fr"}})),[t]);return(0,v.jsx)("div",{style:o.list,children:e.children})}function A(){return(0,v.jsxs)(_,{children:[(0,v.jsx)(S,{}),(0,v.jsx)(k,{}),(0,v.jsx)(w.q,{})]})}function I(){window.__c={n:"AutomationActionList"};const{automationStore:e}=(0,l.i)(),t=(0,i.VK)((()=>e.getActionStores().map((e=>{if(!e.hasConcern("display"))return;const t=e.getType();return t?{store:e,type:t}:void 0})).filter(a.$K)),[e]);return(0,v.jsx)(_,{children:t.map(((e,t,o)=>(0,v.jsx)(T,{actionStore:e.store,actionType:e.type},e.store.id)))})}function T(e){window.__c={n:"AutomationActionListItem"};const{actionStore:t,actionType:o}=e,{disabled:i,disableTooltip:r,editorPlacement:a}=(0,l.i)(),d=(0,c.Z)(),m=p[o];const g=(0,n.useMemo)((()=>`${j} ${d?P:""}`),[d]),y=(0,n.useCallback)((e=>(0,v.jsx)(m,{...e,actionStore:t,disabled:Boolean(i),editorPlacement:a})),[m,t,i,a]);return(0,v.jsx)("div",{className:g,children:(0,v.jsx)(u.y,{disable:r,renderOrigin:y,title:"Tooltip title",tooltipAlignment:s.Z.Alignment.Center,tooltipPlacement:s.Z.Placement.Left})})}},93060:(e,t,o)=>{o.d(t,{y:()=>s});var n=o(67294),i=o(24405),r=o(26388),a=o(85893);function s(e){window.__c={n:"AutomationTriggerActionTooltip"};const{caption:t,disable:o,renderOrigin:s,title:l,tooltipAlignment:c,tooltipPlacement:d}=e,p=(0,i.yK)((e=>({tooltipTitle:{margin:0},tooltipCaption:{color:e.mediumInvertedTextColor,margin:0}})),[]),u=(0,n.useCallback)((()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{style:p.tooltipTitle,children:l}),(0,a.jsx)("p",{style:p.tooltipCaption,children:t})]})),[t,l,p.tooltipCaption,p.tooltipTitle]);return(0,a.jsx)(r.Z,{alignment:c,delayThreshold:800,disableTooltip:o,placement:d,render:s,renderTooltip:u,textWrap:!0})}},74197:(e,t,o)=>{o.d(t,{f:()=>u});o(67294);var n=o(480),i=o(24405),r=o(56666),a=o(68939),s=o(31945),l=o(73063),c=o(53437),d=o(85893);const p=(0,a.defineMessages)({moreLabel:{id:"automationBaseStepElement.moreActionsMenu.title",defaultMessage:"More"}});function u(e){window.__c={n:"BaseStepActionsButton"};const{actionMenu:t,disabled:o,buttonPopupStore:u}=e,{device:m}=(0,n.O7)(),g=(0,a.useIntl)(),y=(0,i.yK)((e=>({iconButton:{border:`1px solid ${e.regularDividerColor}`,height:26,width:26},icon:{height:14,width:14}})),[]);return(0,d.jsx)(s.ZP,{alignmentToOrigin:s.vR.Center,buttonPopupStore:u,originGap:0,placementToOrigin:s.pO.Bottom,popupType:m.isMobile?c.kQ.SlideUp:c.kQ.Popup,render:()=>t,renderOrigin:e=>(0,d.jsx)(l.Z,{...e,ariaLabel:g.formatMessage(p.moreLabel),disabled:o,disabledFeedback:o,hasBackground:!0,icon:r.o,iconStyle:y.icon,style:y.iconButton})})}},24305:(e,t,o)=>{o.d(t,{YG:()=>x,Ao:()=>b,R7:()=>M,vu:()=>C,_S:()=>v});var n=o(67294),i=o(480),r=o(6740),a=o(37989),s=o(86628),l=o(24405),c=o(77744),d=o(98104),p=o(64921),u=o(75024);function m(){const e=(0,n.useRef)(null),[t,o]=(0,n.useState)(!1),i=(0,n.useCallback)((()=>{const t=e.current;t&&o(t.matches(":hover"))}),[]),r=(0,n.useCallback)((t=>{e.current=t,i()}),[i]);return(0,n.useEffect)((()=>{const t=e.current;if(t)return t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",i),()=>{t.removeEventListener("mouseenter",i),t.removeEventListener("mouseleave",i)}}),[i]),[r,t]}var g=o(61766),y=o(73266),h=o(74197),f=o(85893);function v(e){window.__c={n:"BaseStepLabel"};const{actionMenu:t,buttonPopupStore:o,children:r,disabled:l,icon:d,onClick:p,onMouseDown:u,onMouseEnter:v,onMouseLeave:S,subtitle:x,styles:b}=e,{isMobile:C}=(0,i.Fy)(),M=(0,s.qz)(o,g.Z),[w,j]=(0,a.Z)(),[P,_]=m(),A=(0,s.VK)((()=>M.getState()),[M]),I=C||_||j||A.open,T=k({disabled:l,hasActionMenu:Boolean(t),isActionMenuVisible:I,overrideStyles:b}),V=(0,y.Z)(),Z=(0,c.lq)(w,P),B=(0,n.useMemo)((()=>({...T.componentWrap,...T.border})),[T.border,T.componentWrap]);return(0,f.jsxs)("div",{onClick:p,onMouseDown:u,onMouseEnter:v,onMouseLeave:S,ref:Z,style:B,children:[(0,f.jsxs)("div",{style:T.headerWrap,children:[!V&&d&&(0,f.jsx)("div",{"aria-hidden":"true",style:T.iconWrap,children:d(T.icon)}),(0,f.jsx)("div",{style:T.titleWrap,children:r})]}),x&&(0,f.jsx)("div",{style:T.subtitleWrap,children:x}),t&&(0,f.jsx)("div",{style:T.actionMenuWrap,children:(0,f.jsx)(h.f,{actionMenu:t,buttonPopupStore:M,disabled:l})})]})}const S={overflow:"hidden",position:"relative"};function x(e){window.__c={n:"BaseStepButton"};const{actionMenu:t,buttonPopupStore:o,children:l,disabled:u,icon:v,onBlur:x,onClick:b,onFocus:C,onMouseDown:M,onMouseEnter:w,onMouseLeave:j,styles:P,subtitle:_}=e,{isMobile:A}=(0,i.Fy)(),[I,T]=(0,r.Z)(),[V,Z]=(0,a.Z)(),[B,R]=m(),E=(0,s.qz)(o,g.Z),D=(0,s.VK)((()=>E.getState()),[E]),F=(0,c.lq)(B,V),W=A||R||T||Z||D.open;(0,s.VK)((()=>{D.open||d.sD()}),[D]);const N=k({disabled:u,hasActionMenu:Boolean(t),isActionMenuVisible:W,overrideStyles:P}),O=(0,y.Z)(),L=(0,n.useMemo)((()=>({...S,...N.border})),[N.border]);return(0,f.jsxs)("div",{ref:F,style:L,children:[(0,f.jsxs)(p.Z,{disabled:u,disabledFeedback:u,hovered:R,ignoreLocalHoverState:!0,onBlur:x,onClick:b,onFocus:C,onMouseDown:M,onMouseEnter:w,onMouseLeave:j,ref:I,style:N.componentWrap,children:[(0,f.jsxs)("div",{style:N.headerWrap,children:[!O&&v&&(0,f.jsx)("div",{"aria-hidden":"true",style:N.iconWrap,children:v(N.icon)}),(0,f.jsx)("div",{style:N.titleWrap,children:l})]}),_&&(0,f.jsx)("div",{style:N.subtitleWrap,children:_})]}),t&&(0,f.jsx)("div",{style:N.actionMenuWrap,children:(0,f.jsx)(h.f,{actionMenu:t,buttonPopupStore:E,disabled:u})})]})}function b(e){window.__c={n:"BaseStepElement"};const{actionMenu:t,buttonPopupStore:o,children:n,disabled:r,forceShowActionMenu:l,onMouseEnter:p,onMouseLeave:u,styles:y}=e,{isMobile:v}=(0,i.Fy)(),[S,x]=(0,a.Z)(),[b,C]=m(),M=(0,s.qz)(o,g.Z),w=(0,s.VK)((()=>M.getState()),[M]),j=(0,c.lq)(b,S),P=l||v||C||x||w.open;(0,s.VK)((()=>{w.open||d.sD()}),[w]);const _=k({disabled:r,hasActionMenu:Boolean(t),isActionMenuVisible:P,overrideStyles:y});return(0,f.jsxs)("div",{onMouseEnter:p,onMouseLeave:u,ref:j,style:_.componentWrap,children:[t&&(0,f.jsx)("div",{style:_.actionMenuWrap,children:(0,f.jsx)(h.f,{actionMenu:t,buttonPopupStore:M,disabled:r})}),n]})}function C(e){window.__c={n:"BaseStepElementHeader"};const{children:t,disabled:o,icon:n,onMouseEnter:i,onMouseLeave:r,styles:a}=e,s=k({disabled:o,hasActionMenu:!1,isActionMenuVisible:!1,overrideStyles:a}),l=(0,y.Z)();return(0,f.jsxs)("header",{onMouseEnter:i,onMouseLeave:r,style:s.headerWrap,children:[!l&&n&&(0,f.jsx)("div",{"aria-hidden":"true",style:s.iconWrap,children:n(s.icon)}),(0,f.jsx)("div",{style:s.titleWrap,children:t})]})}function M(e){window.__c={n:"BaseStepElementBody"};const{children:t,disabled:o,styles:n}=e,i=k({disabled:o,hasActionMenu:!1,isActionMenuVisible:!1,overrideStyles:n});return(0,f.jsx)("div",{style:i.bodyWrap,children:t})}function k(e){const{disabled:t,hasActionMenu:o,isActionMenuVisible:n,overrideStyles:i}=e;return(0,l.yK)((e=>({border:{border:`1px solid ${e.stroke.regular}`},componentWrap:{background:e.cardContentBackground,display:"flex",flexDirection:"column",gap:16,paddingInline:12,paddingBlock:16,position:"relative",...t?{cursor:"default",opacity:.4}:{},...null==i?void 0:i.componentWrap},headerWrap:{display:"flex",flexDirection:"row",gap:4,marginInlineEnd:o?38:0,...null==i?void 0:i.headerWrap},iconWrap:{flex:"0 0 auto",marginBlockStart:2,...null==i?void 0:i.iconWrap},icon:{fill:e.text.secondary,height:"auto",width:16,...null==i?void 0:i.icon},titleWrap:{alignSelf:"center",flex:"1 1 auto",fontSize:14,lineHeight:1.285,marginBlockStart:1,minWidth:0,whiteSpace:"pre",...null==i?void 0:i.titleWrap},subtitleWrap:{...null==i?void 0:i.subtitleWrap},bodyWrap:{...null==i?void 0:i.bodyWrap},actionMenuWrap:{flex:"0 0 auto",height:26,position:"absolute",right:12,top:14,width:26,...n?{}:u.jy}})),[t,o,n,i])}},37867:(e,t,o)=>{o.d(t,{Z:()=>p});o(67294);var n=o(480),i=o(24405),r=o(84619),a=o(54497),s=o(68939),l=o(85567),c=o(56812),d=o(85893);function p(e){let{key:t,tokenFormat:o=r.lo.Medium,isSingle:p,showRemoveButton:u,onClickRemove:m}=e;window.__c={n:"DeletedOptionToken"};const{isMobile:g}=(0,n.Fy)(),y=(0,s.useIntl)(),h=(0,i.yK)((e=>{const t="light"===e.mode?400:800,o="light"===e.mode?50:200,n="light"===e.mode?700:900;return{tokenValueWrap:{display:"inline-flex",gap:"4px",alignItems:"baseline"},warning:{color:e.accentColors.orange[t],height:"auto",width:g?16:14},warningWrap:{alignSelf:"center"},token:{backgroundColor:e.accentColors.yellow[o]},textWrap:{color:e.accentColors.yellow[n]}}}),[g]);return(0,d.jsx)(l.Z,{format:o,isSingle:p??!0,showRemoveButton:u??!1,onClickRemove:m,style:h.token,value:(0,d.jsxs)("span",{style:h.tokenValueWrap,children:[(0,d.jsx)("span",{style:h.warningWrap,children:(0,a.t)(h.warning)}),(0,d.jsx)("span",{style:h.textWrap,children:(0,c.ST)(y)})]})},t)}},60781:(e,t,o)=>{o.d(t,{JM:()=>j,YB:()=>P});var n=o(67294),i=o(480),r=o(86628),a=o(24405),s=o(72126),l=o(68939),c=o(9953),d=o(39699),p=o(15201),u=o(68709),m=o(31945),g=o(55217),y=o(79954),h=o(43250),f=o(12534),v=o(61766),S=o(26136),x=o(2553),b=o(35294),C=o(26612),M=o(48312),k=o(40190),w=o(85893);function j(e){window.__c={n:"DuplicateBlocksAction"};const{actionStore:t,disabled:o}=e,a=(0,i.O7)(),p=(0,r.VK)((()=>s.Ps(t.getBlockPointers())),[t],{useDeepEqual:!0}),u=(0,r.VK)((()=>(0,C.xy)(t.getInsertionPoint())),[t]),m=(0,n.useCallback)((e=>{d.createAndCommit({userAction:"DuplicateBlocksAction.setInsertionPoint",environment:a,perform:o=>{c.sW({store:t.getConfigStore(),data:{insertion_point:e},transaction:o})}})}),[a,t]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(M.X,{...e,title:(0,w.jsx)(l.FormattedMessage,{id:"automations.DuplicateBlocksAction.header",defaultMessage:"Insert blocks"}),picker:(0,w.jsx)(_,{currentOption:u,disabled:o,onChange:m})}),p?(0,w.jsx)(P,{...e,contentParentPointer:p}):null]})}function P(e){window.__c={n:"DuplicateBlocksActionEditor"};const{actionStore:t,disabled:o,contentParentPointer:s,buttonPlacement:c}=e,m=(0,i.O7)(),v=(0,a.yK)((e=>({listWrap:{background:e.contentBackground,borderRadius:5,boxShadow:e.inputBoxShadow,fontSize:14,minHeight:64,paddingBlock:3,paddingInline:10,..."dark"===e.mode?{backgroundColor:e.inputBackground}:{}},emptyPlaceholder:{caretColor:e.mediumTextColor,color:e.lightTextColor,fontSize:14,padding:"5px 0",display:"inline-block"}})),[]),b=(0,r.VK)((()=>S.G.createChildStore(t,s)),[t,s]),C=(0,r.VK)((()=>b.getContentStore()),[b]),M=(0,n.useCallback)((e=>{(0,f.ZP)({event:e,context:f.Af.EditorClick,callback:()=>{if(!C)return;(C.getValue()||[]).length>0||d.createAndCommit({userAction:"DuplicateBlocksAction.handleListClick",environment:m,perform:e=>{x.Nj({environment:m,parentStore:C,transaction:e})}})}})}),[m,C]);if(!C)return null;const k="inline"===(null==c?void 0:c.type);return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(y.Z,{store:b,analyticsName:"duplicate_blocks_action",isListContainer:!0,children:(0,w.jsx)(u.p,{allowSelectionWithin:!0,children:(0,w.jsx)("div",{style:v.listWrap,onClick:M,className:h.Wh_,children:(0,w.jsx)(p.O,{displayName:"DuplicateBlocksActionContent",disabled:o,children:(0,w.jsx)(g.Z,{disabled:o,store:C,emptyPlaceholder:(0,w.jsx)("div",{style:v.emptyPlaceholder,children:k?(0,w.jsx)(l.FormattedMessage,{id:"automations.DuplicateBlocksAction.emptyPlaceholder",defaultMessage:"Click to edit or drop blocks hereâ¦"}):(0,w.jsx)(l.FormattedMessage,{id:"automations.DuplicateBlocksAction.emptyCannotDropPlaceholder",defaultMessage:"Click to edit blocks hereâ¦"})}),disableCommentMenu:!0,disableHoverMenu:!1,disableDrag:!1})})})})})})}function _(e){window.__c={n:"InsertBlockInDropdownButton"};const{currentOption:t,disabled:o,onChange:i}=e,a=(0,l.useIntl)(),s=(0,b.d)(),c=(0,r.qz)(void 0,v.Z),d=(0,n.useCallback)((e=>{i&&t.key!==e&&i(e),c.setState({open:!1})}),[c,t,i]);return(0,w.jsx)(m.ZP,{alignmentToOrigin:m.vR.End,buttonPopupStore:c,disabled:o,originGap:0,placementToOrigin:m.pO.Bottom,popupType:s,render:()=>(0,w.jsx)(C.A3,{currentOption:t,onChange:d}),renderOrigin:e=>(0,w.jsx)(k.S,{...e,disabled:o,variant:"gray",children:a.formatMessage(t.menuItemLabel)})})}},26612:(e,t,o)=>{o.d(t,{A3:()=>Z,JM:()=>T,xy:()=>B});var n=o(67294),i=o(480),r=o(86628),a=o(24405),s=o(83372),l=o(1230),c=o(41490),d=o(72126),p=o(82990),u=o(68939),m=o(9953),g=o(39699),y=o(52275),h=o(31945),f=o(78140),v=o(32163),S=o(72495),x=o(61766),b=o(95193),C=o(35294),M=o(60781),k=o(64973),w=o(40190),j=o(24305),P=o(85893);const _=(0,u.defineMessages)({aboveMenuItemLabel:{id:"automations.DuplicateBlocksAction.aboveButtonLabel",defaultMessage:"Above button"},aboveTitle:{id:"automations.DuplicateBlocksAction.aboveTitle",defaultMessage:"above button"},belowMenuItemLabel:{id:"automations.DuplicateBlocksAction.belowButtonLabel",defaultMessage:"Below button"},belowTitle:{id:"automations.DuplicateBlocksAction.belowTitle",defaultMessage:"below button"},title:{defaultMessage:"Insert blocks {insertionPicker}",id:"automations.DuplicateBlocksAction.title"}}),A={before:{icon:(0,c.F)({width:16}),key:"before",menuItemLabel:_.aboveMenuItemLabel,title:_.aboveTitle},after:{icon:(0,l.H)({width:16}),key:"after",menuItemLabel:_.belowMenuItemLabel,title:_.belowTitle}},I=A.after;function T(e){window.__c={n:"DuplicateBlocksAction"};const{actionStore:t,disabled:o,editorPlacement:l}=e,c=(0,i.O7)(),p=(0,a.yK)((()=>({title:{display:"inline-flex",flexWrap:"wrap",gap:"6px 0",whiteSpace:"pre-wrap"}})),[]),y=(0,r.VK)((()=>(0,d.Ps)(t.getBlockPointers())),[t],{useDeepEqual:!0}),h=(0,r.VK)((()=>B(t.getInsertionPoint())),[t]),f=(0,n.useCallback)((e=>function(e,t,o){g.createAndCommit({userAction:"DuplicateBlocksAction.setInsertionPoint",environment:e,perform:e=>{m.sW({store:t.getConfigStore(),data:{insertion_point:o},transaction:e})}})}(c,t,e)),[t,c]),v=(0,n.useMemo)((()=>(0,P.jsx)(k.rn,{onDelete:()=>{}})),[]),S=(0,s.z)("duplicate_blocks"),{display:x}=S;return(0,P.jsxs)(j.Ao,{actionMenu:v,children:[(0,P.jsx)(j.vu,{icon:x.icon,children:(0,P.jsx)("div",{style:p.title,children:(0,P.jsx)(u.FormattedMessage,{..._.title,values:{insertionPicker:(0,P.jsx)(V,{currentOption:h,disabled:Boolean(o),onChange:f})}})})}),(0,P.jsx)(j.R7,{children:y?(0,P.jsx)(M.YB,{actionStore:t,buttonPlacement:l,contentParentPointer:y,disabled:Boolean(o)}):null})]})}function V(e){window.__c={n:"InsertBlockInDropdownButton"};const{currentOption:t,disabled:o,onChange:i}=e,s=(0,u.useIntl)(),l=(0,a.yK)((e=>({button:{color:e.text.primary,fontWeight:p.Z.fontWeight.medium,height:"auto",marginBlock:-6,marginInline:-5,paddingBlock:6,paddingInline:5}})),[]),c=(0,C.d)(),d=(0,r.qz)(void 0,x.Z),m=(0,n.useCallback)((e=>{i&&t.key!==e&&i(e),d.setState({open:!1})}),[d,t,i]);return(0,P.jsx)(h.ZP,{alignmentToOrigin:h.vR.End,buttonPopupStore:d,disabled:o,originGap:0,placementToOrigin:h.pO.Bottom,popupType:c,render:()=>(0,P.jsx)(Z,{currentOption:t,onChange:m}),renderOrigin:e=>(0,P.jsx)(w.S,{...e,disabled:o,style:l.button,variant:"gray",children:s.formatMessage(t.title)})})}function Z(e){window.__c={n:"InsertBlockInDropdownMenu"};const{currentOption:t,onChange:o}=e,n=(0,u.useIntl)(),i=(0,b.F)({maxWidth:360}),r=Object.values(A).map((e=>({key:e.key,render:o=>(0,P.jsx)(y.Z,{...o,checkState:t.key===e.key,icon:e.icon,title:n.formatMessage(e.menuItemLabel)}),action:()=>o(e.key)})));return(0,P.jsx)(f.Z,{...i,children:(0,P.jsx)(v.Z,{initialFocus:0,sections:[{key:0,render:e=>(0,P.jsx)(S.Z,{enableActionSheetTitle:!0,...e}),items:r}],type:v.i.Vertical})})}function B(e){return Object.values(A).find((t=>t.key===e))??I}},66315:(e,t,o)=>{o.d(t,{R:()=>g});o(21703);var n=o(67294),i=o(86628),r=o(26388),a=o(61766),s=o(12455),l=o(73266),c=o(64973),d=o(77463),p=o(93060),u=o(24305),m=o(85893);function g(e){window.__c={n:"AutomationTriggerListItem"};const{onDelete:t}=e,{disabled:o,disableTooltip:g}=(0,s.i)(),y=(0,l.Z)(),h=(0,i.qz)(void 0,a.Z),f=(0,n.useMemo)((()=>`${d.mR} ${y?d.vs:""}`),[y]),v=(0,n.useCallback)((()=>{if(!t)throw new Error("onDelete is not implemented for trigger");t(),h.setState({open:!1})}),[h,t]),S=(0,n.useMemo)((()=>t?(0,m.jsx)(c.rn,{onDelete:v}):null),[t,v]),x=null!==S,b=(0,n.useCallback)((()=>x&&h.setState({open:!0})),[x,h]),C=(0,n.useCallback)((t=>{const n=x?u.YG:u._S;return(0,m.jsx)("div",{className:f,children:(0,m.jsx)(n,{...t,actionMenu:S,buttonPopupStore:h,disabled:o,icon:e.icon,onClick:b,children:e.children})})}),[x,f,S,h,o,e.icon,e.children,b]);return(0,m.jsx)(p.y,{disable:g,renderOrigin:C,title:e.tooltip,tooltipAlignment:r.Z.Alignment.Center,tooltipPlacement:r.Z.Placement.Left})}},20239:(e,t,o)=>{o.d(t,{Ij:()=>p,l4:()=>g,zR:()=>m});o(67294);var n=o(24405),i=o(82990),r=o(68939),a=o(21467),s=o(20776),l=o(56812),c=o(80624),d=o(85893);function p(e){window.__c={n:"CheckboxPropertyTrigger"};const t=(0,r.useIntl)(),{propertySchema:o,filter:n}=e;return(0,d.jsx)(c.n,{tooltip:g({filter:n,intl:t,propertySchema:o}),children:(0,d.jsx)(u,{propertySchema:o,filter:n})})}function u(e){let{propertySchema:t,filter:o}=e;window.__c={n:"CheckboxPropertyTriggerTitle"};const a=(0,r.useIntl)(),s=(0,n.yK)((()=>({propertyName:{...i.Z.textOverflowStyle,fontWeight:i.Z.fontWeight.medium},wrap:{alignItems:"center",display:"flex",whiteSpace:"pre"}})),[]),l=m({filter:o,intl:a,propertySchema:t,styles:s});return(0,d.jsx)("span",{style:s.wrap,children:l})}function m(e){const{filter:t,intl:o,propertySchema:n,styles:i}=e,r=n.name,a=t.value,s={propertyName:(0,d.jsx)("span",{style:i.propertyName,children:r}),propertyValues:(0,d.jsx)(y,{checkboxValue:a.value??!1})};return(0,l.vz)(o,s)}function g(e){const{filter:t,intl:o,propertySchema:n}=e,i={propertyName:n.name,propertyValues:!0===t.value.value?(0,d.jsx)(r.FormattedMessage,{...l.Bo.actionCheckboxPropertyChecked}):(0,d.jsx)(r.FormattedMessage,{...l.Bo.actionCheckboxPropertyUnchecked})};return(0,l.vz)(o,i)}function y(e){const{checkboxValue:t}=e,o=!0===t?(0,a.c$e)({width:12}):(0,a.UmH)({width:10}),n=!0===t?(0,d.jsx)(r.FormattedMessage,{...l.Bo.actionCheckboxPropertyChecked}):(0,d.jsx)(r.FormattedMessage,{...l.Bo.actionCheckboxPropertyUnchecked});return(0,d.jsx)(s.o,{icon:o,children:n})}},76954:(e,t,o)=>{o.d(t,{v:()=>h,z:()=>v});o(67294);var n=o(24405),i=o(80951),r=o(84619),a=o(97880),s=o(82990),l=o(68939),c=o(22084),d=o(85567),p=o(65380),u=o(56812),m=o(37867),g=o(80624),y=o(85893);function h(e){window.__c={n:"SelectPropertyTrigger"};const t=(0,l.useIntl)(),{filter:o,propertySchema:n}=e,i={...s.Z.textOverflowStyle,fontWeight:s.Z.fontWeight.medium},r=o.value,c=n.name,d=v({intl:t,isText:!0,limit:5,optionValues:(Array.isArray(r)?r:[r]).map((e=>e.value)).filter(a.$K),propertySchema:n}),m=t.formatList(d,{style:"long",type:"disjunction"}),h=(0,u.XJ)(t,{propertyName:(0,y.jsx)("span",{style:i,children:c}),propertyValues:(0,p.H)(m)});return(0,y.jsx)(g.n,{tooltip:h,children:(0,y.jsx)(f,{filter:o,propertySchema:n})})}function f(e){window.__c={n:"SelectPropertyTriggerTitle"};const{filter:t,propertySchema:o}=e,i=(0,l.useIntl)(),r=t.value,c=o.name,d=v({intl:i,limit:5,optionValues:(Array.isArray(r)?r:[r]).map((e=>e.value)).filter(a.$K),propertySchema:o}),m=i.formatList(d,{style:"long",type:"disjunction"}),g=(0,n.yK)((()=>({content:{alignItems:"baseline",display:"flex",flexWrap:"wrap",whiteSpace:"pre"},propertyName:{...s.Z.textOverflowStyle,fontWeight:s.Z.fontWeight.semibold}})),[]),h=(0,u.XJ)(i,{propertyName:(0,y.jsx)("span",{style:g.propertyName,children:c}),propertyValues:(0,p.H)(m)});return(0,y.jsx)("div",{style:g.content,children:h})}function v(e){let{intl:t,isText:o,limit:n,optionValues:a,propertySchema:s,tokenFormat:l=r.lo.Medium}=e;const p=s.options??[],g=a.map((e=>{const n=(0,i.i7)(p,e);return n?o?n.value:(0,y.jsx)(c.a,{value:n.value,color:n.color,format:l,isSingle:!0,showRemoveButton:!1},n.id):o?(0,u.ST)(t):(0,y.jsx)(m.Z,{tokenFormat:l},`missing_option_value_${e}`)}));let h;if(void 0!==n&&g.length>n){const e=g.length-n,t=o?`+${e}`:(0,y.jsx)(d.Z,{format:r.lo.Medium,isRound:!0,isSingle:!0,showRemoveButton:!1,value:`+${e}`},"More tokens");h=[...g.slice(0,n),t]}else h=g;return h}},87181:(e,t,o)=>{o.d(t,{L:()=>b,V:()=>v});o(67294);var n=o(24405),i=o(76205),r=o(80951),a=o(84619),s=o(97880),l=o(82990),c=o(68939),d=o(22084),p=o(85567),u=o(65380),m=o(56812),g=o(37867),y=o(80624),h=o(85893);const f=5;function v(e){window.__c={n:"StatusPropertyTrigger"};const t=(0,c.useIntl)(),{filter:o,limit:n=f,propertySchema:r}=e,a=r.name,l=(0,i.wB)(o),d=l.map((e=>"is_group"===e.type?e.value:void 0)).filter(s.$K),p=l.map((e=>"is_option"===e.type?e.value:void 0)).filter(s.$K),u=b({intl:t,groupValues:d,limit:n,optionValues:p,propertySchema:r}),m=b({intl:t,isText:!0,groupValues:d,limit:n,optionValues:p,propertySchema:r});return(0,h.jsx)(y.n,{tooltip:(0,h.jsx)(x,{propertyName:a,statusValues:m}),children:(0,h.jsx)(S,{propertyName:a,statusValues:u})})}function S(e){let{propertyName:t,statusValues:o}=e;window.__c={n:"StatusPropertyTriggerTitle"};const i=(0,c.useIntl)(),r=(0,n.yK)((()=>({propertyName:{...l.Z.textOverflowStyle,fontWeight:l.Z.fontWeight.semibold}})),[]),a=i.formatList(o,{style:"long",type:"disjunction"});return(0,h.jsx)(h.Fragment,{children:(0,m.VO)(i,{propertyName:(0,h.jsx)("span",{style:r.propertyName,children:t}),propertyValues:(0,u.H)(a)})})}function x(e){let{propertyName:t,statusValues:o}=e;window.__c={n:"StatusPropertyTriggerTooltip"};const i=(0,c.useIntl)(),r=(0,n.yK)((()=>({propertyName:{...l.Z.textOverflowStyle,fontWeight:l.Z.fontWeight.semibold}})),[]),a=i.formatList(o,{style:"long",type:"disjunction"});return(0,h.jsx)(h.Fragment,{children:(0,m.VO)(i,{propertyName:(0,h.jsx)("span",{style:r.propertyName,children:t}),propertyValues:(0,u.H)(a)})})}function b(e){let{groupValues:t,intl:o,isText:n,limit:i,optionValues:l,propertySchema:c,tokenFormat:u=a.lo.Medium}=e;const y=c.groups||[],f=c.options||[],v=t.map((e=>{const t=y.find((t=>t.name===e));if(t)return n?t.name:(0,h.jsx)("span",{children:t.name},t.id)})).filter(s.$K),S=l.map((e=>{const t=(0,r.i7)(f,e);if(void 0===t)return n?(0,m.ST)(o):(0,h.jsx)(g.Z,{tokenFormat:u},`missing_option_value_${e}`);if(n)return t.value;const i=y.find((e=>{var o;return null===(o=e.optionIds)||void 0===o?void 0:o.includes(t.id)}));return(0,h.jsx)(d.F,{format:u,isSingle:!0,value:t.value,color:t.color,groupColor:null==i?void 0:i.color,showRemoveButton:!1,showEllipsis:!0},t.id)})),x=[...v,...S];let b=[];if(void 0!==i&&x.length>i){const e=S.length-i,t=n?`+${e}`:(0,h.jsx)(p.Z,{format:a.lo.Medium,isRound:!0,isSingle:!0,showRemoveButton:!1,value:`+${e}`},"More tokens");b=[...S.slice(0,i),t]}else b=x;return b}},80624:(e,t,o)=>{o.d(t,{n:()=>A,q:()=>P});var n=o(67294),i=o(480),r=o(86628),a=o(3865),s=o(76205),l=o(47453),c=o(68939),d=o(39699),p=o(52821),u=o(56812),m=o(12455),g=o(66315),y=o(24405),h=o(39068),f=o(85893);function v(e){let{style:t,propertySchema:o}=e;window.__c={n:"TriggerPropertyIcon"};const n=(0,y.Fg)();return(0,f.jsx)(h.ZP,{size:16,theme:n,icon:o.icon,style:t,type:o.type})}var S=o(20239),x=o(82990);function b(e){let{propertySchema:t}=e;return(0,f.jsx)(A,{icon:e=>(0,f.jsx)(v,{propertySchema:t,style:e}),tooltip:(0,f.jsx)(M,{propertyName:t.name}),children:(0,f.jsx)(C,{propertyName:t.name})})}function C(e){let{propertyName:t}=e;window.__c={n:"PropertyEditedTriggerTitle"};const o=(0,c.useIntl)(),n=(0,y.yK)((()=>({propertyName:{...x.Z.textOverflowStyle,fontWeight:x.Z.fontWeight.medium},wrap:{alignItems:"center",display:"flex",whiteSpace:"pre"}})),[]),i=u.$G(o,{propertyName:(0,f.jsx)("span",{style:n.propertyName,children:t})});return(0,f.jsx)("span",{style:n.wrap,children:i})}function M(e){let{propertyName:t}=e;window.__c={n:"PropertyEditedTriggerTooltip"};const o=(0,c.useIntl)();return(0,f.jsx)(f.Fragment,{children:u.$G(o,{propertyName:t})})}var k=o(76954),w=o(87181);const j=(0,n.createContext)({pagePropertiesEdited:[],property:""});function P(){window.__c={n:"PropertyEditedTriggers"};const{automationStore:e,collectionStore:t}=(0,m.i)(),o=(0,r.VK)((()=>{var t;if(e.isTriggerType("event")&&!e.isTriggerType("notification_event"))return null===(t=e.getTrigger())||void 0===t?void 0:t.event.pagePropertiesEdited}),[e]),n=(0,r.VK)((()=>null==t?void 0:t.getSchema()),[t]);return o&&"none"!==o.type?"any"===o.type?(0,f.jsx)(_,{}):n&&o.some?(0,f.jsx)(f.Fragment,{children:o.some.map((e=>{let{property:t,filter:n}=e;return(0,f.jsx)(j.Provider,{value:{property:t,pagePropertiesEdited:o.some},children:(0,f.jsx)(I,{property:t,filter:n})},t)}))}):null:null}function _(){window.__c={n:"AnyPropertyEditedTrigger"};const e=(0,i.O7)(),t=(0,c.useIntl)(),{automationStore:o}=(0,m.P)(),r=(0,n.useCallback)((()=>{d.createAndCommit({userAction:"deletePropertyEditedAutomationTrigger",environment:e,perform:e=>{d.applyOperation({store:o,operation:{path:["trigger","event"],args:{pagePropertiesEdited:{type:"none"}},pointer:o.pointer,command:"update"},transaction:e})}})}),[o,e]),a=u.c5(t);return(0,f.jsx)(g.R,{icon:l.R,onDelete:r,children:a})}function A(e){window.__c={n:"PropertyEditedTrigger"};const t=(0,i.O7)(),{pagePropertiesEdited:o,property:a}=(0,n.useContext)(j),{automationStore:s,collectionStore:l}=(0,m.P)(),c=(0,n.useCallback)((()=>{const e=o.filter((e=>e.property!==a));d.createAndCommit({userAction:"deletePropertyEditedAutomationTrigger",environment:t,perform:t=>{d.applyOperation({store:s,operation:{args:{pagePropertiesEdited:{...o,some:e}},path:["trigger","event"],pointer:s.pointer,command:"update"},transaction:t})}})}),[s,t,o,a]),p=(0,r.VK)((()=>l.getSchema()),[l]);if(!p)return null;const u=p[a],y=u?e=>(0,f.jsx)(v,{propertySchema:u,style:e}):void 0;return(0,f.jsx)(g.R,{onDelete:c,icon:y,...e,children:e.children})}function I(e){window.__c={n:"PropertyEditedTriggerRouter"};const{collectionStore:t}=(0,m.P)(),{property:o,filter:n}=e,i=(0,r.VK)((()=>{var e;return null===(e=t.getSchema())||void 0===e?void 0:e[o]}),[t,o]),s=(0,r.VK)((()=>{var e;return null===(e=t.getDeletedSchema())||void 0===e?void 0:e[o]}),[t,o]);if(!i){const e=(0,f.jsx)(c.FormattedMessage,{id:"deletedPropertyStep.deletedProperty.title",defaultMessage:"{propertyName} property deleted",values:{propertyName:null==s?void 0:s.name}});return(0,f.jsx)(A,{tooltip:e,children:e})}if(!a.Ym[i.type]){const e=p.SO[i.type],t=(0,f.jsx)(c.FormattedMessage,{id:"UnsupportedPropertyTriggerAction.unsupportedProperty.title",defaultMessage:"{propertyType} property not supported",values:{propertyType:e}});return(0,f.jsx)(A,{tooltip:t,children:t})}return"changes_to_any"===n.operator?(0,f.jsx)(b,{propertySchema:i}):(0,f.jsx)(T,{propertySchema:i,filter:n})}function T(e){const{propertySchema:t,filter:o}=e;return(0,s.vR)(o)?"checkbox"===t.type&&(0,s.XA)(o)?(0,f.jsx)(S.Ij,{propertySchema:t,filter:o}):"status"===t.type&&(0,s.r2)(o)?(0,f.jsx)(w.V,{filter:o,propertySchema:t}):"select"===t.type&&(0,s.dx)(o)||"multi_select"===t.type&&(0,s.NU)(o)?(0,f.jsx)(k.v,{filter:o,propertySchema:t}):(0,f.jsx)(b,{propertySchema:t}):(0,f.jsx)(b,{propertySchema:t})}},9015:(e,t,o)=>{o.d(t,{Z:()=>s,l:()=>l});var n=o(67294),i=o(72126),r=o(33317),a=o(45953);const s=(0,n.createContext)({automationStore:void 0,collectionStore:void 0,disabled:!0,disableTooltip:!1,dispatchOperations:i.ZT,editorPlacement:{type:"inline"},editorWidth:300});function l(e,t,o){return function(n,i){if(!t)return;const s=a.Ak.create();for(const e of o)s.addModel(e);if(i)for(const e of i)s.addModel(e);(0,r.FS)({operations:n,recordMap:s,updateOnly:!1});for(const o of s){const{model:n,pointer:i}=o;e.setModelAndRole({pointer:i,userId:t},n,"editor")}e.emitAll()}}},65380:(e,t,o)=>{o.d(t,{H:()=>i});o(57658),o(67294);var n=o(85893);function i(e){if(!Array.isArray(e))return[e];const t=[];for(const o of e)if("string"==typeof o&&" "!==o[0]){const e=t.pop();t.push((0,n.jsxs)("div",{children:[e,o]}))}else t.push(o);return t}},56812:(e,t,o)=>{o.d(t,{$G:()=>k,Bo:()=>i,Ig:()=>f,Iu:()=>p,Mw:()=>g,Mz:()=>b,NZ:()=>v,Oq:()=>d,S0:()=>u,ST:()=>_,Sj:()=>h,VO:()=>P,XJ:()=>j,aD:()=>x,c5:()=>C,hW:()=>r,ht:()=>l,nf:()=>M,oJ:()=>A,om:()=>m,rf:()=>y,vE:()=>S,vz:()=>w,wE:()=>c,xf:()=>a,zU:()=>s});var n=o(80951);const i=(0,o(68939).defineMessages)({actionCheckboxPropertyChecked:{defaultMessage:"checked",id:"automations.action.checkboxProperty.checked"},actionCheckboxPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.checkboxProperty.single"},actionCheckboxPropertyUnchecked:{defaultMessage:"unchecked",id:"automations.action.checkboxProperty.unchecked"},actionDatePropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.dateProperty.clear"},actionDatePropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.dateProperty.single"},actionPersonPropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.personProperty.clear"},actionPersonPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.personProperty.single"},actionPersonPropertySetMultiple:{defaultMessage:"Set {propertyName} to all of {propertyValues}",id:"automations.action.personProperty.multiple"},actionRelationPropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.relationProperty.clear"},actionRelationPropertySetMultiple:{defaultMessage:"Set {propertyName} to all of {propertyValues}",id:"automations.action.relationProperty.multiple"},actionRelationPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.relationProperty.single"},actionSelectPropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.selectProperty.clear"},actionSelectPropertySetMultiple:{defaultMessage:"Set {propertyName} to all of {propertyValues}",id:"automations.action.selectProperty.multiple"},actionSelectPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.selectProperty.single"},actionStatusPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.statusProperty.single"},actionTextPropertyClear:{defaultMessage:"Clear {propertyName}",id:"automations.action.textProperty.clear"},actionTextPropertySetSingle:{defaultMessage:"Set {propertyName} to {propertyValue}",id:"automations.action.textProperty.single"},actionDeletedProperty:{defaultMessage:"Edit a deleted property",id:"automations.action.deletedProperty"},triggerAnyPageAdded:{defaultMessage:"Page added",id:"automations.trigger.pageAdded.title"},triggerAnyPagePropertyEdit:{defaultMessage:"Any property edited",id:"automations.trigger.anyPagePropertyEdited.title"},triggerAnyPropertyEdit:{defaultMessage:"{propertyName} is edited",id:"automations.trigger.propertyChangesToAny.title"},triggerButtonClicked:{defaultMessage:"<b>Button</b> is clicked",id:"automations.trigger.button.clicked"},triggerCheckboxPropertyChecked:{defaultMessage:"checked",id:"automations.trigger.checkboxProperty.checked"},triggerCheckboxPropertySet:{defaultMessage:"{propertyName} set to {propertyValues}",id:"automations.trigger.checkboxPropertySet.title"},triggerCheckboxPropertyUnchecked:{defaultMessage:"unchecked",id:"automations.trigger.checkboxProperty.unchecked"},triggerSelectPropertySet:{id:"automations.trigger.selectPropertySet.title",defaultMessage:"{propertyName} set to {propertyValues}"},triggerStatusPropertySet:{defaultMessage:"{propertyName} set to {propertyValues}",id:"automations.trigger.statusPropertySet.singleProperty"},triggerDeletedPropertyEdit:{defaultMessage:"Deleted property is edited",id:"automations.trigger.deletedPropertyEdited"},deletedPropertyOption:{defaultMessage:"Deleted option",id:"automations.values.deletedPropertyOption"}});function r(e){const{propertyName:t,propertyValue:o}=e;return{...i.actionCheckboxPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function a(e){const{propertyName:t}=e;return{...i.actionDatePropertyClear,values:{propertyName:t}}}function s(e){const{propertyName:t,propertyValue:o}=e;return{...i.actionDatePropertySetSingle,values:{propertyName:t,propertyValue:o}}}function l(e){const{propertyName:t}=e;return{...i.actionPersonPropertyClear,values:{propertyName:t}}}function c(e){const{propertyName:t,propertyValue:o}=e;return{...i.actionPersonPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function d(e){const{propertyName:t,propertyValue:o}=e;return{...i.actionPersonPropertySetMultiple,values:{propertyName:t,propertyValues:o}}}function p(e){const{propertyName:t}=e;return{...i.actionRelationPropertyClear,values:{propertyName:t}}}function u(e){const{propertyName:t,propertyValue:o}=e;return{...i.actionRelationPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function m(e){const{propertyName:t,propertyValue:o}=e;return{...i.actionRelationPropertySetMultiple,values:{propertyName:t,propertyValues:o}}}function g(e){const{propertyName:t}=e;return{...i.actionSelectPropertyClear,values:{propertyName:t}}}function y(e){const{propertyName:t,propertyValue:o}=e;return{...i.actionSelectPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function h(e){const{propertyName:t,propertyValue:o}=e;return{...i.actionSelectPropertySetMultiple,values:{propertyName:t,propertyValues:o}}}function f(e){const{propertyName:t,propertyValue:o}=e;return{...i.actionStatusPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function v(e){const{propertyName:t}=e;return{...i.actionTextPropertyClear,values:{propertyName:t}}}function S(e){const{propertyName:t,propertyValue:o}=e;return{...i.actionTextPropertySetSingle,values:{propertyName:t,propertyValue:o}}}function x(e){return e.formatMessage(i.actionDeletedProperty)}function b(e){return e.formatMessage(i.triggerAnyPageAdded)}function C(e){return e.formatMessage(i.triggerAnyPagePropertyEdit)}function M(e){return e.formatMessage(i.triggerDeletedPropertyEdit)}function k(e,t){const{propertyName:o}=t;return e.formatMessage(i.triggerAnyPropertyEdit,{propertyName:o})}function w(e,t){return e.formatMessage(i.triggerCheckboxPropertySet,t)}function j(e,t){return e.formatMessage(i.triggerSelectPropertySet,t)}function P(e,t){return e.formatMessage(i.triggerStatusPropertySet,t)}function _(e){return e.formatMessage(i.deletedPropertyOption)}function A(e){const{limit:t,optionValues:o,propertySchema:i}=e,r=i.options??[],a=r.length>0,s=o.map((e=>{const t=a?(0,n.i7)(r,e):void 0;return t?{type:"option",value:t}:{type:"deleted",value:e}}));let l=s;if(void 0!==t&&s.length>t){const e=s.length-t;l=[...s.slice(0,t),{type:"truncation",value:`+${e}`}]}return l}},12455:(e,t,o)=>{o.d(t,{P:()=>a,i:()=>r});o(21703);var n=o(67294),i=o(9015);function r(){const{automationStore:e,...t}=(0,n.useContext)(i.Z);if(!e)throw new Error("automationStore is undefined. Is this rendered inside an AutomationEditorContext.Provider?");return{...t,automationStore:e}}function a(){const{collectionStore:e,...t}=r();if(!e)throw new Error("collectionStore is undefined. Is this rendered inside an AutomationEditorContext.Provider?");return{...t,collectionStore:e}}},73266:(e,t,o)=>{o.d(t,{Z:()=>a,a:()=>r});var n=o(67294),i=o(9015);function r(e){return(0,n.useMemo)((()=>Boolean(e&&e.width<400)),[e])}function a(){const e=(0,n.useContext)(i.Z),{editorWidth:t}=e;return t<500}},95193:(e,t,o)=>{o.d(t,{F:()=>s,U:()=>a});var n=o(480),i=o(86628),r=o(87279);function a(e){return e.device.isPhone||"actionSheet"===e.tabletBehavior&&e.device.isTablet?{menuType:r.og.ActionSheet}:{menuType:r.og.Popup,maxHeight:e.maxHeight,maxWidth:e.maxWidth,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,width:e.width,minWidth:e.minWidth}}function s(e){const t=(0,n.Fy)();return(0,i.VK)((()=>a({device:t,maxHeight:null==e?void 0:e.maxHeight,maxWidth:null==e?void 0:e.maxWidth,paddingTop:null==e?void 0:e.paddingTop,paddingBottom:null==e?void 0:e.paddingBottom,width:null==e?void 0:e.width,minWidth:null==e?void 0:e.minWidth,tabletBehavior:null==e?void 0:e.tabletBehavior})),[t,null==e?void 0:e.maxHeight,null==e?void 0:e.maxWidth,null==e?void 0:e.paddingTop,null==e?void 0:e.paddingBottom,null==e?void 0:e.width,null==e?void 0:e.minWidth,null==e?void 0:e.tabletBehavior])}},35294:(e,t,o)=>{o.d(t,{d:()=>a});var n=o(480),i=o(86628),r=o(53437);function a(e){const t=(0,n.Fy)();return(0,i.VK)((()=>t.isPhone||"slideUp"===(null==e?void 0:e.tabletBehavior)&&t.isTablet?r.kQ.SlideUp:r.kQ.Popup),[t,null==e?void 0:e.tabletBehavior])}},21269:(e,t,o)=>{o.d(t,{Z:()=>c});o(67294);var n=o(480),i=o(84169),r=o(50906),a=o(42917),s=o(16354),l=o(85893);const c=function(e){window.__c={n:"CollectionSettingsLearnMoreButton"};const{title:t,href:o,analyticsFrom:c}=e,d=(0,n.O7)();return(0,l.jsx)(s.Z,{href:o,onClick:()=>r.Fsx(d,{from:c}),external:!0,children:(0,l.jsx)(a.Z,{icon:i.m,title:t,isGray:!0})})}},71846:(e,t,o)=>{o.d(t,{S:()=>j,Z:()=>A});o(57658),o(67294);var n=o(83355),i=o(49085),r=o(56666),a=o(44495),s=o(6287),l=o(68939),c=o(8406),d=o(23586),p=o(33929),u=o(77907),m=o(75822),g=o(80444),y=o(29798),h=o(26136),f=o(73657),v=o(52275),S=o(68894),x=o(32163),b=o(11470),C=o(72495),M=o(26388),k=o(78948),w=o(85893);let j=function(e){return e[e.Source=0]="Source",e[e.Relation=1]="Relation",e[e.Automation=2]="Automation",e}({});const P=(0,l.defineMessages)({linkedInputPlaceholder:{defaultMessage:"Link to a databaseâ¦",id:"database.viewSettings.searchCollections.linkedInputPlaceholder"},linkedOrSourceInputPlaceholder:{defaultMessage:"Link or create a databaseâ¦",id:"database.viewSettings.searchCollections.linkedOrSourceInputPlaceholder"},automationInputPlaceholder:{id:"automations.databasePicker.automationInputPlaceholder",defaultMessage:"Select a databaseâ¦"}});class _ extends n.Z{constructor(){super(...arguments),this.storeTypes={inputStore:i.default.createClass(""),limitStore:i.default.createClass(5),menuListStore:y.Z}}renderComponent(){const{collectionContextStore:e,selectedCollectionStore:t,context:o,parentStore:n}=this.props,{device:i}=this.environment,{limitStore:a,inputStore:c,menuListStore:y}=this.stores,M=c.state,_="linked"===(null==e?void 0:e.getCollectionViewBlockSourceState())||o===j.Relation?P.linkedInputPlaceholder:o===j.Source?P.linkedOrSourceInputPlaceholder:P.automationInputPlaceholder;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(C.Z,{children:(0,w.jsx)(S.ZP,{focusInitial:!i.isMobile||void 0,value:M,onChange:e=>{c.setState(e.target.value),a.setState(e.target.value?20:5),y.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})},placeholder:p.default.formatMessage(_),showClearButton:!0})}),(0,w.jsx)(d.Z,{request:{query:M,limit:a.state},performRequest:e=>async function(e,t,o,n,i){const{query:r,limit:a}=e,{currentSpaceStore:s}=g.default.state,l=null==n?void 0:n.collectionViewBlockStore(),c=await u.deps.searchActions.loader(),d=await c.searchCollectionsWithRecents({environment:o,collectionViewBlockStore:l,parentStore:t,spaceStore:s,query:r,limit:a,requireEditPermissions:i});return{results:d.results,showMore:Math.max(0,d.total-d.results.length)}}(e,this.props.parentStore,this.environment,this.props.collectionContextStore,this.props.requireEditPermissions),debounce:m.vp,render:(i,c,d)=>{if(!c)return(0,w.jsx)(C.Z,{children:(0,w.jsx)(k.Z,{})});const{results:p,showMore:u}=c,m=p.map((i=>{const r=h.NW.createChildStore(n,{table:s.v,id:i});return{key:i,render:n=>{var a;return(0,w.jsx)(b.Z,{...n,checkState:t&&t.id===i,store:r,right:o===j.Relation&&(null==e||null===(a=e.collectionStore())||void 0===a?void 0:a.id)===i&&(0,w.jsx)(I,{})})},action:e=>{const{index:t}=e;this.handleAcceptExistingCollection({collectionStore:r,totalResults:p.length,clickedIndex:t})}}}));if(u>0){const e={key:"showMore",render:e=>(0,w.jsx)(v.Z,{...e,buttonStyle:{color:this.theme.mediumTextColor,fill:this.theme.mediumIconColor},icon:(0,r.o)({width:16,height:16}),title:(0,w.jsx)(l.FormattedMessage,{defaultMessage:"Show {showMore} more",id:"database.viewSettings.searchCollections.showMore.title",values:{showMore:Math.min(u,20)}})}),action:()=>{a.setState(a.state+20)}};m.push(e)}return(0,w.jsxs)(w.Fragment,{children:[p.length>0&&(0,w.jsx)(x.Z,{type:x.i.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,w.jsx)(C.Z,{...e}),items:m}],store:y}),0===p.length&&(0,w.jsx)(f.Z,{caption:(0,w.jsx)(l.FormattedMessage,{defaultMessage:"No results",id:"database.viewSettings.searchCollections.noResultsTitle"})})]})}})]})}handleAcceptExistingCollection(e){const{collectionStore:t,totalResults:o,clickedIndex:n}=e,{collectionContextStore:i,searchSessionId:r,context:a}=this.props,{inputStore:s}=this.stores;i&&c.wd({environment:this.environment,collectionContextStore:i,action:"select_existing_collection"});const{onAccept:l}=this.props;l(t),c.tW({environment:this.environment,eventName:"select_search_item",totalResults:o,clickedIndex:n,sessionId:r,source:a,queryLength:s.state.length})}}_.displayName="CollectionSettingsSearchCollections";const A=(0,l.injectIntl)(_);function I(){return(0,w.jsx)(M.Z,{renderTooltip:()=>(0,w.jsx)(l.FormattedMessage,{defaultMessage:"This database",id:"database.viewSettigs.searchCollections.thisDatabase.tooltip"}),render:e=>(0,w.jsx)("div",{...e,children:(0,a.D)({width:14,height:14})})})}},40071:(e,t,o)=>{o.d(t,{Z:()=>J});var n=o(94184),i=o.n(n),r=(o(67294),o(83355)),a=o(15145),s=o(88437),l=o(39132),c=o(18557),d=o(53470),p=o(37612),u=o(72126),m=o(68939),g=o(50906),y=o(98834),h=o(47307),f=o(96802),v=o(3992),S=o(75018),x=o(39699),b=o(66890),C=o(66213),M=o(28651),k=o(19037),w=o(43250),j=o(84210),P=o(33929),_=o(87279),A=o(98742),I=o(25498),T=o(77907),V=o(17031),Z=o(80444),B=o(61766),R=o(77080),E=o(96049),D=o(26136),F=o(24736),W=o(45669),N=o(93405),O=o(31945),L=o(78140),K=o(32163),H=o(53437),z=o(31278),q=o(76798),$=o(72495),U=o(26388),G=o(34574),X=o(85893);const Y=(0,m.defineMessages)({emptyPageTitle:{defaultMessage:"Empty",id:"database.templatePicker.emptyPageTitle"}});class Q extends r.Z{constructor(){super(...arguments),this.storeTypes={mouseStore:M.Z,buttonPopupStore:B.Z},this.renderActionMenuPopup=e=>{const{device:t}=this.environment,o=!!this.props.templateStore&&(0,k.J5)({environment:this.environment,blocks:[this.props.templateStore],publicEditMode:void 0}),n={key:"section",render:e=>(0,X.jsx)($.Z,{...e}),items:u.oA([this.props.templateStore&&!this.canEditContentOnly.state&&o&&{key:"repeatControl",render:(e,t)=>this.props.templateStore&&(0,X.jsx)(T.LazyRecurrenceConfigMenu,{...e,templateStore:this.props.templateStore,parent:t,cannotEditRecurrence:this.cannotEditRecurrence.state}),action:this.handleRecurrence},this.props.isOverlay&&!this.canEditContentOnly.state&&{key:"Set default",render:e=>(0,X.jsx)(N.Z,{...e,title:(0,X.jsx)(m.FormattedMessage,{defaultMessage:"Set as default",id:"database.collectionTemplatePickerItem.actionMenu.setAsDefault"}),svg:c.z}),action:()=>this.handleSetAsDefault(e)},this.props.templateStore&&{key:"Edit",render:e=>(0,X.jsx)(N.Z,{...e,title:o?(0,X.jsx)(m.FormattedMessage,{defaultMessage:"Edit",id:"database.templatePickerItem.actionMenu.edit"}):(0,X.jsx)(m.FormattedMessage,{defaultMessage:"View",id:"database.templatePickerItem.actionMenu.view"}),svg:o?d.H:l.c}),action:this.handleEdit},this.props.templateStore&&!this.canEditContentOnly.state&&o&&{key:"Duplicate",render:e=>(0,X.jsx)(N.Z,{...e,title:(0,X.jsx)(m.FormattedMessage,{defaultMessage:"Duplicate",id:"database.templatePickerItem.actionMenu.duplicate"}),svg:s.a}),action:this.handleDuplicate},this.props.templateStore&&!this.canEditContentOnly.state&&o&&{key:"Delete",render:e=>(0,X.jsx)(N.Z,{...e,title:(0,X.jsx)(m.FormattedMessage,{defaultMessage:"Delete",id:"database.templatePickerItem.actionMenu.delete"}),svg:p.y}),action:o?this.handleDelete:()=>{}}])};let i;return i=t.isMobile?{menuType:_.og.ActionSheet}:{menuType:_.og.Popup,width:230},(0,X.jsx)(L.Z,{...i,children:(0,X.jsx)(K.Z,{type:K.i.Vertical,initialFocus:void 0,sections:[n]})})},this.handleRecurrence=()=>{g.efr(this.environment,{isConfigured:void 0!==this.props.recurrence})},this.handleEdit=()=>{var e,t;const{buttonPopupStore:o}=this.stores;this.props.templateStore&&(null===(e=(t=this.props).onCancelClick)||void 0===e||e.call(t),this.navigateToBlock(this.props.templateStore),o.reset(),g.sYL(this.environment,{template_action:"edit"}))},this.handleDuplicate=()=>{var e,t;const{buttonPopupStore:o}=this.stores,{templateStore:n,collectionStore:i}=this.props;if(!n)return;null===(e=(t=this.props).onCancelClick)||void 0===e||e.call(t);const{performResult:r}=x.createAndCommit({userAction:"CollectionTemplatePickerItem.duplicatedStore",environment:this.environment,perform:e=>{const t=y.Zh({environment:this.environment,collectionStore:i,templateStore:n,transaction:e});if(n.getAutomationId()){const o=D.Mz.fromBlockStore(n),i=null==o?void 0:o.getRecurrence();o&&null!=o&&o.isActive()&&i&&v.createRecurrenceInner(e,this.environment,t,i)}return t}});r&&this.navigateToBlock(r),o.reset(),g.sYL(this.environment,{template_action:"duplicate"})},this.handleDelete=async()=>{const{templateStore:e,collectionStore:t}=this.props;if(!e)return;await h.confirmUserAction({message:(0,X.jsx)(m.FormattedMessage,{defaultMessage:"Are you sure you would like to delete this template?",id:"database.confirmDialog.templatePickerItem.deleteMessage"}),acceptLabel:(0,X.jsx)(m.FormattedMessage,{defaultMessage:"Delete",id:"database.confirmDialog.templatePickerItem.deleteButton.label"})})&&(x.createAndCommit({userAction:"CollectionTemplatePickerItem.handleDelete",environment:this.environment,perform:o=>y.R5({collectionStore:t,templateStore:e,transaction:o})}),g.sYL(this.environment,{template_action:"delete"}))},this.handleSetAsDefault=e=>{var t,o;const{collectionContextStore:n}=this.context,i=null==n?void 0:n.collectionStore(),r=null==n?void 0:n.collectionViewStore();if(!i||null==r||!r.isDefined())return;const a=null!==(t=this.props.templateStore)&&void 0!==t&&t.id?{template_page_id:null===(o=this.props.templateStore)||void 0===o?void 0:o.id}:"empty";h.showDialog({showCancel:!0,keepFocus:!1,message:(0,X.jsx)(m.FormattedMessage,{id:"database.collectionTemplatePickerItem.setAsDefaultDialog.message",defaultMessage:"<span>Use â{pageName}â as default template when creating new pages?</span>",values:{span:e=>(0,X.jsx)("span",{children:e}),pageName:this.props.templateStore?(0,X.jsx)(q.Z,{store:this.props.templateStore,style:{display:"inline"}}):P.default.formatMessage(Y.emptyPageTitle)}}),items:[{label:(0,X.jsx)(m.FormattedMessage,{id:"database.collectionTemplatePickerItem.setAsDefaultDialog.setCollection",defaultMessage:"For all views in â{databaseName}â",values:{databaseName:(0,X.jsx)(q.Z,{store:i,style:{display:"inline"}})}}),onAccept:()=>{e.close(),x.createAndCommit({environment:this.environment,userAction:"CollectionTemplatePickerItem.handleSetAsDefault:collection",perform:e=>{f.FH({stores:[i],update:{collection_default_template:a},transaction:e}),f.FH({stores:[r],update:{collection_view_default_template:a},transaction:e})}})}},{label:(0,X.jsx)(m.FormattedMessage,{id:"database.collectionTemplatePickerItem.setAsDefaultDialog.setCollectionView",defaultMessage:"Only on â{viewName}â view",values:{viewName:(0,X.jsx)(W.Z,{collectionViewName:r.getName(),collectionViewType:r.getType()})}}),onAccept:()=>{e.close(),x.createAndCommit({environment:this.environment,userAction:"CollectionTemplatePickerItem.handleSetAsDefault:collectionView",perform:e=>{f.FH({stores:[r],update:{collection_view_default_template:a},transaction:e})}})}}]})},this.handleMouseMove=()=>{E.Z.state||this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!0})},this.handleMouseLeave=()=>{this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1})},this.getRecordModel=this.props.collectionStore.getRecordModel,this.canEditContentOnly=this.createComputedStore((()=>{var e;return Boolean(null===(e=this.props.collectionStore.getParentBlockStore())||void 0===e?void 0:e.canEditContentOnly())})),this.cannotEditRecurrence=this.createComputedStore((()=>{if(!R.default.checkGate("recurrence_queue_task_improvements"))return!1;if(!this.props.templateStore)return!1;const e=(0,I.w)(this.props.templateStore);return!e.automationStoresReady||e.violatesConstraint}))}get registries(){return[V.Z]}navigate(e){this.context.overrideLinkClick?this.context.overrideLinkClick(e):S.navigate({environment:this.environment,url:e})}renderComponent(){var e;const{device:t}=this.environment,{templateStore:o,isMobile:n,isOverlay:i,focused:r,locked:a,canConfigureCollection:s,draggable:l}=this.props,{mouseStore:c,buttonPopupStore:d}=this.stores,p=!o&&!i,u=(!a||a&&!l)&&(s||this.canEditContentOnly.state)&&(c.state.mouseEntered||d.state.open||n||i)&&!p,m=o?(0,X.jsx)(q.Z,{store:o}):P.default.formatMessage(Y.emptyPageTitle),g=null==o||null===(e=o.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:this.getRecordModel});return(0,X.jsx)(G.Z,{className:w.$ji,type:o?"custom_template":"empty_page",format:i?"collection-overlay":"page-menu-item",locked:a||!s||!l,icon:(0,X.jsx)(z.Z,{disabled:!0,icon:g,isEmptyPage:(null==o?void 0:o.isEmptyPage())??!0,size:t.isMobile&&i?24:20,isLarge:!i,style:{...!i&&{pointerEvents:"none",marginRight:10}},pageIconStyle:{...!i&&{fill:this.theme.lightIconColor}}}),title:m,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,right:u&&this.renderActionMenuButton(),onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,focused:r,isDefault:this.props.isDefault,recurrence:this.props.recurrence})}renderActionMenuButton(){const{isMobile:e,isOverlay:t}=this.props,{buttonPopupStore:o}=this.stores,n=!!this.props.templateStore&&(0,k.J5)({environment:this.environment,blocks:[this.props.templateStore],publicEditMode:void 0});return(0,X.jsx)(U.Z,{renderTooltip:()=>n?(0,X.jsx)(m.FormattedMessage,{defaultMessage:"Edit this template",id:"database.templatePickerItem.editTemplate.tooltip"}):(0,X.jsx)(m.FormattedMessage,{defaultMessage:"View this template",id:"database.templatePickerItem.viewTemplate.tooltip"}),delayThreshold:300,render:n=>(0,X.jsx)(O.ZP,{popupType:e?H.ZP.PopupType.SlideUp:H.ZP.PopupType.Popup,placementToOrigin:O.pO.Right,originGap:12,buttonPopupStore:o,renderOrigin:o=>(0,X.jsx)(F.Z,{className:i()(w.C_N,{[w.JiD]:e||t}),isMobile:e&&t,style:{...!t&&{marginRight:0}},...(0,A.Z)(n,o)}),render:this.renderActionMenuPopup,onClick:()=>{g.sYL(this.environment,{template_action:"open_menu"})}})})}navigateToBlock(e){const{mainEditorCurrentBlockStore:t}=Z.default.state,o=t?(0,j.ZP)({store:t,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:a.tY.PeekOpen}):(0,j.ZP)({store:e,fullyQualified:!1,pageVisitSource:a.tY.LinkInPage});this.navigate(o)}}Q.displayName="CollectionTemplatePickerItem",Q.contextTypes={...r.w,...C.wK,...b.xm};const J=Q},45669:(e,t,o)=>{o.d(t,{Z:()=>s});o(67294);var n=o(68939),i=o(78316),r=o(62896),a=o(85893);const s=function(e){let{collectionViewName:t,collectionViewType:o}=e;return t?(0,a.jsx)(r.Z,{children:t}):"page"===o?(0,a.jsx)(n.FormattedMessage,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,a.jsx)(n.FormattedMessage,{...i.b1[o]})}},34574:(e,t,o)=>{o.d(t,{Z:()=>y});o(67294);var n=o(83355),i=o(24405),r=o(49271),a=o(8848),s=o(53523),l=o(82990),c=o(68939),d=o(19124),p=o(64921),u=o(52275),m=o(85893);class g extends n.Z{constructor(){super(...arguments),this.completionsEnabledStore=this.createComputedStore((()=>{var e;const t=null===(e=this.pageContext)||void 0===e?void 0:e.publicEditModeStore.state;return(0,d.GD)(t)}))}renderComponent(){return"collection-overlay"===this.props.format?this.renderCollectionOverlayMenuItem():"phone-modal"===this.props.format?this.renderPhoneModalMenuItem():this.renderPageMenuItem()}renderCollectionOverlayMenuItem(){const{device:e}=this.environment;return(0,m.jsx)(u.Z,{className:this.props.className,icon:this.props.icon,title:(0,m.jsx)(h,{format:this.props.format,title:this.props.title,isDefault:this.props.isDefault,recurrence:this.props.recurrence}),right:this.props.right,focused:this.props.focused,onClick:this.props.onClick,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,showDragHandle:!e.isMobile&&!this.props.locked,dragHandleDisabled:"empty_page"===this.props.type})}renderPhoneModalMenuItem(){return(0,m.jsx)(u.Z,{icon:this.props.icon,title:(0,m.jsx)(h,{format:this.props.format,title:this.props.title,isDefault:this.props.isDefault,recurrence:this.props.recurrence}),focused:this.props.focused,onClick:this.props.onClick,showDragHandle:!1})}renderPageMenuItem(){return(0,m.jsxs)(p.Z,{style:this.getWrapStyle(),hovered:this.props.focused,onClick:this.props.onClick,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,hoveredStyle:{background:this.theme.buttonHoveredBackground,color:this.theme.regularTextColor},pressedStyle:{background:this.theme.buttonPressedBackground},children:[(0,m.jsx)("div",{style:{display:"flex",alignItems:"center",width:24,height:24,marginRight:10},children:this.props.icon}),(0,m.jsx)(h,{format:this.props.format,title:this.props.title,isDefault:this.props.isDefault,recurrence:this.props.recurrence}),this.props.right&&(0,m.jsx)("div",{style:{marginLeft:"auto",marginRight:4},children:this.props.right})]})}getWrapStyle(){const{device:e}=this.environment;return{...r.ZD,display:"flex",alignItems:"center",flexGrow:1,height:e.isMobile?36:32,fontSize:16,borderRadius:4,paddingLeft:8,marginBottom:2,color:this.completionsEnabledStore.state?this.theme.mediumTextColor:this.theme.lightTextColor}}}g.displayName="TemplatePickerMenuItem";const y=g;function h(e){let{format:t,title:o,isDefault:n,recurrence:r}=e;window.__c={n:"TitleComponent"};const d=(0,i.Fg)();return"collection-overlay"!==t?(0,m.jsx)(m.Fragment,{children:o}):(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o,(0,m.jsxs)("span",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n&&(0,m.jsx)("span",{style:{fontSize:12,fontWeight:l.Z.fontWeight.medium,color:d.mediumTextColor},children:(0,m.jsx)(c.FormattedMessage,{defaultMessage:"DEFAULT",id:"database.templatePickerMenuItem.default"})}),r&&(0,s.N)({width:14,color:a.ZP.blue,marginLeft:8})]})]})}},20776:(e,t,o)=>{o.d(t,{o:()=>s});o(67294);var n=o(24405),i=o(8848),r=o(82990),a=o(85893);function s(e){window.__c={n:"AutomationStepValueToken"};const{children:t,icon:o,shouldTruncateChildren:s}=e,l=(0,n.yK)((e=>{const t=(0,i.KR)(e,void 0);return{iconWrap:{flex:"0 0 auto"},textWrap:{...s?r.Z.textOverflowStyle:{},flex:"1 1 auto"},wrap:{backgroundColor:t.backgroundColor,borderRadius:12,color:t.textColor,display:"inline-flex",gap:4,minWidth:s?50:void 0,padding:"0 8px"}}}),[s]);return(0,a.jsxs)("span",{style:l.wrap,children:[o&&(0,a.jsx)("span",{"aria-hidden":"true",style:l.iconWrap,children:o}),(0,a.jsx)("span",{style:l.textWrap,children:t})]})}},40863:(e,t,o)=>{o.d(t,{BO:()=>f,Ft:()=>u,Lh:()=>b,YG:()=>m,du:()=>h,y$:()=>y});o(57658);var n=o(30120),i=o(30823),r=o(40506),a=o(53877),s=o(42875),l=o(72126),c=o(59753),d=o(68939),p=o(28020);function u(e){const{collectionContextStore:t}=e,o=t.collectionViewStore();if(!o)return;const n=t.normalizedSchemaStore.state,i=o.getQuery(n);if(!i||!i.calendar_by)return;const r=t.dateRangeStart.state,l=t.dateRangeEnd.state,c=(0,a.hT)(r,(0,s.r)()),d=(0,a.hT)(l,(0,s.r)());return g({calendarBy:i.calendar_by,dateRangeStartDate:c,dateRangeEndDate:d})}function m(e){const{collectionContextStore:t,startOfDay:o}=e,i=t.collectionViewStore();if(!i)return;const r=t.normalizedSchemaStore.state,l=i.getQuery(r);if(!l||!l.calendar_by)return;const c=n.ou.fromMillis(o).endOf("day").valueOf(),d=(0,a.hT)(o,(0,s.r)()),p=(0,a.hT)(c,(0,s.r)());return g({calendarBy:l.calendar_by,dateRangeStartDate:d,dateRangeEndDate:p})}function g(e){const{dateRangeStartDate:t,dateRangeEndDate:o,calendarBy:n}=e;return{type:"results",filter:{operator:"and",filters:[{property:n,filter:{operator:"date_is_on_or_after",use_end:!0,value:{type:"exact",value:t}}},{property:n,filter:{operator:"date_is_on_or_before",value:{type:"exact",value:o}}}]},limit:5e3}}function y(e){const{collectionContextStore:t,results:o,getRecordValue:n,intl:i}=e,c=t.collectionViewStore(),d=t.normalizedQueryStore.state,u=t.normalizedSchemaStore.state,m=d?d.calendar_by:void 0,g=t.dateRangeStart.state,y=t.dateRangeEnd.state,S=p.AK.state,x=(0,s.r)(),b=t.getCurrentUserId();if(!(c&&d&&m&&u))return;const C=l.oA(o.map((e=>f({blockStore:e,calendarBy:m,schema:u,getRecordValue:n,userId:b,intl:i})))),M={};o.forEach(((e,t)=>{M[e.id]=t}));0===(d.sort||[]).length&&C.sort(((e,t)=>{const o=e.start.valueOf(),n=t.start.valueOf();if(o===n){return M[e.id]-M[t.id]}return o-n}));const k=(0,a.em)(g,S,x),w=(0,a.gQ)(y,S,x);let j=k;const P=[];do{const e=(0,a.gQ)(j.valueOf(),S,x),t={},o=C.filter((t=>(0,r.b8)(j.valueOf(),e.valueOf(),t.start.valueOf(),t.end?t.end.valueOf():void 0))).map((o=>{const{id:n,start:i,end:r,includeTime:a,timeZone:s}=o,{startColumn:l,columnCount:c}=h({startUnixTimestampMS:i.valueOf(),endUnixTimestampMS:r?r.valueOf():void 0,startOfWeekUnixTimestampMS:j.valueOf(),endOfWeekUnixTimestampMS:e.valueOf()}),d=v(l,c,t);return{id:n,start:i.valueOf(),end:r?r.valueOf():void 0,row:d,includeTime:a,timeZone:s}}));P.push({start:j.valueOf(),end:e.valueOf(),items:o}),j=(0,a.em)(j.plus({week:1}).plus({hour:25}).valueOf(),S,x)}while(j<w);return P}function h(e){const t=n.ou.fromMillis(e.startUnixTimestampMS),o=e.endUnixTimestampMS?n.ou.fromMillis(e.endUnixTimestampMS):void 0,i=n.ou.fromMillis(e.startOfWeekUnixTimestampMS),r=n.ou.fromMillis(e.endOfWeekUnixTimestampMS),a=t.startOf("day"),s=n.ou.max(i,a),l=Math.ceil(s.diff(i,"days").get("days"));let c=1;if(o){const e=o.endOf("day"),t=n.ou.min(r,e);c=Math.ceil(t.diff(s,"days").get("days"))}return{start:t,end:o,startOfWeek:i,endOfWeek:r,startColumn:l,columnCount:c}}function f(e){const{blockStore:t,calendarBy:o,schema:n,getRecordValue:r,intl:l,userId:d}=e,p=t.getAssociatedCollectionStore(),u=t.getModel();if(!u)return;const m=(0,i.FT)({property:o,schema:n,block:u,getRecordModel:c.om.fromGetRecordValueFn(r),propertyMapping:null==p?void 0:p.getPropertyMapping(),collectionRequestContext:{userId:d,userTimeZone:(0,s.r)(),depth:0,intl:l,visitedProperties:new Set,resultCache:new Map}}).next().value;if("date"!==m.type)return;const g=m.value,y=g&&(0,a.NK)(g,(0,s.r)());if(!g||!y)return;return{id:u.id,start:y.start,end:y.end,includeTime:"datetime"===g.type||"datetimerange"===g.type,timeZone:"datetime"===g.type||"datetimerange"===g.type?g.time_zone:void 0}}function v(e,t,o){let n=0;for(;;){let i=!1;for(let r=0;r<t;r++)S(o,e+r,n)&&(i=!0);if(!i)break;n++}for(let i=0;i<t;i++)x(o,e+i,n);return n}function S(e,t,o){return Boolean(e[o]&&e[o][t])}function x(e,t,o){e[o]||(e[o]={}),e[o][t]=!0}const b=(0,d.defineMessages)({week:{defaultMessage:"Week",id:"calendar.viewRanges.week"},month:{defaultMessage:"Month",id:"calendar.viewRanges.month"}})},54802:(e,t,o)=>{o.d(t,{EE:()=>B,EF:()=>q,Li:()=>D,P$:()=>Y,R4:()=>X,WM:()=>N,Xd:()=>V,cB:()=>z,i1:()=>F,j_:()=>Q,qM:()=>W,qk:()=>R,rU:()=>H,sA:()=>U,tk:()=>$,vM:()=>K,wB:()=>E});o(21703),o(57658);var n=o(43261),i=o.n(n),r=o(67294),a=o(86628),s=o(3865),l=o(83372),c=o(23290),d=o(76205),p=o(1274),u=o(84116),m=o(78106),g=o(76218),y=o(72126),h=o(86517),f=o(4615),v=o(149),S=o(98963),x=o(18844),b=o(77420),C=o(6287),M=o(13493),k=o(97880),w=o(77080),j=o(30874),P=o(26136),_=o(35057),A=o(30912),I=o(52821),T=o(33929);function V(e){return e.isTriggerType("event")||e.isTriggerType("notification_event")}function Z(e){const{action:t,actionValue:o,automationValue:n}=e;var i,r,a,s,l,c,d;if("create_page"===t.action.type){if(!o||"create_page"===o.type)return function(e){const{actionId:t,automationId:o,collectionPointer:n,properties:i,values:r,spaceId:a,templatePageId:s}=e;return{...G({actionId:t,actionType:"create_page",automationId:o,spaceId:a}),config:{collection:n,properties:i,values:r,template_page_id:s}}}({actionId:t.action.id,automationId:n.id,collectionPointer:(null===(i=t.action.config)||void 0===i?void 0:i.collection)??(null==o||null===(r=o.config)||void 0===r?void 0:r.collection),properties:(null===(a=t.action.config)||void 0===a?void 0:a.properties)??(null==o||null===(s=o.config)||void 0===s?void 0:s.properties),spaceId:n.space_id,values:(null===(l=t.action.config)||void 0===l?void 0:l.values)??(null==o||null===(c=o.config)||void 0===c?void 0:c.values),templatePageId:null===(d=t.action.config)||void 0===d?void 0:d.template_page_id})}else if("update_pages"===t.action.type){var p,u,m,g,y,h;if(!o||"update_pages"===o.type)return function(e){const{actionId:t,automationId:o,properties:n,spaceId:i,target:r,values:a}=e;return{...G({actionId:t,actionType:"update_pages",automationId:o,spaceId:i}),config:{target:r,properties:n,values:a}}}({actionId:t.action.id,automationId:n.id,properties:(null===(p=t.action.config)||void 0===p?void 0:p.properties)??(null==o||null===(u=o.config)||void 0===u?void 0:u.properties),spaceId:n.space_id,target:(null===(m=t.action.config)||void 0===m?void 0:m.target)??(null==o||null===(g=o.config)||void 0===g?void 0:g.target),values:(null===(y=t.action.config)||void 0===y?void 0:y.values)??(null==o||null===(h=o.config)||void 0===h?void 0:h.values)})}else if("slack_notification"===t.action.type){var f,v,S,x;if(!o||"slack_notification"===o.type)return function(e){const{actionId:t,automationId:o,externalBotId:n,spaceId:i,target:r}=e;return{...G({actionId:t,actionType:"slack_notification",automationId:o,spaceId:i}),config:{target:r,external_bot_id:n}}}({actionId:t.action.id,automationId:n.id,externalBotId:(null===(f=t.action.config)||void 0===f?void 0:f.external_bot_id)??(null==o||null===(v=o.config)||void 0===v?void 0:v.external_bot_id),spaceId:n.space_id,target:(null===(S=t.action.config)||void 0===S?void 0:S.target)??(null==o||null===(x=o.config)||void 0===x?void 0:x.target)})}else{if("duplicate_blocks"===t.action.type||"modal_confirmation"===t.action.type||"open_page"===t.action.type||"query_collection"===t.action.type||"complete_sprint"===t.action.type)return;(0,k.t1)(t.action)}}function B(e){const{automationStore:t,currentUserId:o,inMemoryRecordCache:n}=e;return(0,a.VK)((()=>{const e=null==t?void 0:t.getRole(),i=null==t?void 0:t.getValue(),r=(null==t?void 0:t.getActionStores().map((e=>e.getValue())).filter(k.$K))??[],a=null==t?void 0:t.pointer;return c=>{if(o&&e&&i&&a){if(!(0,s.Vd)(i)&&!(0,s.nl)(i))return i;if("update_name"===c.type){const t=function(e){var t;const{action:o,automationValue:n}=e;return(null===(t=n.properties)||void 0===t?void 0:t.name)!==o.name?{...n,properties:{...n.properties,name:o.name}}:n}({action:c,automationValue:i});i!==t&&(n.setRecord({pointer:a,userId:o},{role:e,value:t}),n.emitAll())}else if("update_source"===c.type){const t=function(e){const{action:t,automationValue:o}=e,n=t.pointer,i=n.table===C.v?{pointer:n,type:C.v}:{pointer:n,type:M.n};return{...o,trigger:{...o.trigger,event:{...o.trigger.event,source:i}}}}({action:c,automationValue:i});i!==t&&(n.setRecord({pointer:a,userId:o},{role:e,value:t}),n.emitAll())}else if("update_trigger"===c.type){const t=function(e){const{action:t,automationValue:o}=e,n=t.trigger;if("page_added"===n.type)return o.trigger.event.pagesAdded?o:{...o,trigger:{...o.trigger,event:{...o.trigger.event,pagesAdded:!0}}};if("any_page_property_edited"===n.type)return"any"!==o.trigger.event.pagePropertiesEdited.type?{...o,trigger:{...o.trigger,event:{...o.trigger.event,pagePropertiesEdited:{type:"any"}}}}:o;if("property_changed"===n.type){const e="some"===o.trigger.event.pagePropertiesEdited.type?o.trigger.event.pagePropertiesEdited.some:[],t=y.cx(e,(e=>e.property===n.property)),i={filter:n.filter,property:n.property},r=-1===t?[...e,i]:e.map((e=>e.property===n.property?i:e));return{...o,trigger:{...o.trigger,event:{...o.trigger.event,pagePropertiesEdited:{some:r,type:"some"}}}}}(0,k.t1)(n)}({action:c,automationValue:i});i!==t&&(n.setRecord({pointer:a,userId:o},{role:e,value:t}),n.emitAll())}else if("update_action"===c.type){var d;const t=r.find((e=>e.id===c.action.id)),s=Z({action:c,actionValue:t,automationValue:i});if(!s)return;if(n.setRecord({pointer:{id:s.id,spaceId:i.space_id,table:x.Xj},userId:o},{role:"editor",value:s}),null===(d=i.action_ids)||void 0===d||!d.includes(s.id)){const t={...i,action_ids:[...i.action_ids??[],s.id]};n.setRecord({pointer:a,userId:o},{role:e,value:t})}n.emitAll()}else if("remove_action"===c.type){const r=c.action.id;n.deleteRecord({pointer:{id:r,spaceId:i.space_id,table:x.Xj},userId:o});const s={...i,action_ids:(i.action_ids??[]).filter((e=>e!==r))};n.setRecord({pointer:a,userId:o},{role:e,value:s}),function(e){const{automationStore:t,newAutomationValue:o,currentUserId:n,inMemoryRecordCache:i}=e,r=t.getParentStore();if((null==r?void 0:r.table)!==C.v)return;const a={automationStore:t,parentPointer:r.getSpaceShardedPointer(),type:"event",persisted:!0,intl:T.default.getIntl(),parentRecordStore:r},s=(0,A.pt)({context:a,automationValue:o});if(v.x.isFail(s))return;const c=(o.action_ids??[]).map((e=>({pointer:{id:e,spaceId:o.space_id,table:x.Xj},userId:n})));for(const p of c){const e=i.getRecordModel(p),t=i.getRecord(p);if(!e||!t||!t.value||"create_page"!==t.value.type&&"update_pages"!==t.value.type)continue;const o=new Set(s.value.actionInputValueTypes[e.id].map((e=>{if(e.kind===u.yp.ContextValue)return e.id;e.kind!==u.yp.ThisRow&&e.kind!==u.yp.Binding&&(0,k.t1)(e)})).filter(k.$K)),n=(0,l.z)(e.type).acceptFormulaVisitor({action:e,visitor:{visitVariableOutsideOfFormula:e=>o.has(e)?{type:"keep"}:{type:"replace",value:void 0},visitFormula:e=>e.value&&(0,g.UB)(e).some((e=>!o.has(e)))?{type:"replace",value:void 0}:{type:"keep"}}});let r=t.value;for(const i of n)if("update"===i.command)if(1===i.path.length&&"config"===i.path[0]&&Object.keys(i.args).includes("target")&&"update_pages"===r.type)r={...r,config:{target:void 0,properties:[],values:{}}};else if(2===i.path.length&&"config"===i.path[0]&&"values"===i.path[1]){var d;const e=Object.keys(i.args)[0];r={...r,config:{...r.config,values:{...null===(d=r.config)||void 0===d?void 0:d.values,[e]:void 0}}}}i.setRecord(p,{value:r,role:t.role})}}({automationStore:t,newAutomationValue:s,currentUserId:o,inMemoryRecordCache:n}),n.emitAll()}else if("remove_trigger"===c.type){const t=function(e){const{action:t,automationValue:o}=e,n=t.trigger;if("page_added"===n.type)return o.trigger.event.pagesAdded?{...o,trigger:{...o.trigger,event:{...o.trigger.event,pagesAdded:!1}}}:o;if("any_page_property_edited"===n.type)return"any"===o.trigger.event.pagePropertiesEdited.type?{...o,trigger:{...o.trigger,event:{...o.trigger.event,pagePropertiesEdited:{type:"none"}}}}:o;if("property_changed"===n.type){const e=("some"===o.trigger.event.pagePropertiesEdited.type?o.trigger.event.pagePropertiesEdited.some:[]).filter((e=>e.property!==n.property));return{...o,trigger:{...o.trigger,event:{...o.trigger.event,pagePropertiesEdited:e.length>0?{some:e,type:"some"}:{type:"none"}}}}}(0,k.t1)(n)}({action:c,automationValue:i});i!==t&&(n.setRecord({pointer:a,userId:o},{role:e,value:t}),n.emitAll())}else(0,k.t1)(c)}}}),[t,o,n])}function R(e){const{automationContextStore:t,automationStore:o,collectionStore:n}=e,i=n.getSchema(),r=o.getKeyStore("properties").getKeyStore("name").getValue();if(null==r||!r.trim())return!1;const a=o.getTrigger(),s="event"===(null==a?void 0:a.type),l="notification_event"===(null==a?void 0:a.type);if(!s&&!l)return!1;const{pagesAdded:c,pagePropertiesEdited:d,source:p}=a.event;if(void 0===p)return!1;if("some"===d.type&&d.some.some((e=>O({collectionSchema:i,property:e.property})||L({collectionSchema:i,property:e.property,type:"trigger"}))))return!1;if(!c&&("none"===d.type||"some"===d.type&&0===d.some.length))return!1;const u=o.getActionStores().filter((e=>e.isDefined()));return 0!==u.length&&u.every((e=>function(e){const{actionStore:t,automationContextStore:o,collectionStore:n}=e;if(t.isType("slack_notification"))return(0,k.$K)(t.getConfigStore().getKeyStore("external_bot_id").getValue())&&(0,k.$K)(t.getConfigStore().getKeyStore("target").getValue());if(t.isType("update_pages")){const e=t.getConfigStore().getKeyStore("target").getValue(),i=t.getConfigStore().getKeyStore("properties").getValue()??[];if(!(0,k.$K)(e)||0===i.length)return!1;if("collection"===e.type){const t=P.NW.createChildStore(n,e.collection).getSchema();if(i.some((e=>O({property:e,collectionSchema:t})||L({collectionSchema:t,property:e,type:"action"}))))return!1}else if("variable"===e.type){const t=(0,m.MY)(e.id);if("global"===t.source&&"button_page"===t.global){const e=n.getSchema();if(i.some((t=>O({property:t,collectionSchema:e})||L({collectionSchema:e,property:t,type:"action"}))))return!1}else{const t=null==o?void 0:o.compilationResultStore.state;if(!t||v.x.isFail(t))return!1;const n=(0,m.vx)(t.value.valueTypes,e.id),r=n?E(n,o.context.parentRecordStore):void 0;if(!r)return!1;const a=r.getSchema();if(i.some((e=>O({property:e,collectionSchema:a})||L({collectionSchema:a,property:e,type:"action"}))))return!1}}else{if("page"===e.type)return!1;(0,k.t1)(e)}return!0}if(t.isType("create_page")){const e=t.getConfigStore().getKeyStore("collection").getValue();if(!(0,k.$K)(e))return!1;const o=P.NW.createChildStore(n,e).getSchema();return!(t.getConfigStore().getKeyStore("properties").getValue()??[]).some((e=>O({property:e,collectionSchema:o})||L({collectionSchema:o,property:e,type:"action"})))}throw new Error(`isActionStoreComplete not implemented for ${t.getType()}`)}({actionStore:e,automationContextStore:t,collectionStore:n})))}function E(e,t){let o;return"block"===e.type.type&&e.type.collection?o=P.NW.createChildStore(t,e.type.collection):"array"===e.type.type&&"block"===e.type.of.type&&e.type.of.collection&&(o=P.NW.createChildStore(t,e.type.of.collection)),o}function D(e){const{collectionStore:t}=e;if(!t)return!1;if((t.getFormat().automation_ids??[]).length>=c.ss&&!(0,_.sX)())return!1;const o=t.pointer,n=t.getSpaceId();return(0,p.IC)({targetTriggerType:"event",targetParentPointer:o,targetSpaceId:n}).every((e=>{let{pointer:o,minimumRequiredRole:n}=e;const i=t.getRecordRole(o);return!!i&&(0,h.yY)(i,n)}))}function F(e){const{automationStore:t,actionStores:o}=e,n=t.getMinimumFieldsForPermissions();if(!n)return!1;if(!o.every((e=>e.isDefined())))return!1;const i=o.some((e=>!e.isType("slack_notification")));if(!(0,_.sX)()&&i)return!1;return(0,p.fz)({automationValue:n,actionValues:o.map((e=>({config:e.getConfig(),type:e.getType()})))}).every((e=>{let{pointer:o,minimumRequiredRole:n}=e;const i=t.getRecordRole(o);return!!i&&(0,h.yY)(i,n)}))}function W(e){const{automationStore:t}=e,o=t.getMinimumFieldsForPermissions();if(!o)return!1;return(0,p.bM)(o).every((e=>{let{pointer:o,minimumRequiredRole:n}=e;const i=t.getRecordRole(o);return!!i&&(0,h.yY)(i,n)}))}function N(e){const{anyOptionCheckState:t,currentFilter:o,propertyId:n,updateCurrentState:i}=e;!0===t?i({type:"update_trigger",trigger:{type:"property_changed",property:n,filter:{operator:"changes_to_any"}}}):!1===t?i({type:"remove_trigger",trigger:{type:"property_changed",property:n,filter:{operator:"changes_to_any"}}}):"partial"===t?i({type:"update_trigger",trigger:{type:"property_changed",property:n,filter:o}}):(0,k.t1)(t)}function O(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function L(e){const{collectionSchema:t,property:o,type:n}=e,i=null==t?void 0:t[o];return!i||("action"===n?!(0,s.SF)(i):!s.Ym[i.type])}function K(e){const{automationStore:t,collectionStore:o}=e;if(!t.isTriggerType("event")&&!t.isTriggerType("notification_event"))return!1;const n=t.getEventConfiguration();if(!n||void 0===n.source||n.source.type===C.v||"filter"===n.source.type)return!1;const i=P.Xr.createChildStore(o,n.source.pointer);return function(e){const t=H(e);return(0,k.$K)(t)}({collectionSchema:o.getSchema(),collectionViewStore:i})}function H(e){var t;const{collectionViewStore:o,collectionSchema:n}=e,i=o.getPropertyFiltersStore().getValue()??[],r=null===(t=o.getQuery(n))||void 0===t?void 0:t.filter,a={operator:"and",filters:(0,d.OH)({propertyFilters:i,combinatorFilter:r,schema:n})},l=(0,d.SH)(a,(e=>{if((0,d.aN)(e)){const t=n[e.property];return!!t&&!(0,s.TX)(t)}return!1}));if(l)return(0,d.aN)(l)?l.property:(0,d.Mm)(l)?l.timestamp:void 0}function z(e){if("collectionTypedView"===e.contextType)return!1;const t=e.collectionStore();return!!t&&!(t.isSyncedCollection()&&!w.default.checkGate("support_synced_database_automations"))}function q(e){const{collectionSchema:t,propertyIds:o,searchTerm:n}=e;if(!n)return o.slice(0);const r=new Map,a=o.map((e=>{const o=t[e],n=o?`${o.name} ${I.SO[o.type]}`:"";return r.set(e,n),n})),s=i().filter(n,a).map((e=>{let{original:t}=e;return t}));return o.filter((e=>s.includes(r.get(e)??"")))}function $(e){return v.x.isFail(e.compilationResultStore.state)?[]:e.compilationResultStore.state.value.valueTypes}function U(e){const{automationId:t,automationName:o,collectionStore:n,userId:i}=e;return function(e){const{actionIds:t,automationId:o,collectionStore:n,eventConfiguration:i,lastEditedTime:r,properties:a,userId:s}=e,l=Date.now();return{action_ids:t,alive:!0,created_by_id:s,created_by_table:"notion_user",created_time:l,id:o,last_edited_by_id:s,last_edited_by_table:"notion_user",last_edited_time:r??l,parent_id:n.id,parent_table:C.v,properties:a??{},space_id:n.getSpaceId(),status:"active",trigger:{event:i,id:(0,f.ZP)(),type:"event"},version:1}}({actionIds:[],automationId:t,collectionStore:n,eventConfiguration:{pagesAdded:!1,pagePropertiesEdited:{type:"none"},source:{pointer:n.getSpaceShardedPointer(),type:C.v}},properties:{name:o},userId:i})}function G(e){const{actionId:t,actionType:o,automationId:n,spaceId:i}=e;return{alive:!0,id:t??(0,f.ZP)(),parent_id:n,parent_table:S.cv,space_id:i,type:o,version:1}}function X(e){const t=e.getActionStores().filter((0,k.AO)((e=>e.isType("slack_notification")?{true:e}:{false:e}))),o={};for(const n of t){const e=n.getConfig(),t=null==e?void 0:e.external_bot_id;if(!t)continue;const i=P.Qx.createChildStore(n,{id:t,spaceId:n.getSpaceId(),table:b.cZ}).getCreatedByStore();i&&(o[n.id]=i.getDisplayName(T.default.getIntl()))}return o}async function Y(e){const{automationAvailabilityContext:t}=e;let o=t.automation.getTriggerType();"notification_event"===o&&(o="event");const n=c.Gl[o],i="default_bound"===n.max?c.xZ:n.max;if(t.automationActions.length>=i)return[];const r=(0,l.P)("display"),a=[];for(const s of r)await s.isAvailableForContext(t)&&a.push(s);return a}function Q(){const e=(0,a.VK)((()=>j.Z.completeSlackAuthentications.state),[]);return(0,r.useMemo)((()=>0===e.length?{type:"connectToSlackDefault"}:1===e.length?{type:"selectChannelNew"}:{type:"selectWorkspace"}),[e.length])}},25498:(e,t,o)=>{o.d(t,{m:()=>r,w:()=>a});o(57658);var n=o(81491),i=o(98165);const r=[{frequency:"day",interval:1},{frequency:"week",interval:1},{frequency:"month",interval:1},{frequency:"year",interval:1}],a=e=>{const t=i.qA(e)??[],o=[];for(const n of t){if(!("block"===n.table&&!0===n.isTemplate()&&n.getFormat().automation_id&&n.id!==e.id))continue;const t=n.getAutomationStore();if(t){if(!t.isReady())return{automationStoresReady:!1};void 0!==t.getRecurrence()&&t.isDefined()&&o.push(t.getModel())}}return{automationStoresReady:!0,violatesConstraint:(0,n.templateAncestorsViolateRecurrenceNesting)(o)}}},5971:(e,t,o)=>{o.d(t,{E:()=>r});var n=o(86628),i=o(77080);function r(e){return(0,n.VK)((()=>i.default.checkGate(e)),[e])}},68910:(e,t,o)=>{o.d(t,{L:()=>l});var n=o(14577),i=o(78106),r=o(72126),a=o(149),s=o(30912);class l{constructor(e){this.context=void 0,this.compilationResultStore=new n.Z((()=>(0,s.pt)({context:this.context})),{useDeepEqual:!0,debugName:"compilationResultsStore"}),this.context=e}getAllContextValues(){const e=this.compilationResultStore.state;return a.x.isFail(e)?[]:r.d9(e.value.valueTypes)}getContextValuesForAction(e){const t=this.compilationResultStore.state;return a.x.isFail(t)?[]:t.value.actionInputValueTypes[e]??[]}getValidationErrorsForAction(e){const t=this.compilationResultStore.state;return a.x.isFail(t)?[]:t.value.actionValidationFailures[e]??[]}getContextValueForActionById(e,t){const o=this.getContextValuesForAction(e);return(0,i.vx)(o,t)}}},91315:(e,t,o)=>{o.d(t,{r:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},47409:(e,t,o)=>{o.d(t,{N:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("ledger",{viewBox:"0 0 16 16",svg:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("path",{d:"M.706 4.113c0 .41.273.677.697.677h1.778v8.388c0 1.435.704 2.146 2.14 2.146h7.813c1.299 0 2.153-.889 2.153-2.235v-1.86c0-.41-.273-.676-.697-.676h-.567V2.95c0-1.429-.711-2.146-2.12-2.146H2.497c-1.066 0-1.79.724-1.79 1.866v1.442Zm3.575 9.072V2.67c0-.28-.027-.54-.082-.766h7.643c.71 0 1.08.376 1.08 1.06v7.588H7.05c-.424 0-.704.266-.704.676v1.956c0 .622-.431 1.039-1.026 1.039-.608 0-1.039-.438-1.039-1.04ZM1.807 3.689V2.671c0-.479.294-.766.69-.766.41 0 .684.287.684.766v1.018H1.807ZM6.25 4.797h4.703a.413.413 0 0 0 .424-.424.412.412 0 0 0-.424-.417H6.25a.418.418 0 0 0-.43.417c0 .24.184.424.43.424Zm0 2.386h2.454a.406.406 0 0 0 .424-.41c0-.24-.178-.431-.424-.431H6.25a.425.425 0 0 0-.43.43c0 .233.184.41.43.41Zm.93 7.04c.17-.3.266-.67.266-1.114v-1.456h6.74v1.436c0 .677-.423 1.135-1.052 1.135H7.18Z"})})})},70954:(e,t,o)=>{o.d(t,{C:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("notionLogoStroked",{viewBox:"0 0 41 42",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M4.253 2.903h0-.01c-1.02.09-1.806.481-2.322 1.142-.5.642-.671 1.441-.671 2.21v23.228c0 1.267.47 2.316 1.416 3.577h0l.006.008 4.99 6.477h0l.005.005c.465.593.963 1.017 1.617 1.256.63.23 1.33.26 2.138.221h.01l24.652-1.49h.008c1.137-.08 2.038-.396 2.632-1.071.588-.668.746-1.543.746-2.431V9.904c0-.584-.133-1.05-.508-1.486-.27-.311-.669-.602-1.113-.925a54.305 54.305 0 01-.176-.13l-.007-.004-.005-.004-6.772-4.761c-.838-.609-1.516-1.017-2.365-1.21-.824-.187-1.75-.156-3.047-.044L4.253 2.903z",fill:"#fff",stroke:"#fff",strokeWidth:"1.5"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.257 3.158L5.176 4.637c-1.62.14-2.184 1.197-2.184 2.464v21.971c0 .987.352 1.83 1.198 2.959l4.72 6.126c.776.987 1.48 1.198 2.96 1.127l23.32-1.408c1.973-.14 2.537-1.057 2.537-2.606V10.552c0-.801-.316-1.032-1.25-1.714l-.16-.117-6.41-4.507c-1.55-1.126-2.184-1.268-4.65-1.056zM12.4 10.146c-1.904.129-2.337.158-3.418-.72l-2.75-2.183c-.28-.283-.14-.635.565-.705L26.102 5.13c1.62-.141 2.466.423 3.1.916l3.311 2.394c.141.07.493.492.07.492L12.645 10.13l-.245.016zM10.179 35.06V14.074c0-.916.281-1.338 1.126-1.41l22.898-1.337c.777-.07 1.128.423 1.128 1.338v20.844c0 .916-.14 1.691-1.41 1.761l-21.91 1.268c-1.269.07-1.832-.352-1.832-1.48zm21.63-19.86c.141.635 0 1.268-.635 1.34l-1.056.21v15.492c-.916.493-1.761.775-2.466.775-1.128 0-1.41-.352-2.255-1.408l-6.905-10.845v10.493l2.185.493s0 1.267-1.763 1.267l-4.86.282c-.142-.282 0-.986.492-1.127l1.269-.351V17.947l-1.761-.142c-.141-.634.21-1.549 1.197-1.62l5.214-.351 7.187 10.986V17.1l-1.832-.21c-.14-.776.422-1.339 1.127-1.409l4.863-.283z",fill:"#222"})]})})},26939:(e,t,o)=>{o.d(t,{c:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("pageErrorUnsafe",{viewBox:"0 0 72 72",svg:(0,i.jsx)("path",{d:"M36 68C36.5 68 37.2812 67.8125 38.0625 67.4062C55.8438 58.0938 61.5625 53.4375 61.5625 42.2188V18.6562C61.5625 15.4375 60.1875 14.4062 57.5625 13.3125C53.9062 11.8125 42.2188 7.5625 38.5938 6.3125C37.75 6.03125 36.875 5.875 36 5.875C35.125 5.875 34.25 6.0625 33.4375 6.3125C29.7812 7.5 18.0938 11.8438 14.4375 13.3125C11.8438 14.375 10.4375 15.4375 10.4375 18.6562V42.2188C10.4375 53.4375 16.4688 57.5625 33.9375 67.4062C34.75 67.8438 35.5 68 36 68ZM36 41.5938C34.375 41.5938 33.5 40.6875 33.4688 39.0312L33.0312 22C33 20.3438 34.2188 19.1562 35.9688 19.1562C37.6875 19.1562 38.9688 20.375 38.9375 22.0312L38.5 39.0312C38.4688 40.7188 37.5625 41.5938 36 41.5938ZM36 52.0625C34.125 52.0625 32.5 50.5625 32.5 48.7188C32.5 46.875 34.0938 45.3438 36 45.3438C37.9062 45.3438 39.5 46.8438 39.5 48.7188C39.5 50.5938 37.875 52.0625 36 52.0625Z"})})},83690:(e,t,o)=>{o.d(t,{_:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("settingsCredit",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M5.89062 18.1094H14.1016C15.5703 18.1094 16.3828 17.3359 16.3828 15.8594V11.0625H16.4375C17.125 10.9141 17.5078 10.3594 17.5078 9.5625V7.50781C17.5078 6.55469 16.9766 5.95312 16.0234 5.95312H14.4453C14.8594 5.53906 15.1016 4.97656 15.1016 4.32812C15.1016 2.8125 13.9062 1.73438 12.3906 1.73438C11.2969 1.73438 10.3906 2.33594 9.99219 3.38281C9.59375 2.33594 8.69531 1.73438 7.59375 1.73438C6.08594 1.73438 4.88281 2.8125 4.88281 4.32812C4.88281 4.97656 5.125 5.53906 5.54688 5.95312H3.96875C3.05469 5.95312 2.48438 6.55469 2.48438 7.50781V9.5625C2.48438 10.3594 2.85938 10.9141 3.54688 11.0625H3.60156V15.8594C3.60156 17.3359 4.41406 18.1094 5.89062 18.1094ZM9.35156 5.95312H8.13281C6.90625 5.95312 6.1875 5.25781 6.1875 4.39844C6.1875 3.53906 6.8125 3.03906 7.67188 3.03906C8.60156 3.03906 9.35156 3.74219 9.35156 4.89844V5.95312ZM10.6328 5.95312V4.89844C10.6328 3.74219 11.3828 3.03906 12.3125 3.03906C13.1719 3.03906 13.7969 3.53906 13.7969 4.39844C13.7969 5.25781 13.0859 5.95312 11.8516 5.95312H10.6328ZM9.29688 9.9375H4.28906C3.89844 9.9375 3.74219 9.77344 3.74219 9.38281V7.67969C3.74219 7.28906 3.89844 7.13281 4.28906 7.13281H9.29688V9.9375ZM10.6875 9.9375V7.13281H15.7109C16.1016 7.13281 16.25 7.28906 16.25 7.67969V9.38281C16.25 9.77344 16.1016 9.9375 15.7109 9.9375H10.6875ZM9.29688 16.9375H5.875C5.22656 16.9375 4.85938 16.5703 4.85938 15.9219V11.1172H9.29688V16.9375ZM10.6875 16.9375V11.1172H15.125V15.9219C15.125 16.5703 14.7578 16.9375 14.1094 16.9375H10.6875Z"})})},36312:(e,t,o)=>{o.d(t,{o:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("settingsIdentityProvisioning",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{d:"M10 18.4609C10.125 18.4609 10.3281 18.4141 10.5234 18.3047C14.9688 15.8125 16.4922 14.7578 16.4922 11.9062V5.92969C16.4922 5.10938 16.1406 4.85156 15.4766 4.57031C14.5547 4.1875 11.5781 3.11719 10.6562 2.79688C10.4453 2.72656 10.2188 2.67969 10 2.67969C9.78125 2.67969 9.55469 2.74219 9.35156 2.79688C8.42969 3.0625 5.44531 4.19531 4.52344 4.57031C3.86719 4.84375 3.50781 5.10938 3.50781 5.92969V11.9062C3.50781 14.7578 5.03906 15.8047 9.47656 18.3047C9.67969 18.4141 9.875 18.4609 10 18.4609ZM10 17.0469C9.875 17.0469 9.75 17 9.51562 16.8594C5.90625 14.6719 4.75 14.0312 4.75 11.6172V6.17188C4.75 5.90625 4.79688 5.80469 5.01562 5.71875C6.20312 5.25 8.50781 4.47656 9.6875 4.00781C9.8125 3.95312 9.91406 3.9375 10 3.9375C10.0859 3.9375 10.1875 3.96094 10.3125 4.00781C11.4922 4.47656 13.7812 5.30469 14.9922 5.71875C15.2031 5.79688 15.25 5.90625 15.25 6.17188V11.6172C15.25 14.0312 14.0938 14.6641 10.4844 16.8594C10.2578 17 10.125 17.0469 10 17.0469ZM9.14844 13.8984C9.40625 13.8984 9.625 13.7734 9.78125 13.5391L13.3516 7.91406C13.4375 7.76562 13.5391 7.59375 13.5391 7.41406C13.5391 7.07031 13.2266 6.84375 12.9062 6.84375C12.7031 6.84375 12.5078 6.96094 12.3594 7.19531L9.11719 12.3984L7.57812 10.4062C7.39062 10.1562 7.21875 10.0859 7.00781 10.0859C6.66406 10.0859 6.39844 10.3594 6.39844 10.7109C6.39844 10.875 6.46875 11.0469 6.57812 11.1953L8.48438 13.5391C8.67969 13.7969 8.89062 13.8984 9.14844 13.8984Z"})})},86488:(e,t,o)=>{o.d(t,{p:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("squarePlus",{viewBox:"0 0 30 30",svg:(0,i.jsx)("path",{d:"M7.059 27.052H22.94c2.75 0 4.11-1.361 4.11-4.059V7.007c0-2.697-1.36-4.059-4.11-4.059H7.059c-2.736 0-4.111 1.349-4.111 4.059v15.986c0 2.71 1.375 4.06 4.11 4.06zm.026-2.108c-1.31 0-2.03-.694-2.03-2.055V7.112c0-1.362.72-2.056 2.03-2.056h15.83c1.296 0 2.029.694 2.029 2.056v15.777c0 1.361-.733 2.055-2.03 2.055H7.085zm7.895-3.758c.707 0 1.113-.484 1.113-1.243V16.08h4.111c.733 0 1.231-.392 1.231-1.086 0-.707-.471-1.113-1.23-1.113h-4.112V9.769c0-.759-.406-1.243-1.113-1.243-.694 0-1.073.51-1.073 1.243v4.112H9.822c-.773 0-1.257.405-1.257 1.112 0 .694.523 1.087 1.257 1.087h4.085v3.863c0 .733.38 1.243 1.073 1.243z"})})},78807:(e,t,o)=>{o.d(t,{l:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("statusCompleteGroup",{viewBox:"0 0 17 17",svg:(0,i.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.71094 12.0781C8.00781 12.0781 8.27344 11.9219 8.44531 11.6562L11.8828 6.32031C11.9922 6.14844 12.0781 5.95312 12.0781 5.77344C12.0781 5.35156 11.7109 5.07031 11.3125 5.07031C11.0547 5.07031 10.8281 5.21094 10.6562 5.49219L7.6875 10.2578L6.29688 8.51562C6.10938 8.27344 5.91406 8.17969 5.67188 8.17969C5.25781 8.17969 4.92188 8.50781 4.92188 8.92969C4.92188 9.125 5 9.30469 5.14062 9.48438L6.94531 11.6641C7.16406 11.9375 7.40625 12.0781 7.71094 12.0781Z"})})},76994:(e,t,o)=>{o.d(t,{w:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("versionHistory",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M0.788086 6.67676C0.254883 6.67676 0.118164 7.07324 0.412109 7.47656L2.06641 9.77344C2.29883 10.0947 2.6543 10.0879 2.87988 9.77344L4.53418 7.46973C4.81445 7.08008 4.68457 6.67676 4.1582 6.67676H3.16699C3.78223 4.20898 6.00391 2.39746 8.66992 2.39746C11.8145 2.39746 14.3438 4.91992 14.3438 8.06445C14.3438 11.209 11.8145 13.7451 8.66992 13.7383C6.83105 13.7314 5.22461 12.8701 4.19922 11.5166C3.92578 11.1953 3.52246 11.0928 3.19434 11.332C2.87988 11.5576 2.81836 11.9951 3.11914 12.3574C4.38379 14.0117 6.45508 15.126 8.66992 15.126C12.5391 15.126 15.7314 11.9336 15.7314 8.06445C15.7314 4.20215 12.5391 1.00293 8.66992 1.00293C5.2793 1.00293 2.40137 3.45703 1.75195 6.67676H0.788086ZM8.41699 4.09961C8.08203 4.09961 7.82227 4.36621 7.82227 4.69434V8.41309C7.82227 8.57031 7.87695 8.7207 7.99316 8.87793L9.62695 11.0312C9.86621 11.3525 10.2217 11.4072 10.5156 11.1953C10.7959 11.0039 10.8164 10.6416 10.5977 10.3477L9.01172 8.20801V4.69434C9.01172 4.36621 8.74512 4.09961 8.41699 4.09961Z"})})}}]);