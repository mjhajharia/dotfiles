"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3066],{54814:(e,t,s)=>{s.d(t,{nc:()=>l,rG:()=>r});s(57658);var o=s(6287),a=s(98165),i=s(51757),n=s(54642);async function r(e){let{environment:t,spaceId:s,databaseType:a,parentStore:r}=e;if(!s)return;const l=await n.getTypedDatabases(t,{spaceId:s,databaseType:a});return"success"===l.type?l.data.result.map((e=>i.NW.createChildStore(r,{table:o.v,id:e.collectionId}))):void 0}async function l(e){let{environment:t,spaceId:s,databaseTypes:o,parentStore:i,teamId:n}=e;const l=[];return await Promise.all(o.map((async e=>{await async function(e){let{environment:t,spaceId:s,databaseType:o,parentStore:i,teamId:n}=e;const l=await r({spaceId:s,environment:t,databaseType:o,parentStore:i});if(!l)return!1;for(const r of l){const e=a.VP(r);if(e&&e.id===n)return!0}return!1}({environment:t,spaceId:s,databaseType:e,parentStore:i,teamId:n})&&l.push(e)}))),l}},73066:(e,t,s)=>{s.d(t,{Z:()=>nt,s:()=>at});s(57658),s(21703);var o=s(67294),a=s(83355),i=s(92996),n=s(41892),r=s(6906),l=s(58573),c=s(42853),d=s(90199),p=s(47453),u=s(35840),g=s(54497),m=s(72126),h=s(21202),S=s(97880),v=s(82990),f=s(68939),y=s(88295),M=s(60870),T=s(39699),x=s(37181),I=s(52275),b=s(61519),j=s(1743),w=s(56940),P=s(68894),C=s(3386),A=s(16354),k=s(68785),Z=s(78140),B=s(89728),V=s(31278),L=s(72495),F=s(45959),N=s(26388),O=s(64369),R=s(45653),_=s(60442),q=s(12457),W=s(28020),E=s(75081),K=s(87279),D=s(98742),z=s(44499),U=s(98165),G=s(58239),H=s(18514),Q=s(38755),X=s(95697),Y=s(77907),$=s(80444),J=s(88632),ee=s(77080),te=s(63334),se=s(29798),oe=s(49085);class ae extends oe.default{getInitialState(){return{chosenSpaceId:void 0}}getChosenSpaceId(){const{chosenSpaceId:e}=this.state,{currentSpaceStore:t}=$.default.state;return e||(null==t?void 0:t.id)}getChosenSpaceStore(){var e;return null===(e=this.getChosenSpaceViewStore())||void 0===e?void 0:e.getSpaceStore()}getChosenSpaceViewStore(){const{chosenSpaceId:e}=this.state,{currentSpaceViewStore:t,currentUserRootStore:s}=$.default.state;if(!e&&t)return t;if(e&&s){return s.getSpaceViewStores().find((t=>t.getSpaceId()===e))}}}const ie=ae;var ne=s(42330),re=s(51757),le=s(72087),ce=s(30765),de=s(32163),pe=s(43765),ue=s(23586),ge=s(75822),me=s(85893);function he(e){let{query:t,spaceId:s,menuListStore:o,requestStore:a,getAutocompleteItems:i}=e;return(0,me.jsx)(ue.Z,{request:{query:t,spaceId:s},render:(e,s)=>(0,me.jsx)(Se,{sections:s,error:e,menuListStore:o,initialFocus:Boolean(t)?0:void 0}),requestStore:a,debounce:ge.vp,performRequest:i})}function Se(e){let{sections:t,error:s,menuListStore:o,initialFocus:a}=e;return s?(0,me.jsx)(L.Z,{children:(0,me.jsx)(pe.Z,{title:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Something went wrong.",id:"moveBlockMenu.errorOnMove.label"})})}):t&&0===t.length?(0,me.jsx)(L.Z,{children:(0,me.jsx)(pe.Z,{title:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"No results",id:"moveBlockMenu.noResults.label"})})}):(0,me.jsx)(de.Z,{type:de.i.Vertical,initialFocus:a,sections:t||[],store:o})}var ve=s(6287),fe=s(15047),ye=s(29369),Me=s(86628),Te=s(24405),xe=s(11470),Ie=s(76798),be=s(65598);function je(e){window.__c={n:"MoveToMenuItem"};const{store:t,menuListItemProps:s,hidePath:o}=e,a=(0,Me.VK)((()=>function(e){if((0,be.OY)(e)&&!e.canEdit())return(0,me.jsx)(f.FormattedMessage,{id:"moveBlockMenu.needEditAccess.tooltip",defaultMessage:'You need "Can edit" access to "{parentName}" to move this page',values:{parentName:(0,me.jsx)(Ie.Z,{store:e,shouldWrap:!0})}});if((0,be.Y)(e)&&!e.canAddOrRemoveTopLevelPages())return(0,me.jsx)(f.FormattedMessage,{id:"moveBlockMenu.TeamSidebarLocked.tooltip",defaultMessage:"This teamspace has its sidebar locked. You must be a teamspace owner to move to this teamspace."})}(t)),[t]),i=Boolean(a),n=(0,Te.yK)((e=>({disabledTooltip:{maxWidth:240},recordMenuItem:i?{color:e.mediumTextColor}:{}})),[i]);return(0,me.jsx)(N.Z,{placement:N.Z.Placement.Left,textWrap:!0,style:n.disabledTooltip,disableTooltip:!i,renderTooltip:()=>a,render:e=>(0,me.jsx)(xe.Z,{...(0,D.Z)(s,e),disabled:i,store:t,hidePath:o,style:n.recordMenuItem})})}var we=s(480),Pe=s(86176),Ce=s(75024);function Ae(e){let{spaceStore:t,collectionStore:s,menuListItemProps:o}=e;window.__c={n:"MoveToModalTypedItem"};const a=(0,we.O7)(),i=(0,Te.yK)((e=>({caption:{color:e.lightTextColor,fontSize:(0,Ce.yv)(a,"UISmall")}})),[a]);return(0,me.jsx)(xe.Z,{caption:(0,me.jsx)("div",{style:i.caption,children:(0,me.jsx)(ke,{spaceStore:t,collectionStore:s})}),store:s,...o})}function ke(e){let{spaceStore:t,collectionStore:s}=e;window.__c={n:"PathCaption"};const o=(0,we.O7)(),a=(0,Me.VK)((()=>function(e){let{environment:t,spaceStore:s,collectionStore:o}=e;const a=(0,E.tV)({environment:t,spaceStore:s,collectionStore:o});switch(a){case"team":return null;case"private":return(0,me.jsx)(f.FormattedMessage,{id:"moveToHelpers.privatePageCaptionPrefix",defaultMessage:"Private"});case"other":return(0,me.jsx)(f.FormattedMessage,{id:"moveToHelpers.sharedPageCaptionPrefix",defaultMessage:"Shared"});default:(0,S.t1)(a)}}({environment:o,spaceStore:t,collectionStore:s})),[o,t,s]),i=(0,Me.VK)((()=>(0,Pe.L)(s)),[s])&&(0,me.jsx)(Pe.Z,{store:s,showFullPathInTooltip:!0});return i&&a?(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[a,(0,me.jsx)("div",{style:{paddingLeft:4,paddingRight:4},children:"/"}),i]}):i&&!a?i:(0,me.jsx)(me.Fragment,{children:a})}function Ze(e){let{spaceStore:t,value:s,showPath:o,isCreateIn:a,onAccept:i}=e;const n=function(e){let{spaceStore:t,value:s}=e;const{type:o}=s;switch(o){case"page":return re.G.createChildStore(t,{table:h.iU,id:s.id});case"collection":return re.NW.createChildStore(t,{table:ve.v,id:s.id});case"space":return re.H2.createChildStore(t,{table:fe.bx,id:s.id});case"team":return re.zX.createChildStore(t,{table:ye.e0,id:s.id});case"space-private-pages":return;default:(0,S.t1)(o)}}({spaceStore:t,value:s});if(n)return(0,z.Hn)()&&n instanceof re.NW?{key:n.id,render:e=>(0,me.jsx)(Ae,{spaceStore:t,collectionStore:n,menuListItemProps:e}),action:()=>i(s)}:{key:n.id,render:e=>(0,me.jsx)(je,{store:n,menuListItemProps:e,hidePath:!!a&&!o}),action:()=>i(s)}}var Be=s(59054),Ve=s(69327),Le=s(41432),Fe=s(16184),Ne=s(39567),Oe=s(50906),Re=s(64921),_e=s(5210),qe=s(35026),We=s(74016);function Ee(e){return 14*(e+1)}function Ke(e){window.__c={n:"MoveToOutlinerItem"};const{store:t,spaceStore:s,spaceViewStore:a,depth:i,isAlias:n}=e,r=(0,we.O7)(),l=(0,Te.Fg)(),[c,p]=o.useState(!1),u=(0,Te.yK)((e=>({noChildrenLabelItem:{paddingLeft:Ee(i)+24,fontSize:14,paddingBottom:6.5,color:e.lightTextColor},outlinerItem:{display:"flex",flexDirection:"row",fontSize:14,height:28,paddingLeft:Ee(i),color:e.regularTextColor,alignItems:"center"},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:22,height:18,marginRight:4,position:"relative"}})),[i]);function g(){const e=ne.ZP.state;e.isOpen&&(p(!c),Oe.w6U(r,{flowId:e.flowId,is_toggled:!c,destination_type:t?t.table:"private_pages"}))}const m=(0,Me.VK)((()=>{if(t){const e=(0,me.jsx)("div",{children:(0,Ne.Y)({position:"absolute",width:"50%",height:"50%",right:0,bottom:0})});return t instanceof re.zX?(0,me.jsx)("div",{style:u.icon,children:(0,me.jsx)(We.p,{disabled:!0,store:t,size:18})}):(0,me.jsxs)("div",{style:u.icon,children:[(0,me.jsx)(V.Z,{icon:t instanceof re.G?t.getIcon():void 0,isEmptyPage:t instanceof re.G&&t.isEmptyPage(),title:void 0,size:18,disabled:!0}),n&&e]})}return(0,me.jsx)(R.Z,{size:16,userStore:(0,W.B7)(r),style:{marginLeft:3}})}),[t,u.icon,r,n]),S=(0,Me.VK)((()=>t?t.table===ye.e0?"private"!==t.getTeamAccessLevel()?(0,me.jsx)("div",{style:{maxWidth:"80%"},children:(0,me.jsx)(Ie.Z,{store:t})}):(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",maxWidth:"80%"},children:[(0,me.jsx)(Ie.Z,{store:t}),(0,Fe.Q)({width:14,height:14,marginLeft:4,fill:l.mediumIconColor})]}):(0,me.jsx)("div",{style:{maxWidth:"80%"},children:(0,me.jsx)(Ie.Z,{store:t})}):(0,me.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:7},children:[(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Private pages",id:"outliner.addToPrivatePages"}),(0,me.jsx)("div",{style:{marginLeft:2},children:(0,d.b)({width:14,height:14,fill:l.mediumIconColor,marginLeft:4})})]})),[t,l.mediumIconColor]),v=(0,Me.VK)((()=>{const e=new Set([Le.Ti.page,Le.Ti.collectionViewPage,Le.Ti.collectionView,Le.Ti.alias]),s=new Set([Le.Ti.factory]);let o=[];return t?t instanceof re.zX?o=t.getTeamPagesStores():t instanceof re.G&&(o=(0,qe.Q2)(t,s,e)):o=a.getPrivatePages(r),o}),[t,a,r]);const y=0!==v.length?(0,me.jsx)(De,{spaceStore:s,spaceViewStore:a,itemStores:v,depth:i+1,onAccept:e.onAccept,targets:e.targets}):(0,me.jsx)("div",{style:u.noChildrenLabelItem,children:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})});return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Re.Z,{onClick:function(){e.moveToPagesOnly&&(null==t?void 0:t.table)!==h.iU?g():t?t instanceof re.G?e.onAccept({type:"page",id:t.id,spaceId:s.id}):e.onAccept({type:"team",id:t.id,spaceId:s.id}):e.onAccept({type:"space-private-pages",spaceId:s.id})},children:(0,me.jsxs)("div",{style:u.outlinerItem,children:[(0,me.jsx)(_e.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:c,color:l.mediumIconColor,onClick:g}),m,S]})}),c&&i<100&&y]})}function De(e){window.__c={n:"MoveToOutliner"};const{spaceStore:t,spaceViewStore:s,itemStores:o,depth:a}=e,i=(0,Me.VK)((()=>{const i=o?m.oA(o.map((o=>{if(o instanceof re.zX&&o.canAddOrRemoveTopLevelPages()||o instanceof re.G&&(0,z.Xk)(o,e.targets)&&o.canEdit()){const i=o instanceof re.G&&o.getType()===Le.Ti.alias,n=i?o.getAliasTargetStore():void 0,r=n instanceof re.G?n:o;return(0,me.jsx)(Ke,{spaceStore:t,spaceViewStore:s,store:r,depth:a,onAccept:e.onAccept,targets:e.targets,isAlias:i,moveToPagesOnly:e.moveToPagesOnly},o.id)}}))):[];return e.addedItems?[...e.addedItems,...i]:i}),[o,e.addedItems,e.moveToPagesOnly,e.targets,e.onAccept,t,s,a]),n=(0,Te.yK)((e=>({sectionHeader:{color:e.mediumTextColor,fontSize:12,fontWeight:v.Z.fontWeight.medium,padding:"12px 14px 4px 14px"}})),[]);return(0,me.jsxs)(j.Z,{capture:!0,children:[e.title&&(0,me.jsx)("div",{style:n.sectionHeader,children:(0,me.jsx)(O.Z,{isSmall:!0,children:e.title})}),(0,me.jsx)("div",{children:i})]})}function ze(e){window.__c={n:"MoveToModal"};const{spaceStore:t,spaceViewStore:s,targets:o,moveToPagesOnly:a}=e,i=(0,Me.VK)((()=>$.default.state.currentUserStore),[]),n=(0,we.O7)(),r=(0,f.useIntl)(),l=(0,Te.yK)((()=>({modal:{height:374,maxHeight:"70vh",paddingBottom:12},body:{width:"100%"}})),[]),[c]=(0,Be.r5)((async()=>t&&i?await(0,X.qX)({environment:n,spaceStore:t,currentUserId:i.id}):[]),[n,t,i]),d=(0,Me.VK)((()=>{if(!c.value)return;const e=s.getTeamsStores().filter((e=>e.canAddOrRemoveTopLevelPages()));return e.length>=7?e:m.mN([...e,...c.value||[]],(e=>e.id)).filter((e=>e.canAddOrRemoveTopLevelPages())).slice(0,7)}),[s,c.value]),p=(0,Me.VK)((()=>Ue({spaceStore:t,targets:o})),[t,o]),u=(0,Me.VK)((()=>s.getWorkspacePages().filter((e=>(0,z.Xk)(e,o)&&e.canEdit()))),[s,o]),g=(0,Me.VK)((()=>{if(Ge({environment:n,targets:o,chosenSpaceStore:t}))return(0,me.jsx)(Ke,{spaceStore:t,spaceViewStore:s,store:void 0,depth:0,onAccept:e.onAccept,targets:e.targets,moveToPagesOnly:a},"MoveToModal private item")}),[n,a,e,t,s,o]);return t&&s?(0,me.jsx)("div",{style:l.modal,children:(0,me.jsx)("div",{style:l.body,children:(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,me.jsx)(De,{spaceStore:t,spaceViewStore:s,itemStores:p,addedItems:[g],moveToPagesOnly:a,depth:0,title:r.formatMessage({defaultMessage:"Suggested",id:"moveToModal.suggestedSection.title"}),onAccept:e.onAccept,targets:e.targets}),d&&d.length>0&&(0,me.jsx)(De,{spaceStore:t,spaceViewStore:s,itemStores:d,moveToPagesOnly:a,depth:0,title:r.formatMessage({defaultMessage:"Teamspaces",id:"moveToModal.teamsSection.title"}),onAccept:e.onAccept,targets:e.targets}),u.length>0&&(0,me.jsx)(De,{spaceStore:t,spaceViewStore:s,itemStores:u,moveToPagesOnly:a,depth:0,title:r.formatMessage({defaultMessage:"Workspace",id:"moveToModal.workspaceSection.title"}),onAccept:e.onAccept,targets:e.targets})]})})}):null}function Ue(e){let{spaceStore:t,targets:s}=e,o=Ve.Z.getWithoutSubscribing(t.id).map((e=>{let{store:t}=e;return t})).filter((e=>e.pathIsAccessibleAndAlive()&&!s.some((t=>"block"===t.table&&t.id===e.id))));const a=s.filter((e=>"block"===e.getParentTable())).map((e=>e.getParentId())),i=a.length===s.length,n=[...new Set(a)];return i&&1===n.length&&(o=o.filter((e=>e.id!==n[0]))),o.slice(0,7)}function Ge(e){let{environment:t,targets:s,chosenSpaceStore:o}=e;const a=(0,Q.Cx)(o),i=s.every((e=>e.isTopLevelPrivatePage({spaceStore:o,environment:t})));return!a&&!i}var He=s(84169),Qe=s(73063),Xe=s(43568),Ye=s(54814),$e=s(45811);function Je(e){let{environment:t,spaceStore:s,joinedTeamIds:o,parentStore:a,moveToTargets:i}=e;const n=(0,Me.VK)((()=>{const e=null==s?void 0:s.id;if(e)return function(e){if(!ne.ZP.state.isOpen||"typedInitialized"!==ne.ZP.state.variant)return;if(e!==ne.ZP.state.spaceId)return;return ne.ZP.state.typedDatabases}(e)}),[null==s?void 0:s.id]),r=(0,Me.VK)((()=>ee.default.checkGate("typed_move_to_improved_default_results")),[]),l=(0,Y.useDependency)(Y.deps.searchActions),[{value:c,status:d}]=(0,Be.r5)((async()=>{if(n)return n;if(!s)return;const e=ne.ZP.getTargetsDatabaseType();if(!e)return;if("resolved"!==l.status)return;const c=l.value;let d=[];if(r){const o=((await c.searchCollectionsWithRecents({environment:t,query:"",limit:20,databaseType:[e],spaceStore:s,parentStore:s,collectionViewBlockStore:void 0})).results||[]).map((e=>re.NW.createChildStore(a,{table:ve.v,id:e})));d=(0,$e.qJ)({typedDatabases:o,blocksToFilterParents:i})}else{const i=await Ye.rG({environment:t,spaceId:s.id,databaseType:e,parentStore:a})??[];d=(0,$e.mL)({environment:t,typedDatabases:i,spaceStore:s,joinedTeamIds:o})}return ne.ZP.setState({...ne.ZP.state,variant:"typedInitialized",typedDatabases:d,spaceId:s.id}),d}),[n,s,r,t,i,a,o,l.status,l.value]);return n?{success:!0,typedDatabases:n}:"resolved"===d&&c?{success:!0,typedDatabases:c}:{success:!1}}var et=s(20658);function tt(e){window.__c={n:"MoveToModalTypedEmptyState"};const{onClick:t,databaseType:s}=e,o=(0,we.O7)(),a=(0,Te.yK)((e=>({modal:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:32,marginBottom:32},icon:{width:20,fill:e.mediumTextColor},title:{marginTop:6,fontWeight:v.Z.fontWeight.semibold,color:e.mediumTextColor},subtitle:{marginTop:2,marginLeft:14,marginRight:14,textAlign:"center"},button:{fontWeight:v.Z.fontWeight.semibold,fontSize:(0,Ce.yv)(o,"UISmall")}})),[o]),i=(0,E.sN)(s),n=(0,E.Q_)(s);return(0,me.jsxs)("div",{style:a.modal,children:[(0,et.$)(a.icon),(0,me.jsx)(O.Z,{isSmall:!0,style:a.title,children:(0,me.jsx)(f.FormattedMessage,{id:"moveToModalTypedEmptyState.title",defaultMessage:"No other {singleItemName} databases",values:{singleItemName:i}})}),(0,me.jsx)(O.Z,{isSmall:!0,isMultiline:!0,style:a.subtitle,children:(0,me.jsx)(f.FormattedMessage,{id:"moveToModalTypedEmptyState.subtitle",defaultMessage:"Try adding {pluralItemName} to another teamspace",values:{pluralItemName:n}})}),(0,me.jsx)(B.Z,{isBlue:!0,onClick:t,style:a.button,children:(0,me.jsx)(f.FormattedMessage,{id:"moveToModalTypedEmptyState.button",defaultMessage:"Move somewhere else"})})]})}function st(e){let{spaceStore:t,spaceViewStore:s,targets:o,menuListStore:a,onAccept:n}=e;window.__c={n:"MoveToModalTyped"};const l=(0,we.O7)(),c=(0,Te.yK)((()=>({modal:{maxHeight:"70vh"},loadingShimmer:{padding:16}})),[]),d=(0,Me.VK)((()=>s.getTeamsStores().map((e=>e.id))),[s]),p=Je({environment:l,spaceStore:t,parentStore:t,joinedTeamIds:d,moveToTargets:o}),u=(0,Me.VK)((()=>p.success?p.typedDatabases.map((e=>function(e){const{store:t,spaceStore:s,onAccept:o}=e;return{key:t.id,render:e=>(0,me.jsx)(Ae,{spaceStore:s,collectionStore:t,menuListItemProps:e}),action:()=>o({type:"collection",id:t.id,spaceId:s.id})}}({store:e,spaceStore:t,onAccept:n}))):[]),[p,t,n]),g=(0,Me.VK)((()=>ne.ZP.getTargetsDatabaseType()),[]);if(!p.success)return(0,me.jsx)("div",{style:c.loadingShimmer,children:(0,me.jsx)(Xe.Z,{paragraphs:[{lineHeight:18,lineMargin:4,sectionWidths:[100],repeat:1,sectionMargin:0},{lineHeight:14,lineMargin:4,sectionWidths:[100,40],repeat:1,sectionMargin:-2}]})});if(!g)throw new Error("Trying to show typed moveTo modal when database type is not available.");if(0===u.length)return(0,me.jsx)(tt,{databaseType:g,onClick:()=>{ne.ZP.state.isOpen&&ne.ZP.setState({...ne.ZP.state,variant:i.br})}});const m=(0,E.sN)(g),h=[{key:"suggested",render:e=>(0,me.jsx)(L.Z,{...e,title:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"{typedItemName} databases",id:"moveToModalTyped.suggestedMenuSection.title",values:{typedItemName:(0,r.Z)(m)}}),right:(0,me.jsx)(ot,{typedItemName:m})}),items:u.slice(0,7)}];return(0,me.jsx)("div",{style:c.modal,children:(0,me.jsx)(de.Z,{initialFocus:0,type:de.i.Vertical,sections:h||[],store:a})})}function ot(e){let{typedItemName:t}=e;window.__c={n:"TypedMoveToTooltip"};const s=(0,Te.yK)((e=>({icon:{width:13,height:13,fill:e.mediumIconColor},iconButton:{height:18,width:18,padding:0,marginTop:-4,marginBottom:-4,marginRight:-4}})),[]),o=(0,f.useIntl)();return(0,we.Fy)().isMobile?null:(0,me.jsx)(N.Z,{placement:N.Z.Placement.Bottom,style:{width:220},textWrap:!0,renderTooltip:()=>(0,me.jsx)(f.FormattedMessage,{defaultMessage:"{typedItemName} properties will be kept when moving to these locations",id:"moveTypedMenu.tooltip",values:{typedItemName:m.kC(t)}}),render:e=>(0,me.jsx)(Qe.Z,{ariaLabel:o.formatMessage({id:"moveToModalTyped.helpIcon.ariaLabel",defaultMessage:"Help icon for moving typed pages."}),icon:He.m,iconStyle:s.icon,style:s.iconButton,...e})})}const at=(0,f.defineMessages)({createSubpage:{id:"moveToOrCreateMenu.createSubpage.description",defaultMessage:"Create a new sub-page where your cursor is, inside the current block."},newPageIn:{id:"moveToOrCreateMenu.newPageIn.description",defaultMessage:"Create a new page inside any existing page, then link to it in one go."},turnInto:{id:"moveToOrCreateMenu.turnInto.description",defaultMessage:"Turn blocks into new pages inside any existing database or page."},privatePagesTitle:{defaultMessage:"Private Pages",id:"moveBlockMenu.privatePagesMenuTitle"}});class it extends a.Z{constructor(){super(...arguments),this.storeTypes={ignoreSelectionAreaStore:te.Z,moveToSpaceMenuStore:ie,requestStore:le.Z,menuListStore:se.Z},this.getAutocompleteItems=async e=>{const{currentUserRootStore:t,mainEditorCurrentBlockStore:s,currentSpaceStore:o}=$.default.state,{query:a}=e,i=this.stores.moveToSpaceMenuStore.getChosenSpaceStore();if(!(t&&i&&s&&o))return[];const n=(0,G.lX)({spaceStore:i,currentUserId:this.environment.currentUser.id}),[r,l,c,d]=await async function(e,t,s,o,a){const i=[],n=[],r=[];let l=[];if(t&&rt()){const n=await Y.deps.searchActions.loader(),l=await n.searchPageIds({environment:a,query:t,limit:20,spaceId:e.id,requireEditPermissions:!1,excludeTemplates:!1,source:"move_to_menu",boostRecentlyViewedPages:!0});for(const t of l.results){const a=re.G.createChildStore(e.getPagesStore(),{table:h.iU,id:t});if((0,z.Xk)(a,s)){const e={blockId:a.id,isEditable:a.canEdit()};ct(a,o)?r.push(e):i.push(e)}}}else{l=(await M.I0(e,e.id)).map((t=>{const s=re.G.createChildStore(e.getPagesStore(),{table:h.iU,id:t});return{blockId:s.id,isEditable:s.canEdit()}})),l=l.filter((t=>{let{blockId:a}=t;const i=re.G.createChildStore(e.getPagesStore(),{table:h.iU,id:a});if((0,z.Xk)(i,s)){const e={blockId:i.id,isEditable:i.canEdit()};return!ct(i,o)||(r.push(e),!1)}}));const t=W.Xb(a);for(const e of t)if((0,z.Xk)(e,s)){const t={blockId:e.id,isEditable:e.canEdit()};ct(e,o)?r.push(t):n.push(t)}}return[i,n,r,l]}(i,a,this.props.targets,this.props.isCreateIn,this.environment),p=await n;return(0,z.Hn)()?await this.getTypedAutoCompleteItems({chosenSpaceStore:i,savedQuickAddParent:p,query:a,blockResults:r,recentPageResults:d}):this.props.isCreateIn?this.createAutoCompleteItems(i,a,r,l,c,d):this.getAutoCompleteItems(i,p,a,r,l,c,d)},this.createAutoCompleteItems=(e,t,s,o,a,i)=>{const{isAddTo:n,isTurnIntoPage:r}=this.props,l=[],c=new Set,d=e=>{if(!e)return!1;const{key:t}=e;return!c.has(t)&&(c.add(t),!0)},p=m.oA([lt({query:t},this.environment,this.props.targets,this.props.onAccept,this.props.parentBlockId,this.props.isAddTo,this.props.isCreateIn)]);!p.length||Boolean(r)||Boolean(n)||l.push({key:"defaults",render:e=>(0,me.jsx)(L.Z,{...e}),items:p});const u=m.oA([...i.slice(0,5).map((t=>{let{blockId:s}=t;return Ze({spaceStore:e,value:{type:"page",id:s,spaceId:e.id},showPath:!Boolean(r)&&!Boolean(n),isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})})),...s.slice(0,10).map((s=>{let{blockId:o}=s;return Ze({spaceStore:e,value:{type:"page",id:o,spaceId:e.id},showPath:!t,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})})),...o.slice(0,10).map((s=>{let{blockId:o}=s;return Ze({spaceStore:e,value:{type:"page",id:o,spaceId:e.id},showPath:!t,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})}))].slice(0,20).filter(d));u.length>0&&l.push({key:"blocks",render:e=>(0,me.jsx)(L.Z,{...e,title:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Suggested",id:"moveBlockMenu.suggestedSection.title"}),topBorder:l.length>0&&!Boolean(r)&&!Boolean(n)}),items:u});const g=m.oA(this.getMoveToTeamMenuItems(t).filter(d));g.length>0&&(0,X.bq)()&&l.push({key:"teams",render:e=>(0,me.jsx)(L.Z,{...e,isTitleUppercase:!0,title:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Teamspaces",id:"moveBlockMenu.teamsSection.title"}),topBorder:l.length>0}),items:g});const h=m.oA(a.slice(0,5).map((t=>{let{blockId:s}=t;return Ze({spaceStore:e,value:{type:"page",id:s,spaceId:e.id},showPath:!0,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})})).filter(d));return h.length>0&&l.push({key:"templates",render:e=>(0,me.jsx)(L.Z,{...e,isTitleUppercase:!0,title:n?(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Add from template",id:"moveBlockMenu.addFromTemplate.title"}):(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Move to template",id:"moveBlockMenu.moveToTemplate.title"}),topBorder:l.length>0}),items:h}),p.length&&(Boolean(r)||Boolean(n))&&l.push({key:"defaults",render:e=>(0,me.jsx)(L.Z,{...e,topBorder:l.length>0}),items:p}),l},this.getAutoCompleteItems=(e,t,s,o,a,i,n)=>{const r=this.getSuggestedMenuSection(s,e),l=[...n.slice(0,3),...o.slice(0,20)],c={key:"pages",render:e=>(0,me.jsx)(L.Z,{...e,title:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Pages",id:"moveBlockMenu.pagesSection.title"})}),items:m.mN(m.VS(m.oA([this.getSavedQuickAddParentMenuItem({query:s,savedQuickAddParent:t}),...l.map((t=>{let{blockId:o}=t;return Ze({spaceStore:e,value:{type:"page",id:o,spaceId:e.id},showPath:!s,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})}))])),(e=>e.key))};return[r,{key:"teams",render:e=>(0,me.jsx)(L.Z,{...e,title:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Teamspaces",id:"moveBlockMenu.teamsSection.title"})}),items:m.oA(this.getMoveToTeamMenuItems(s)).slice(0,10)},c].filter((e=>e.items.length>0))},this.getTypedAutoCompleteItems=async e=>{let{chosenSpaceStore:t,savedQuickAddParent:s,query:o,blockResults:a,recentPageResults:i}=e;const{typedSuggestedMenuSection:n,typedSuggestedResults:r}=await this.getTypedSuggestedMenuSection(o);if(ne.ZP.state.isOpen&&"aggregated_type"===ne.ZP.state.moveToContext)return[n].filter((e=>e.items.length>0));let l=(0,z.XQ)({recentPageResults:i,blockResults:a,suggestedPages:r});const c=new Set((0,z.qB)(this.props.targets));c.size>0&&(l=l.filter((e=>!c.has(e.blockId))));const d=m.mN(m.VS(m.oA([this.getSavedQuickAddParentMenuItem({query:o,savedQuickAddParent:s}),...l.map((e=>{let{blockId:s}=e;return Ze({spaceStore:t,value:{type:"page",id:s,spaceId:t.id},showPath:!o,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})}))])),(e=>e.key)),p=m.oA(this.getMoveToTeamMenuItems(o)).slice(0,5),u=n.items.length>0,g={key:"teams",render:e=>(0,me.jsx)(L.Z,{...e,desktopStyle:{paddingTop:u?0:6,paddingBottom:6},title:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Teamspaces",id:"typedMoveBlockMenu.teamsSection.title"})}),items:p},h=n.items.length>0&&0===g.items.length;return[n,g,{key:"pages",render:e=>(0,me.jsx)(L.Z,{...e,desktopStyle:{paddingTop:h?0:6,paddingBottom:6},title:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Pages",id:"typedMoveBlockMenu.pagesSection.title"})}),items:d}].filter((e=>e.items.length>0))},this.getTypedSuggestedMenuSection=async e=>{if(!ne.ZP.state.isOpen||ne.ZP.state.variant===i.br||"typedUninitialized"===ne.ZP.state.variant)throw new Error("Trying to render section when it's either not open, untyped, or typed but uninitialized (i.e. the typed databases are not fetched yet)");const t=ne.ZP.getTargetsDatabaseType(),s=(0,E.sN)(t),{typedDatabases:o}=ne.ZP.state;let a;a=ee.default.checkGate("typed_move_to_improved_search")?await this.getTypedCollectionMenuItemsFromSearch({query:e,databaseType:t?[t]:void 0}):this.getTypedMoveToMenuItems({query:e,typedDatabases:o});return{typedSuggestedMenuSection:{key:"suggested",render:e=>(0,me.jsx)(L.Z,{...e,title:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"{typedItemName} databases",id:"moveBlockMenu.typedSuggestedSection.title",values:{typedItemName:(0,r.Z)(s)}}),right:(0,me.jsx)(ot,{typedItemName:s})}),items:a.slice(0,5)},typedSuggestedResults:o}},this.allTargetsAreNavigableStore=this.createComputedStore((()=>this.props.targets.every((e=>e.isNavigableBlock()))))}renderComponent(){if(!this.props.isAddTo&&!this.props.isCreateIn&&!ne.ZP.state.isOpen)return(0,me.jsx)(me.Fragment,{});const{device:e}=this.environment,{autocompleteQuery:t,isAddTo:s,isTurnIntoPage:o}=this.props,{requestStore:a,menuListStore:i}=this.stores,n=!a.state.ready&&t.length>0;let r,l;return r=rt()?e.isPhone?this.renderInputMenuItem(n):(0,me.jsx)(L.Z,{isInput:!0,children:this.renderInputMenuItem(n)}):void 0,l=e.isPhone?{onMouseEnter:this.props.onMouseEnter,menuType:K.og.Modal,title:o?(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Add to another page",id:"moveBlockMenu.mobileNewPageInj.label"}):s?(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Add new page in",id:"moveBlockMenu.mobileAddTo.label"}):(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Move to",id:"moveBlockMenu.mobileMoveTo.label"}),right:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Done",id:"moveBlockMenu.rightDoneButton.label"}),onClickRight:this.props.onCancel,header:r}:{onMouseEnter:this.props.onMouseEnter,menuType:K.og.Popup,width:this.props.desktopWidth,header:r},(0,me.jsxs)(j.Z,{capture:!0,allowMenuList:!0,allowEsc:!0,allowTabUntab:!1,allowUndo:!1,children:[(0,me.jsx)(C.Z,{capture:!0,onEsc:this.props.onCancel}),(0,me.jsx)(w.Z,{store:this.stores.ignoreSelectionAreaStore,capture:this.props.captureSelection,ignoreBlockSelection:!1,focusOffscreenInput:!1,restoreSelection:this.props.restoreSelection,render:()=>{var e;const t=!Boolean(this.props.autocompleteQuery)&&!this.environment.device.isPhone||(0,z.Hn)()&&!Boolean(this.props.autocompleteQuery);return(0,me.jsx)(Z.Z,{...l,footer:this.renderFooter(),children:t?this.renderMoveToModal():(0,me.jsx)(he,{query:this.props.autocompleteQuery,spaceId:null===(e=this.getChosenSpaceStore())||void 0===e?void 0:e.id,menuListStore:i,requestStore:a,getAutocompleteItems:this.getAutocompleteItems})})}})]})}renderMoveToModal(){const e=this.getChosenSpaceStore(),t=this.getChosenSpaceViewStore();if(!t||!e)return;if((0,z.Hn)())return(0,me.jsx)(st,{spaceStore:e,spaceViewStore:t,onAccept:e=>dt(e,this.props.onAccept,this.environment),targets:this.props.targets,menuListStore:this.stores.menuListStore});const s=(0,Q.Cx)(e);return(0,me.jsx)(ze,{spaceStore:e,spaceViewStore:t,onAccept:this.props.onAccept,targets:this.props.targets,moveToPagesOnly:!this.allTargetsAreNavigableStore.state||s})}renderFooter(){const{isCreateIn:e,isAddTo:t,intl:s}=this.props,{currentUserRootStore:o,currentSpaceStore:a}=$.default.state,i=this.stores.moveToSpaceMenuStore.getChosenSpaceStore();if(!o||!i||!a)return;if(!(this.allTargetsAreNavigableStore.state&&!a.getDisableMoveToSpace()&&!e&&!t))return null;const n=o.getSpaceViewStores(),r=m.mN(m.oA(n.map((e=>{const t=e.getSpaceStore();return!(0,Q.Cx)(t)&&t}))),(e=>e.id)),l={menuTitle:s.formatMessage({defaultMessage:"Workspaces",id:"moveBlockMenu.spaceSwitcher.menuTitle"}),items:r,selectedItem:i,onSelect:e=>{this.stores.moveToSpaceMenuStore.setState({chosenSpaceId:e.id})},getKey:e=>e.id,renderItem:e=>(0,me.jsx)(I.Z,{...e,checkState:e.value.id===i.id,title:(0,Q.rn)(this.environment,e.value),icon:(0,me.jsx)(V.Z,{icon:(0,Q.Wd)(this.environment,e.value),isEmptyPage:!1,size:20,disabled:!0,title:(0,Q.rn)(this.environment,e.value)})}),renderOrigin:e=>{return(0,me.jsxs)(B.Z,{isSmall:!0,style:{fontWeight:"normal",fontSize:12,flexShrink:1},...e,children:[(0,me.jsx)(V.Z,{disabled:!0,icon:i.getIcon(),isEmptyPage:!1,size:16,title:i.getName(),style:{marginRight:4}}),(0,me.jsx)(ce.s,{children:(0,Q.rn)(this.environment,i)}),(0,c.i)((t=this.theme,{width:10,marginLeft:4,fill:t.lightIconColor}))]});var t},width:150};return(0,me.jsxs)("div",{children:[(0,me.jsx)(b.Z,{vertical:!1,size:1}),(0,me.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",padding:"4px"},children:(0,me.jsx)(F.Z,{...l},"space-switcher")})]})}renderInputMenuItemLabel(){const{intl:e,isAddTo:t,isTurnIntoPage:s}=this.props;if(this.isMovingToAnotherSpace())return e.formatMessage({defaultMessage:"Duplicate page…",id:"moveToMenuRenderer.duplicateToSpace.label"});if((0,z.Hn)()){const t=(0,E.sN)(ne.ZP.getTargetsDatabaseType());return e.formatMessage({defaultMessage:"Move {typedItemName} to…",id:"moveToMenuRenderer.moveTo.typedLabel"},{typedItemName:t})}return s?e.formatMessage({defaultMessage:"Search page to add in…",id:"moveToMenuRenderer.addNewPageIn.label"}):t?e.formatMessage({defaultMessage:"Search page to add to…",id:"moveToMenuRenderer.addTo.label"}):e.formatMessage({defaultMessage:"Move page to…",id:"moveToMenuRenderer.moveTo.teamLabel"})}renderInputMenuItem(e){const{device:t}=this.environment,{autocompleteQuery:s}=this.props,o=(0,z.Hn)()&&ne.ZP.state.isOpen&&"typedUninitialized"===ne.ZP.state.variant;return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(P.ZP,{onCancel:()=>{ne.ZP.state.isOpen&&ne.ZP.setState({...ne.ZP.state,isOpen:!1})},disabled:o,focus:!t.isMobile||void 0,focusAfterAnimation:!0,value:s,onChange:e=>{this.props.onAutocompleteQueryChange(e.target.value),this.stores.menuListStore.setState({...this.stores.menuListStore.state,focus:{section:0,indexLocal:0,indexGlobal:0}})},placeholder:this.renderInputMenuItemLabel(),inputLeft:(0,me.jsx)(P.f_,{icon:u.R}),inputRight:(0,me.jsx)(q.Z,{show:e,showDelay:400,showHold:0,render:e=>e&&(0,me.jsx)(k.Z,{style:{marginRight:2}})}),style:{marginBottom:-2}}),this.isMovingToAnotherSpace()&&(0,me.jsxs)(O.Z,{isMultiline:!0,isSecondaryColor:!1,style:{background:this.theme.accentColors.gray[30],marginTop:12,marginLeft:12,marginRight:12,padding:8,borderRadius:6},children:[(0,g.t)({fill:this.theme.accentColors.orange[400],width:14,height:14,marginRight:4,alignSelf:"center",display:"inline-block",verticalAlign:"text-bottom"}),(0,me.jsx)("span",{children:(0,me.jsx)(f.FormattedMessage,{id:"moveBlockMenu.duplicateToSpace.message",defaultMessage:"You can only duplicate pages into another workspace — not move them."})}),(0,me.jsx)(A.Z,{href:(0,H.UY)("guides.duplicateToSpace"),style:{color:this.theme.accentColors.gray[500],fontWeight:v.Z.fontWeight.semibold,marginTop:4},children:(0,me.jsx)(f.FormattedMessage,{id:"moveBlockMenu.duplicateToSpace.learnMoreLink",defaultMessage:"Learn more"})})]})]})}getSuggestedMenuSection(e,t){const s=0===e.length&&t?Ue({spaceStore:t,targets:this.props.targets}):[];return{key:"suggested",render:e=>(0,me.jsx)(L.Z,{...e,title:(0,me.jsx)(f.FormattedMessage,{defaultMessage:"Suggested",id:"moveBlockMenu.suggestedSection.title"})}),items:m.oA([this.getPrivatePagesMenuItem({query:e,chosenSpaceStore:t}),...s.filter((e=>(0,z.Xk)(e,this.props.targets))).map((e=>Ze({spaceStore:t,value:{type:"page",id:e.id,spaceId:t.id},showPath:!1,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept})))])}}async getTypedCollectionMenuItemsFromSearch(e){const{databaseType:t,query:s}=e,o=this.getChosenSpaceStore();if(!o)return[];const a=await Y.deps.searchActions.loader();return(await a.searchCollectionsWithRecents({environment:this.environment,query:s,limit:20,databaseType:t,parentStore:o,spaceStore:o,collectionViewBlockStore:void 0})).results.map((e=>Ze({spaceStore:o,value:{type:"collection",id:e,spaceId:o.id},showPath:!0,isCreateIn:this.props.isCreateIn,onAccept:this.props.isCreateIn?this.props.onAccept:e=>dt(e,this.props.onAccept,this.environment)}))).filter(S.$K)}getPrivatePagesMenuItem(e){var t;const{query:s,chosenSpaceStore:o}=e,a=at.privatePagesTitle,i=this.props.intl.formatMessage(a).replace(/<[^>]*>/g,""),n=s?null===(t=(0,l.C6)(s,i))||void 0===t?void 0:t.score:void 0,r=s&&(n||0)>=l.V5;if((!s||r)&&this.allTargetsAreNavigableStore.state&&(!o||Ge({environment:this.environment,targets:this.props.targets,chosenSpaceStore:o})))return{key:"private",render:e=>(0,me.jsx)(I.Z,{icon:(0,me.jsx)(R.Z,{size:22,userStore:(0,W.B7)(this.environment)}),title:(0,me.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,me.jsx)("span",{children:(0,me.jsx)(f.FormattedMessage,{...a})}),(0,X.bq)()&&(0,me.jsx)("div",{style:{marginLeft:2},children:(0,d.b)({width:14,height:14,fill:this.theme.mediumIconColor})})]}),...e}),action:()=>{this.props.onAccept({type:"space-private-pages"})}}}getSavedQuickAddParentMenuItem(e){const{isAddTo:t}=this.props,{query:s,savedQuickAddParent:o}=e,a=this.getChosenSpaceStore();if(a)return t&&!s&&"space"===o.type||"page"===o.type?Ze({spaceStore:a,value:o,showPath:!0,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept}):void 0}getTypedMoveToMenuItems(e){const{query:t,typedDatabases:s}=e,o=this.getChosenSpaceStore();if(!o||!t||!s)return[];return(0,l.ZP)(t,s,(e=>{const t=String(e.getName())||"",s=(0,U.u3)(e);return[t,s instanceof re.zX&&s.getName()||""].join(" ")})).map((e=>Ze({spaceStore:o,value:{type:"collection",id:e.id,spaceId:o.id},showPath:!0,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept}))).filter(S.$K)}getMoveToTeamMenuItems(e){if(e&&!this.allTargetsAreNavigableStore.state)return[];const t=this.getChosenSpaceStore(),s=this.getChosenSpaceViewStore();if(!t||!s)return[];let o=s.getTeamsStores();return e&&(o=(0,l.ZP)(e,o,(e=>e.getName()||""))),o.map((e=>Ze({spaceStore:t,value:{type:"team",id:e.id,spaceId:t.id},showPath:!1,isCreateIn:this.props.isCreateIn,onAccept:this.props.onAccept}))).filter(S.$K)}isMovingToAnotherSpace(){var e;const{moveToSpaceMenuStore:t}=this.stores;return!!t&&t.getChosenSpaceId()!==(null===(e=$.default.state.currentSpaceStore)||void 0===e?void 0:e.id)}getChosenSpaceStore(){return this.stores.moveToSpaceMenuStore.getChosenSpaceStore()??$.default.state.currentSpaceStore}getChosenSpaceViewStore(){return this.stores.moveToSpaceMenuStore.getChosenSpaceViewStore()??$.default.state.currentSpaceViewStore}}it.displayName="MoveToOrCreateMenu";const nt=(0,f.injectIntl)(it);function rt(){return J.Z.state.online}function lt(e,t,s,o,a,i,r){if(!i||!r)return;if(e.query)return;const l=$.default.state.mainEditorCurrentBlockStore;if(!l)return;const c=a?re.G.createChildStore(l,{table:h.iU,id:a}):void 0,d=y.gt(c);return d?{key:d.pageStore.id,render:e=>{const o=t=>(0,me.jsx)(I.Z,{...(0,D.Z)(t||{},e),icon:(0,p.R)({width:14}),title:s.length>1?(0,me.jsx)(f.FormattedMessage,{id:"moveBlockMenu.currentPage.pluralAddTitle",defaultMessage:"New sub-pages"}):(0,me.jsx)(f.FormattedMessage,{id:"moveBlockMenu.currentPage.singleAddTitle",defaultMessage:"New sub-page"})});return t.device.isPhone?o():(0,me.jsx)(N.Z,{renderTooltip:()=>(0,me.jsx)(_.Z,{imageURL:n.Z.images.tooltips.pageMenu.newSubpagePng,imageWidth:140,imageHeight:100,caption:(0,me.jsx)(f.FormattedMessage,{...at.createSubpage})}),placement:N.Z.Placement.Right,delayThreshold:0,render:e=>o(e)})},action:()=>o(d.createInValue)}:void 0}function ct(e,t){return!!t&&e.isTemplate()}function dt(e,t,s){var o;t(e);const a=ne.ZP.getTargetsDatabaseType(),i=null===(o=$.default.state.currentSpaceStore)||void 0===o?void 0:o.id;"collection"===e.type&&a&&i&&T.createAndCommit({userAction:"TypedMoveToMenu.handleClick",environment:s,perform:t=>{x.zq({transaction:t,dbType:a,collectionId:e.id})}})}},30765:(e,t,s)=>{s.d(t,{s:()=>c});var o=s(67294),a=s(480),i=s(24405),n=s(82990),r=s(26388);var l=s(85893);function c(e){let{children:t,style:s}=e;window.__c={n:"TextOverflowWithTooltip"};const{isSafari:c}=(0,a.Fy)(),d=(0,o.useRef)(null),p=function(e){const[t,s]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const{current:t}=e;if(!t)return void s(!1);const o="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;s(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==o||o.observe(t),()=>null==o?void 0:o.unobserve(t)}),[]),t}(d),u=(0,i.yK)((()=>({overflowText:{...n.Z.textOverflowStyle,...s}})),[s]);return(0,l.jsx)(r.Z,{delayThreshold:500,placement:r.Z.Placement.Bottom,forceVisibleState:!(c||!p)&&void 0,renderTooltip:()=>p?t:void 0,render:e=>(0,l.jsx)("div",{ref:d,style:u.overflowText,...e,children:t})})}}}]);