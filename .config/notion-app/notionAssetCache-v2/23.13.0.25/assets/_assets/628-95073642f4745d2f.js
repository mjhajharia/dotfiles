"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[628],{32984:(e,t,o)=>{o.d(t,{vV:()=>se,QF:()=>re,li:()=>me});var n=o(67294),i=o(480),r=o(86628),l=o(24405),s=o(3865),a=o(48777),c=o(23290),d=o(76218),p=o(72126),u=o(6287),m=o(97880),h=o(68939),g=o(9953),S=o(39699),y=o(52275),x=o(31945),v=o(78140),C=o(32163),f=o(72495),b=o(40190),w=o(61766),k=o(53437),M=o(72865),j=o(149),T=o(87279),_=o(77907),P=o(40721),V=o(74648),F=o(85893);const Z=(0,_.withDependency)(_.deps.formulas,((e,t)=>(0,F.jsx)(B,{...t,formulas:e})));function B(e){window.__c={n:"FormulaInputMenu"};const{value:t,onChange:o,onClose:l,disabled:s,contextStore:a,formulas:c}=e,d=(0,i.Fy)(),p=(0,n.useCallback)((()=>{o({type:"simple",value:null==t?void 0:t.value}),l()}),[o,l,null==t?void 0:t.value]),u=(0,n.useCallback)((e=>{void 0!==e&&e[0][0].length?o({type:"formula",value:e}):o(void 0),l()}),[o,l]),m=(0,r.VK)((()=>a.context.parentRecordStore.getSpaceId()),[a.context.parentRecordStore]),h=(0,r.Kw)(a.compilationResultStore),g=(0,n.useMemo)((()=>c.createFormulaDataRequestHandler(a.context.parentRecordStore.getRecordModel,a.context.parentRecordStore.loadRecordModel)),[a.context.parentRecordStore.getRecordModel,a.context.parentRecordStore.loadRecordModel,c]),S=(0,r.VK)((()=>{if(j.x.isFail(h))return;return{valueTypes:h.value.valueTypes,handleDataRequest:g}}),[h,g],{useDeepEqual:!0});let y;return y=d.isMobile?{menuType:T.og.Modal,right:(0,F.jsx)(P.DoneMenuText,{}),onClickRight:parent.close}:{menuType:T.og.Popup,maxHeight:"50vh",width:600,height:320,disableHeaderBorder:!0},m&&S?(0,F.jsx)(v.Z,{...y,children:(0,F.jsx)(V.Z,{formulas:c,initialCode:null==t?void 0:t.value,typecheckContext:S,handleClose:u,handleBack:p,parentSpaceId:m,disabled:s,focus:!0,evaluationErrors:[],getRecordModel:a.context.parentRecordStore.getRecordModel})}):null}var A=o(70203),I=o(17809),R=o(65187);function K(e){window.__c={n:"NumberInput"};const{value:t,disabled:o,buttonPopupStore:i,onChange:r}=e,s=(0,l.yK)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:4,padding:4}})),[]),a=(0,n.useCallback)((e=>{"="===(0,A.QaF)(e)&&(0,I.NY)()?(r({type:"formula",value:void 0}),i.setState({open:!0})):r({type:"simple",value:e})}),[r,i]),{store:c}=(0,I.Cl)({initialValue:null==t?void 0:t.value,onChange:a});return(0,F.jsx)("div",{style:s.wrap,children:(0,F.jsx)(R.Z,{disabled:o,store:c,pasteBehavior:"inline",disableSlashCommands:!0,disableEmojiCommands:!0,disableMentions:!0,disableDateMentions:!0,disableDateReminderMentions:!0,disableEmbedMenu:!0,disableMobileActionBar:!0,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableEquationInteraction:!0})})}var L=o(53498),D=o(18466),O=o(13991),H=o(32426),z=o(82990),W=o(60682),E=o(14976),N=o(75311),Q=o(30387);function q(e){window.__c={n:"ValuePickerValue"};const{value:t,type:o,currentSimpleFormulaValueTokens:n,contextStore:i,context:s}=e,{collectionStore:a,property:c}=s,d=(0,l.yK)((()=>({tokenWrap:{display:"flex",alignItems:"center",flexGrow:1,overflow:"hidden",marginTop:6}})),[]),p=(0,N.M)(a,c),u=(0,r.VK)((()=>(0,I.NY)()),[]);if("formula"===(null==t?void 0:t.type)&&t.value&&u)return(0,F.jsx)(Y,{...e});if("text"===o.type||"number"===o.type)return null;if("date"===o.type||"select"===o.type||"checkbox"===o.type){const e=n[0];return void 0===e?(0,F.jsx)(G,{}):(0,F.jsx)("div",{style:d.tokenWrap,children:(0,F.jsx)(L.K,{token:e,contextStore:i,disabled:!0,currentSimpleFormulaValueTokens:n,context:s})})}if("person_array"===o.type||"block_array"===o.type||"select_array"===o.type)return 0===n.length?(0,F.jsx)(G,{}):(0,F.jsx)("div",{style:d.tokenWrap,children:p(n,"first").map(((e,t)=>(0,F.jsx)(L.K,{token:e,contextStore:i,disabled:!0,currentSimpleFormulaValueTokens:n,context:s},t)))});(0,m.t1)(o)}function G(){window.__c={n:"ValueEmptyPlaceholder"};const e=(0,l.yK)((e=>({placeholderText:{color:e.lightTextColor}})),[]);return(0,F.jsx)("div",{style:e.placeholderText,children:(0,F.jsx)(h.FormattedMessage,{...Q.s.personSelect})})}function Y(e){window.__c={n:"MinimalFormulaText"};const{value:t,contextStore:o}=e,s=(0,i.O7)(),a=(0,l.Fg)(),c=(0,l.yK)((e=>({wrap:{display:"flex",alignItems:"center",pointerEvents:"none",fontFamily:z.Z.getCompositeFontFamily(O.SP).githubMono,fontSize:12,flexGrow:1,...z.Z.textOverflowStyle},icon:{width:14,fill:e.mediumIconColor,marginRight:6}})),[]),d=(0,W.kw)(),p=(0,r.VK)((()=>s.KatexStore.getKatex()),[s]),u=(0,r.VK)((()=>o.context.parentRecordStore.getSpaceId()),[o.context.parentRecordStore]),m=(0,r.Kw)(o.compilationResultStore),h=j.x.isSuccess(m)?m.value.valueTypes:void 0,g=(0,n.useMemo)((()=>D.Z.withListenerIgnored((()=>(0,E.IY)({environment:s,textValue:null!=t&&t.value&&u?{value:t.value,spaceId:u}:void 0,parentStore:o.context.parentRecordStore,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disabled:!0,theme:a,emojiType:d,katex:p,parentBlockId:void 0,renderedPageBlockId:void 0,formulaValueTypes:h||[]})))),[t,u,s,o.context.parentRecordStore,d,p,a,h]);return(0,F.jsxs)("div",{style:c.wrap,children:[(0,H.D)(c.icon),g]})}function U(e){window.__c={n:"SimpleFormulaValuePicker"};const{type:t,value:o,disabled:n}=e,s=(0,i.Fy)(),a=!o||"simple"===o.type,c=(0,r.VK)((()=>(0,d.A6)(null==o?void 0:o.value)),[o]),p=(0,l.yK)((e=>({button:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow}})),[]),u=(0,r.qz)(void 0,w.Z);return"number"===t.type&&a?(0,F.jsx)(K,{...e,buttonPopupStore:u}):"text"===t.type?(0,F.jsx)(M.D,{...e}):(0,F.jsx)(x.ZP,{popupType:s.isMobile?k.kQ.SlideUp:k.kQ.Popup,alignmentToOrigin:x.vR.End,placementToOrigin:x.pO.Bottom,originGap:0,buttonPopupStore:u,disabled:n,renderOrigin:t=>(0,F.jsx)(b.S,{disabled:n,variant:"gray",...t,style:p.button,children:(0,F.jsx)(q,{...e,currentSimpleFormulaValueTokens:c})}),render:t=>a?(0,F.jsx)(L.a,{...e,onClose:t.close,currentSimpleFormulaValueTokens:c}):(0,F.jsx)(Z,{...e,onClose:t.close})})}var $=o(28267),X=o(73266),J=o(95193),ee=o(35294),te=o(39068),oe=o(61053);function ne(e){window.__c={n:"AutomationPropertyPicker"};const{availablePropertyIds:t,currentValue:o,collectionStore:s,onChange:a,onRemove:c,disabled:d,alreadyHaveProperties:p}=e,u=(0,i.O7)(),m=(0,l.Fg)(),{device:g}=u,S=(0,r.VK)((()=>s.getSchema()??{}),[s]),y=(0,r.VK)((()=>s.getFormat()??{}),[s]),C=(0,r.VK)((()=>o?s.getSchema()[o]:void 0),[o,s]),f=(0,l.yK)((e=>({propertyIcon:{fill:e.lightTextColor,height:"auto",marginRight:4,width:16}})),[]),w=(0,n.useCallback)((()=>t),[t]),k=(0,ee.d)();return(0,F.jsx)(x.ZP,{popupType:k,alignmentToOrigin:x.vR.End,placementToOrigin:x.pO.Bottom,originGap:0,disabled:d,renderOrigin:e=>(0,F.jsx)(b.S,{...e,disabled:d,icon:C?e=>(0,F.jsx)(te.ZP,{icon:void 0,type:C.type,size:16,theme:m,style:{...e,...f.propertyIcon}}):void 0,variant:p||C?C?"default":"gray":"blue",children:C?(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("div",{style:{fontWeight:z.Z.fontWeight.medium,...z.Z.textOverflowStyle},children:C.name})}):p?(0,F.jsx)(h.FormattedMessage,{id:"automations.propertyPicker.buttonPlaceholderAlreadyHaveProperties",defaultMessage:"Edit another property"}):(0,F.jsx)(h.FormattedMessage,{id:"automations.propertyPicker.buttonPlaceholder",defaultMessage:"Edit a property"})}),render:e=>{const t=(0,J.U)({device:g,width:280,paddingTop:4});return(0,F.jsx)(v.Z,{...t,children:(0,F.jsx)(oe.Z,{schema:S,format:y,showRemoveOption:Boolean(c),currentProperty:o,getProperties:w,onAccept:t=>{t&&t!==o?a(t):void 0===t&&(null==c||c(o)),e.close()}})})}})}const ie=(0,h.defineMessages)({replaceActionLabel:{id:"automations.AutomationActionSetPropertiesSection.replaceAction.label",defaultMessage:"Replace with"},appendActionLabel:{id:"automations.AutomationActionSetPropertiesSection.appendAction.label",defaultMessage:"Add"},removeActionLabel:{id:"automations.AutomationActionSetPropertiesSection.removeAction.label",defaultMessage:"Remove"},titlePlaceholder:{id:"automations.AutomationActionSetPropertiesSection.titlePlaceholder",defaultMessage:"Untitled"}});function re(e){window.__c={n:"ButtonAutomationActionSetPropertiesSection"};const{contextStore:t,actionStore:o,collectionStore:l,disabled:s,showSetPropertyActions:a}=e,c=(0,i.O7)(),d=(0,r.VK)((()=>o.id),[o.id]),p=(0,r.VK)((()=>{var e;return(null===(e=o.getConfig())||void 0===e?void 0:e.values)??{}}),[o]),u=(0,r.VK)((()=>{var e;return(null===(e=o.getConfig())||void 0===e?void 0:e.properties)??[]}),[o]),m=(0,n.useMemo)((()=>({properties:u,values:p})),[u,p]),h=(0,n.useCallback)((e=>{const t=u.concat([e]),n={...p,[e]:void 0};S.createAndCommit({userAction:"AutomationActionSetPropertiesSection.propertiesChange",environment:c,perform:e=>{le({configStore:o.getConfigStore(),properties:t,transaction:e,values:n})}})}),[c,u,p,o]),g=(0,n.useCallback)(((e,t)=>{const n=u.indexOf(e);if(-1===n)return;const i=u.slice(0);i[n]=t;const r={...p,[t]:void 0};S.createAndCommit({userAction:"AutomationActionSetPropertiesSection.setProperties",environment:c,perform:e=>{le({configStore:o.getConfigStore(),properties:i,transaction:e,values:r})}})}),[c,u,p,o]),y=(0,n.useCallback)((e=>{const t=u.filter((t=>t!==e)),n={...p,[e]:void 0};S.createAndCommit({userAction:"AutomationActionSetPropertiesSection.removeProperty",environment:c,perform:e=>{le({configStore:o.getConfigStore(),properties:t,transaction:e,values:n})}})}),[c,u,p,o]),x=(0,n.useCallback)(((e,t)=>{const n={...p,[e]:t};S.createAndCommit({userAction:"AutomationActionSetPropertiesSection.handleValueChange",environment:c,perform:e=>{le({configStore:o.getConfigStore(),properties:u,transaction:e,values:n})}})}),[c,u,p,o]);return(0,F.jsx)(se,{contextStore:t,actionId:d,config:m,onPropertyAdd:h,onPropertyChange:g,onPropertyRemove:y,onPropertyValueChange:x,collectionStore:l,showSetPropertyActions:a,disabled:s})}function le(e){const{configStore:t,properties:o,transaction:n,values:i}=e;g.sW({store:t,data:{properties:o,values:i},transaction:n})}function se(e){window.__c={n:"AutomationActionSetPropertiesSection"};const{contextStore:t,actionId:o,config:n,collectionStore:i,onPropertyAdd:a,onPropertyChange:c,onPropertyRemove:d,onPropertyValueChange:p,disabled:u,showSetPropertyActions:m}=e,h=(0,l.yK)((e=>({addPropertyValuePlaceholder:{color:e.mediumTextColor,flexGrow:1,textAlign:"right"},addPropertyRow:{display:"flex",alignItems:"center"}})),[]),g=(0,r.VK)((()=>(0,s.cO)({collectionFormat:i.getFormat(),collectionSchema:i.getSchema(),sort:!1,sourcePropertyIds:n.properties})),[i,n.properties]),S=(0,r.VK)((()=>(0,s.cO)({collectionFormat:i.getFormat(),collectionSchema:i.getSchema(),filter:e=>{let[t]=e;return!g.includes(t)}})),[i,g]),y=0===S.length;return(0,F.jsxs)(F.Fragment,{children:[g.length>0&&(0,F.jsx)(ae,{availablePropertyIds:S,contextStore:t,actionId:o,config:{properties:g,values:n.values},collectionStore:i,onPropertyChange:c,onPropertyRemove:d,onPropertyValueChange:p,showSetPropertyActions:m,disabled:u}),!u&&!y&&(0,F.jsx)("div",{style:h.addPropertyRow,children:(0,F.jsx)(ne,{availablePropertyIds:S,currentValue:void 0,collectionStore:i,contextStore:t,onChange:a,disabled:u,alreadyHaveProperties:g.length>0})})]})}function ae(e){window.__c={n:"PropertySectionList"};const{availablePropertyIds:t,contextStore:o,actionId:i,config:r,collectionStore:s,onPropertyChange:a,onPropertyRemove:c,onPropertyValueChange:d,showSetPropertyActions:p,disabled:u}=e,m=(0,n.useRef)(null),h=(0,$.X)(m),g=(0,X.a)(h),S=(0,l.yK)((()=>({wrap:{alignItems:"center",columnGap:4,display:"grid",gridTemplateColumns:g?"100%":"140px 1fr",rowGap:g?4:8},propertyValue:{...g?{fontSize:14,marginBlockEnd:16}:{}},lastPropertyValue:{...g?{fontSize:14,marginBlockEnd:0}:{}}})),[g]);return(0,F.jsx)("div",{style:S.wrap,ref:m,children:r.properties.map(((e,n)=>{const l=n===r.properties.length-1;return(0,F.jsx)(ce,{actionId:i,availablePropertyIds:t,collectionStore:s,contextStore:o,disabled:u,onPropertyChange:a,onPropertyRemove:c,onPropertyValueChange:d,property:e,showSetPropertyActions:p,value:r.values[e],valueStyle:l?S.lastPropertyValue:S.propertyValue},e)}))})}function ce(e){window.__c={n:"PropertySection"};const{actionId:t,availablePropertyIds:o,collectionStore:i,contextStore:s,disabled:p,onPropertyChange:m,onPropertyRemove:g,onPropertyValueChange:S,property:y,showSetPropertyActions:x,value:v,valueStyle:C}=e,f={type:"collection",collectionStore:i,property:y},b=(0,h.useIntl)(),w=(0,l.yK)((e=>({propertyName:{},propertyValue:{display:"flex",gap:4,minWidth:50,...C}})),[C]),k=(0,n.useMemo)((()=>{if("title"===y)return b.formatMessage(ie.titlePlaceholder)}),[b,y]),M=(0,r.VK)((()=>{const e=i.getSchema()[y];if(e)return e}),[i,y]),j=(0,r.VK)((()=>{if(M)return(0,d.qW)({table:u.v,id:i.id,spaceId:i.getSpaceId()},y,M)}),[i,M,y]),T=(0,r.VK)((()=>null==M?void 0:M.type),[M]),_=null==v?void 0:v.value,P=(0,r.VK)((()=>(0,c.o9)(v)),[v]),V=(0,r.VK)((()=>s.context.parentRecordStore.getSpaceId()),[s.context.parentRecordStore]),Z=(0,r.VK)((()=>s.getContextValuesForAction(t)),[s,t]),B=(0,n.useCallback)((e=>{m(y,e)}),[m,y]),A=(0,n.useCallback)((()=>g(y)),[g,y]),I=(0,n.useCallback)((e=>{S(y,e)}),[S,y]),R=(0,n.useCallback)((e=>{I({action:e,value:_})}),[_,I]),K=(0,n.useCallback)((e=>{I({action:P,value:e})}),[P,I]);if(!j||!V)return null;const L=me(T);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{style:w.propertyName,children:(0,F.jsx)(ne,{availablePropertyIds:o,currentValue:y,contextStore:s,collectionStore:i,onChange:B,disabled:p,onRemove:A})}),(0,F.jsxs)("div",{style:w.propertyValue,children:[x&&M&&a.Y[M.type]&&(0,F.jsx)(de,{disabled:p,onChange:R,value:P}),(0,F.jsx)(U,{...L,type:j,value:null==v?void 0:v.value,onChange:K,disabled:p,contextStore:s,context:f,placeholder:k,disableMobileActionBar:!0,formulaTypecheckContextValues:Z,disableTemplateVariableMentions:!0})]})]})}function de(e){window.__c={n:"SetPropertyListActionDropdownButton"};const{disabled:t,onChange:o,value:n}=e,i=(0,ee.d)();return(0,F.jsx)(x.ZP,{popupType:i,alignmentToOrigin:x.vR.End,placementToOrigin:x.pO.Bottom,originGap:0,disabled:t,renderOrigin:e=>(0,F.jsx)(b.S,{disabled:t,variant:"gray",...e,children:(0,F.jsx)(ue,{action:n})}),render:e=>(0,F.jsx)(pe,{onChange:o,parent:e,value:n})})}function pe(e){window.__c={n:"SetPropertyListActionDropdownMenu"};const{value:t,onChange:o,parent:n}=e,i=(0,J.F)({width:250}),r=p.oA(c.E2.map(((e,i)=>({key:i,render:o=>(0,F.jsx)(y.Z,{...o,disabled:!1,title:(0,F.jsx)(ue,{action:e}),checkState:t===e}),action:()=>{e!==t&&o(e),n.close()}}))));return(0,F.jsx)(v.Z,{...i,children:(0,F.jsx)(C.Z,{type:C.i.Vertical,sections:[{key:0,render:e=>(0,F.jsx)(f.Z,{enableActionSheetTitle:!0,...e}),items:r}],initialFocus:0})})}function ue(e){const{action:t}=e;return"replace"===t?(0,F.jsx)(h.FormattedMessage,{...ie.replaceActionLabel}):"append"===t?(0,F.jsx)(h.FormattedMessage,{...ie.appendActionLabel}):"remove"===t?(0,F.jsx)(h.FormattedMessage,{...ie.removeActionLabel}):void(0,m.t1)(t)}function me(e){return"email"===e||"phone_number"===e||"url"===e?{disableEmojiCommands:!0,disableFormattingAndMentions:!0}:{}}},73239:(e,t,o)=>{o.d(t,{a:()=>S});var n=o(67294),i=o(86628),r=o(84619),l=o(68939),s=o(31945),a=o(76798),c=o(21396),d=o(61766),p=o(26350),u=o(35294),m=o(40190),h=o(8808),g=o(85893);function S(e){window.__c={n:"AutomationCollectionPicker"};const{actionStore:t,currentValue:o,contextStore:S,onChange:y,disabled:x,errorMessage:v,skipVariables:C}=e,f=(0,i.qz)(void 0,d.Z),b=(0,i.VK)((()=>o&&"collection"===o.type?p.NW.createChildStore(S.context.parentRecordStore,o.collection):void 0),[o,S.context.parentRecordStore]),w=(0,i.VK)((()=>{if(t&&o&&"variable"===o.type)return S.getContextValueForActionById(t.id,o.id)}),[t,o,S]),k=(0,n.useCallback)((e=>{"collection"!==e.type&&"variable"!==e.type||(y(e),f.reset())}),[y,f]),M=(0,n.useCallback)((()=>f.reset()),[f]),j=(0,u.d)(),T=(0,m.d)({errorMessage:v,hasValue:Boolean(b||w)});return(0,g.jsx)(s.ZP,{buttonPopupStore:f,popupType:j,alignmentToOrigin:s.vR.End,placementToOrigin:s.pO.Bottom,originGap:0,disabled:x,renderOrigin:e=>(0,g.jsx)(m.S,{...T,...e,disabled:x,children:b?(0,g.jsx)(a.Z,{store:b}):w?(0,g.jsx)(c.F,{format:r.lo.Medium,isSingle:!0,value:w}):(0,g.jsx)(l.FormattedMessage,{id:"automations.databasePicker.buttonPlaceholder",defaultMessage:"Select database"})}),render:e=>(0,g.jsx)(h.L,{actionId:null==t?void 0:t.id,automationContextStore:S,onChange:k,onClose:M,selectedTarget:o,skipPages:!0,skipVariables:C})})}},29180:(e,t,o)=>{o.d(t,{f:()=>f});var n=o(67294),i=o(480),r=o(86628),l=o(72126),s=o(21202),a=o(68939),c=o(40071),d=o(31945),p=o(78140),u=o(32163),m=o(76798),h=o(72495),g=o(26350),S=o(64737),y=o(95193),x=o(35294),v=o(40190),C=o(85893);function f(e){window.__c={n:"AutomationCollectionTemplatePicker"};const{collectionStore:t,currentTemplateId:o,onChange:n,disabled:l,errorMessage:c}=e,u=(0,i.O7)(),{device:h}=u,f=(0,r.VK)((()=>{if(!t)return;if(o){const e=g.G.createChildStore(t,{id:o,spaceId:t.getSpaceId(),table:s.iU});if(!e.pathIsDead())return e}const e=t.getDefaultTemplatePageStore();return e&&!e.pathIsDead()?e:void 0}),[t,o]),w=(0,x.d)(),k=(0,v.d)({errorMessage:c,hasValue:!0}),M=(0,r.VK)((()=>(0,S.q)(t)),[t]),j=Boolean(o);return(0,C.jsx)(d.ZP,{popupType:w,alignmentToOrigin:d.vR.End,placementToOrigin:d.pO.Bottom,originGap:0,disabled:l,renderOrigin:e=>(0,C.jsx)(v.S,{...k,...e,disabled:l,style:{minWidth:50},children:f&&(j||(0,S.w)(f))?(0,C.jsx)(m.Z,{store:f}):(0,C.jsx)(a.FormattedMessage,{id:"automations.templatePicker.buttonPlaceholder",defaultMessage:"Empty"})}),render:e=>{const o=(0,y.U)({device:h,width:280});return(0,C.jsx)(p.Z,{...o,children:t&&(0,C.jsx)(b,{collectionStore:t,templatePageStores:M,parent:e,onChange:n})})}})}function b(e){window.__c={n:"AutomationCollectionTemplateMenuList"};const{collectionStore:t,templatePageStores:o,parent:s,onChange:d}=e,p=(0,i.O7)(),{device:m}=p,g=(0,r.VK)((()=>t.getDefaultTemplatePageStore()),[t]),S=o.map((e=>({key:e.id,render:o=>(0,n.createElement)(c.Z,{...o,key:e.id,isOverlay:!0,collectionStore:t,canConfigureCollection:!1,templateStore:e,isMobile:m.isMobile,locked:!0,isDefault:g===e,onCancelClick:()=>{},draggable:!1}),action:t=>{d(e.id),s.close()}}))),y={key:"empty",render:e=>(0,n.createElement)(c.Z,{...e,key:"empty",isOverlay:!0,collectionStore:t,canConfigureCollection:!1,templateStore:void 0,isMobile:m.isMobile,locked:!0,onCancelClick:()=>{},draggable:!1}),action:e=>{d(void 0),s.close()}};return(0,C.jsx)(u.Z,{type:u.i.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,C.jsx)(h.Z,{...e,title:(0,C.jsx)(a.FormattedMessage,{id:"automations.templatePicker.menuHeader",defaultMessage:"Select a template"})}),items:l.oA([...S,g?void 0:y])}]})}},52105:(e,t,o)=>{o.d(t,{W:()=>y});var n=o(67294),i=o(86628),r=o(76205),l=o(68939),s=o(6758),a=o(42917),c=o(31945),d=o(8982),p=o(78140),u=o(72495),m=o(95193),h=o(35294),g=o(40190),S=o(85893);function y(e){var t;window.__c={n:"AutomationCombinatorFilterPopup"};const{contextStore:o,filter:n,onChange:i,noFiltersMessage:s,collectionStore:a,disabled:d}=e,p=(0,h.d)({tabletBehavior:"slideUp"}),u=(null==n||null===(t=n.filters)||void 0===t?void 0:t.length)||0;return(0,S.jsx)(c.ZP,{popupType:p,alignmentToOrigin:c.vR.End,placementToOrigin:c.pO.Bottom,originGap:0,disabled:d,renderOrigin:e=>(0,S.jsx)(g.S,{disabled:d,variant:"gray",...e,onClick:t=>{e.onClick(t),0===u&&i(r.TI)},children:u>0?(0,S.jsx)(l.FormattedMessage,{defaultMessage:"{ruleCount, plural, one {{ruleCount} filter} other {{ruleCount} filters}}",id:"automations.QueryCollectionAction.filterRuleCount.label",values:{ruleCount:u}}):s}),render:e=>(0,S.jsx)(x,{contextStore:o,filter:n,disabled:d,onChange:i,onClose:()=>e.close(),collectionStore:a})})}function x(e){window.__c={n:"AutomationCombinatorFilterMenu"};const{contextStore:t,filter:o,onChange:c,onClose:h,collectionStore:g}=e,y=(0,i.VK)((()=>g.getSchema()),[g]),x=(0,m.F)({minWidth:300,tabletBehavior:"actionSheet"}),v=(0,n.useCallback)(((e,t)=>{c(t)}),[c]),C=(0,n.useCallback)((()=>{c(void 0),h()}),[c,h]);return(0,S.jsxs)(p.Z,{...x,children:[(0,S.jsx)(d.D,{children:(0,S.jsx)(s.Pq,{index:0,level:0,combinatorFilter:o||r.hh,schema:y,onChange:v,collectionViewType:"table",collectionViewId:"test",parentStore:t.context.parentRecordStore})}),(0,S.jsx)(u.Z,{topBorder:!0,children:(0,S.jsx)(a.Z,{title:(0,S.jsx)(l.FormattedMessage,{defaultMessage:"Delete filter",id:"automations.AutomationCombinatorFilterPopup.deleteFilter.label"}),onClick:C})})]})}},40190:(e,t,o)=>{o.d(t,{S:()=>h,d:()=>g});var n=o(67294),i=o(480),r=o(24405),l=o(42853),s=o(54497),a=o(82990),c=o(24677),d=o(98104),p=o(89728),u=o(26388),m=o(85893);const h=n.forwardRef(((e,t)=>{window.__c={n:"AutomationDropdownButton"};const{variant:o,onClick:h,style:g,icon:S,children:y,disabled:x}=e,v=(0,i.O7)(),C=(0,r.yK)((e=>({button:{..."gray"===o&&{color:e.mediumTextColor},..."blue"===o&&{color:e.blueColor,fontWeight:500},..."error"===o&&{color:e.errorText},maxWidth:"calc(100% + 2px)",marginLeft:1,padding:"0 8px 0 5px",...g},warningIcon:{width:12,height:12,marginLeft:-6,marginLeft:6,fill:e.errorText,color:e.errorText},chevronIcon:{width:10,height:10,marginLeft:4,marginTop:2,fill:e.lightIconColor},spacer:{flexGrow:1}})),[o,g]),f=(0,n.useCallback)((e=>{d.ZH(v),c.ZH(v),null==h||h(e)}),[h,v]);return(0,m.jsx)(u.Z,{renderTooltip:()=>"error"===o?e.errorMessage:null,placement:u.Z.Placement.Bottom,disableTooltip:"error"!==o,delayThreshold:0,render:e=>(0,m.jsxs)(p.Z,{...e,style:C.button,icon:S,onClick:f,ref:t,shouldShrink:!0,disabled:x,disabledFeedback:x,children:[(0,m.jsx)("div",{style:{...a.Z.textOverflowStyle},children:y}),(0,m.jsx)("div",{style:C.spacer}),"error"===o&&(0,s.t)(C.warningIcon),(0,l.i)(C.chevronIcon)]})})}));function g(e){const{errorMessage:t,hasValue:o}=e;return(0,n.useMemo)((()=>t?{variant:"error",errorMessage:t}:o?{variant:"gray"}:{variant:"blue"}),[t,o])}},8808:(e,t,o)=>{o.d(t,{H:()=>W,L:()=>z});o(57658),o(21703);var n=o(67294),i=o(480),r=o(86628),l=o(24405),s=o(84619),a=o(23790),c=o(84116),d=o(78106),p=o(58573),u=o(59054),m=o(56666),h=o(72126),g=o(4615),S=o(21202),y=o(6287),x=o(97880),v=o(68939),C=o(8406),f=o(73657),b=o(71846),w=o(52275),k=o(68894),M=o(78140),j=o(32163),T=o(11470),_=o(72495),P=o(26388),V=o(21396),F=o(78948),Z=o(87279),B=o(98742),A=o(77907),I=o(75822),R=o(80444),K=o(29798),L=o(26350),D=o(95193),O=o(85893);const H=(0,v.defineMessages)({searchInputPlaceholder:{defaultMessage:"Select blocks to edit…",id:"automations.AutomationTargetPickerMenu.search.placeholder"}});function z(e){window.__c={n:"AutomationTargetPickerMenu"};const t=(0,i.O7)(),o=(0,D.F)({maxWidth:360,paddingTop:12,width:280}),r=(0,n.useMemo)((()=>(0,g.ZP)()),[]),l=(0,n.useCallback)((()=>{C.tW({environment:t,eventName:"abandoned_search",sessionId:r,source:b.S.Automation})}),[t,r]);return o.menuType===Z.og.Popup&&(o.onClickOutside=l),(0,O.jsx)(M.Z,{...o,children:(0,O.jsx)(W,{...e,searchSessionId:r})})}function W(e){window.__c={n:"AutomationTargetPickerMenuChildren"};const{actionId:t,automationContextStore:o,onChange:l,onClose:m,selectedTarget:g,skipCollections:k,skipPages:M,skipVariables:Z,searchSessionId:D}=e,H=(0,i.O7)(),z=(0,r.qz)(void 0,K.Z),W=(0,r.VK)((()=>{const{context:e}=o;if("button_property"===e.type)return e.collectionContextStore.collectionViewBlockStore()}),[o]),G=(0,r.VK)((()=>{if(Z)return[];const e=(0,x.$K)(t)?o.getContextValuesForAction(t):o.getAllContextValues();if(e){return Object.values(e).filter((e=>{if(!(0,a.uy)(e.type,{type:"block"}))return!1;if("event"===o.context.type&&e.kind===c.yp.ContextValue){const t=(0,d.MY)(e.id);return!("global"===t.source&&"button_page"===t.global)}return!0}))}return[]}),[Z,o,t],{useDeepEqual:!0}),Y=(0,n.useMemo)((()=>o.context.parentRecordStore),[o.context]),U=(0,r.VK)((()=>Y.getSpaceId()),[Y]),[$,X]=(0,n.useReducer)(Q,{automationVariables:[],collectionQueryLimit:5,pageQueryLimit:5,searchTerm:""});(0,n.useEffect)((()=>{if($.searchTerm){const e=(0,p.ZP)($.searchTerm,G,(e=>e.kind===c.yp.ContextValue?e.name:""));X({type:"set_variables",variables:e})}else X({type:"set_variables",variables:G})}),[$.searchTerm,G]);const J=function(e){const{collectionViewBlockStore:t,limit:o,parentStore:l,searchTerm:s,skip:a}=e,c=(0,i.O7)(),d=(0,r.VK)((()=>R.default.state.currentSpaceStore),[]),[p,m]=(0,n.useReducer)(q,{error:void 0,isLoading:Boolean(a),results:void 0,total:void 0}),h=(0,A.useDependency)(A.deps.searchActions),[g]=(0,u.r5)((async()=>{if(a||"resolved"!==h.status)return;const e=h.value,n=await e.searchCollectionsWithRecents({collectionViewBlockStore:t,environment:c,spaceStore:d,limit:o,parentStore:l,query:s,requireEditPermissions:!0});return{results:n.results,total:n.total}}),[t,c,o,l,s,a,h.status,h.value,d],{debounce:I.vp});return(0,n.useEffect)((()=>{if("pending"===g.status||"idle"===g.status)m({type:"query_loadstart"});else if("resolved"===g.status){var e,t;m({results:null===(e=g.value)||void 0===e?void 0:e.results,total:null===(t=g.value)||void 0===t?void 0:t.total,type:"query_finish"})}else"rejected"===g.status?m({error:g.error,type:"query_error"}):(0,x.t1)(g)}),[g]),p}({collectionViewBlockStore:W,limit:$.collectionQueryLimit,parentStore:Y,searchTerm:$.searchTerm,skip:k}),ee=function(e){const{limit:t,searchTerm:o,skip:r,spaceId:l}=e,s=(0,i.O7)(),[a,c]=(0,n.useReducer)(q,{error:void 0,isLoading:Boolean(r),results:void 0,total:void 0}),[d]=(0,u.r5)((async()=>{if(r||!l)return;const e=await A.deps.searchActions.loader(),n=await e.searchPagesInSpace({boostRecentlyViewedPages:!0,environment:s,excludeTemplates:!0,limit:t,query:o,requireEditPermissions:!1,source:"automation_page_picker",spaceId:l});return{results:n.results.map((e=>e.id)),total:n.total}}),[s,t,o,r,l],{debounce:I.vp});return(0,n.useEffect)((()=>{if("pending"===d.status||"idle"===d.status)c({type:"query_loadstart"});else if("resolved"===d.status){var e,t;c({results:null===(e=d.value)||void 0===e?void 0:e.results,total:null===(t=d.value)||void 0===t?void 0:t.total,type:"query_finish"})}else"rejected"===d.status?c({error:d.error,type:"query_error"}):(0,x.t1)(d)}),[d]),a}({limit:$.pageQueryLimit,searchTerm:$.searchTerm,skip:M,spaceId:U}),te=(0,n.useCallback)((e=>{"collection"===e.type&&C.tW({environment:H,eventName:"select_search_item",queryLength:$.searchTerm.length,sessionId:D,source:b.S.Automation,totalResults:J.total}),g&&!h.Xy(g,e)?l(e):g?m():l(e)}),[H,D,$.searchTerm,J.total,g,l,m]),oe=(0,n.useCallback)((e=>{const t=e.target.value;X({searchTerm:t,type:"set_search_term"}),z.setState({focus:{section:0,indexLocal:0,indexGlobal:0}})}),[z]),ne=(0,n.useCallback)((()=>{X({queryLimit:$.collectionQueryLimit+20,type:"set_collection_query_limit"})}),[$.collectionQueryLimit]),ie=(0,n.useCallback)((()=>{X({queryLimit:$.pageQueryLimit+20,type:"set_page_query_limit"})}),[$.pageQueryLimit]),re="variable"===(null==g?void 0:g.type)?g.id:void 0,le="collection"===(null==g?void 0:g.type)?g.collection.id:void 0,se="page"===(null==g?void 0:g.type)?g.page.id:void 0,ae=[],ce=function(e){const{automationVariables:t,onClick:o,selectedVariableId:n}=e,i=t.map((e=>{if(e.kind!==c.yp.ContextValue)throw new Error("Not implemented yet.");return{action:()=>o({id:e.id,type:"variable"}),key:e.id,render:t=>(0,O.jsx)(P.Z,{placement:P.Z.Placement.Right,render:o=>(0,O.jsx)(w.Z,{...(0,B.Z)(o,t),checkState:e.id===n,title:(0,O.jsx)("div",{style:{display:"flex"},children:(0,O.jsx)(V.F,{value:e,format:s.lo.Medium,isSingle:!0,shouldShrink:!0})})}),renderTooltip:()=>e.name,textWrap:!0})}}));if(0===i.length)return;return{key:"variable_results",items:i,render:e=>(0,O.jsx)(_.Z,{...e,title:(0,O.jsx)(v.FormattedMessage,{defaultMessage:"From this automation",id:"automations.AutomationTargetPickerMenu.variablesSection.title"})})}}({automationVariables:$.automationVariables,onClick:te,selectedVariableId:re});ce&&ae.push(ce);const de=function(e){const{collectionQueryResult:t,onCollectionMenuItemClick:o,onShowMoreItemClick:n,parentRecordStore:i,selectedCollectionId:r}=e;if(t.isLoading)return;let l=[];if(t.error)l.push({action:n,key:"show_more_collection_results",render:e=>(0,O.jsx)(f.Z,{...e,caption:(0,O.jsx)(v.FormattedMessage,{defaultMessage:"Sorry, something went wrong while searching for databases.",id:"automations.AutomationTargetPickerMenu.errorCollections.label"}),shouldWrapCaption:!0})});else{const e=t.results??[],s=e.length;l=e.map((e=>{const t=L.NW.createChildStore(i,{table:y.v,id:e});return{action:()=>o({collection:t.getSpaceShardedPointer(),type:"collection"}),key:e,render:o=>(0,O.jsx)(T.Z,{...o,checkState:e===r,store:t})}}));const a=t.total??0,c=Math.max(0,a-s);c>0&&l.push({action:n,key:"show_more_collection_results",render:e=>(0,O.jsx)(N,{...e,showMoreCount:c})})}if(0===l.length)return;return{key:"collection_results",items:l,render:e=>(0,O.jsx)(_.Z,{...e,title:(0,O.jsx)(v.FormattedMessage,{defaultMessage:"Databases",id:"automations.AutomationTargetPickerMenu.collectionsSection.title"})})}}({collectionQueryResult:J,onCollectionMenuItemClick:te,onShowMoreItemClick:ne,parentRecordStore:Y,selectedCollectionId:le});de&&ae.push(de);const pe=function(e){const{pageQueryResult:t,onPageMenuItemClick:o,onShowMoreItemClick:n,parentRecordStore:i,selectedPageId:r}=e;if(t.isLoading)return;let l=[];if(t.error)l.push({action:n,key:"show_more_collection_results",render:e=>(0,O.jsx)(f.Z,{...e,caption:(0,O.jsx)(v.FormattedMessage,{defaultMessage:"Sorry, something went wrong while searching for pages.",id:"automations.AutomationTargetPickerMenu.errorPages.label"}),shouldWrapCaption:!0})});else{const e=t.results??[],s=e.length;l=e.map((e=>{const t=L.G.createChildStore(i,{table:S.iU,id:e});return{key:e,render:o=>(0,O.jsx)(T.Z,{...o,checkState:e===r,store:t}),action:()=>o({page:t.getSpaceShardedPointer(),type:"page"})}}));const a=t.total??0,c=Math.max(0,a-s);c>0&&l.push({action:n,key:"show_more_page_results",render:e=>(0,O.jsx)(N,{...e,showMoreCount:c})})}if(0===l.length)return;return{key:"page_results",items:l,render:e=>(0,O.jsx)(_.Z,{...e,title:(0,O.jsx)(v.FormattedMessage,{defaultMessage:"Pages",id:"automations.AutomationTargetPickerMenu.pagesSection.title"})})}}({onPageMenuItemClick:te,onShowMoreItemClick:ie,pageQueryResult:ee,parentRecordStore:Y,selectedPageId:se});pe&&ae.push(pe);const ue=J.isLoading||ee.isLoading;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(E,{onChange:oe,value:$.searchTerm}),ue?(0,O.jsx)(_.Z,{children:(0,O.jsx)(F.Z,{})}):!ue&&ae.length>0?(0,O.jsx)(j.Z,{initialFocus:0,sections:ae,store:z,type:j.i.Vertical}):(0,O.jsx)(f.Z,{caption:(0,O.jsx)(v.FormattedMessage,{defaultMessage:"No results",id:"automations.AutomationTargetPickerMenu.noResults.label"})})]})}function E(e){window.__c={n:"SearchInputSection"};const{onChange:t,value:o}=e,{isMobile:n}=(0,i.Fy)(),r=(0,v.useIntl)(),s=(0,l.yK)((()=>({section:{paddingBlockStart:0}})),[]);return(0,O.jsx)(_.Z,{style:s.section,children:(0,O.jsx)(k.ZP,{focusInitial:!n||void 0,onChange:t,placeholder:r.formatMessage(H.searchInputPlaceholder),showClearButton:!0,value:o??""})})}const N=(0,n.forwardRef)((function(e,t){window.__c={n:"ShowMoreButtonMenuItem"};const{showMoreCount:o}=e,n=(0,l.yK)((e=>({showMoreButton:{color:e.mediumTextColor,fill:e.mediumIconColor}})),[]);return(0,O.jsx)(w.Z,{...e,icon:(0,m.o)({width:16,height:16}),ref:t,style:n.showMoreButton,title:(0,O.jsx)(v.FormattedMessage,{defaultMessage:"Show {showMore} more",id:"automations.AutomationTargetPickerMenu.showMore.label",values:{showMore:Math.min(o,20)}})})}));function Q(e,t){if("set_variables"===t.type)return{...e,automationVariables:t.variables.slice(0)};if("set_search_term"===t.type){const o=t.searchTerm?20:5;return{...e,collectionQueryLimit:o,pageQueryLimit:o,searchTerm:t.searchTerm}}if("set_collection_query_limit"===t.type){if(e.collectionQueryLimit!==t.queryLimit)return{...e,collectionQueryLimit:t.queryLimit}}else if("set_page_query_limit"===t.type){if(e.pageQueryLimit!==t.queryLimit)return{...e,pageQueryLimit:t.queryLimit}}else(0,x.t1)(t);return e}function q(e,t){if("query_loadstart"===t.type){if(!e.isLoading)return{...e,isLoading:!0}}else{if("query_finish"===t.type)return{...e,error:void 0,isLoading:!1,results:t.results,total:t.total};if("query_error"===t.type)return{...e,error:t.error,isLoading:!1,results:void 0,total:void 0};(0,x.t1)(t)}return e}},64737:(e,t,o)=>{o.d(t,{q:()=>r,w:()=>i});var n=o(97880);function i(e){return!e.pathIsDead()&&e.isDefined()}function r(e){if(!(0,n.$K)(e))return[];return e.getTemplatePageStores().filter((e=>i(e)))}},35294:(e,t,o)=>{o.d(t,{d:()=>l});var n=o(480),i=o(86628),r=o(53437);function l(e){const t=(0,n.Fy)();return(0,i.VK)((()=>t.isPhone||"slideUp"===(null==e?void 0:e.tabletBehavior)&&t.isTablet?r.kQ.SlideUp:r.kQ.Popup),[t,null==e?void 0:e.tabletBehavior])}},61053:(e,t,o)=>{o.d(t,{Z:()=>M});o(57658);var n=o(43261),i=o.n(n),r=o(67294),l=o(83355),s=o(49085),a=o(6695),c=o(56666),d=o(37612),p=o(72126),u=o(68939),m=o(52821),h=o(33929),g=o(29798),S=o(73657),y=o(52275),x=o(68894),v=o(32163),C=o(72495),f=o(69872),b=o(85893);const w=(0,u.defineMessages)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.propertySelect.inputPlaceholder"},none:{defaultMessage:"None",id:"database.viewSettings.propertySelect.noneMessage"},remove:{defaultMessage:"Remove",id:"database.viewSettings.propertySelect.removeMessage"}});class k extends l.Z{constructor(){super(...arguments),this.storeTypes={inputStore:s.default.createClass(""),menuListStore:g.Z,showAllProperties:s.default.createClass(!1)}}renderComponent(){const{currentProperty:e,showNoneOption:t,showRemoveOption:o,getProperties:n,onAccept:l,intl:s,inputPlaceholder:g,defaultShowPropertyCount:k,schema:M,format:j}=this.props,{device:T}=this.environment,{inputStore:_,menuListStore:P}=this.stores,V=_.state,F=(0,a.iB)(j,M,void 0,a.j5.Page).collection_page_properties||[],Z=!k||this.stores.showAllProperties.state,B=s.formatMessage(w.none),A=t?{key:"none",render:t=>(0,b.jsx)(y.Z,{...t,checkState:!e,title:B}),action:()=>{l(void 0)}}:void 0,I=o?{key:"remove",render:e=>(0,b.jsx)(y.Z,{...e,icon:(0,d.y)({width:16,fill:this.theme.mediumTextColor,marginLeft:4,marginRight:2}),title:s.formatMessage(w.remove)}),action:()=>{l(void 0)}}:void 0,R=n();let K=p.MR(R,(e=>F.findIndex((t=>t.property===e))));if(V){const e=new Map;let t=K.map((t=>{const o=M[t],n=o?`${o.name} ${m.SO[o.type]}`:"";return e.set(t,n),n}));t=i().filter(V,t).map((e=>{let{original:t}=e;return t})),K=K.filter((o=>t.includes(e.get(o)||"")))}else!Z&&k&&(K=K.slice(0,k));const L=p.oA([!V||i().test(V,B)?A:void 0,...K.map((e=>function(e,t,o,n,i){const r=t[e];if(!r)return;return{key:e,render:t=>{const o=e===n;return i?i(t,e,o,r):(0,b.jsx)(f.Z,{...t,propertySchema:r,format:f.Z.DisplayFormat.Name,checkState:o})},action:()=>{o(e)}}}(e,this.props.schema,this.props.onAccept,this.props.currentProperty,this.props.renderProperty)))]);if(!Z&&R.length>K.length&&!V){const e={key:"show_more",render:e=>(0,b.jsx)(y.Z,{...e,icon:(0,c.o)({width:16,fill:this.theme.mediumTextColor,marginLeft:4,marginRight:2}),style:{color:this.theme.mediumTextColor},title:(0,b.jsx)(u.FormattedMessage,{defaultMessage:"{moreCount} more",id:"database.viewSettings.propertySelect.showMoreTitle",values:{moreCount:R.length-K.length}})}),action:()=>{this.stores.showAllProperties.setState(!0)}};L.push(e)}const D=L.length>0,O=Boolean(V),H=!I||D||O;H&&!D&&L.push({action:p.ZT,key:"noResults",render:e=>(0,b.jsx)(S.Z,{...e,caption:(0,b.jsx)(u.FormattedMessage,{defaultMessage:"No results",id:"database.viewSettings.propertySelect.noResultsTitle"})})});const z=[];return H&&z.push({key:"input",comp:(0,b.jsx)(C.Z,{children:(0,b.jsx)(x.ZP,{focusInitial:!T.isMobile||void 0,focus:!T.isMobile||void 0,value:V,onChange:e=>{_.setState(e.target.value),P.setState({...P.state,focus:{section:0,indexLocal:0,indexGlobal:0}}),this.stores.showAllProperties.setState(!1)},placeholder:g||h.default.formatMessage(w.inputPlaceholder)})})}),(L.length>0||I)&&z.push({key:"properties",comp:(0,b.jsx)(v.Z,{type:v.i.Vertical,initialFocus:0,sections:[...L.length>0?[{key:"results",render:e=>(0,b.jsx)(C.Z,{...e}),items:L}]:[],...I?[{key:"remove",render:e=>(0,b.jsx)(C.Z,{topBorder:L.length>0,...e}),items:[I]}]:[]],store:P})}),(0,b.jsx)(b.Fragment,{children:z.map((e=>{let{key:t,comp:o}=e;return(0,b.jsx)(r.Fragment,{children:o},t)}))})}}k.displayName="CollectionSettingsPropertySelectMenu";const M=(0,u.injectIntl)(k)},23877:(e,t,o)=>{o.d(t,{Z:()=>se,v:()=>le});o(21703),o(67294);var n=o(83355),i=o(480),r=o(86628),l=o(49085),s=o(15145),a=o(6906),c=o(99036),d=o(39068),p=o(53877),u=o(6695),m=o(72126),h=o(4615),g=o(82990),S=o(68939),y=o(50906),x=o(8406),v=o(5149),C=o(14900),f=o(96802),b=o(75018),w=o(80402),k=o(39699),M=o(28020),j=o(40863),T=o(33929);const _=(0,S.defineMessages)({none:{defaultMessage:"None",id:"database.viewPropertiesMenu.coverFormat.none"},page_content:{defaultMessage:"Page content",id:"database.viewPropertiesMenu.coverFormat.pageContent"},page_cover:{defaultMessage:"Page cover",id:"database.viewPropertiesMenu.coverFormat.pageCover"}}),P=(0,S.defineMessages)({small:{defaultMessage:"Small",id:"database.viewPropertiesMenu.coverSize.small"},medium:{defaultMessage:"Medium",id:"database.viewPropertiesMenu.coverSize.medium"},large:{defaultMessage:"Large",id:"database.viewPropertiesMenu.coverSize.large"}}),V=function(e){return e?"page_content"===e.type?T.default.formatMessage(_.page_content):"page_cover"===e.type?T.default.formatMessage(_.page_cover):void 0:T.default.formatMessage(_.none)},F=e=>{switch(e){case"small":return T.default.formatMessage(P.small);case"medium":return T.default.formatMessage(P.medium);case"large":return T.default.formatMessage(P.large)}};var Z=o(81849),B=o(52821),A=o(48543),I=o(65742),R=o(78316),K=o(84210),L=o(87279),D=o(18514),O=o(80444),H=o(61766),z=o(36857),W=o(88923),E=o(21269),N=o(42917),Q=o(13709),q=o(61053),G=o(75544),Y=o(42922),U=o(64921),$=o(31945),X=o(74194),J=o(78140),ee=o(53437),te=o(72495),oe=o(86825),ne=o(85893);class ie extends n.Z{constructor(){super(...arguments),this.storeTypes={hoveredType:l.default.createClass(void 0),timelineByButtonPopupStore:H.Z,timelineByEndButtonPopupStore:H.Z,calendarByButtonPopupStore:H.Z},this.renderViewTypeButton=e=>{const{intl:t,collectionContextStore:o}=this.props,n=ce(this.props.collectionContextStore),i=o.permissionScopes.state,r=n===e,l=r||!i.canConfigureBlock;return(0,ne.jsxs)(U.Z,{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"calc(33% - 12px)",flexGrow:0,flexShrink:0,fontSize:11,borderRadius:4,margin:6,padding:6,boxShadow:`0 0 0 1px ${this.theme.regularDividerColor}`,color:this.theme.mediumTextColor,fill:this.theme.mediumTextColor,...r&&{boxShadow:`0 0 0 2px ${this.theme.blueColor}`,color:this.theme.blueColor,fill:this.theme.blueColor,fontWeight:500}},disabled:l,onClick:()=>{k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderViewTypeButton",environment:this.environment,perform:n=>{C.z2({environment:this.environment,collectionContextStore:o,newViewType:e,transaction:n,intl:t})}}),x.wd({environment:this.environment,collectionContextStore:o,action:"change_type",original_view_type:n})},onMouseMove:()=>{this.stores.hoveredType.setState(e)},children:[B.aW[e]({width:void 0,height:20,marginBottom:4,marginTop:4}),(0,ne.jsx)("div",{children:B.Bh[e]})]})},this.handleCoverFormatChange=e=>{const{collectionContextStore:t}=this.props,o=de(this.props.collectionContextStore),n=t.collectionViewStore();o&&n&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverFormatChange",environment:this.environment,perform:t=>{f.FH({stores:[n],update:{[o]:e},transaction:t})}}),x.wd({environment:this.environment,collectionContextStore:t,action:"update_cover_format"}))},this.handleCoverSizeFormatChange=e=>{const{collectionContextStore:t}=this.props,o=pe(this.props.collectionContextStore),n=t.collectionViewStore();o&&n&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverSizeFormatChange",environment:this.environment,perform:t=>{f.FH({stores:[n],update:{[o]:e},transaction:t})}}),x.wd({environment:this.environment,collectionContextStore:t,action:"toggle_cover_size_format"}))},this.handleCoverAspectFormatToggle=()=>{const{collectionContextStore:e}=this.props,t=ue(this.props.collectionContextStore),o=e.collectionViewStore(),n=e.normalizedFormatStore.state;t&&o&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleCoverAspectFormatToggle",environment:this.environment,perform:e=>{f.FH({stores:[o],update:{[t]:"contain"===n[t]?"cover":"contain"},transaction:e})}}),x.wd({environment:this.environment,collectionContextStore:e,action:"toggle_cover_aspect_format"}))},this.handleShowCollectionTitleClick=()=>{const{collectionContextStore:e}=this.props,t=e.collectionViewStore();if(!t)return;const o=!e.shouldShowSource.state;k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleShowCollectionTitleClick",environment:this.environment,perform:e=>{f.FH({stores:[t],update:{hide_linked_collection_name:!o},transaction:e})}}),x.wd({environment:this.environment,collectionContextStore:e,action:"toggle_show_collection_title"})},this.handleTableWrapCellsToggle=()=>{const{collectionContextStore:e}=this.props,t=e.collectionViewStore();if(!t)return;const o=Boolean(e.normalizedFormatStore.state.table_wrap);w.qY({environment:this.environment,collectionViewStore:t,currentValue:o}),y.wds(this.environment,{view_type:ce(this.props.collectionContextStore),action:"set_first_load_limit"}),x.wd({environment:this.environment,collectionContextStore:e,action:"toggle_table_wrap_cells"})},this.handleTableVerticalLinesToggle=()=>{const{collectionContextStore:e}=this.props,t=e.collectionViewStore();if(!t)return;const o=Boolean(e.normalizedFormatStore.state.hide_table_vertical_lines);w.AU({environment:this.environment,collectionViewStore:t,currentValue:o}),x.wd({environment:this.environment,collectionContextStore:e,action:"toggle_table_vertical_lines"})},this.handleTableSubitemToggleOnTitleToggle=()=>{const{collectionContextStore:e}=this.props,t=e.collectionViewStore();t&&(w.d1({environment:this.environment,collectionViewStore:t,currentValue:e.normalizedFormatStore.state.table_subitem_toggle_column}),x.wd({environment:this.environment,collectionContextStore:e,action:"toggle_table_subitem_toggle_on_title"}))},this.handleTimelineSeparateDatesClick=()=>{const{collectionContextStore:e}=this.props,t=e.normalizedQueryStore.state,o=e.collectionViewStore(),n=null==t?void 0:t.timeline_by,i=null==t?void 0:t.timeline_by_end;if(!n||!o)return;const r=i?void 0:n;k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleTimelineSeparateDatesClick",environment:this.environment,perform:e=>{C.Es({collectionViewStore:o,update:{timeline_by_end:r??null},transaction:e})}}),x.wd({environment:this.environment,collectionContextStore:e,action:"toggle_timeline_separate_dates"})},this.handleOpenPeekModePicker=()=>{x.nS({environment:this.environment,collectionContextStore:this.props.collectionContextStore,from:"collection_view_settings"})},this.handleCalendarViewRangeOptionClick=e=>{const{collectionContextStore:t}=this.props,o=t.collectionViewStore();if(!o)return;const{serverCommitResult:n}=k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handleViewRangeOptionClick",environment:this.environment,perform:t=>{f.FH({stores:[o],update:{calendar_view_range:e},transaction:t})}}),i=M.AK.state,r=t.dateRangeStart.state,l=t.dateRangeEnd.state,{newDateRangeStart:s,newDateRangeEnd:a}=function(e){const{newViewRange:t,oldCalendarEnd:o,startOfWeekSetting:n}=e;if("month"===t){const e=(0,p.IS)((0,p.kl)(o),n);return{newDateRangeStart:e,newDateRangeEnd:(0,p.V7)((0,p._)({date:e,monthsToAdd:1}),n)}}{const e=(0,p.IS)(o,n);return{newDateRangeStart:e,newDateRangeEnd:(0,p.V7)(e,n)}}}({oldCalendarEnd:l,newViewRange:e,startOfWeekSetting:i});C.t5({dateRangeStart:s,dateRangeEnd:a,collectionContextStore:t}),n.then((()=>{x.wd({environment:this.environment,collectionContextStore:t,action:"update_calendar_view_range"})})).catch((()=>{C.t5({dateRangeStart:r,dateRangeEnd:l,collectionContextStore:t})}))},this.handlePeekModeFormatClick=e=>{const{collectionContextStore:t}=this.props,o=t.collectionViewStore();if(o&&e&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.handlePeekModeFormatClick",environment:this.environment,perform:t=>{f.FH({stores:[o],update:{collection_peek_mode:e},transaction:t})}}),x.gl({environment:this.environment,collectionContextStore:t,peek_mode:e,from:"collection_view_settings"}),W.default.state.open&&W.default.state.collectionContextStore===t)){const{mainEditorCurrentBlockStore:t}=O.default.state,o="full_page"===e?(0,K.ZP)({store:W.default.state.target,fullyQualified:!1,pageVisitSource:s.tY.Expand}):(0,R.mb)({store:W.default.state.target,mainEditorCurrentBlockStore:t,collectionContextStore:W.default.state.collectionContextStore,fullyQualified:!1,overridePeekMode:(0,W.getPeekModeFromCollectionPeekModeFormat)(e)});o&&b.navigate({environment:this.environment,url:o})}},this.handleViewTypeAreaMouseLeave=()=>{this.stores.hoveredType.setState(void 0)},this.handleDoneClick=()=>{const{collectionSettingsStore:e,collectionContextStore:t}=this.props;v.wl({collectionSettingsStore:e,item:{type:"main"}}),x.wd({environment:this.environment,collectionContextStore:t,action:"click_create_view_done"})}}renderComponent(){const{collectionContextStore:e,showDoneButton:t}=this.props,{hoveredType:o}=this.stores,{device:n}=this.environment,i=e.normalizedQueryStore.state,r=e.normalizedSchemaStore.state,l=e.normalizedFormatStore.state,s=e.isFullScreen.state,a=e.isRootChild.state,d=ce(this.props.collectionContextStore),p=Boolean(de(this.props.collectionContextStore)),u="table"===d||"board"===d||"gallery"===d,m="table"===d,h=Object.keys(r).filter((e=>{const t=r[e];return t&&(0,c.Lt)(t)})),g="timeline"===d&&h.length>0,y="timeline"===d&&h.length>1,x="timeline"===d&&Boolean(null==i?void 0:i.timeline_by_end),v="calendar"===d&&h.length>0,C="calendar"===d,f="board"===d,b=(0,I.d$)({environment:this.environment,isFullScreen:s,isRootChild:a}),w="timeline"===d&&Boolean(l.timeline_show_table)&&b,k="timeline"===d&&b,M=e.collectionViewBlockStore();if(!M)return;const j=M.getCollectionViewSourceCollectionStore(),T=!("collectionTypedView"===e.contextType||j&&s),_=e.permissionScopes.state,P="page"===d;return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(te.Z,{topBorder:!1,shouldShowBottomDivider:n.isMobile,children:(0,ne.jsxs)("div",{style:{...!n.isMobile&&{width:"100%",paddingLeft:8,paddingRight:8},...n.isMobile&&{background:this.theme.contentBackground,width:"100%",paddingTop:12,paddingBottom:12}},onMouseLeave:this.handleViewTypeAreaMouseLeave,children:[(0,ne.jsx)("div",{style:{display:"flex",flexFlow:"wrap",justifyContent:"center"},children:["table","board","timeline","calendar","list","gallery"].map(this.renderViewTypeButton)}),(0,ne.jsx)("div",{style:{color:this.theme.lightTextColor,fontSize:12,margin:"6px 8px 0px 8px"},children:B.sN[o.state||d]})]})}),(0,ne.jsxs)(te.Z,{children:[T&&(0,ne.jsx)(oe.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Show database title",id:"database.viewSettings.layoutTab.showDatabaseTitle.title"}),focused:!1,on:e.shouldShowSource.state,onClick:this.handleShowCollectionTitleClick,disabled:!_.canConfigureBlock,textWrapperStyle:{opacity:1}}),p&&this.renderCardSettings(),m&&this.renderTableVerticalLinesSetting(),u&&this.renderTableWrapCellsSetting(),P&&(0,ne.jsx)(he,{collectionContextStore:this.props.collectionContextStore}),g&&(0,ne.jsx)(ge,{collectionContextStore:this.props.collectionContextStore}),x&&(0,ne.jsx)(Se,{collectionContextStore:this.props.collectionContextStore}),y&&this.renderTimelineSeparateDatesSetting(),v&&(0,ne.jsx)(ye,{collectionContextStore:this.props.collectionContextStore}),C&&this.renderCalendarViewRangeSetting(),k&&(0,ne.jsx)(G.N,{collectionContextStore:e}),w&&(0,ne.jsx)(xe,{collectionContextStore:this.props.collectionContextStore,collectionSettingsStore:this.props.collectionSettingsStore}),f&&(0,ne.jsx)(ve,{collectionContextStore:this.props.collectionContextStore,collectionSettingsStore:this.props.collectionSettingsStore}),this.renderPeekModeSetting()]}),t&&(0,ne.jsx)(te.Z,{disableMobileBorders:!0,children:(0,ne.jsx)(Y.Z,{style:{display:"flex",margin:"0 14px"},onClick:this.handleDoneClick,children:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Done",id:"database.viewSettings.createViewTab.doneButton.title"})})}),(0,ne.jsx)(te.Z,{topBorder:!1,children:(0,ne.jsx)(E.Z,{href:(0,D.UY)("guides.databaseView"),title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Learn about views",id:"database.viewSettings.layoutTab.learnMoreButton.title"}),analyticsFrom:"view_settings_layout"})})]})}renderCardSettings(){const{device:e}=this.environment,{collectionContextStore:t}=this.props,o=function(e){const t=e.normalizedFormatStore.state,o=de(e);if(o&&t)return t[o]}(this.props.collectionContextStore),n=function(e){const t=e.normalizedFormatStore.state,o=pe(e);if(o&&t){const e=t[o];if(e)return e}return u.PZ}(this.props.collectionContextStore),i=!e.isMobile||"board"===ce(this.props.collectionContextStore),r=t.permissionScopes.state;return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(Q.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Card preview",id:"database.viewSettings.layoutTab.cardPreviewButtonTitle"}),selectedKey:o,popupStyle:{minWidth:190},options:this.getCoverFormatOptions(),onChange:this.handleCoverFormatChange,disabled:!r.canConfigureBlock}),i&&(0,ne.jsx)(Q.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Card size",id:"databdatabase.viewSettings.layoutTab.cardSizeButtonTitle"}),selectedKey:n,popupStyle:{minWidth:190},options:ae(),onChange:this.handleCoverSizeFormatChange,disabled:!r.canConfigureBlock}),o&&(0,ne.jsx)(oe.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Fit image",id:"databdatabase.viewSettings.layoutTab.fitImageButtonTitle"}),on:"contain"===me(this.props.collectionContextStore),focused:!1,onClick:this.handleCoverAspectFormatToggle,disabled:!r.canConfigureBlock,textWrapperStyle:{opacity:1}})]})}getCoverFormatOptions(){const{collectionContextStore:e}=this.props,t=e.normalizedSchemaStore.state;let o=Object.keys(t);o=m.MR(o,(e=>{const o=t[e];return o?o.name:""}));const{theme:n}=this,i=m.oA(o.map((e=>{const o=t[e];if(o&&"file"===o.type){return{key:{type:"property",property:e},title:o.name,icon:(0,ne.jsx)(d.ZP,{type:o.type,icon:o.icon,size:this.environment.device.isMobile?16:14,theme:n,style:{fill:n.regularIconColor}})}}})));return[...[void 0,{type:"page_cover"},{type:"page_content"}].map((e=>({key:e,title:V(e)}))),...i]}renderTableVerticalLinesSetting(){const{collectionContextStore:e}=this.props,t=e.permissionScopes.state;return(0,ne.jsx)(oe.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Show vertical lines",id:"database.viewSettings.layoutTab.tableShowVerticalLines"}),on:!Boolean(e.normalizedFormatStore.state.hide_table_vertical_lines),focused:!1,onClick:this.handleTableVerticalLinesToggle,disabled:!t.canConfigureBlock,textWrapperStyle:{opacity:1}})}renderTableWrapCellsSetting(){const{collectionContextStore:e}=this.props,t=e.normalizedFormatStore.state,o=e.permissionScopes.state,n=ce(this.props.collectionContextStore);return(0,ne.jsx)(oe.Z,{title:"table"===n?(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Wrap all columns",id:"database.viewSettings.layoutTab.tableWrapAllColumns"}):(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Wrap all properties",id:"database.viewSettings.layoutTab.tableWrapAllProperties"}),on:Boolean(t.table_wrap),focused:!1,onClick:this.handleTableWrapCellsToggle,disabled:!o.canConfigureBlock,textWrapperStyle:{opacity:1}})}renderTimelineSeparateDatesSetting(){const{collectionContextStore:e}=this.props,t=e.normalizedQueryStore.state,o=null==t?void 0:t.timeline_by_end,n=e.permissionScopes.state;return(0,ne.jsx)(oe.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Separate start and end dates",id:"database.viewSettings.layoutTab.timelineUseSeparateDates.title"}),focused:!1,on:Boolean(o),onClick:this.handleTimelineSeparateDatesClick,disabled:!n.canConfigureBlock,textWrapperStyle:{opacity:1}})}renderCalendarViewRangeSetting(){const{collectionContextStore:e}=this.props,t=e.permissionScopes.state,o=function(e){const t=e.normalizedFormatStore.state;return(null==t?void 0:t.calendar_view_range)||"month"}(this.props.collectionContextStore);return(0,ne.jsx)(Q.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Show calendar as",id:"database.viewSettings.layoutTab.showCalendarAs.title"}),collectionContextStore:e,openButtonPopup:"peekModeFormat"===e.settingsStore.state.openButtonPopup,selectedKey:o,popupStyle:{minWidth:190},options:re(),onChange:this.handleCalendarViewRangeOptionClick,disabled:!t.canConfigureBlock})}renderPeekModeSetting(){const{collectionContextStore:e}=this.props,t=e.permissionScopes.state,o=function(e){const t=e.normalizedFormatStore.state,o=ce(e);return(null==t?void 0:t.collection_peek_mode)||A.Ls[o]}(this.props.collectionContextStore);return(0,ne.jsx)(Q.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Open pages in",id:"database.viewSettings.layoutTab.peekModeTitle"}),collectionContextStore:e,openButtonPopup:"peekModeFormat"===e.settingsStore.state.openButtonPopup,selectedKey:o,popupStyle:{minWidth:190},options:le({currentViewType:ce(this.props.collectionContextStore),theme:this.theme}),menuItemOptionsStyle:{paddingTop:8,paddingBottom:8},onClick:this.handleOpenPeekModePicker,onChange:this.handlePeekModeFormatClick,disabled:!t.canConfigureBlock})}}function re(){return["month","week"].map((e=>({key:e,title:T.default.formatMessage(j.Lh[e])})))}function le(e){const{currentViewType:t,theme:o}=e,n=t?A.Ls[t]:void 0;return["side_peek","center_peek","full_page"].map((e=>({key:e,title:(0,A.LQ)(e),body:(0,ne.jsxs)(ne.Fragment,{children:[(0,A.RI)(e),n&&t&&e===n&&(0,ne.jsx)("div",{style:{marginTop:2,fontWeight:500,color:o.blueColor},children:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Default for {view}",id:"database.viewPropertiesMenu.peekMode.defaultForView",values:{view:(0,a.Z)(t)}})})]}),icon:(0,A.RO)(e)({width:16,fill:o.mediumTextColor})})))}ie.displayName="CollectionSettingsViewLayoutMenu";const se=(0,S.injectIntl)(ie);function ae(){return["small","medium","large"].map((e=>({key:e,title:F(e)})))}function ce(e){var t;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.getType();if(!o)throw new Error("View type was not defined.");return o}function de(e){return B.DL[ce(e)]}function pe(e){return B.oy[ce(e)]}function ue(e){return B._Y[ce(e)]}function me(e){const t=e.normalizedFormatStore.state,o=ue(e);if(o&&t)return t[o]}function he(e){let{collectionContextStore:t}=e;window.__c={n:"PageViewSetting"};const o=(0,i.O7)(),n=(0,r.VK)((()=>t.collectionViewStore()),[t]);return n?(0,ne.jsx)("div",{style:{padding:5},children:(0,ne.jsx)(X.Z,{showClearButton:!0,placeholder:"Enter page ID",focusInitial:!0,onChange:e=>{z.Z.setState({pageId:e.target.value})},onSubmit:e=>{const t=z.Z.state.pageId;t&&k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderPageViewSettings",environment:o,perform:e=>{f.FH({stores:[n],update:{page_pointer:{id:(0,h.Mt)(t),spaceId:e.spaceId,table:"block"}},transaction:e})}})}})}):null}function ge(e){let{collectionContextStore:t}=e;window.__c={n:"TimelineBySetting"};const o=(0,i.O7)(),n=(0,i.MO)(),l=(0,r.VK)((()=>{var e;return null===(e=t.normalizedQueryStore.state)||void 0===e?void 0:e.timeline_by}),[t]),s=(0,r.VK)((()=>{var e;return null===(e=t.normalizedQueryStore.state)||void 0===e?void 0:e.timeline_by_end}),[t]),a=(0,r.VK)((()=>t.permissionScopes.state),[t]),d=(0,r.VK)((()=>t.normalizedSchemaStore.state),[t]),p=(0,r.VK)((()=>t.collectionViewStore()),[t]),u=(0,r.VK)((()=>t.collectionStore()),[t]),m=(0,r.VK)((()=>null==u?void 0:u.getSchema()),[u]),h=(0,r.VK)((()=>null==u?void 0:u.getFormat()),[u]);if(!(l&&p&&u&&h&&m))return null;const y=d[l];return y?(0,ne.jsx)($.ZP,{popupType:n?ee.kQ.SlideUp:ee.kQ.Popup,alignmentToOrigin:$.vR.End,placementToOrigin:$.pO.Bottom,originGap:0,renderOrigin:e=>(0,ne.jsx)(N.Z,{title:s?(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Start date",id:"database.viewSettings.layoutTab.timelineStartDate.title"}):(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Show timeline by",id:"database.viewSettings.layoutTab.showTimelineByProperty.title"}),disabled:!a.canConfigureBlock,showChevron:!0,right:(0,ne.jsx)("div",{style:g.Z.textOverflowStyle,children:y.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:e=>{let i;return i=n?{menuType:L.og.ActionSheet}:{menuType:L.og.Popup,width:300},(0,ne.jsx)(J.Z,{...i,children:(0,ne.jsx)(q.Z,{schema:m,format:h,currentProperty:l,getProperties:()=>Object.keys(d).filter((e=>{const t=d[e];return t&&(0,c.Lt)(t)})),onAccept:n=>{n&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderTimelineBySetting",environment:o,perform:e=>{C.Es({collectionViewStore:p,update:{timeline_by:n},transaction:e})}}),e.close(),x.wd({environment:o,collectionContextStore:t,action:"update_timeline_by",original_view_type:void 0,property_type:y[n].type}))}})})}}):null}function Se(e){let{collectionContextStore:t}=e;window.__c={n:"TimelineEndSetting"};const o=(0,i.O7)(),n=(0,i.MO)(),l=(0,r.VK)((()=>{var e;return null===(e=t.normalizedQueryStore.state)||void 0===e?void 0:e.timeline_by_end}),[t]),s=(0,r.VK)((()=>t.permissionScopes.state),[t]),a=(0,r.VK)((()=>t.normalizedSchemaStore.state),[t]),d=(0,r.VK)((()=>t.collectionViewStore()),[t]),p=(0,r.VK)((()=>t.collectionStore()),[t]),u=(0,r.VK)((()=>null==p?void 0:p.getSchema()),[p]),m=(0,r.VK)((()=>null==p?void 0:p.getFormat()),[p]);if(!(l&&d&&p&&m&&u))return null;const h=a[l];return h?(0,ne.jsx)($.ZP,{popupType:n?ee.kQ.SlideUp:ee.kQ.Popup,alignmentToOrigin:$.vR.End,placementToOrigin:$.pO.Bottom,originGap:0,renderOrigin:e=>(0,ne.jsx)(N.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"End date",id:"database.viewSettings.layoutTab.timelineEndDate.title"}),showChevron:!0,right:h.name,disabled:!s.canConfigureBlock,...e}),render:e=>{let i;return i=n?{menuType:L.og.ActionSheet}:{menuType:L.og.Popup,width:300},(0,ne.jsx)(J.Z,{...i,children:(0,ne.jsx)(q.Z,{schema:u,format:m,currentProperty:l,getProperties:()=>Object.keys(a).filter((e=>{const t=a[e];return t&&(0,c.Lt)(t)})),onAccept:n=>{n&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderTimelineEndSetting",environment:o,perform:e=>{C.Es({collectionViewStore:d,update:{timeline_by_end:n},transaction:e})}}),e.close(),x.wd({environment:o,collectionContextStore:t,action:"update_timeline_by_end",original_view_type:void 0,property_type:h[n].type}))}})})}}):null}function ye(e){let{collectionContextStore:t}=e;window.__c={n:"CalendarBySetting"};const o=(0,i.O7)(),n=(0,i.MO)(),l=(0,r.VK)((()=>{var e;return null===(e=t.normalizedQueryStore.state)||void 0===e?void 0:e.calendar_by}),[t]),s=(0,r.VK)((()=>t.permissionScopes.state),[t]),a=(0,r.VK)((()=>t.normalizedSchemaStore.state),[t]),d=(0,r.VK)((()=>t.collectionViewStore()),[t]),p=(0,r.VK)((()=>t.collectionStore()),[t]),u=(0,r.VK)((()=>null==p?void 0:p.getSchema()),[p]),m=(0,r.VK)((()=>null==p?void 0:p.getFormat()),[p]);if(!(l&&d&&p&&m&&u))return null;const h=a[l];return h?(0,ne.jsx)($.ZP,{popupType:n?ee.kQ.SlideUp:ee.kQ.Popup,alignmentToOrigin:$.vR.End,placementToOrigin:$.pO.Bottom,originGap:0,renderOrigin:e=>(0,ne.jsx)(N.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Show calendar by",id:"database.viewSettings.layoutTab.showCalendarByProperty.title"}),disabled:!s.canConfigureBlock,showChevron:!0,right:(0,ne.jsx)("div",{style:g.Z.textOverflowStyle,children:h.name}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0},...e}),render:e=>{let i;return i=n?{menuType:L.og.ActionSheet}:{menuType:L.og.Popup,width:300},(0,ne.jsx)(J.Z,{...i,children:(0,ne.jsx)(q.Z,{schema:u,format:m,currentProperty:l,getProperties:()=>Object.keys(a).filter((e=>{const t=a[e];return t&&(0,c.Lt)(t)})),onAccept:n=>{n&&(k.createAndCommit({userAction:"CollectionSettingsViewLayoutMenu.renderCalendarBySetting",environment:o,perform:e=>{C.Es({collectionViewStore:d,update:{calendar_by:n},transaction:e})}}),e.close(),x.wd({environment:o,collectionContextStore:t,action:"update_calendar_by",original_view_type:void 0,property_type:h[n].type}))}})})}}):null}function xe(e){let{collectionContextStore:t,collectionSettingsStore:o}=e;window.__c={n:"TimelineTableProperties"};const n=(0,i.O7)(),l=((0,r.VK)((()=>t.normalizedFormatStore.state),[t]).timeline_table_properties||[]).filter((e=>Boolean(e.visible))).length,s=(0,r.VK)((()=>t.permissionScopes.state),[t]);return(0,ne.jsx)(N.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Table properties",id:"database.viewSettings.layoutTab.tablePropertiesButton.title"}),showChevron:!0,right:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"{propertiesShown} shown",id:"database.viewSettings.layoutTab.propertiesButton.propertiesShown.title",values:{propertiesShown:l}}),onClick:()=>{v.H4({collectionSettingsStore:o,item:{type:"properties",timelineViewTab:"table"}}),x.wd({environment:n,collectionContextStore:t,action:"click_timeline_table_properties"})},disabled:!s.canConfigureBlock})}function ve(e){let{collectionContextStore:t,collectionSettingsStore:o}=e;window.__c={n:"BoardGroupByShortcuts"};const n=(0,i.O7)(),l=(0,r.VK)((()=>t.normalizedFormatStore.state.board_columns_by),[t]),s=(0,r.VK)((()=>t.normalizedSchemaStore.state),[t]),a=(0,r.VK)((()=>t.permissionScopes.state),[t]),c=(0,r.VK)((()=>(0,Z.h6)(n,t)),[t,n]);if(!l)return null;const d=s[l.property];return d?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(N.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Group by",id:"database.viewSettings.layoutTab.boardGroupByButton.title"}),showChevron:!0,right:d.name,onClick:()=>{v.H4({collectionSettingsStore:o,item:{type:"group",groupByKey:"board_columns_by",groupsFormatKey:"board_columns"}}),x.wd({environment:n,collectionContextStore:t,action:"click_board_group_by",original_view_type:void 0,property_type:d.type})},disabled:!a.canConfigureBlock}),(0,ne.jsx)(oe.Z,{title:(0,ne.jsx)(S.FormattedMessage,{defaultMessage:"Color columns",id:"database.viewSettings.groupTab.colorColumns"}),on:!c,focused:!1,onClick:()=>{v.iN({environment:n,collectionContextStore:t})},disabled:!a.canConfigureBlock,textWrapperStyle:{opacity:1}})]}):null}},75544:(e,t,o)=>{o.d(t,{N:()=>J,Z:()=>ee});var n=o(43261),i=o.n(n),r=(o(67294),o(83355)),l=o(480),s=o(86628),a=o(49085),c=o(99036),d=o(80951),p=o(39068),u=o(6695),m=o(5257),h=o(39132),g=o(61061),S=o(47453),y=o(37612),x=o(72126),v=o(97880),C=o(82990),f=o(68939),b=o(8406),w=o(5149),k=o(87085),M=o(14900),j=o(96802),T=o(39699),_=o(52821),P=o(68641),V=o(65742),F=o(19124),Z=o(33929),B=o(18514),A=o(29798),I=o(73657),R=o(21269),K=o(13005),L=o(42917),D=o(54119),O=o(52275),H=o(79131),z=o(5145),W=o(73063),E=o(68894),N=o(32163),Q=o(89728),q=o(72495),G=o(86825),Y=o(66957),U=o(85893);const $=(0,f.defineMessages)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.propertiesTab.inputPlaceholder"},toggleFrozenColumnsAriaLabel:{defaultMessage:"Toggle frozen columns",id:"database.viewSettings.propertiesTab.toggleFrozenColumnsAriaLabel"},togglePropertyVisibilityAriaLabel:{defaultMessage:"Toggle property visibility",id:"database.viewSettings.propertiesTab.togglePropertyVisibilityAriaLabel"}});class X extends r.Z{constructor(){super(...arguments),this.storeTypes={inputStore:a.default.createClass(""),menuListStore:A.Z},this.handleHideAllClick=e=>{const{collectionContextStore:t}=this.props;b.wd({environment:this.environment,collectionContextStore:t,action:"click_hide_all_properties"}),ne({formatKey:e,visibility:!1},this.props.collectionContextStore,this.environment)},this.handleShowAllClick=e=>{const{collectionContextStore:t}=this.props;b.wd({environment:this.environment,collectionContextStore:t,action:"click_show_all_properties"}),ne({formatKey:e,visibility:!0},this.props.collectionContextStore,this.environment)},this.handlePropertyReorder=e=>{const{formatKey:t,newPropertyKeys:o}=e,{collectionContextStore:n}=this.props,i=n.collectionViewStore();if(!i)return;const r=n.normalizedFormatStore.state[t]||[],l=o.indexOf("group-header-hidden-property"),s=[...x.oA(o.filter((e=>!e.startsWith("group-header-"))).map(((e,t)=>{const o=r.find((t=>t.property===e));if(o)return l>=0?{...o,visible:Boolean(t<l)}:o}))),...r.filter((e=>!o.includes(e.property)))];T.createAndCommit({userAction:"CollectionSettingsViewProperties.handlePropertyReorder",environment:this.environment,perform:e=>{j.FH({stores:[i],update:{[t]:s},transaction:e})}}),b.wd({environment:this.environment,collectionContextStore:n,action:"reorder_properties",original_view_type:i.getType()}),this.stores.menuListStore.reset()},this.handleTogglePropertyVisibility=e=>{var t;const{formatKey:o,propertyFormat:n}=e,{collectionContextStore:i}=this.props,r=i.collectionViewStore();if(!r)return;const l=i.normalizedFormatStore.state,s=(l[o]||[]).filter((e=>e.property!==n.property)),a=s.filter((e=>e.visible)),c=s.filter((e=>!e.visible)),d={...n,visible:!n.visible},p=[...a,d,...c],u={...l,[o]:p};T.createAndCommit({userAction:"CollectionSettingsViewProperties.handleTogglePropertyVisibility",environment:this.environment,perform:e=>{M.iG({collectionViewStore:r,update:{format:u},transaction:e})}}),b.wd({environment:this.environment,collectionContextStore:i,action:"toggle_property_visibility",original_view_type:r.getType(),property_type:null===(t=r.getCollectionStore())||void 0===t||null===(t=t.getSchema()[d.property])||void 0===t?void 0:t.type}),this.clearInput()},this.handlePropertyClick=e=>{var t,o,n;const{collectionSettingsStore:i,collectionContextStore:r}=this.props,l=(null===(t=r.collectionStore())||void 0===t?void 0:t.getSchema())||r.normalizedSchemaStore.state||{},{formatKey:s,propertyFormat:a}=e;b.wd({environment:this.environment,collectionContextStore:r,action:"click_property",original_view_type:null==r||null===(o=r.collectionViewStore())||void 0===o?void 0:o.getType(),property_type:null===(n=l[a.property])||void 0===n?void 0:n.type}),w.H4({collectionSettingsStore:i,item:{type:"property",formatKey:s,property:a.property}})},this.handleViewDeletedPropertiesClick=()=>{const{collectionSettingsStore:e,collectionContextStore:t,timelineViewTab:o}=this.props;t.collectionStore()&&(b.wd({environment:this.environment,collectionContextStore:t,action:"click_deleted_properties"}),w.H4({collectionSettingsStore:e,item:{type:"deletedProperties",timelineViewTab:o}}))},this.handleNewPropertyClick=()=>{const{collectionContextStore:e}=this.props,t=e.collectionStore();t&&(b.wd({environment:this.environment,collectionContextStore:e,action:"click_new_property"}),w.wl({collectionSettingsStore:e.settingsStore,item:{type:"propertyType",propertyTypes:(0,_.TP)({isSyncedCollection:t.isSyncedCollection(),collectionContextStore:e,environment:this.environment}),onAccept:(t,o)=>{k.PW({environment:this.environment,propertyType:t,propertyName:o,collectionContextStore:e,from:"view_settings"})}}}))},this.handleTabChange=e=>{const{collectionSettingsStore:t,collectionContextStore:o}=this.props;b.wd({environment:this.environment,collectionContextStore:o,action:0===e?"click_properties_tab_timeline":"click_properties_tab_table"}),w.FK({collectionSettingsStore:t,item:{type:"properties",timelineViewTab:0===e?"timeline":"table"}}),this.clearInput()},this.handleShowTableClick=()=>{this.clearInput()}}renderComponent(){const{collectionContextStore:e,timelineViewTab:t}=this.props,{device:o}=this.environment,{inputStore:n,menuListStore:i}=this.stores,r=n.state,l=(0,P.WY)({collectionContextStore:e}),s=(0,P.jI)({timelineViewTab:t,collectionContextStore:e}),a=(0,V.d$)({environment:this.environment,isFullScreen:e.isFullScreen.state,isRootChild:e.isRootChild.state});return(0,U.jsxs)(K.ZP,{...this.props,title:(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Properties",id:"database.viewSettings.propertiesTab.title"}),header:(0,U.jsx)(q.Z,{children:(0,U.jsx)(E.ZP,{focusInitial:!o.isMobile,value:r,showClearButton:!0,onChange:e=>{n.setState(e.target.value),i.setState({...i.state,focus:{section:0,indexLocal:0,indexGlobal:0}})},placeholder:Z.default.formatMessage($.inputPlaceholder)})}),footer:this.renderFooter(),children:["timeline"===l&&a&&this.renderTimelineControls(),s&&this.renderPropertyFormatList(s),(0,U.jsx)(q.Z,{children:this.renderDeletedProperties()})]})}renderTimelineControls(){const{timelineViewTab:e,collectionContextStore:t}=this.props,o="timeline"===e?0:1;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Y.Z,{tabs:[(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Timeline",id:"database.viewSettings.propertiesTab.timelineProperties"},"database.viewSettings.propertiesTab.timelineProperties"),(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Table",id:"database.viewSettings.propertiesTab.tableProperties"},"database.viewSettings.propertiesTab.tableProperties")],selectedIndex:o,onChange:this.handleTabChange}),"table"===e&&(0,U.jsx)(q.Z,{children:(0,U.jsx)(J,{collectionContextStore:t,onClick:this.handleShowTableClick})})]})}renderPropertyFormatList(e){const{collectionContextStore:t}=this.props,o=t.permissionScopes.state,n=t.normalizedFormatStore.state,r=t.normalizedSchemaStore.state,{inputStore:l}=this.stores,s=l.state;let a=n[e]||[];if(s){let e=a.map((e=>{const t=(0,d.Qm)({schema:r,property:e.property});return null==t?void 0:t.name}));e=i().filter(s,e).map((e=>{let{original:t}=e;return t})),a=a.filter((t=>{const o=r[t.property];return o&&o.name&&e.includes(o.name)}))}const c=a.filter((e=>Boolean(e.visible))),p=a.filter((e=>!Boolean(e.visible))),u="timeline_table_properties"===e?"table":(0,P.WY)({collectionContextStore:t});return(0,U.jsxs)(U.Fragment,{children:[0===a.length&&(0,U.jsx)(q.Z,{children:(0,U.jsx)(I.Z,{caption:(0,U.jsx)(f.FormattedMessage,{defaultMessage:"No results",id:"database.viewSettings.propertiesTab.noResults"})})}),a.length>0&&(0,U.jsx)(N.Z,{type:N.i.Vertical,store:this.stores.menuListStore,initialFocus:void 0,sections:x.oA([c.length>0&&{key:"visible_and_hidden_properties",render:t=>(0,U.jsx)(q.Z,{...t,noTextOverflow:!0,isTitleUppercase:!1,title:(0,U.jsx)(te,{viewType:u}),desktopTitleStyle:{height:19},right:!s&&o.canConfigureBlock&&(0,U.jsx)(Q.Z,{isSmall:!0,shouldShrink:!0,isBlue:!0,style:{fontSize:12,height:void 0,paddingTop:2,paddingBottom:2},onClick:()=>this.handleHideAllClick(e),children:(0,U.jsx)(f.FormattedMessage,{id:"database.viewSettings.propertiesTab.hideAllProperties",defaultMessage:"Hide all"})}),children:this.renderPropertySortList({formatKey:e,visibleProperties:c,hiddenProperties:p,children:t.children})}),items:x.oA([...this.renderPropertySortListItems({formatKey:e,properties:c}),p.length>0&&{key:"group-header-hidden-property",render:t=>this.renderHiddenPropertySectionHeader({props:t,formatKey:e,children:(0,U.jsx)(U.Fragment,{})}),action:()=>{}},...this.renderPropertySortListItems({formatKey:e,properties:p})])},0===c.length&&p.length>0&&{key:"hidden_properties",render:t=>this.renderHiddenPropertySectionHeader({props:t,formatKey:e,children:this.renderPropertySortList({formatKey:e,visibleProperties:c,hiddenProperties:p,children:t.children})}),items:this.renderPropertySortListItems({formatKey:e,properties:p})}])})]})}renderHiddenPropertySectionHeader(e){const{props:t,formatKey:o,children:n}=e,{collectionContextStore:i}=this.props,r=i.permissionScopes.state,{inputStore:l}=this.stores,s=l.state,a="timeline_table_properties"===o?"table":(0,P.WY)({collectionContextStore:i});return(0,U.jsx)(q.Z,{...t,noTextOverflow:!0,isTitleUppercase:!1,title:(0,U.jsx)(oe,{viewType:a}),desktopTitleStyle:{height:19},right:!s&&r.canConfigureBlock&&(0,U.jsx)(Q.Z,{isSmall:!0,shouldShrink:!0,isBlue:!0,style:{fontSize:12,height:void 0,paddingTop:2,paddingBottom:2},onClick:()=>this.handleShowAllClick(o),children:(0,U.jsx)(f.FormattedMessage,{id:"database.viewSettings.propertiesTab.showAllProperties",defaultMessage:"Show all"})}),style:{width:"100%",paddingBottom:0},children:n})}renderFooter(){const{collectionContextStore:e,timelineViewTab:t}=this.props,o=e.permissionScopes.state,n="timeline"===(0,P.WY)({collectionContextStore:e})&&"table"===t&&!(0,P.vw)({collectionContextStore:e}),i=o.canConfigureCollection&&!n;return(0,U.jsxs)(q.Z,{topBorder:!0,children:[i&&(0,U.jsx)(L.Z,{icon:S.R,title:(0,U.jsx)(f.FormattedMessage,{id:"database.viewSettings.propertiesTab.newProperty",defaultMessage:"New property"}),isGray:!0,onClick:this.handleNewPropertyClick}),(0,U.jsx)(R.Z,{href:(0,B.UY)("guides.databaseProperties"),title:(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Learn about properties",id:"database.viewSettings.propertiesTab.learnMoreButton.title"}),analyticsFrom:"view_settings_properties"})]})}renderPropertySortList(e){const{formatKey:t,visibleProperties:o,hiddenProperties:n,children:i}=e,r=x.oA([...o.map((e=>e.property)),o.length>0&&n.length>0&&{key:"group-header-hidden-property",draggable:!1},...n.map((e=>e.property))]);return this.canReorder()?(0,U.jsx)(H.ZP,{direction:"vertical",keys:r,renderKey:(e,t)=>i[t],onDrop:(e,o)=>{this.handlePropertyReorder({formatKey:t,newPropertyKeys:e})}}):i}renderPropertySortListItems(e){const{formatKey:t,properties:o}=e;return x.oA(o.map((e=>this.renderPropertySortListItem({formatKey:t,propertyFormat:e}))))}renderPropertySortListItem(e){var t;const{formatKey:o,propertyFormat:n}=e,{collectionContextStore:i}=this.props,r=null===(t=i.collectionStore())||void 0===t?void 0:t.isSyncedCollection(),l=i.permissionScopes.state,s=!n.visible,a=i.normalizedSchemaStore.state,S=(0,d.Qm)({schema:a,property:n.property}),y="title"!==n.property||function(e,t){const o=t.normalizedFormatStore.state,n=(0,P.WY)({collectionContextStore:t});if("board"===n)return(0,u.Lw)(o.board_cover);if("gallery"===n)return(0,u.Lw)(o.gallery_cover);if("timeline"===n)return"timeline_table_properties"===e||(0,u.vP)(Boolean(o.timeline_show_table),o.timeline_table_properties||[]);return!1}(o,this.props.collectionContextStore);let x=!l.canConfigureCollection||r&&((0,d.wl)(n.property)||(0,c.HF)(n.property));if("collectionTypedView"===i.contextType&&l.canConfigureBlock&&(x=!1),!S)return;const{theme:v}=this;return{key:n.property,render:e=>(0,U.jsx)(O.Z,{...e,title:(0,U.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[this.canReorder()&&(0,U.jsx)(z.ZP,{iconSize:12,style:{marginRight:8}}),(0,U.jsx)(p.ZP,{type:S.type,icon:S.icon,size:16,theme:v,style:{fill:v.regularIconColor}}),(0,U.jsx)("span",{style:{marginLeft:8,...C.Z.textOverflowStyle},children:S.name}),(0,c.qQ)(S)&&(0,c.q3)(S)&&("text"===S.type||(0,F.KZ)())&&(0,U.jsx)(D.Z,{})]}),right:(0,U.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,U.jsx)(W.Z,{icon:s?g.B:h.c,iconStyle:{width:16,height:16},isDarkIconColor:!s,onClick:()=>{this.handleTogglePropertyVisibility({formatKey:o,propertyFormat:n})},ariaLabel:this.props.intl.formatMessage($.togglePropertyVisibilityAriaLabel),disabled:!y||!l.canConfigureBlock}),!x&&(0,m.o)({width:12,fill:v.lightTextColor,marginLeft:5})]})}),action:()=>{x||this.handlePropertyClick({formatKey:o,propertyFormat:n})}}}renderDeletedProperties(){const{collectionContextStore:e}=this.props,t=e.normalizedDeletedSchemaStore.state,o=Object.keys(t).length;if(e.permissionScopes.state.canConfigureCollection&&o>0)return(0,U.jsx)(L.Z,{icon:y.y,title:(0,U.jsx)(f.FormattedMessage,{id:"database.viewSettings.propertiesTab.deletedProperties",defaultMessage:"Deleted properties"}),isGray:!0,onClick:this.handleViewDeletedPropertiesClick,right:o,showChevron:!0})}canReorder(){const{inputStore:e}=this.stores,t=e.state,{collectionContextStore:o}=this.props,n=o.permissionScopes.state;return!this.environment.device.isMobile&&n.canConfigureBlock&&!t}clearInput(){this.stores.inputStore.reset()}}function J(e){window.__c={n:"TimelineShowTableSwitcher"};const{collectionContextStore:t,onClick:o}=e,n=(0,l.O7)(),i=(0,s.Kw)(t.normalizedFormatStore),r=Boolean(i.timeline_show_table),a=(0,s.Kw)(t.permissionScopes);return(0,U.jsx)(G.Z,{title:(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Show table",id:"database.viewSettings.propertiesTab.showTable"}),on:r,focused:!1,onClick:()=>{const e=t.collectionViewStore();e&&(T.createAndCommit({userAction:"CollectionSettingsViewProperties.TimelineShowTableSwitcher",environment:n,perform:t=>{j.FH({stores:[e],update:{timeline_show_table:!r,timeline_table_properties:[{property:"name",visible:!0}]},transaction:t})}}),null==o||o(),b.wd({environment:n,collectionContextStore:t,action:"timeline_toggle_show_table"}))},disabled:!a.canConfigureBlock,textWrapperStyle:{opacity:1}})}X.displayName="CollectionSettingsViewProperties";const ee=(0,f.injectIntl)(X);function te(e){let{viewType:t}=e;return"table"===t?(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Shown in table",id:"database.viewSettings.propertiesTab.shownInTableTitle"}):"timeline"===t?(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Shown in timeline",id:"database.viewSettings.propertiesTab.shownInTimelineTitle"}):"board"===t?(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Shown in board",id:"database.viewSettings.propertiesTab.shownInBoardTitle"}):"list"===t?(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Shown in list",id:"database.viewSettings.propertiesTab.shownInListTitle"}):"gallery"===t?(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Shown in gallery",id:"database.viewSettings.propertiesTab.shownInGalleryTitle"}):"calendar"===t?(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Shown in calendar",id:"database.viewSettings.propertiesTab.shownInCalendarTitle"}):"page"===t?null:void(0,v.t1)(t)}function oe(e){let{viewType:t}=e;return"table"===t?(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Hidden in table",id:"database.viewSettings.propertiesTab.hiddenInTableTitle"}):"timeline"===t?(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Hidden in timeline",id:"database.viewSettings.propertiesTab.hiddenInTimelineTitle"}):"board"===t?(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Hidden in board",id:"database.viewSettings.propertiesTab.hiddenInBoardTitle"}):"list"===t?(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Hidden in list",id:"database.viewSettings.propertiesTab.hiddenInListTitle"}):"gallery"===t?(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Hidden in gallery",id:"database.viewSettings.propertiesTab.hiddenInGalleryTitle"}):"calendar"===t?(0,U.jsx)(f.FormattedMessage,{defaultMessage:"Hidden in calendar",id:"database.viewSettings.propertiesTab.hiddenInCalendarTitle"}):"page"===t?null:void(0,v.t1)(t)}function ne(e,t,o){const{formatKey:n,visibility:i}=e,r=t.collectionViewStore();if(!r)return;const l=t.normalizedFormatStore.state[n]||[],s=l.filter((e=>Boolean(e.visible))),a=l.filter((e=>!Boolean(e.visible))),c=[...s.map((e=>({...e,visible:i}))),...a.map((e=>({...e,visible:i})))];T.createAndCommit({userAction:"CollectionSettingsViewProperties.setAllPropertiesVisibility",environment:o,perform:e=>{j.FH({stores:[r],update:{[n]:c},transaction:e})}})}},75117:(e,t,o)=>{o.d(t,{Z:()=>D});var n=o(67294),i=o(83355),r=o(8848),l=o(63014),s=o(47453),a=o(37612),c=o(72126),d=o(68939),p=o(50906),u=o(12534),m=o(33929),h=o(87279),g=o(31339),S=o(42917),y=o(61053),x=o(480),v=o(60246),C=o(52275),f=o(31945),b=o(45959),w=o(77498),k=o(62045),M=o(50542),j=o(85893);class T extends i.Z{constructor(){super(...arguments),this.handleAccept=e=>{const{sort:t,collectionViewType:o}=this.props,n={...t,property:e};this.props.onChange(this.props.index,n),o&&p.wds(this.environment,{view_type:o,action:"set_sort_property"})}}renderComponent(){const{schema:e,sort:t}=this.props,o=e[t.property];if(o)return(0,j.jsxs)(n.Fragment,{children:[this.renderPropertyDropdown(o),(0,j.jsx)(P,{sort:this.props.sort,index:this.props.index,onChange:this.props.onChange,collectionViewType:this.props.collectionViewType,intl:this.props.intl,disabled:this.props.disabled})]})}renderPropertyDropdown(e){const{device:t}=this.environment,{disabled:o}=this.props;return(0,j.jsx)(f.ZP,{popupType:t.isMobile?f.Z4.SlideUp:f.Z4.Popup,renderOrigin:t=>(0,j.jsx)(M.Z,{...t,propertySchema:e,disabled:o,textWrapperStyle:{opacity:1}}),render:e=>(0,j.jsx)(w.Z,{isRelationProperty:!1,schema:this.props.schema,onAccept:this.handleAccept,onClose:e.close}),disabled:o})}}T.displayName="CollectionSortMenuRow";const _=(0,d.injectIntl)(T);function P(e){let{sort:t,index:o,onChange:n,collectionViewType:i,intl:r,disabled:l}=e;window.__c={n:"SortDirection"};const s=(0,x.O7)(),a=t.direction,c={ascending:(0,j.jsx)(d.FormattedMessage,{defaultMessage:"Ascending",id:"collectionSortMenuRow.sortDirectionSelectMenu.ascending"}),descending:(0,j.jsx)(d.FormattedMessage,{defaultMessage:"Descending",id:"collectionSortMenuRow.sortDirectionSelectMenu.descending"})},u={menuTitle:r.formatMessage({id:"collectionSortMenuRow.sortDirectionSelectMenu.title",defaultMessage:"Sort"}),items:[...v.C6],getKey:e=>e,selectedItem:a,disabled:l,onSelect:e=>{const r={...t,direction:e};n(o,r),i&&p.wds(s,{view_type:i,action:"set_sort_direction"})},renderItem:e=>(0,j.jsx)(C.Z,{title:c[e.value],...e}),renderOrigin:e=>(0,j.jsx)(k.Z,{...e,placeholder:r.formatMessage({id:"collectionSortMenuRow.sortDirectionSelectMenu.placeholder",defaultMessage:"Empty"}),title:a&&c[a],disabled:l,desktopStyle:{opacity:1}})};return(0,j.jsx)(b.Z,{...u,mobileActionSheet:!0},"direction")}var V=o(79131),F=o(73063),Z=o(78140),B=o(28992),A=o(53437),I=o(72495),R=o(26388);const K=(0,d.defineMessages)({inputPlaceholder:{defaultMessage:"Search for a property…",id:"database.viewSettings.collectionSortMenu.inputPlaceholder"}});class L extends i.Z{constructor(){super(...arguments),this.handleDraggableListDrop=e=>{const{onChange:t}=this.props,{sorts:o}=this.props;t(c.oA(e.map((e=>o[parseInt(e)]))));const n=O(this.props.collectionViewStore);n&&p.wds(this.environment,{action:"reorder_sorts",view_type:n})},this.handleChangeSort=(e,t)=>{const{onChange:o}=this.props,{sorts:n}=this.props;o(n.map(((o,n)=>n===e?t:o)));const i=O(this.props.collectionViewStore);i&&p.wds(this.environment,{action:"update_sort",view_type:i})},this.handleDeleteSort=e=>{const{onChange:t}=this.props,{sorts:o}=this.props;t(o.filter(((t,o)=>o!==e)));const n=O(this.props.collectionViewStore);n&&p.wds(this.environment,{action:"delete_sort",view_type:n})},this.handleDeleteAllSortsClick=()=>{const{onChange:e,onDeleteAll:t}=this.props;e([]),null==t||t();const o=O(this.props.collectionViewStore);o&&p.wds(this.environment,{action:"delete_all_sorts",view_type:o})},this.handleNewPropertyAccept=e=>{var t;if(!e)return;const{schema:o,sorts:n,onChange:i}=this.props,r=null===(t=o[e])||void 0===t?void 0:t.type;i([...n,{property:e,direction:"ascending"}]);const l=O(this.props.collectionViewStore);l&&p.wds(this.environment,{action:"create_sort_accept",view_type:l,property_type:r})}}renderComponent(){const{device:e}=this.environment,{schema:t,format:o,sorts:n,showDeleteAll:i}=this.props,r=!!Object.keys(t).some((e=>!n.find((t=>t.property===e)))),l=i&&n.length>0;return(0,j.jsxs)(j.Fragment,{children:[this.renderSorts(),(r||l)&&(0,j.jsxs)(I.Z,{children:[r&&(0,j.jsx)(f.ZP,{popupType:e.isMobile?A.kQ.SlideUp:A.kQ.Popup,renderOrigin:e=>(0,j.jsx)(S.Z,{icon:s.R,isGray:!0,title:(0,j.jsx)(d.FormattedMessage,{id:"database.viewSettings.sortTab.newSort",defaultMessage:"Add sort"}),...e}),render:i=>{let r;return r=e.isMobile?{menuType:h.og.ActionSheet}:{menuType:h.og.Popup,width:280,height:287},(0,j.jsx)(Z.Z,{...r,children:(0,j.jsx)(y.Z,{schema:t,format:o,getProperties:()=>Object.keys(t).filter((e=>!n.find((t=>t.property===e)))),onAccept:e=>{this.handleNewPropertyAccept(e),i.close()},inputPlaceholder:m.default.formatMessage(K.inputPlaceholder)})})}}),l&&(0,j.jsx)(S.Z,{icon:a.y,isRed:!0,isGray:!0,title:(0,j.jsx)(d.FormattedMessage,{id:"database.viewSettings.sortTab.deleteAllSorts",defaultMessage:"Delete sort"}),onClick:this.handleDeleteAllSortsClick})]})]})}renderSorts(){const{device:e}=this.environment,{sorts:t}=this.props;if(e.isMobile)return t.map(((e,t)=>this.renderSort(e,t)));{const e=t.map(((e,t)=>t.toString()));return e.length>0&&(0,j.jsx)("div",{style:{marginBottom:2},children:(0,j.jsx)(V.ZP,{direction:"vertical",keys:e,renderKey:e=>this.renderSort(t[parseInt(e)],parseInt(e)),onDrop:this.handleDraggableListDrop})})}}renderSort(e,t){const{device:o}=this.environment,{schema:n,disabled:i,parentStore:r}=this.props;return o.isMobile?(0,j.jsxs)(I.Z,{children:[(0,j.jsx)(_,{index:t,sort:e,schema:n,parentStore:r,collectionViewType:O(this.props.collectionViewStore),onChange:this.handleChangeSort}),!i&&this.renderMobileDeleteButtonMenuItem(t)]},t):(0,j.jsx)(I.Z,{extraTopPadding:!0,desktopStyle:{padding:"8px 0 0 8px",width:"100%"},children:(0,j.jsx)(B.Z,{showDragHandle:!o.isMobile&&!i,title:(0,j.jsx)("div",{style:{display:"flex",alignItems:"center",flexGrow:1,whiteSpace:"nowrap"},onMouseDown:u.$0,children:(0,j.jsx)(_,{index:t,sort:e,schema:n,parentStore:r,collectionViewType:O(this.props.collectionViewStore),onChange:this.handleChangeSort})}),right:!i&&this.renderDesktopDeleteButton(t)})},t)}renderMobileDeleteButtonMenuItem(e){return(0,j.jsx)(C.Z,{title:(0,j.jsx)("div",{style:{color:r.ZP.red},children:(0,j.jsx)(d.FormattedMessage,{defaultMessage:"Delete",id:"database.viewSettings.sortTab.mobileDeleteButtonTitle"})}),icon:(0,j.jsx)(g.Z,{icon:a.y,styles:{color:r.ZP.red}}),onClick:()=>this.handleDeleteSort(e),focused:!1})}renderDesktopDeleteButton(e){return(0,j.jsx)(R.Z,{render:t=>(0,j.jsx)(F.Z,{icon:l.b,onClick:()=>this.handleDeleteSort(e),style:{marginRight:-6},...t}),renderTooltip:()=>(0,j.jsx)(d.FormattedMessage,{defaultMessage:"Remove sort rule",id:"database.sortMenu.deleteButtonTooltip"})})}}L.displayName="CollectionSortMenu";const D=(0,d.injectIntl)(L);function O(e){return null==e?void 0:e.getType()}},66957:(e,t,o)=>{o.d(t,{Z:()=>p});var n=o(67294),i=o(480),r=o(86628),l=o(24405),s=o(87279),a=o(89728),c=o(85893);function d(e){let{tabs:t,selectedIndex:o,onChange:d,separatorIndexes:p,right:u,style:m,rightStyle:h,tabStyle:g,tabTitleStyle:S,tabBorderStyle:y,selectedTabStyle:x,readOnly:v,hideTabBorder:C}=e;window.__c={n:"TabBarMenuItem"};const f=(0,n.useContext)(s.Xp),{device:b,WindowSizeStore:w}=(0,i.O7)(),{safePaddingLeft:k,safePaddingRight:M}=(0,r.VK)((()=>({safePaddingLeft:w.getSafePaddingLeftCSS(16),safePaddingRight:w.getSafePaddingRightCSS(16)})),[w]),j=(0,l.yK)((e=>{const t={paddingTop:6,paddingBottom:6,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.mediumTextColor,...g},o=`inset 0 -1px 0 ${e.regularDividerColor}`,n=f.menuType===s.og.Popup,i={fontSize:16,paddingTop:2,paddingLeft:n?16:k,paddingRight:n?16:M,zIndex:2,height:44,background:e.popoverBackground};return{container:{overflowY:"visible",overflowX:"auto",display:"flex",width:"100%",position:"relative",boxShadow:C?void 0:o,...b.isMobile?i:{fontSize:14,paddingLeft:8,paddingRight:8,zIndex:1},...m},separator:{display:"inline-flex",alignItems:"center",margin:"0 4px",paddingBottom:4,whiteSpace:"nowrap",minWidth:0,flexShrink:0,color:e.regularDividerColor},mobile:{},tab:t,selectedTab:{...t,position:"relative",color:e.regularTextColor,...x},border:{borderBottom:`2px solid ${e.regularTextColor}`,position:"absolute",bottom:0,left:8,right:8,...y},rightContainer:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.mediumTextColor,...h}}}),[f.menuType,b.isMobile,h,k,M,x,m,y,g,C]);return(0,c.jsxs)("div",{className:"hide-scrollbar",style:j.container,children:[t.map(((e,t)=>{const i=t===o;return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsxs)("div",{style:i?j.selectedTab:j.tab,children:[(0,c.jsx)(a.Z,{style:S,onClick:()=>d(t),disabled:v,mobileFeedback:b.isMobile,children:e}),i&&(0,c.jsx)("div",{style:j.border})]},`tabButton-${t}`),p&&p.includes(t)&&(0,c.jsx)("div",{style:j.separator,className:"notranslate",children:"|"},`${t}-separator`)]},t)})),u&&(0,c.jsx)("div",{style:j.rightContainer,children:u})]})}const p=n.memo(d)},60442:(e,t,o)=>{o.d(t,{Z:()=>l});o(67294);var n=o(82990),i=o(47853),r=o(85893);const l=function(e){let{imageURL:t,imageWidth:o,imageHeight:n,caption:l,title:a}=e;if(t){const e=(0,i.D)(t);return(0,r.jsxs)("div",{style:{width:o||200,marginTop:4,marginBottom:4},children:[(0,r.jsx)("div",{style:{width:"100%",height:n||100,borderRadius:4,backgroundImage:`url(${e})`,backgroundSize:"cover",marginBottom:6}}),(0,r.jsx)(s,{caption:l,title:a})]})}return(0,r.jsx)(s,{caption:l,title:a,style:{width:o}})};function s(e){let{style:t,caption:o,title:i}=e;return(0,r.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...t},children:[i&&(0,r.jsx)("header",{style:{fontWeight:n.Z.fontWeight.bold,marginBottom:4},children:i}),o]})}},72865:(e,t,o)=>{o.d(t,{D:()=>m});var n=o(67294),i=o(480),r=o(24405),l=o(993),s=o(39699),a=o(43250),c=o(17809),d=o(24666),p=o(65187),u=o(85893);function m(e){window.__c={n:"SimpleFormulaValueTextInput"};const{value:t,disabled:o,onChange:m,multiline:h,placeholder:g,disableFormattingAndMentions:S,disableMobileActionBar:y,disableEmojiCommands:x,disableTemplateVariableMentions:v}=e,C=(0,i.O7)(),f=(0,r.yK)((e=>({wrap:{flexGrow:1,flexShrink:1,boxShadow:e.inputBoxShadow,borderRadius:4,padding:h?"6px 10px":"4px 8px",overflow:"hidden",..."dark"===e.mode?{backgroundColor:e.inputBackground}:{}},text:h?{minHeight:60}:{whiteSpace:"pre"},placeholder:h?{minHeight:60}:{}})),[h]),b=(0,n.useCallback)((e=>{m({type:"simple",value:e})}),[m]),{store:w}=(0,c.Cl)({initialValue:null==t?void 0:t.value,onChange:b}),k=(0,n.useMemo)((()=>h?()=>{const e=d.default.state;"editing"===e.mode&&s.createAndCommit({userAction:"SimpleFormulaValueTextInput.handleEnter",environment:C,perform:t=>{l.hJ({environment:C,string:"\n",multiSelection:e.multiSelection,disableMentions:!0,disableDateMentions:!0,disableDateReminderMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:t})}})}:void 0),[C,h]);return(0,u.jsx)("div",{style:f.wrap,className:a.Wh_,children:(0,u.jsx)(p.Z,{placeholder:g,disabled:o,store:w,style:f.text,placeholderStyle:f.placeholder,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:x,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,onEnter:k,disableMobileActionBar:y,disableTemplateVariableMentions:v,...S?{disableDateMentions:!0,disableDateReminderMentions:!0,disableMentions:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0}:{}})})}},53498:(e,t,o)=>{o.d(t,{a:()=>be,K:()=>M});var n=o(67294),i=o(480),r=o(86628),l=o(66897),s=o(99036),a=o(80951),c=o(84619),d=o(78106),p=o(76218),u=o(149),m=o(19889),h=o(70203),g=o(97880),S=o(37867),y=o(60458),x=o(92864),v=o(89845),C=o(10009),f=o(22084),b=o(21396),w=o(75311),k=o(85893);function M(e){window.__c={n:"ValuePickerMenuToken"};const{token:t,contextStore:o,disabled:n,setCurrentTokens:M,currentSimpleFormulaValueTokens:j,context:T}=e,_=(0,i.Fy)(),P=(0,r.Kw)(o.compilationResultStore),V=(0,r.VK)((()=>{if((0,p.S3)(t)&&(0,h.IWo)(t)){const e=(0,h.zEN)(t);if(e)return(0,l.Hl)({pointer:{table:m.KJ,id:e},getRecordValue:o.context.parentRecordStore.getRecordValue})}}),[o.context.parentRecordStore,t]),F=(0,r.VK)((()=>(0,w._)(T)),[T]),Z=(0,r.VK)((()=>T.collectionStore.getSchema()[T.property]),[T]);if("string"==typeof t){if(!Z||!(0,s.t)(Z))return null;const e=(0,a.i7)((null==Z?void 0:Z.options)??[],t);if(!e)return(0,k.jsx)(S.Z,{isSingle:!1,showRemoveButton:!n,onClickRemove:()=>{null==M||M((0,p.Ck)(j,t))}},`deleted_option_value_${t}`);const o={value:e.value,color:e.color,isSingle:!1,showRemoveButton:!n,format:_.isMobile?c.lo.Medium:c.lo.Small,onClickRemove:()=>{null==M||M((0,p.Ck)(j,t))}};if((0,s.gB)(Z)){var B;const t=null===(B=Z.groups)||void 0===B||null===(B=B.find((t=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)})))||void 0===B?void 0:B.color;return(0,k.jsx)(f.F,{...o,groupColor:t})}return(0,k.jsx)(f.a,{...o})}if("boolean"==typeof t)return(0,k.jsx)(y.Z,{checked:t,disabled:!0,size:16,checkSize:12,style:{marginBottom:6}},t.toString());if((0,h.IWo)(t))return null!=V&&V.asActor?(0,k.jsx)(x.ZP,{actor:V,format:_.isMobile?x.ZP.Format.Medium:x.ZP.Format.Small,showRemoveButton:!n,onClickRemove:()=>{null==M||M((0,p.Ck)(j,t))},shouldShrink:!0,isSingle:!1},V.id):null;if((0,h.wjk)(t)){const e=(0,h.vmO)(t).id,o=u.x.isSuccess(P)?(0,d.vx)(P.value.valueTypes,e):void 0;return o?(0,k.jsx)(b.F,{value:o,format:c.lo.Small,isSingle:!1,shouldShrink:!0,showRemoveButton:!n,onClickRemove:()=>{null==M||M((0,p.Ck)(j,t))}}):null}if((0,h.fpG)(t)){const e=j[0],t=e&&(0,p.S3)(e)&&(0,h.fpG)(e)?(0,h.zyO)(e):void 0;return t?(0,k.jsx)(v.Z,{value:t,dateFormat:F.dateFormat,timeFormat:F.timeFormat,style:{marginBottom:6}}):null}if((0,h.STW)(t)){const e=(0,h.TOT)(t);return e?(0,k.jsx)(C.Z,{format:_.isMobile?c.lo.Medium:c.lo.Small,blockId:e,shouldWrap:!1,shouldShrink:!0,isSingle:!1,parentStore:o.context.parentRecordStore,showRemoveButton:!n,onClickRemove:()=>{null==M||M((0,p.Ck)(j,t))}},e):null}(0,g.t1)(t)}o(57658);var j=o(23790),T=o(84116),_=o(58573),P=o(59054),V=o(72126),F=o(68939),Z=o(17809),B=o(87279),A=o(77907),I=o(75822),R=o(29798),K=o(78140),L=o(32163),D=o(43765),O=o(40721),H=o(72495),z=o(78948),W=o(47082),E=o(30387),N=o(32426),Q=o(24405),q=o(5257),G=o(52275);function Y(e){window.__c={n:"IconMenuItem"};const t=(0,Q.yK)((e=>({icon:{width:14,fill:e.mediumIconColor},chevronRight:{width:12,fill:e.mediumIconColor}})),[]);return(0,k.jsx)(G.Z,{icon:e.icon(t.icon),title:e.title,focused:!1,right:(0,q.o)(t.chevronRight),onClick:e.onClick})}function U(e){window.__c={n:"CustomFormulaItem"};const{value:t,onChange:o}=e,i=(0,n.useCallback)((()=>{o({type:"formula",value:null==t?void 0:t.value})}),[t,o]);return(0,k.jsx)(Y,{icon:N.D,title:(0,k.jsx)(F.FormattedMessage,{...E.s.customFormula}),onClick:i})}o(21703);var $=o(21202),X=o(26350),J=o(11470),ee=o(26388);function te(e){window.__c={n:"ValuePickerMenuItem"};const{token:t,contextStore:o,args:n,checkState:S,checkType:v,context:C,onCheckboxClick:w}=e,M=(0,i.Fy)(),j=(0,r.VK)((()=>o.context.parentRecordStore.getSpaceId()),[o.context.parentRecordStore]),T=(0,r.VK)((()=>{if((0,p.S3)(t)&&(0,h.IWo)(t)){const e=(0,h.zEN)(t);if(e)return(0,l.Hl)({pointer:{table:m.KJ,id:e},getRecordValue:o.context.parentRecordStore.getRecordValue})}}),[o.context.parentRecordStore,t]),_=(0,r.VK)((()=>C.collectionStore.getSchema()[C.property]),[C]),P=(0,r.VK)((()=>_&&(0,s.t)(_)?_.options??[]:[]),[_]),V=(0,r.VK)((()=>_&&(0,s.gB)(_)?_.groups??[]:[]),[_]),F=(0,r.Kw)(o.compilationResultStore),Z=Boolean(_&&(0,s.gB)(_)),B="single"===v?{checkState:S}:{icon:(0,k.jsx)(y.Z,{checked:S,size:14,onClick:w})};if("string"==typeof t){if(Z){const e=(0,a.i7)(P,t),o=V.find((t=>{var o;return e&&(null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id))}));return e?(0,k.jsx)(G.Z,{...n,...B,title:(0,k.jsx)(f.F,{format:M.isMobile?c.lo.Large:c.lo.Small,isSingle:!0,value:e.value,color:e.color,groupColor:null==o?void 0:o.color,shouldShrink:!0,showRemoveButton:!1},t),isTokenTitle:!0,...n}):null}{const e=(0,a.i7)(P,t);return e?(0,k.jsx)(G.Z,{...n,...B,title:(0,k.jsx)(f.a,{value:e.value,color:e.color,showRemoveButton:!1,isSingle:!0,shouldShrink:!0,format:M.isMobile?c.lo.Large:c.lo.Small}),isTokenTitle:!0,...n}):null}}if("boolean"==typeof t)return null;if((0,h.IWo)(t))return null!=T&&T.asActor&&T.table===m.KJ?(0,k.jsx)(G.Z,{...n,...B,title:(0,k.jsx)(x.vw,{isSingle:!0,shouldShrink:!0,format:M.isMobile?x.vw.Format.Large:x.vw.Format.Medium,userValue:T.asActor}),isTokenTitle:!0}):null;if((0,h.wjk)(t)){const e=(0,h.vmO)(t).id,o=u.x.isSuccess(F)?(0,d.vx)(F.value.valueTypes,e):void 0;return o?(0,k.jsx)(G.Z,{...B,title:(0,k.jsx)(ee.Z,{renderTooltip:()=>(0,b.e)(o),placement:ee.Z.Placement.Right,render:e=>(0,k.jsx)("div",{style:{display:"flex"},...e,children:(0,k.jsx)(b.F,{value:o,format:c.lo.Medium,isSingle:!0,shouldShrink:!0})})}),...n}):null}if((0,h.fpG)(t))return null;if((0,h.STW)(t)){const e=(0,h.TOT)(t);if(!e)return null;if(!j)return null;const i=X.G.createChildStore(o.context.parentRecordStore,{table:$.iU,id:e,spaceId:j});return(0,k.jsx)(J.Z,{store:i,checkState:S,hidePath:!0,...n})}(0,g.t1)(t)}function oe(e){const{currentSimpleFormulaValueTokens:t,value:o,contextStore:n,setCurrentTokens:i,action:r,context:l,checkType:s,onCheckboxClick:a}=e;if(o.kind!==T.yp.ContextValue)throw new Error("Not implemented yet.");const c=Boolean(t.find((e=>(0,p.S3)(e)&&(0,h.wjk)(e)&&(0,h.vmO)(e).id===o.id))),d=(0,h._QF)({id:o.id}),u=()=>{i("append"===r?c?(0,p.Ck)(t,d):[...t,d]:[d]),null==a||a()};return{key:o.id,render:e=>(0,k.jsx)(te,{token:d,contextStore:n,args:e,checkState:c,checkType:s,context:l,onCheckboxClick:u}),action:u}}function ne(e){var t,o;window.__c={n:"ValuePickerMenuBlockArray"};const{currentSimpleFormulaValueTokens:l,menuProps:a,onClose:c,onChange:d,contextStore:u,formulaTypecheckContextValues:m,context:g,showClearButton:S,showInputMenuItem:y,type:x}=e,v=(0,i.Fy)(),C=(0,F.useIntl)(),f=(0,i.O7)(),[b,N]=(0,n.useState)(""),Q=(0,r.qz)(void 0,R.Z),{collectionStore:q,property:G}=g,Y=(0,w.M)(q,G),$=Y(l,"first"),X=(0,r.VK)((()=>q.getSchema()[g.property]),[q,g.property]),J=(0,r.VK)((()=>!(!X||!(0,s.en)(X))&&1===X.limit),[X]),ee=(0,n.useMemo)((()=>{const e="relation"===(null==X?void 0:X.type)?(0,s.j0)(X):void 0;return m.filter((t=>(0,j.uy)(t.type,{type:"block",collection:e},!0)))}),[m,X]),ne=(0,A.useDependency)(A.deps.searchActions),[ie]=(0,P.r5)((async()=>{const e=b?(0,_.ZP)(b,ee,(e=>e.kind===T.yp.ContextValue?e.name:"")):ee;if("resolved"!==ne.status)return;const t=ne.value,{results:o}=await t.searchPagesInCollection({environment:f,query:b,collectionId:x.collection.id,limit:20,spaceId:x.collection.spaceId,excludeTemplates:!0,source:"simple_formula_value_page_search",includePublicPagesWithoutExplicitAccess:!1,boostRecentlyViewedPages:!1});return{valueResults:e,pageResults:o}}),[f,b,ee,x,ne.status,ne.value],{debounce:I.vp}),re=(0,n.useCallback)((()=>{N(""),Q.setState({...Q.state,focus:{section:0,indexLocal:0,indexGlobal:0}})}),[Q]),le=(0,n.useCallback)((e=>{const t=Y(e,"last");d({type:"simple",value:(0,p.iC)(t)}),re(),J&&c()}),[Y,d,re,J,c]),se=(0,r.VK)((()=>(0,Z.NY)()),[]),ae=V.oA($.map(((e,t)=>(0,k.jsx)(M,{token:e,contextStore:u,disabled:!1,currentSimpleFormulaValueTokens:$,setCurrentTokens:le,context:g},t)))),ce=(0,k.jsx)(W.Z,{focus:!v.isMobile||void 0,focusAfterAnimation:!0,format:W.Z.Format.FilterValue,tokens:ae,placeholder:C.formatMessage(E.s.pageSearchPlaceholder),onRemoveLastToken:()=>{le($.slice(0,$.length-1))},onClearButtonClick:()=>{le([])},value:b,onChange:e=>{N(e.target.value)},dontShowBorderBottom:v.isAndroid,showClearButton:S}),de=void 0!==(null==a?void 0:a.header)?a.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:C.formatMessage(E.s.genericMenuHeader)});let pe;pe=v.isMobile?{menuType:B.og.Modal,right:(0,k.jsx)(O.DoneMenuText,{}),onClickRight:c}:{menuType:B.og.Popup,maxHeight:"50vh",width:260,paddingTop:0,footer:se&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const ue={...pe,...a,header:v.isMobile?null:de},me=J?"single":"multi",he=[],ge=[...V.oA(((null===(t=ie.value)||void 0===t?void 0:t.valueResults)||[]).map((e=>oe({currentSimpleFormulaValueTokens:$,value:e,setCurrentTokens:le,contextStore:u,action:"append",context:g,checkType:me})))),...V.oA(((null===(o=ie.value)||void 0===o?void 0:o.pageResults)||[]).map((e=>{const t=Boolean($.find((t=>(0,p.S3)(t)&&(0,h.STW)(t)&&(0,h.TOT)(t)===e))),o=(0,h.$0A)(e,x.collection.spaceId),n=()=>{le(t?(0,p.Ck)($,o):[...$,o])};return{key:e,render:e=>(0,k.jsx)(te,{token:o,contextStore:u,args:e,checkState:t,checkType:me,context:g,onCheckboxClick:n}),action:n}})))];if(y){const e=Boolean(de);he.push({key:"search-input",render:t=>(0,k.jsx)(H.Z,{...t,style:{...e&&{paddingTop:0}}}),items:[{action:()=>{},key:"input",render:()=>ce}]})}if(ge.length>0){const e=Boolean(de)||y;he.push({key:"values",render:t=>(0,k.jsx)(H.Z,{topBorder:e,...t}),items:ge})}return(0,k.jsxs)(K.Z,{...ue,children:[ie.error&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(D.Z,{title:(0,k.jsx)(F.FormattedMessage,{...E.s.somethingWentWrong})})}),0===he.length&&ie.value&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(D.Z,{title:(0,k.jsx)(F.FormattedMessage,{...E.s.noResults})})}),!ie.value&&!ie.error&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(z.Z,{})}),he.length>0&&(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:he,store:Q})]})}function ie(e){window.__c={n:"ValuePickerMenuCheckbox"};const{context:t,contextStore:o,currentSimpleFormulaValueTokens:l,formulaTypecheckContextValues:s,menuProps:a,onChange:c,onClose:d}=e,u=(0,F.useIntl)(),m=(0,i.Fy)(),h=s.filter((e=>"checkbox"===e.type.type)),g=(0,n.useCallback)((e=>{c({type:"simple",value:void 0!==e[0]?(0,p.YD)(e[0]):void 0})}),[c]),S=(0,n.useCallback)((e=>{g(e),d()}),[g,d]),y=(0,r.VK)((()=>(0,Z.NY)()),[]),x=V.oA(h.map((e=>oe({currentSimpleFormulaValueTokens:l,value:e,setCurrentTokens:S,contextStore:o,action:"replace",context:t,checkType:"single"})))),v=[],C=l.some((e=>!0===e)),f=[...x,...[{key:0,render:e=>(0,k.jsx)(G.Z,{title:(0,k.jsx)(F.FormattedMessage,{...E.s.unchecked}),checkState:!C,...e}),action:()=>{S([!1])}},{key:1,render:e=>(0,k.jsx)(G.Z,{title:(0,k.jsx)(F.FormattedMessage,{...E.s.checked}),checkState:C,...e}),action:()=>{S([!0])}}]],b=void 0!==(null==a?void 0:a.header)?a.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:u.formatMessage(E.s.genericMenuHeader)}),w=Boolean(b);let M;v.push({key:"checkbox",render:e=>(0,k.jsx)(H.Z,{...e,topBorder:w}),items:f}),M=m.isMobile?{menuType:B.og.Modal,right:(0,k.jsx)(O.DoneMenuText,{}),onClickRight:d}:{header:b,menuType:B.og.Popup,maxHeight:"50vh",width:260,footer:y&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const j={...M,...a,header:m.isMobile?null:b};return(0,k.jsx)(K.Z,{...j,children:(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:v})})}var re=o(53016),le=o(40506),se=o(12392),ae=o(28020),ce=o(73063),de=o(89728);function pe(e){window.__c={n:"ValueDatePicker"};const{currentSimpleFormulaValueTokens:t,disabled:o,setInDatePicker:i,onClose:l,setCurrentTokens:s,context:a}=e,c=t[0],d=c&&(0,p.S3)(c)&&h.fpG(c)?h.zyO(c):void 0,u=(0,F.useIntl)(),m=(0,r.Kw)(ae.AK),g=(0,n.useCallback)((()=>{i(!1)}),[i]),S=(0,n.useCallback)((e=>{e&&(0,le.U3)(e)?s([h.pZr(e)]):s([])}),[s]),y=(0,Q.yK)((e=>({header:{display:"flex",alignItems:"center",fontSize:12,paddingInline:14,color:e.mediumTextColor,marginTop:8,fontWeight:500},iconWrap:{width:18,height:18,marginRight:4},icon:{width:12,height:12},title:{flex:"1 1 auto"}})),[]),x=(0,r.VK)((()=>(0,w._)(a)),[a]);return(0,k.jsx)(A.DependencyConsumer,{dependency:A.deps.menus,children:e=>{let{DatePropertyMenu:t}=e;return(0,k.jsx)(t,{firstDayOfWeek:m,value:d,canConfigureCollection:!1,onChangeValue:S,dateFormat:x.dateFormat,timeFormat:x.timeFormat,onDismiss:l,disabled:o,shouldShowReminder:!1,header:(0,k.jsxs)("div",{style:y.header,children:[(0,k.jsx)(ce.Z,{ariaLabel:u.formatMessage(E.s.back),icon:se.S,onClick:g,style:y.iconWrap,iconStyle:y.icon}),(0,k.jsx)("span",{style:y.title,children:(0,k.jsx)(F.FormattedMessage,{...E.s.pickADate})}),(0,k.jsx)(de.Z,{onClick:l,isBlue:!0,children:(0,k.jsx)(O.DoneMenuText,{})})]}),isTemplatePage:!1})}})}function ue(e){window.__c={n:"ValuePickerMenuDate"};const{currentSimpleFormulaValueTokens:t,onClose:o,onChange:l,contextStore:s,formulaTypecheckContextValues:a,context:c,menuProps:d}=e,u=(0,F.useIntl)(),m=(0,i.Fy)(),[h,g]=(0,n.useState)(!1),S=a.filter((e=>"date"===e.type.type)),y=(0,n.useCallback)((e=>{l({type:"simple",value:void 0!==e[0]?(0,p.YD)(e[0]):void 0})}),[l]),x=(0,n.useCallback)((e=>{y(e),o()}),[y,o]),v=(0,n.useCallback)((()=>{g(!0)}),[]),C=(0,n.useCallback)((()=>{y([]),o()}),[y,o]),f=(0,r.VK)((()=>(0,Z.NY)()),[]);if(h)return(0,k.jsx)(pe,{...e,setInDatePicker:g,setCurrentTokens:y,currentSimpleFormulaValueTokens:t});const b=void 0!==(null==d?void 0:d.header)?d.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:u.formatMessage(E.s.genericMenuHeader)}),w=V.oA(S.map((e=>oe({currentSimpleFormulaValueTokens:t,value:e,setCurrentTokens:x,contextStore:s,action:"replace",context:c,checkType:"single"})))),M=[];if(w.length>0){const e=Boolean(b);M.push({key:"values",render:t=>(0,k.jsx)(H.Z,{topBorder:e,...t}),items:w})}const j=(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(H.Z,{topBorder:!0,children:[(0,k.jsx)(Y,{icon:re.V,title:(0,k.jsx)(F.FormattedMessage,{...E.s.pickADate}),onClick:v}),f&&(0,k.jsx)(U,{...e})]}),t.length>0&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(G.Z,{title:(0,k.jsx)(F.FormattedMessage,{...E.s.clear}),focused:!1,onClick:C})})]});let T;T=m.isMobile?{menuType:B.og.Modal,right:(0,k.jsx)(O.DoneMenuText,{}),onClickRight:o,footer:j}:{menuType:B.og.Popup,maxHeight:"50vh",width:260,footer:j,disableHeaderBorder:!0};const _={...T,...d,header:m.isMobile?null:b};return(0,k.jsx)(K.Z,{..._,children:(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:M})})}var me=o(68894);function he(e){window.__c={n:"ValuePickerMenuNumber"};const{context:t,contextStore:o,currentSimpleFormulaValueTokens:l,formulaTypecheckContextValues:s,menuProps:a,onChange:c,onClose:d,value:u}=e,m=(0,F.useIntl)(),g=(0,i.Fy)(),S=s.filter((e=>"number"===e.type.type)),y=(0,n.useCallback)((e=>{c({type:"simple",value:e})}),[c]),x=(0,n.useCallback)((e=>{y(e),d()}),[y,d]),v=(0,n.useCallback)((e=>{const t=e.target.value;let o;o=""===t?void 0:[[t]],y(o)}),[y]),C=(0,n.useCallback)((e=>{const t=V.U2(e,"event.target.value");let o;o="string"==typeof t&&""!==t?[[t]]:void 0,x(o)}),[x]),f=(0,n.useCallback)((e=>{const t=void 0!==e[0]?(0,p.YD)(e[0]):void 0;x(t)}),[x]),b=(0,r.VK)((()=>(0,Z.NY)()),[]),w=[],M=[...[{action:C,key:"input",render:e=>{const t=l[0],o="string"==typeof t?t:(0,h.QaF)(null==u?void 0:u.value);return(0,k.jsx)(me.ZP,{...e,focus:!0,onChange:v,onClick:void 0,value:o})}}],...V.oA(S.map((e=>oe({currentSimpleFormulaValueTokens:l,value:e,setCurrentTokens:f,contextStore:o,action:"replace",context:t,checkType:"single"}))))],j=void 0!==(null==a?void 0:a.header)?a.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:m.formatMessage(E.s.genericMenuHeader)});let T;w.push({key:"textbox",render:e=>(0,k.jsx)(H.Z,{...e}),items:M}),T=g.isMobile?{menuType:B.og.Modal,right:(0,k.jsx)(O.DoneMenuText,{}),onClickRight:d}:{menuType:B.og.Popup,maxHeight:"50vh",width:260,footer:b&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const _={...T,...a,header:g.isMobile?null:j};return(0,k.jsx)(K.Z,{..._,children:(0,k.jsx)(L.Z,{initialFocus:0,sections:w,type:L.i.Vertical})})}var ge=o(1302);function Se(e){var t,o;window.__c={n:"ValuePickerMenuPersonArray"};const{context:l,contextStore:a,currentSimpleFormulaValueTokens:c,formulaTypecheckContextValues:d,menuProps:u,onChange:m,onClose:g,showClearButton:S,showInputMenuItem:y}=e,x=(0,i.Fy)(),v=(0,F.useIntl)(),C=(0,i.O7)(),{collectionStore:f,property:b}=l,[N,Q]=(0,n.useState)(""),q=(0,r.qz)(void 0,R.Z),G=(0,w.M)(f,b),Y=G(c,"first"),$=(0,r.VK)((()=>{const e=f.getSchema()[l.property];return!(!e||!(0,s.en)(e))&&1===e.limit}),[f,l]),X=d.filter((e=>(0,j.uy)(e.type,{type:"person"}))),[J]=(0,P.r5)((async()=>{const e=N?(0,_.ZP)(N,X,(e=>e.kind===T.yp.ContextValue?e.name:"")):X,t=await A.deps.searchActions.loader();return{valueResults:e,userResults:(await t.searchVisibleSpaceUsers({environment:C,query:N,membersOnly:!1})).map((e=>e.id)).slice(0,20)}}),[C,N,X],{debounce:I.vp}),ee=(0,n.useCallback)((()=>{Q(""),q.setState({...q.state,focus:{section:0,indexLocal:0,indexGlobal:0}})}),[q]),ne=(0,n.useCallback)((e=>{const t=G(e,"last");m({type:"simple",value:(0,p.iC)(t)}),ee()}),[m,ee,G]),ie=(0,r.VK)((()=>(0,Z.NY)()),[]),re=V.oA(Y.map(((e,t)=>(0,k.jsx)(M,{token:e,contextStore:a,disabled:!1,currentSimpleFormulaValueTokens:Y,setCurrentTokens:ne,context:l},t)))),le=(0,k.jsx)(W.Z,{focus:!x.isMobile||void 0,focusAfterAnimation:!0,format:W.Z.Format.FilterValue,tokens:re,placeholder:v.formatMessage(E.s.personSearchPlaceholder),onRemoveLastToken:()=>{ne(Y.slice(0,Y.length-1))},onClearButtonClick:()=>{ne([])},value:N,onChange:e=>{Q(e.target.value)},dontShowBorderBottom:x.isAndroid,showClearButton:S}),se=void 0!==(null==u?void 0:u.header)?u.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:v.formatMessage(E.s.genericMenuHeader)});let ae;ae=x.isMobile?{menuType:B.og.Modal,right:(0,k.jsx)(O.DoneMenuText,{}),onClickRight:g}:{menuType:B.og.Popup,maxHeight:"50vh",width:260,footer:ie&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const ce={...ae,...u,header:x.isMobile?null:se},de=$?"single":"multi",pe=[...V.oA(((null===(t=J.value)||void 0===t?void 0:t.valueResults)||[]).map((e=>oe({currentSimpleFormulaValueTokens:Y,value:e,setCurrentTokens:ne,contextStore:a,action:"append",context:l,checkType:de,onCheckboxClick:()=>{$&&ge.default.afterNextFlush((()=>{g()}))}})))),...V.oA(((null===(o=J.value)||void 0===o?void 0:o.userResults)||[]).map((e=>{const t=Boolean(Y.find((t=>(0,p.S3)(t)&&(0,h.IWo)(t)&&(0,h.zEN)(t)===e))),o=(0,h.tEo)(e),n=()=>{ne(t?(0,p.Ck)(Y,o):[...Y,o]),$&&ge.default.afterNextFlush((()=>{g()}))};return{key:e,render:e=>(0,k.jsx)(te,{token:o,contextStore:a,args:e,checkState:t,checkType:de,context:l,onCheckboxClick:n}),action:n}})))],ue=[];if(y){const e=Boolean(se);ue.push({key:"search-input",render:t=>(0,k.jsx)(H.Z,{...t,style:{...e&&{paddingTop:0}}}),items:[{action:()=>{},key:"input",render:()=>le}]})}if(pe.length>0){const e=Boolean(se)||y;ue.push({key:"users",render:t=>(0,k.jsx)(H.Z,{topBorder:e,...t}),items:pe})}return(0,k.jsxs)(K.Z,{...ce,children:[J.error&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(D.Z,{title:(0,k.jsx)(F.FormattedMessage,{...E.s.somethingWentWrong})})}),0===ue.length&&J.value&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(D.Z,{title:(0,k.jsx)(F.FormattedMessage,{...E.s.noResults})})}),!J.value&&!J.error&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(z.Z,{})}),ue.length>0&&(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:ue,store:q})]})}function ye(e){window.__c={n:"ValuePickerMenuSelect"};const{context:t,contextStore:o,currentSimpleFormulaValueTokens:l,formulaTypecheckContextValues:a,isSingle:c,menuProps:d,onChange:u,onClose:m,showClearButton:h,showInputMenuItem:S,type:y}=e,x=(0,i.Fy)(),v=(0,F.useIntl)(),[C,f]=(0,n.useState)(""),b=(0,r.qz)(void 0,R.Z),w=X.NW.createChildStore(o.context.parentRecordStore,y.collection),P=(0,r.VK)((()=>w.getSchema()[y.property]),[w,y]),A=(0,r.VK)((()=>P&&(0,s.gB)(P)?P.groups??[]:[]),[P]),I=(0,r.VK)((()=>P&&(0,s.t)(P)&&P.options||[]),[P]),z=a.filter((e=>(0,j.uy)(e.type,{type:"select",collection:y.collection,property:y.property}))),N=(0,r.VK)((()=>({valueResults:C?(0,_.ZP)(C,z,(e=>e.kind===T.yp.ContextValue?e.name:"")):z,selectResults:C?(0,_.ZP)(C,I,(e=>e.value)):I})),[C,z,I]),Q=(0,n.useCallback)((()=>{f(""),b.setState({...b.state,focus:{section:0,indexLocal:0,indexGlobal:0}})}),[b]),q=(0,n.useCallback)((e=>{u({type:"simple",value:c?(0,p.YD)(e[0]):(0,p.iC)(e)}),Q()}),[u,Q,c]),G=(0,r.VK)((()=>(0,Z.NY)()),[]),Y=V.oA(l.map(((e,n)=>(0,k.jsx)(M,{token:e,contextStore:o,disabled:!1,currentSimpleFormulaValueTokens:l,setCurrentTokens:q,context:t},n)))),$=void 0!==(null==d?void 0:d.header)?d.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:v.formatMessage(E.s.genericMenuHeader)}),J=(0,k.jsx)(W.Z,{focus:!x.isMobile||void 0,focusAfterAnimation:!0,format:W.Z.Format.FilterValue,tokens:Y,placeholder:v.formatMessage(E.s.searchPlaceHolder),onRemoveLastToken:()=>{q(l.slice(0,l.length-1))},onClearButtonClick:()=>{q([])},value:C,onChange:e=>{f(e.target.value)},dontShowBorderBottom:x.isAndroid,showClearButton:h}),ee=[];if(S){const e=Boolean($);ee.push({key:"search-input",render:t=>(0,k.jsx)(H.Z,{...t,style:{...e&&{paddingTop:0}}}),items:[{action:()=>{},key:"input",render:()=>J}]})}const ne=Boolean(P&&(0,s.gB)(P)),ie={automationContextValues:N.valueResults??[],onClose:m,context:t,contextStore:o,currentSimpleFormulaValueTokens:l,isSingle:c,groupOptions:A,selectOptions:N.selectResults??[],setCurrentTokens:q},re=ne?function(e){const{automationContextValues:t,onClose:o,context:n,contextStore:i,currentSimpleFormulaValueTokens:r,isSingle:l,groupOptions:s,selectOptions:a,setCurrentTokens:c}=e,d=[],u=l?"single":"multi",m=V.oA(t.map((e=>oe({currentSimpleFormulaValueTokens:r,value:e,setCurrentTokens:c,contextStore:i,action:l?"replace":"append",context:n,checkType:u,onCheckboxClick:()=>{l&&ge.default.afterNextFlush((()=>{o()}))}}))));m.length>0&&d.push({key:"automation-variables",render:e=>(0,k.jsx)(H.Z,{title:(0,k.jsx)(F.FormattedMessage,{...E.s.valuesFromThisAutomation}),topBorder:!0,...e}),items:m});const h=new Map(a.map((e=>[e.id,e]))),S=s.map((e=>{const t=(e.optionIds??[]).map((e=>h.get(e))).filter(g.$K).map((e=>{const t=Boolean(r.find((t=>"string"==typeof t&&t===e.value))),s=()=>{c(l?t?[]:[e.value]:t?(0,p.Ck)(r,e.value):[...r,e.value]),l&&ge.default.afterNextFlush((()=>{o()}))};return{key:e.id,render:o=>(0,k.jsx)(te,{token:e.value,contextStore:i,args:o,checkState:t,checkType:u,context:n,onCheckboxClick:s}),action:s}}));return{key:e.id,items:t,render:t=>(0,k.jsx)(H.Z,{title:e.name,topBorder:!0,...t})}})).filter((e=>e.items.length>0));return d.push(...S),d}(ie):function(e){const{automationContextValues:t,onClose:o,context:n,contextStore:i,currentSimpleFormulaValueTokens:r,isSingle:l,selectOptions:s,setCurrentTokens:a}=e,c=[],d=l?"single":"multi",u=V.oA(t.map((e=>oe({currentSimpleFormulaValueTokens:r,value:e,setCurrentTokens:a,contextStore:i,action:l?"replace":"append",context:n,checkType:d,onCheckboxClick:()=>{l&&ge.default.afterNextFlush((()=>{o()}))}})))),m=V.oA(s.map((e=>{const t=Boolean(r.find((t=>"string"==typeof t&&t===e.value))),s=()=>{a(l?t?[]:[e.value]:t?(0,p.Ck)(r,e.value):[...r,e.value]),l&&ge.default.afterNextFlush((()=>{o()}))};return{key:e.id,render:o=>(0,k.jsx)(te,{token:e.value,contextStore:i,args:o,checkState:t,checkType:d,context:n,onCheckboxClick:s}),action:s}}))),h=[...u,...m];h.length>0&&c.push({key:"options",render:e=>(0,k.jsx)(H.Z,{topBorder:!0,...e}),items:h});return c}(ie);let le;ee.push(...re),le=x.isMobile?{menuType:B.og.Modal,right:(0,k.jsx)(O.DoneMenuText,{}),onClickRight:m}:{menuType:B.og.Popup,maxHeight:"50vh",width:260,paddingTop:0,footer:G&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const se={...le,...d,header:x.isMobile?null:$};return(0,k.jsxs)(K.Z,{...se,children:[0===ee.length&&(0,k.jsx)(H.Z,{children:(0,k.jsx)(D.Z,{title:(0,k.jsx)(F.FormattedMessage,{...E.s.noResults})})}),ee.length>0&&(0,k.jsx)(L.Z,{type:L.i.Vertical,initialFocus:0,sections:ee,store:b})]})}var xe=o(65187),ve=o(43250),Ce=o(28992);function fe(e){window.__c={n:"ValuePickerMenuText"};const{context:t,contextStore:o,currentSimpleFormulaValueTokens:l,formulaTypecheckContextValues:s,menuProps:a,onChange:c,onClose:d,value:u,disableEmojiCommands:m,disableFormattingAndMentions:h,disableMobileActionBar:g,disableTemplateVariableMentions:S}=e,y=(0,F.useIntl)(),{isMobile:x}=(0,i.Fy)(),v=(0,Q.yK)((e=>({wrap:{background:e.inputBackground,borderRadius:4,boxShadow:e.inputBoxShadow,lineHeight:"24px",padding:1,marginBlock:x?12:0},text:{maxHeight:120,overflow:"auto",padding:"4px 10px"}})),[x]),C=(0,r.VK)((()=>(0,Z.NY)()),[]),f=(0,n.useMemo)((()=>s.filter((e=>"text"===e.type.type))),[s]),b=(0,n.useCallback)((e=>{c({type:"simple",value:e})}),[c]),w=(0,n.useCallback)((e=>{b(e),d()}),[b,d]),M=(0,n.useCallback)((e=>{const t=void 0!==e[0]?(0,p.YD)(e[0]):void 0;w(t)}),[w]),{store:j}=(0,Z.Cl)({initialValue:null==u?void 0:u.value,onChange:b}),T=[],_=[...V.oA(f.map((e=>oe({currentSimpleFormulaValueTokens:l,value:e,setCurrentTokens:M,contextStore:o,action:"replace",context:t,checkType:"single"})))),...[{action:V.ZT,key:"input",render:e=>(0,k.jsx)(Ce.Z,{...e,title:(0,k.jsx)("div",{className:ve.Wh_,style:v.wrap,children:(0,k.jsx)(xe.Z,{disableComment:!0,disabled:!1,disableEmbedMenu:!0,disableEmojiCommands:m,disableMobileActionBar:g,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableSlashCommands:!0,disableTemplateVariableMentions:S,...h?{disableDateMentions:!0,disableDateReminderMentions:!0,disableMentions:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0}:{},onEnter:d,pasteBehavior:"inline",store:j,style:v.text})})})}]],P=void 0!==(null==a?void 0:a.header)?a.header:(0,k.jsx)(H.Z,{style:{paddingBottom:0},title:y.formatMessage(E.s.genericMenuHeader)});let A;T.push({key:"textbox",render:e=>(0,k.jsx)(H.Z,{...e}),items:_}),A=x?{menuType:B.og.Modal,right:(0,k.jsx)(O.DoneMenuText,{}),onClickRight:d}:{menuType:B.og.Popup,maxHeight:"50vh",width:260,footer:C&&(0,k.jsx)(H.Z,{topBorder:!0,children:(0,k.jsx)(U,{...e})}),disableHeaderBorder:!0};const I={...A,...a,header:x?null:P};return(0,k.jsx)(K.Z,{...I,children:(0,k.jsx)(L.Z,{initialFocus:0,sections:T,type:L.i.Vertical})})}function be(e){const{showClearButton:t,showInputMenuItem:o,type:n}=e;return"text"===n.type?(0,k.jsx)(fe,{...e,type:n}):"number"===n.type?(0,k.jsx)(he,{...e,type:n}):"checkbox"===n.type?(0,k.jsx)(ie,{...e,type:n}):"date"===n.type?(0,k.jsx)(ue,{...e,type:n}):"person_array"===n.type?(0,k.jsx)(Se,{...e,showClearButton:t??!0,showInputMenuItem:o??!0,type:n}):"block_array"===n.type?(0,k.jsx)(ne,{...e,showClearButton:t??!0,showInputMenuItem:o??!0,type:n}):"select"===n.type?(0,k.jsx)(ye,{...e,showClearButton:t??!0,showInputMenuItem:o??!0,type:n,isSingle:!0}):"select_array"===n.type?(0,k.jsx)(ye,{...e,showClearButton:t??!0,showInputMenuItem:o??!0,type:n,isSingle:!1}):void(0,g.t1)(n)}},75311:(e,t,o)=>{o.d(t,{M:()=>a,_:()=>c});var n=o(67294),i=o(86628),r=o(99036),l=o(40506),s=o(97880);function a(e,t){const o=(0,i.VK)((()=>{const o=e.getSchema()[t];let n;return o&&(0,r.en)(o)&&(n=o.limit),n}),[e,t]);return(0,n.useCallback)(((e,t)=>(0,s.$K)(o)?"first"===t?e.slice(0,o):"last"===t?e.slice(-o):void(0,s.t1)(t):e),[o])}function c(e){var t;const o=null===(t=e.collectionStore.getSchema())||void 0===t?void 0:t[e.property];return o&&"date"===o.type?{dateFormat:o.date_format||l.sF,timeFormat:o.time_format||l.c_}:{dateFormat:l.sF,timeFormat:l.c_}}},30387:(e,t,o)=>{o.d(t,{s:()=>n});const n=(0,o(68939).defineMessages)({back:{defaultMessage:"Back",id:"formulas.SimpleFormulaValuePicker.back"},valuesFromThisAutomation:{defaultMessage:"From this automation",id:"formulas.SimpleFormulaValuePicker.valuesFromThisAutomation"},pickADate:{defaultMessage:"Pick a date",id:"formulas.SimpleFormulaValuePicker.pickADate"},clear:{defaultMessage:"Clear",id:"formulas.SimpleFormulaValuePicker.clear"},unchecked:{defaultMessage:"Unchecked",id:"formulas.SimpleFormulaValuePicker.checkbox.unchecked"},checked:{defaultMessage:"Checked",id:"formulas.SimpleFormulaValuePicker.checkbox.checked"},checkboxOptions:{defaultMessage:"Checkbox options",id:"formulas.SimpleFormulaValuePicker.checkbox.sectionHeader"},searchPlaceHolder:{defaultMessage:"Select one or more options…",id:"formulas.SimpleFormulaValuePicker.select.searchPlaceholder"},selectOptionsSectionHeader:{defaultMessage:"Select an option",id:"formulas.SimpleFormulaValuePicker.select.sectionHeader"},noResults:{defaultMessage:"No results",id:"formulas.simpleValuePicker.noResults"},pageSearchPlaceholder:{defaultMessage:"Search for one or more pages…",id:"formulas.SimpleFormulaValuePicker.pages.searchPlaceholder"},pages:{defaultMessage:"Pages",id:"formulas.SimpleFormulaValuePicker.pages.sectionHeader"},somethingWentWrong:{defaultMessage:"Something went wrong.",id:"formulas.simpleValuePicker.errorMessage"},personSelect:{defaultMessage:"Select...",id:"formulas.SimpleFormulaValuePicker.chooseAValue"},personSearchPlaceholder:{defaultMessage:"Search for one or more people…",id:"formulas.SimpleFormulaValuePicker.people.searchPlaceholder"},customFormula:{defaultMessage:"Custom formula",id:"formulas.SimpleFormulaValuePicker.customFormula"},peopleInWorkspace:{defaultMessage:"People",id:"formulas.SimpleFormulaValuePicker.people.sectionHeader"},genericMenuHeader:{defaultMessage:"Set property to",id:"formulas.SimpleFormulaValuePicker.genericMenuHeader"}})},36857:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(49085);class i extends n.default{getInitialState(){return{pageId:void 0}}}const r=new i},65955:(e,t,o)=>{o.d(t,{o:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("addPage",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0c3.861 0 7 3.139 7 7s-3.139 7-7 7-7-3.139-7-7 3.139-7 7-7zM3.561 5.295a1.027 1.027 0 1 0 2.054 0 1.027 1.027 0 0 0-2.054 0zm5.557 1.027a1.027 1.027 0 1 1 0-2.054 1.027 1.027 0 0 1 0 2.054zm1.211 2.816a.77.77 0 0 0-.124-1.087.786.786 0 0 0-1.098.107c-.273.407-1.16.958-2.254.958-1.093 0-1.981-.55-2.244-.945a.788.788 0 0 0-1.107-.135.786.786 0 0 0-.126 1.101c.55.734 1.81 1.542 3.477 1.542 1.668 0 2.848-.755 3.476-1.541z"})})},68074:(e,t,o)=>{o.d(t,{v:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("addPageDiscussion",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M4.095 15.465c.287 0 .499-.137.84-.444l2.523-2.277 4.47.007c2.058 0 3.214-1.19 3.214-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.213h.273v1.983c0 .45.24.738.657.738zM3.958 5.156a.454.454 0 01-.444-.45c0-.24.198-.438.444-.438h7.157c.246 0 .445.198.445.437a.45.45 0 01-.445.451H3.958zm0 2.256a.454.454 0 01-.444-.451c0-.24.198-.444.444-.444h7.157a.448.448 0 010 .895H3.958zm0 2.256a.448.448 0 010-.896h4.669c.246 0 .437.206.437.452a.438.438 0 01-.437.444H3.958z"})})},13148:(e,t,o)=>{o.d(t,{U:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("close",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},89767:(e,t,o)=>{o.d(t,{R:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("collectionInbox",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{d:"M11.0918,0 C11.5383,0 11.9307,0.295898 12.0533,0.725586 L13.9615,7.40332 C13.9871,7.49316 14,7.58594 14,7.67871 L14,13 C14,13.5527 13.5522,14 13,14 L1,14 C0.447754,14 0,13.5527 0,13 L0,7.67871 C0,7.58594 0.0129395,7.49316 0.0384521,7.40332 L1.94666,0.725586 C2.06934,0.295898 2.46167,0 2.9082,0 L11.0918,0 Z M4.27271,1.5 C3.83728,1.5 3.45178,1.78223 3.31982,2.19727 L1.91455,6.61328 C1.70947,7.25879 2.1908,7.91699 2.86755,7.91699 L4.70837,7.91699 C4.70837,8.93652 5.16663,10.168 7,10.168 C8.83337,10.168 9.29163,8.93652 9.29163,7.91699 L11.1478,7.89355 C11.8201,7.88477 12.2927,7.22852 12.0876,6.58887 L10.681,2.19531 C10.5485,1.78125 10.1635,1.5 9.72864,1.5 L4.27271,1.5 Z"})})},16184:(e,t,o)=>{o.d(t,{Q:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},22686:(e,t,o)=>{o.d(t,{f:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("person",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,o)=>{o.d(t,{X:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,i.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,i.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},70406:(e,t,o)=>{o.d(t,{p:()=>r});o(67294);var n=o(45238),i=o(85893);const r=(0,n.I)("transcript",{viewBox:"0 0 16 16",svg:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("path",{d:"M3.99805 5.92188C3.85352 5.92188 3.72656 5.86719 3.61719 5.75781C3.50781 5.64844 3.45312 5.52148 3.45312 5.37695C3.45312 5.22852 3.50781 5.09961 3.61719 4.99023C3.72656 4.88086 3.85352 4.82617 3.99805 4.82617C4.15039 4.82617 4.2793 4.88086 4.38477 4.99023C4.49023 5.0957 4.54297 5.22461 4.54297 5.37695C4.54297 5.52539 4.49023 5.6543 4.38477 5.76367C4.2793 5.86914 4.15039 5.92188 3.99805 5.92188ZM3.99805 7.65625C3.85352 7.65625 3.72656 7.60352 3.61719 7.49805C3.50781 7.38867 3.45312 7.25977 3.45312 7.11133C3.45312 6.96289 3.50781 6.83594 3.61719 6.73047C3.72656 6.62109 3.85352 6.56641 3.99805 6.56641C4.15039 6.56641 4.2793 6.61914 4.38477 6.72461C4.49023 6.83008 4.54297 6.95898 4.54297 7.11133C4.54297 7.26367 4.49023 7.39258 4.38477 7.49805C4.2793 7.60352 4.15039 7.65625 3.99805 7.65625ZM3.99805 9.38477C3.84961 9.38477 3.7207 9.33203 3.61133 9.22656C3.50586 9.12109 3.45312 8.99219 3.45312 8.83984C3.45312 8.69141 3.50586 8.56445 3.61133 8.45898C3.7207 8.35352 3.84961 8.30078 3.99805 8.30078C4.15039 8.30078 4.2793 8.35352 4.38477 8.45898C4.49023 8.56445 4.54297 8.69141 4.54297 8.83984C4.54297 8.99219 4.49023 9.12109 4.38477 9.22656C4.2793 9.33203 4.15039 9.38477 3.99805 9.38477ZM3.99805 11.2129C3.85352 11.2129 3.72656 11.1582 3.61719 11.0488C3.50781 10.9395 3.45312 10.8105 3.45312 10.6621C3.45312 10.5137 3.50781 10.3848 3.61719 10.2754C3.72656 10.166 3.85352 10.1113 3.99805 10.1113C4.15039 10.1113 4.2793 10.166 4.38477 10.2754C4.49023 10.3809 4.54297 10.5098 4.54297 10.6621C4.54297 10.8145 4.49023 10.9453 4.38477 11.0547C4.2793 11.1602 4.15039 11.2129 3.99805 11.2129ZM5.67383 5.75195C5.56836 5.75195 5.47852 5.71484 5.4043 5.64062C5.33008 5.56641 5.29297 5.47852 5.29297 5.37695C5.29297 5.27148 5.33008 5.18164 5.4043 5.10742C5.48242 5.0293 5.57227 4.99023 5.67383 4.99023H12.1836C12.2891 4.99023 12.3789 5.0293 12.4531 5.10742C12.5312 5.18164 12.5703 5.27148 12.5703 5.37695C12.5703 5.47852 12.5332 5.56641 12.459 5.64062C12.3848 5.71484 12.293 5.75195 12.1836 5.75195H5.67383ZM5.67383 7.49219C5.57227 7.49219 5.48242 7.45508 5.4043 7.38086C5.33008 7.30664 5.29297 7.2168 5.29297 7.11133C5.29297 7.00586 5.33008 6.91602 5.4043 6.8418C5.47852 6.76367 5.56836 6.72461 5.67383 6.72461H9.31836C9.42383 6.72461 9.51367 6.76367 9.58789 6.8418C9.66211 6.91602 9.69922 7.00586 9.69922 7.11133C9.69922 7.2168 9.66211 7.30664 9.58789 7.38086C9.51367 7.45508 9.42383 7.49219 9.31836 7.49219H5.67383ZM5.67383 9.22656C5.56836 9.22656 5.47852 9.18945 5.4043 9.11523C5.33008 9.04102 5.29297 8.94922 5.29297 8.83984C5.29297 8.73828 5.33008 8.65039 5.4043 8.57617C5.47852 8.50195 5.56836 8.46484 5.67383 8.46484H12.1836C12.293 8.46484 12.3848 8.50195 12.459 8.57617C12.5332 8.65039 12.5703 8.73828 12.5703 8.83984C12.5703 8.94922 12.5332 9.04102 12.459 9.11523C12.3848 9.18945 12.293 9.22656 12.1836 9.22656H5.67383ZM5.67383 11.043C5.57227 11.043 5.48242 11.0059 5.4043 10.9316C5.33008 10.8535 5.29297 10.7637 5.29297 10.6621C5.29297 10.5566 5.33008 10.4668 5.4043 10.3926C5.47852 10.3184 5.56836 10.2812 5.67383 10.2812H9.31836C9.42383 10.2812 9.51367 10.3184 9.58789 10.3926C9.66211 10.4668 9.69922 10.5566 9.69922 10.6621C9.69922 10.7637 9.66211 10.8535 9.58789 10.9316C9.51367 11.0059 9.42383 11.043 9.31836 11.043H5.67383ZM2.97852 13.4922C2.3457 13.4922 1.86719 13.332 1.54297 13.0117C1.21875 12.6914 1.05664 12.2188 1.05664 11.5938V4.45703C1.05664 3.83203 1.21875 3.35938 1.54297 3.03906C1.86719 2.71484 2.3457 2.55273 2.97852 2.55273H13.0098C13.6465 2.55273 14.127 2.71484 14.4512 3.03906C14.7754 3.35938 14.9375 3.83203 14.9375 4.45703V11.5938C14.9375 12.2188 14.7754 12.6914 14.4512 13.0117C14.127 13.332 13.6465 13.4922 13.0098 13.4922H2.97852ZM3.04883 12.3438H12.9453C13.2148 12.3438 13.4219 12.2734 13.5664 12.1328C13.7109 11.9883 13.7832 11.7754 13.7832 11.4941V4.55664C13.7832 4.27539 13.7109 4.06445 13.5664 3.92383C13.4219 3.7793 13.2148 3.70703 12.9453 3.70703H3.04883C2.77539 3.70703 2.56641 3.7793 2.42188 3.92383C2.28125 4.06445 2.21094 4.27539 2.21094 4.55664V11.4941C2.21094 11.7754 2.28125 11.9883 2.42188 12.1328C2.56641 12.2734 2.77539 12.3438 3.04883 12.3438Z"})})})}}]);